{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{M08Z:function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return S}),i.d(t,\"b\",function(){return q}),i.d(t,\"c\",function(){return P}),i.d(t,\"d\",function(){return k}),i.d(t,\"e\",function(){return B}),i.d(t,\"f\",function(){return I}),i.d(t,\"g\",function(){return v}),i.d(t,\"h\",function(){return R}),i.d(t,\"i\",function(){return H}),i(\"wSAH\");var s=i(\"srIe\"),r=i(\"f4Nx\"),n=i(\"WZb1\"),a=i(\"PNY3\"),o=i(\"KLE9\"),c=i(\"qatw\"),h=i(\"qRWG\"),d=i(\"kYAx\"),l=i(\"qNUd\"),u=i(\"M0lq\"),p=i(\"opr1\"),g=i(\"LGNZ\"),b=i(\"c46T\"),m=i(\"Mt1D\"),y=i(\"G0q+\"),f=i(\"t7mB\"),_=i(\"eT81\");const O=Math.PI/180,j=Object(g.a)(),x=Object(b.a)(),w=Object(d.d)();function S(e,t,i,s,n,a,h){if(!s||!i.symbol)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;const d=s;if(!Object(c.f)(d)){Object(o.a)(e,d);let s=t[0];0===s&&(s=D(i),t[0]=s);const r=n*s/2;return e[0]-=r,e[1]-=r,e[2]+=r,e[3]+=r,e}{const s=d.x,o=d.y;\"esriTS\"===i.symbol.type&&0===t[2]&&0===t[3]&&B(t,i.symbol,i.mosaicItem),function(e,t,i,s,n,a,o,c){let h;switch(s.type){case\"esriSMS\":case\"esriPMS\":h=P(t,i,s,a,o,0);break;case\"esriTS\":h=k(t,i,s,n,a,0);break;case\"cim\":case\"CIMSymbolReference\":case\"expanded-cim\":h=q(t,i,s,a,o,0)}let d,u,p=0;for(let r=0;r<h.rings[0].length-1;r++)u=h.rings[0][r],d=(t-u[0])*(t-u[0])+(i-u[1])*(i-u[1]),p=Math.max(p,d);p=Math.sqrt(p);let g=Object(l.b)(t-p,c),b=Object(l.b)(t+p,c);if(g>b){const e=Object(r.d)(c);if(e){const[t,i]=e.valid;g=t,b=i}}e[0]=g,e[1]=i-p,e[2]=b,e[3]=i+p}(e,s,o,i.symbol,t,n,a,h)}return e}function v(e){return\"simple-marker\"===e||\"picture-marker\"===e||\"text\"===e}function I(e){switch(Object(s.n)(e.geometry).type){case\"point\":case\"multipoint\":return 0;case\"polyline\":return 1;case\"polygon\":case\"extent\":return 2}return 0}const G=Object(b.a)(),T=Object(b.a)(),M=Object(b.a)(),U=Object(b.a)(),z=Object(b.a)(),A=Object(b.a)(),C=Object(b.a)();function R(e,t,i,s){Object(u.m)(M,t,i);const r=e.paths;let n,a,o,c,h,d,l,p,g,b=1/0;for(let m=0;m<r.length;m++){const e=r[m];if(!(e.length<2))for(let r=1;r<e.length;r++)n=e[r-1][0],o=e[r-1][1],a=e[r][0],c=e[r][1],h=Math.min(n,a)-s,d=Math.min(o,c)-s,l=Math.max(n,a)+s,p=Math.max(o,c)+s,t<h||t>l||i<d||i>p||(Object(u.m)(G,n,o),Object(u.m)(T,a,c),Object(u.d)(U,T,G),Object(u.d)(z,G,M),Object(u.a)(A,U,Object(u.g)(U,z)/Object(u.g)(U,U)),Object(u.d)(C,z,A),g=Object(u.g)(C,C),b>g&&(b=g))}return Math.sqrt(b)<=s}function P(e,t,i,s,r,n){let a,o;const c=Object(h.d)(i.xoffset),d=Object(h.d)(i.yoffset),l=O*i.angle,g=O*n;switch(i.type){case\"esriSMS\":a=o=Object(h.d)(i.size);break;case\"esriPMS\":a=Object(h.d)(i.width),o=Object(h.d)(i.height)}r<.04&&(s=.04*s/r);const b=Object(p.d)(j);Object(p.h)(b,b,Object(u.m)(x,e,t)),Object(p.f)(b,b,g-l),Object(p.g)(b,b,Object(u.m)(x,s,-s)),Object(p.h)(b,b,Object(u.m)(x,c,-d));const m=[0,0];Object(u.n)(m,Object(u.m)(x,-.5*a,-.5*o),b);const y=[0,0];Object(u.n)(y,Object(u.m)(x,-.5*a,.5*o),b);const f=[0,0];Object(u.n)(f,Object(u.m)(x,.5*a,-.5*o),b);const _=[0,0];return Object(u.n)(_,Object(u.m)(x,.5*a,.5*o),b),{rings:[[m,f,_,y,m]]}}function q(e,t,i,s,r,n){const a=_.a.getEnvelope(i.data);if(!a)return null;r<.04&&(s=.04*s/r);const o=Object(h.d)(a.width),c=Object(h.d)(a.height),d=Object(h.d)(a.x),l=Object(h.d)(a.y),g=0*O,b=O*n,m=Object(p.d)(j);Object(p.h)(m,m,Object(u.m)(x,e,t)),Object(p.f)(m,m,b-g),Object(p.g)(m,m,Object(u.m)(x,s,s));const y=[0,0];Object(u.n)(y,Object(u.m)(x,d,l+c),m);const f=[0,0];Object(u.n)(f,Object(u.m)(x,d,l),m);const w=[0,0];Object(u.n)(w,Object(u.m)(x,d+o,l+c),m);const S=[0,0];return Object(u.n)(S,Object(u.m)(x,d+o,l),m),{rings:[[y,w,S,f,y]]}}function k(e,t,i,s,r,n){const a=Object(h.d)(i.xoffset),o=Object(h.d)(i.yoffset),c=O*i.angle,d=O*n,l=Object(p.d)(j);Object(p.h)(l,l,Object(u.m)(x,e,t)),Object(p.f)(l,l,d),Object(p.g)(l,l,Object(u.m)(x,r,-r));const g=s[0]+s[2]/2,b=s[1]+s[3]/2;Object(p.h)(l,l,Object(u.m)(x,a,-o)),Object(p.h)(l,l,Object(u.m)(x,g,b)),Object(p.f)(l,l,c),Object(p.h)(l,l,Object(u.m)(x,-g,-b));const m=[0,0];Object(u.n)(m,Object(u.m)(x,s[0],s[1]),l);const y=[0,0];Object(u.n)(y,Object(u.m)(x,s[0],s[1]+s[3]),l);const f=[0,0];Object(u.n)(f,Object(u.m)(x,s[0]+s[2],s[1]),l);const _=[0,0];return Object(u.n)(_,Object(u.m)(x,s[0]+s[2],s[1]+s[3]),l),{rings:[[m,f,_,y,m]]}}function H(e){let t,i,s,n,h,d,l,u,p,g=null;if(!e)return null;if(\"mesh\"===e.type)return e.toJSON();if(t=e.spatialReference,i=Object(r.d)(t),!i)return e.toJSON();s=t.isWebMercator,d=s?102100:4326,n=F[d].maxX,h=F[d].minX,l=F[d].plus180Line,u=F[d].minus180Line;const b=e.toJSON();if(Object(c.f)(b))p=Z(b,n,h);else if(Object(c.e)(b))b.points=b.points.map(e=>Z(e,n,h)),p=b;else if(Object(c.d)(b))p=function(e,t){if(!t)return e;const i=function(e,t){const i=[],{ymin:s,ymax:r}=e,n=e.xmax-e.xmin,a=e.xmin,o=e.xmax;let c;const[h,d]=t.valid;c=L(e.xmin,t);const l=c.x,u=c.frameId;c=L(e.xmax,t);const p=c.x,g=c.frameId,b=l===p&&n>0;if(n>2*d){const e={xmin:a<o?l:p,ymin:s,xmax:d,ymax:r},t={xmin:h,ymin:s,xmax:a<o?p:l,ymax:r},n={xmin:0,ymin:s,xmax:d,ymax:r},c={xmin:h,ymin:s,xmax:0,ymax:r},b=[],m=[];N(e,n)&&b.push(u),N(e,c)&&m.push(u),N(t,n)&&b.push(g),N(t,c)&&m.push(g);for(let i=u+1;i<g;i++)b.push(i),m.push(i);i.push({extent:e,frameIds:[u]},{extent:t,frameIds:[g]},{extent:n,frameIds:b},{extent:c,frameIds:m})}else l>p||b?i.push({extent:{xmin:l,ymin:s,xmax:d,ymax:r},frameIds:[u]},{extent:{xmin:h,ymin:s,xmax:p,ymax:r},frameIds:[g]}):i.push({extent:{xmin:l,ymin:s,xmax:p,ymax:r},frameIds:[u]});return i}(e,t).map(e=>e.extent);return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}}(b,i);else if(Object(c.g)(b)||Object(c.h)(b)){const e=w;Object(o.a)(e,b);const t={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},i=V(t.xmin,h)*(2*n),s=0===i?b:function(e,t){const i=function(e){return Object(c.g)(e)?e.rings:e.paths}(e);for(const s of i)for(const e of s)e[0]+=t;return e}(b,i);t.xmin+=i,t.xmax+=i,Object(a.a)(t,l)&&t.xmax!==n||Object(a.a)(t,u)&&t.xmin!==h?g=s:p=s}else p=e.clone();return null!==g?(new W).cut(g,n):p}function D(e){switch(e.symbol.type){case\"esriSFS\":case\"esriPFS\":{const t=e.symbol.outline;return t?t.width:0}case\"esriSLS\":return Object(h.d)(e.symbol.width);case\"esriSMS\":return Object(h.d)(e.symbol.size);case\"esriPMS\":return Object(h.d)(Math.max(e.symbol.width,e.symbol.height));case\"esriTS\":{const t=[0,0,0,0];B(t,e.symbol,e.mosaicItem);const i=Math.max(Math.abs(t[0]),Math.abs(t[1]));return Math.max(t[2],t[3])+i}case\"expanded-cim\":{const t=_.a.getEnvelope(e.symbol.data);return Object(h.d)(Math.sqrt(t.width*t.width+t.height*t.height))}case\"composite-symbol\":return e.symbol.layers.length?D({symbol:e.symbol.layers[e.symbol.layers.length-1],mosaicItem:null}):0;case\"label\":default:return 0}}function B(e,t,i){if(!i||0===i.glyphMosaicItems.length)return e;const s=Object(f.a)(t.text)[1],r=i.glyphMosaicItems,n=Object(y.a)(r,s,{scale:Object(h.d)(t.font.size)/24,angle:t.angle,xOffset:t.xoffset,yOffset:t.yoffset,hAlign:Object(m.d)(t.horizontalAlignment||\"center\"),vAlign:Object(m.f)(t.verticalAlignment||\"baseline\"),maxLineWidth:Math.max(32,Math.min(t.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(t.lineHeight||1,4)),decoration:t.font.decoration||\"none\",isCIM:!1}).bounds;return e[0]=Object(h.d)(n.x-n.halfWidth),e[1]=Object(h.d)(n.y-n.halfHeight),e[2]=Object(h.d)(n.width),e[3]=Object(h.d)(n.height),e}const F={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:{paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.a.WebMercator},minus180Line:{paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.a.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:n.a.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:n.a.WGS84}}};function V(e,t){return Math.ceil((e-t)/(2*t))}function L(e,t){const[i,s]=t.valid,r=2*s;let n,a=0;return e>s?(n=Math.ceil(Math.abs(e-s)/r),e-=n*r,a=n):e<i&&(n=Math.ceil(Math.abs(e-i)/r),e+=n*r,a=-n),{x:e,frameId:a}}function N(e,t){const{xmin:i,ymin:s,xmax:r,ymax:n}=t;return X(e,i,s)&&X(e,i,n)&&X(e,r,n)&&X(e,r,s)}function X(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function Z(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const i=V(s,t);e[0]=s+i*(-2*t)}else if(s<i){const t=V(s,i);e[0]=s+t*(-2*i)}}else{const s=e.x;if(s>t){const i=V(s,t);e.x+=i*(-2*t)}else if(s<i){const t=V(s,i);e.x+=t*(-2*i)}}return e}class W{cut(e,t){let i;if(e.rings)this.closed=!0,i=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,i=e.paths,this.minPts=2}const s=i.length,r=-2*t;for(let n=0;n<s;n++){const e=i[n];if(e&&e.length>=this.minPts){const t=[];for(const i of e)t.push([i[0]+r,i[1]]);i.push(t)}}return this.closed?e.rings=i:e.paths=i,e}}},Vh9r:function(e,t,i){\"use strict\";var s=i(\"pO5D\"),r=i(\"wSAH\"),n=i(\"srIe\"),a=(i(\"6S2I\"),i(\"zqDF\"),i(\"WbKI\")),o=i(\"04ZG\"),c=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"9MzC\")),h=i(\"/CmD\"),d=i(\"f4Nx\"),l=i(\"WZb1\"),u=i(\"Mu3I\"),p=i(\"Ehki\"),g=i(\"qatw\"),b=i(\"qRWG\"),m=i(\"kYAx\"),y=i(\"psH3\"),f=i(\"kJYu\"),_=i(\"HsO1\"),O=i(\"jIHu\"),j=i(\"sq/B\"),x=i(\"t7mB\"),w=i(\"ZxoT\"),S=i(\"fZs+\"),v=i(\"KFVX\"),I=i(\"owVx\"),G=i(\"Bcjy\"),T=i(\"Dw8i\"),M=i(\"J3nV\"),U=i(\"2AbE\"),z=i(\"Swtj\"),A=i(\"ZlUD\"),C=i(\"8NDJ\"),R=i(\"Q0oN\");class P extends R.a{constructor(e,t){super(e,t,null)}static from(e){const t=C.a.createInstance(),i=[],s=e.filter(e=>!!e.geometry);for(const r of s){const e=Object(g.c)(r.geometry);Object(A.e)(i,[r],e,!1,!1,\"uid\")}return new P(t,i)}get geometryType(){const e=this._current;return e?e.geometryType:null}readGraphic(){return this._current}getCursor(){return this.copy()}copy(){const e=new P(this.instance,this._features);return this.copyInto(e),e}}var q=i(\"w5u1\"),k=i(\"yE7X\"),H=i(\"by2V\"),D=class extends H.a{get hasLabels(){return!1}get labelsVisible(){return!1}renderChildren(e){this.attributeView.bindTextures(e.context),this.children.some(e=>e.hasData)&&(super.renderChildren(e),e.drawPhase===k.c.MAP&&this._renderChildren(e),e.drawPhase===k.c.HIGHLIGHT&&this._renderHighlight(e))}_renderChildren(e,t){for(const i of this.children)i.isReady&&i.hasData&&(i.commitChanges(e),e.context.setStencilFunction(514,i.stencilRef,255),i._displayList.replay(e,i,t))}_renderHighlight(e){const{painter:t}=e,i=t.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}},B=i(\"M08Z\"),F=i(\"IXLn\"),V=i(\"+NQI\"),L=i(\"gEht\"),N=i(\"qNUd\"),X=i(\"kB+0\"),Z=i(\"V+VG\"),W=i(\"gVKr\"),E=i(\"AIxD\");const Y=new W.a,J=new W.a;function Q(e){e.coords.length=0,e.lengths.length=0}class K{constructor(){this.bounds=Object(m.d)(),this.graphic=null,this.size=[0,0,0,0]}static acquire(e=null,t,i,s,r,n){let a;return 0===K._pool.length?a=new K:(a=K._pool.pop(),this._set.delete(a)),a.acquire(e,t,i,s,r,n),a}static release(e){e&&!this._set.has(e)&&(e.release(),this._pool.push(e),this._set.add(e))}static getCentroidQuantized(e,t){if(Object(g.g)(e.geometry)){const i=e.symbol;if(Object(n.g)(i))return null;if(Object(B.g)(i.type)){const i=Object(Z.a)(e.geometry);return Object(E.b)(t,{},{x:i[0],y:i[1]},!1,!1)}}return null}acquire(e=null,t,i,s,r,n){e&&this.set(e,t,i,s,r,n)}release(){this.graphic=null,this.symbolResource=null,this.geometry=null}get symbol(){return this.symbolResource.symbol}set(e,t,i,s,r,n){this.graphic=e,this.geometry=i,this.symbolResource=t,this.updateBounds(s,r,n)}updateBounds(e,t,i){Object(B.a)(this.bounds,this.size,this.symbolResource,this.geometry,e,t,i)}getGeometryQuantized(e){if(Object(g.g)(this.geometry)){const t=this.geometry.rings;if(1===t.length&&2===t[0].length)return Object(E.a)(e,{paths:[[t[0][0],t[0][1]]]})}else if(Object(g.h)(this.geometry))return Q(Y),Q(J),Object(A.h)(Y,this.geometry),Object(A.q)(J,Y,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e.scale[0]),Object(A.u)(Y,J,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e),Object(A.o)(Y,this.geometry.hasZ,this.geometry.hasM);return Object(E.a)(e,this.geometry)}}K._pool=[],K._set=new Set;var $=K;const ee={minX:0,minY:0,maxX:0,maxY:0},te=Object(m.d)(),ie=[];function se(e,t,i,s,r){return ee.minX=t,ee.minY=i,ee.maxX=s,ee.maxY=r,e.search(ee)}var re=i(\"pdg3\");const ne=e=>{let t=class extends(Object(re.a)(e)){constructor(){super(...arguments),this.graphics=null,this.renderer=null,this.view=null}};return Object(s.a)([Object(a.b)()],t.prototype,\"graphics\",void 0),Object(s.a)([Object(a.b)()],t.prototype,\"renderer\",void 0),Object(s.a)([Object(a.b)()],t.prototype,\"updating\",void 0),Object(s.a)([Object(a.b)()],t.prototype,\"view\",void 0),t=Object(s.a)([Object(o.a)(\"esri.views.layers.GraphicsView\")],t),t};function ae(e,t,i){if(i.has(e))return i.get(e);const s={tile:t,addedOrModified:[],removed:[]};return i.set(e,s),s}let oe=class extends(ne(Object(f.b)(h.a))){constructor(e){super(e),this._storage=new z.a,this._displayIds=new Map,this._tiles=new Map,this._graphicStoreUpdate=!1,this._graphicsSet=new Set,this._matcher=Object(c.u)(null),this._tileUpdateSet=new Set,this._tilesToUpdate=new Map,this._graphicIdToAbortController=new Map,this._attached=!1,this._highlightIds=new Map,this._updatingGraphicsTimer=null,this._processing=!1,this._needsProcessing=!1,this._pendingUpdate={added:new Set,updated:new Set,removed:new Set},this.lastUpdateId=-1,this.updateRequested=!1,this.graphicUpdateHandler=this.graphicUpdateHandler.bind(this),this._processAnalyzedGraphics=this._processAnalyzedGraphics.bind(this),this._graphicsChangeHandler=this._graphicsChangeHandler.bind(this)}_createMatcher(e,t){if(e){const i=Object(I.a)({indexCount:0,fields:{}},\"feature\",e);this._matcher=Object(G.a)(i,t,null)}}_createDisplayId(e){return this._displayIds.has(e)||this._displayIds.set(e,this._storage.createDisplayId()),this._displayIds.get(e)}initialize(){this._tileStore=new q.a(this.view.featuresTilingScheme),this.container=new D(this.view.featuresTilingScheme),this._attributeStore=new U.a({type:\"local\",initialize:e=>Object(c.u)(this.container.attributeView.initialize(e)),update:e=>this.container.attributeView.requestUpdate(e),render:()=>this.container.requestRender()},Object(j.a)()),this._graphicStore=new class{constructor(e,t,i,s,n,a){this._graphics=s,this._onAdd=n,this._onRemove=a,this._index=Object(X.a)(9,Object(r.a)(\"csp-restrictions\")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this._itemByGraphic=new Map,this._currentLevel=-1/0,this._tileInfoView=e,this._uidFieldName=i;const o=e.getClosestInfoForScale(t);o&&(this._currentLevel=o.level,this._resolution=this._tileInfoView.getTileResolution(o.level)),this._metersPerUnit=Object(L.b)(e.spatialReference)}hitTest(e,t,i,s,r){e=Object(N.b)(e,this._tileInfoView.spatialReference);const n=.5*s*i;te[0]=e-n,te[1]=t-n,te[2]=e+n,te[3]=t+n;const a=.5*s*(i+50),o=se(this._index,e-a,t-a,e+a,t+a);if(!o||0===o.length)return[];const c={x:e,y:t},h=[];let d;for(const l of o)if(l.graphic.visible)switch(Object(g.c)(l.geometry)){case\"esriGeometryPoint\":{const e=l.symbol;if(!e)continue;const t=l.geometry,{x:i,y:n}=t,a=s*this._metersPerUnit;let o;switch(e.type){case\"esriTS\":o=Object(B.d)(i,n,e,l.size,s,r);break;case\"expanded-cim\":o=Object(B.b)(i,n,e,s,a,r);break;case\"esriSMS\":case\"esriPMS\":o=Object(B.c)(i,n,e,s,a,r)}Object(F.g)(o,c)&&h.push(l)}break;case\"esriGeometryPolyline\":{const i=l.symbol;if(!i||!i.layers.length)continue;const r=i.layers[0];d=1.5*s*window.devicePixelRatio*Object(b.d)(r.width),Object(B.h)(l.geometry,e,t,d)&&h.push(l)}break;case\"esriGeometryEnvelope\":{const e=l.geometry,t=Object(m.i)(e.xmin,e.ymin,e.xmax,e.ymax);Object(m.k)(t,te)&&h.push(l);break}case\"esriGeometryPolygon\":{if(Object(F.g)(l.geometry,c)){h.push(l);break}const e=Object(V.b)(l.geometry);if(Math.abs(e.ymax-e.ymin)<5*s||Math.abs(e.xmax-e.xmin)<5*s){const t=Object(m.i)(e.xmin,e.ymin,e.xmax,e.ymax);Object(m.k)(t,te)&&h.push(l)}break}case\"esriGeometryMultipoint\":{const e=l.symbol;if(!e)continue;const t=l.geometry.points;let i;for(let n=0;n<t.length;n++)if(i=\"esriTS\"===e.type?Object(B.d)(t[n][0],t[n][1],e,l.size,s,r):Object(B.c)(t[n][0],t[n][1],e,s,s*this._metersPerUnit,r),Object(F.g)(i,c)){h.push(l);break}break}}return h.sort((e,t)=>{const i=Object(B.f)(e.graphic),s=Object(B.f)(t.graphic);return i===s?t.zorder-e.zorder:i-s}),h.map(e=>e.graphic)}getGraphicsData(e,t,i){const s=se(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);if(0===s.length||0===i.length)return[];s.sort((e,t)=>e.zorder-t.zorder),s[0].insertAfter=-1;for(let h=1;h<s.length;h++)s[h].insertAfter=s[h-1].graphic.uid;s.sort((e,t)=>e.graphic.uid-t.graphic.uid),i.sort((e,t)=>e.uid-t.uid);let r,n=0,a=0;const o=[],c={originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]};for(const h of i){for(a=-2;n<s.length;)if(r=s[n],n++,h.uid===r.graphic.uid){a=r.insertAfter;break}if(!r.geometry||-2===a)continue;const t=r.getGeometryQuantized(c),i={...r.graphic.attributes};i[this._uidFieldName]=h.uid,null==r.groupId&&(r.groupId=e.createTemplateGroup(r.symbol,null)),o.push({centroid:$.getCentroidQuantized(r,c),geometry:t,attributes:i,symbol:r.symbol,groupId:r.groupId,insertAfter:a,zorder:r.zorder})}return o.sort((e,t)=>e.zorder-t.zorder),o}queryTileData(e,t){const i=50*t.resolution,s=Object(m.l)(t.bounds,i,Object(m.d)()),r=se(this._index,s[0],s[1],s[2],s[3]),n=[];return this._createTileGraphics(n,e,r,{originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),n}has(e){return this._itemByGraphic.has(e)}getBounds(e){return this._itemByGraphic.has(e)?this._itemByGraphic.get(e).bounds:null}addOrModify(e,t,i){if(!e)return;this.has(e)&&this.remove(e),this._onAdd(e);const s=$.acquire(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference);return this._itemByGraphic.set(e,s),i&&this._index.insert(s),s.bounds}remove(e){if(!this._itemByGraphic.has(e))return;this._onRemove(e);const t=this._itemByGraphic.get(e);this._index.remove(t),this._itemByGraphic.delete(e)}updateZ(){const e=this._graphics.items;let t,i;for(let s=0;s<e.length;s++)i=e[s],t=this._itemByGraphic.get(i),t&&(t.zorder=s)}update(e,t,i){const s=this._itemByGraphic.get(e);s.groupId=null;const r=Object(m.b)(s.bounds);return s.size[0]=s.size[1]=0,this._index.remove(s),s.set(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),i&&this._index.insert(s),{oldBounds:r,newBounds:s.bounds}}updateLevel(e){if(this._currentLevel===e)return;this._currentLevel=e;const t=this._tileInfoView.getTileResolution(e);this._resolution=t,this._index.clear(),ie.length=0,this._itemByGraphic.forEach(e=>{e.updateBounds(this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),e.geometry&&ie.push(e)}),this._index.load(ie)}clear(){this._itemByGraphic.clear(),this._index.clear()}_createTileGraphics(e,t,i,s){const r=this._uidFieldName;let n,a,o,c;i.sort((e,t)=>e.zorder-t.zorder);for(let h=0;h<i.length;h++){o=i[h],n=o.graphic,a=o.getGeometryQuantized(s),c=0===h?-1:i[h-1].graphic.uid;const d={...o.graphic.attributes};d[r]=n.uid,null==o.groupId&&(o.groupId=t.createTemplateGroup(o.symbol,null)),e.push({centroid:$.getCentroidQuantized(o,s),geometry:a,attributes:d,symbol:o.symbol,groupId:o.groupId,insertAfter:c,zorder:o.zorder})}}}(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,e=>{this._createDisplayId(e.uid),this._setFilterState(e.uid,e.visible)},e=>{const t=this._displayIds.get(e.uid);this._displayIds.delete(e.uid),this._storage.releaseDisplayId(t)});const e=new T.a(this.container.getMaterialItems.bind(this.container),!0);this._createMatcher(this.renderer,e),this._meshFactory=new M.a(null,this.uid,e),this._templateStore=e,this.watch(\"renderer\",t=>{this._createMatcher(t,e);for(const e of this.graphics)this._pendingUpdate.updated.add(e);this.requestUpdate()}),this._tileStore.on(\"update\",this._onTileUpdate.bind(this)),this.container.on(\"attach\",()=>{this.graphics.items.length>0&&this._graphicsChangeHandler({target:this.graphics,added:this.graphics.items,removed:[],moved:[]}),this.handles.add(this.graphics.on(\"change\",this._graphicsChangeHandler),\"graphics\"),this._attached=!0,this.notifyChange(\"updating\")})}destroy(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")),this.container.destroy(),this._set(\"graphics\",null),this._graphicStore.clear(),this._tileStore.destroy(),this._attributeStore=null}get updating(){return!this._attached||null!==this._updatingGraphicsTimer||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0}hitTest(e,t){if(!this.view||!this.view.position)return Object(c.u)();const i=this.view.toMap(Object(b.b)(e,t));return this.searchFeatures(i).then(e=>e&&e.length?e[0]:null)}async searchFeatures(e,t=2){return this._graphicStore.hitTest(e.x,e.y,t,this.view.state.resolution,this.view.state.rotation)}update(e){const t=e.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(t.scale).level;if(this._graphicStore.updateLevel(i),this._tileStore.setViewState(t),this._graphicStoreUpdate=!0,this.updateRequested=!1,this._pendingUpdate.updated.size>0){if(!this._processing)return void this._updateGraphics();this._needsProcessing=!0}}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback())}processUpdate(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))}graphicUpdateHandler(e){const{graphic:t,property:i,newValue:s}=e,r=t;switch(i){case\"attributes\":break;case\"geometry\":case\"symbol\":this._pendingUpdate.updated.add(r),this.requestUpdate();break;case\"visible\":this._setFilterState(r.uid,s),this._attributeStore.sendUpdates()}}addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight()}removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys()),t=e.map(e=>this._displayIds.get(e));this._attributeStore.setHighlight(e,t)}_getIntersectingTiles(e){const t=this._graphicStore.getBounds(e);return t&&0!==Object(m.o)(t)&&0!==Object(m.j)(t)?this._tileStore.boundsIntersections(t):[]}_updateTile(e){const t=e.tile,i=this._getGraphicsData(this._templateStore,t,e.addedOrModified);return this._processGraphics(i).then(i=>(this._patchTile(t.key,{type:\"update\",addOrUpdate:i,remove:e.removed,end:!0}),i))}_patchTile(e,t){if(!this._tiles.has(e))return;const i=this._tiles.get(e);this.container.onTileData(i,t),this.container.requestRender()}_graphicsChangeHandler(e){for(const t of e.added)this._pendingUpdate.added.add(t);for(const t of e.moved)this._pendingUpdate.added.add(t);for(const t of e.removed)this._pendingUpdate.added.has(t)?this._pendingUpdate.added.delete(t):this._pendingUpdate.removed.add(t);this._processing?this._needsProcessing=!0:this._updateGraphics()}_getGraphicsToUpdate(){const e={added:[],removed:[],updated:[]},t=this._pendingUpdate;for(const i of this.graphics.items)t.added.has(i)?e.added.push(i):t.updated.has(i)&&e.updated.push(i);for(const i of t.removed)this._graphicStore.has(i)&&e.removed.push(i);return t.added.clear(),t.removed.clear(),t.updated.clear(),e}async _updateGraphics(){this._processing=!0;const{added:e,removed:t,updated:i}=this._getGraphicsToUpdate(),s=this._tilesToUpdate;let r;try{if(!this._graphicStoreUpdate){const e=this.view.state,t=this.view.featuresTilingScheme.getClosestInfoForScale(e.scale).level;this._graphicStore.updateLevel(t),this._tileStore.setViewState(e)}const n=[],a=new Array(e.length+t.length);for(let e=0;e<i.length;e++){const t=i[e],o=this._getIntersectingTiles(t);for(const e of o)r=e.id,ae(r,e,s).removed.push(this._displayIds.get(t.uid));n.push(this._updateGraphic(t,null)),a[e]=t}const o=i.length;for(let t=0;t<e.length;t++){const i=e[t];a[o+t]=i,this._graphicsSet.add(i),n.push(this.addGraphic(i))}for(const e of t){this._abortProcessingGraphic(e.uid);const t=this._getIntersectingTiles(e);for(const i of t)r=i.id,ae(r,i,s).removed.push(this._displayIds.get(e.uid));this._graphicsSet.delete(e),this._graphicStore.remove(e)}let h;this._flipUpdatingGraphics(),await Object(c.b)(n);for(let e=0;e<a.length;e++){h=a[e];const t=this._getIntersectingTiles(h);for(const e of t)r=e.id,ae(r,e,s).addedOrModified.push(h)}this._graphicStore.updateZ();const d=[];for(const[e,t]of s)d.push(this._updateTile(t));await Object(c.b)(d)}catch(e){}s.clear(),this.notifyChange(\"updating\"),this._processing=!1,this._needsProcessing&&(this._needsProcessing=!1,this._updateGraphics())}_getArcadeInfo(e){const t=(e.attributes?Object.keys(e.attributes):[]).map(t=>({name:t,alias:t,type:\"string\"==typeof e.attributes[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"}));return Object(n.g)(e.geometry)?null:{geometryType:Object(g.c)(e.geometry),spatialReference:l.a.fromJSON(e.geometry.spatialReference),fields:t}}async _getSymbolForGraphic(e,t){return Object(n.h)(e.symbol)?e.symbol:Object(n.h)(this.renderer)?this.renderer.getSymbolAsync(e,{scale:this.view.scale,abortOptions:t}):this._getNullSymbol(e)}async _getSymbolResources(e,t){if(!this.container.stage)return Object(c.u)(null);const i=this._getArcadeInfo(e),s=await this._getSymbolForGraphic(e,t),r=Object(I.c)(s),n=await Object(w.a)(r,i,t);if(\"esriTS\"===n.type){const e=[],[t]=Object(x.a)(n.text);for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));const i={symbol:n,id:0,glyphIds:e},[{mosaicItem:s}]=await this.container.getMaterialItems([i]);return{symbol:n,mosaicItem:s}}return{symbol:n,mosaicItem:null}}async _projectAndNormalizeGeometry(e){if(Object(n.g)(e.geometry))return Object(c.u)(null);let t=e.geometry;return Object(g.g)(t)?t.rings=t.rings:Object(g.h)(t)?t.paths=t.paths:Object(g.d)(t)&&(t=p.a.fromExtent(t)),Object(_.a)(t.spatialReference,this.view.spatialReference).then(()=>{const e=Object(B.i)(t),i=Object(_.b)(e,t.spatialReference,this.view.spatialReference);return Object(u.a)(i),i})}_onTileUpdate(e){const t=Object(d.d)(this.view.spatialReference);if(e.added&&e.added.length>0)for(const i of e.added)this._addNewTile(i,t);if(e.removed&&e.removed.length>0)for(const i of e.removed)this._removeTile(i.key)}addGraphic(e){this._abortProcessingGraphic(e.uid);const t=Object(c.d)();return this._graphicIdToAbortController.set(e.uid,t),this._addOrUpdateGraphic(e,{signal:t.signal}).then(()=>{this._graphicIdToAbortController.delete(e.uid)}).catch(t=>{if(this._graphicIdToAbortController.delete(e.uid),!Object(c.n)(t))throw t})}async _updateGraphic(e,t){const i=this._projectAndNormalizeGeometry(e),s=this._getSymbolResources(e,t),[r,n]=await Object(c.b)([i,s]);this._graphicStore.addOrModify(e,n,r)}async _addOrUpdateGraphic(e,t){const i=this._projectAndNormalizeGeometry(e),s=this._getSymbolResources(e,t);try{const[t,r]=await Object(c.b)([i,s]);this._addProjectedGraphic(e,r,t)}catch(e){if(!Object(c.n)(e))throw e}}_addProjectedGraphic(e,t,i){this._graphicsSet.has(e)&&this._graphicStore.addOrModify(e,t,i)}_addTile(e){const t=Object(m.d)();this.view.featuresTilingScheme.getTileBounds(t,e);const i=new v.a(e,t,!0);return this._tiles.set(e,i),this.container.addChild(i),i}_addNewTile(e,t){const i=this._addTile(e.key),s=this._graphicStore.queryTileData(this._templateStore,e);if(t){const i=Math.round((t.valid[1]-t.valid[0])/e.resolution);for(const e of s)e.geometry&&Object(g.f)(e.geometry)&&this._wrapPoints(e,i)}const r=e.key;this._tileUpdateSet.add(e.key),this.notifyChange(\"updating\"),this._processGraphics(s).then(e=>{i.setData({type:\"update\",clear:!0,addOrUpdate:e,remove:[],end:!0}),this._tileUpdateSet.delete(r),this.notifyChange(\"updating\")}).catch(e=>{if(this._tileUpdateSet.delete(r),this.notifyChange(\"updating\"),!Object(c.n)(e))throw e})}_removeTile(e){if(!this._tiles.has(e))return;const t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}_setFilterState(e,t){const i=this._displayIds.get(e),s=this._attributeStore.getHighlightFlag(e);this._attributeStore.setData(i,0,0,s|(t?O.i:0))}_getGraphicsData(e,t,i){const s=Object(d.d)(this.view.spatialReference),r=this._graphicStore.getGraphicsData(e,t,i);if(s){const e=Math.round((s.valid[1]-s.valid[0])/t.resolution);for(const t of r)t.geometry&&Object(g.f)(t.geometry)&&this._wrapPoints(t,e)}return r}_wrapPoints(e,t){const i=e.geometry;512===t?i.x<20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>492&&(e.geometry={points:[[i.x,i.y],[-t,0]]}):i.x<-20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>532&&(e.geometry={points:[[i.x,i.y],[-t,0]]})}async _processGraphics(e,t){if(!e||!e.length||!this._meshFactory)return null;const i=P.from(e),s=this._meshFactory;return await s.analyzeGraphics(i,await this._matcher,null,null,t),this._attributeStore.sendUpdates(),this._processAnalyzedGraphics(i)}_processAnalyzedGraphics(e){const t=this._meshFactory,i=t.createMeshData(e.getApproximateSize()),s=e.getCursor();for(;s.next();){const e=s.readGraphic();e.insertAfter=-1===e.insertAfter?-1:this._displayIds.get(e.insertAfter),e.displayId=this._displayIds.get(e.attributes[this.uid]),t.writeGraphic(i,s)}const r={};return i.encode(r,[]),S.a.decode(r)}_abortProcessingGraphic(e){this._graphicIdToAbortController.has(e)&&this._graphicIdToAbortController.get(e).abort()}_getNullSymbol(e){const t=e.geometry;return Object(g.h)(t)?y.d:Object(g.g)(t)||Object(g.d)(t)?y.c:y.b}_flipUpdatingGraphics(){this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout(()=>{this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")},160),this.notifyChange(\"updating\")}};Object(s.a)([Object(a.b)({constructOnly:!0})],oe.prototype,\"requestUpdateCallback\",void 0),Object(s.a)([Object(a.b)({constructOnly:!0})],oe.prototype,\"graphics\",void 0),Object(s.a)([Object(a.b)()],oe.prototype,\"updating\",null),Object(s.a)([Object(a.b)()],oe.prototype,\"view\",void 0),Object(s.a)([Object(a.b)()],oe.prototype,\"updateRequested\",void 0),oe=Object(s.a)([Object(o.a)(\"esri.views.2d.layers.support.GraphicsView2D\")],oe),t.a=oe}}]);","name":"11.f29794cf34c63c25b60b.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[11],{\n\n/***/ \"M08Z\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return X; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return G; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return F; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return D; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return V; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return O; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return E; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return K; });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"f4Nx\");\n/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"WZb1\");\n/* harmony import */ var _geometry_support_intersects_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"PNY3\");\n/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"KLE9\");\n/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"qatw\");\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"qRWG\");\n/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"kYAx\");\n/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"qNUd\");\n/* harmony import */ var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"M0lq\");\n/* harmony import */ var _chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"opr1\");\n/* harmony import */ var _chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"LGNZ\");\n/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"c46T\");\n/* harmony import */ var _engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"Mt1D\");\n/* harmony import */ var _engine_webgl_mesh_templates_shapingUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"G0q+\");\n/* harmony import */ var _engine_webgl_util_BidiText_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"t7mB\");\n/* harmony import */ var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"eT81\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst P=Math.PI/180,W=Object(_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_12__[/* c */ \"a\"])(),U=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),A=Object(_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__[/* create */ \"d\"])();function X(t,n,s,o,a,m,c){if(!o||!s.symbol)return t[0]=t[1]=t[2]=t[3]=0,n[0]=n[1]=n[2]=n[3]=0,t;const l=o;if(!Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isPoint */ \"f\"])(l)){Object(_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_5__[/* getBoundsXY */ \"a\"])(t,l);let e=n[0];0===e&&(e=Q(s),n[0]=e);const r=a*e/2;return t[0]-=r,t[1]-=r,t[2]+=r,t[3]+=r,t}{const i=l.x,r=l.y;\"esriTS\"===s.symbol.type&&0===n[2]&&0===n[3]&&V(n,s.symbol,s.mosaicItem),function(t,n,s,i,r,o,a,m){let c;switch(i.type){case\"esriSMS\":case\"esriPMS\":c=F(n,s,i,o,a,0);break;case\"esriTS\":c=D(n,s,i,r,o,0);break;case\"cim\":case\"CIMSymbolReference\":case\"expanded-cim\":c=G(n,s,i,o,a,0)}let l,f,u=0;for(let t=0;t<c.rings[0].length-1;t++)f=c.rings[0][t],l=(n-f[0])*(n-f[0])+(s-f[1])*(s-f[1]),u=Math.max(u,l);u=Math.sqrt(u);let h=Object(_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__[/* normalizeMapX */ \"b\"])(n-u,m),p=Object(_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__[/* normalizeMapX */ \"b\"])(n+u,m);if(h>p){const t=Object(_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__[/* getInfo */ \"d\"])(m);if(t){const[e,n]=t.valid;h=e,p=n}}t[0]=h,t[1]=s-u,t[2]=p,t[3]=s+u}(t,i,r,s.symbol,n,a,m,c)}return t}function z(t){return\"simple-marker\"===t||\"picture-marker\"===t||\"text\"===t}function O(e){switch(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__[/* unwrap */ \"n\"])(e.geometry).type){case\"point\":case\"multipoint\":return 0;case\"polyline\":return 1;case\"polygon\":case\"extent\":return 2}return 0}const H=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),T=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),q=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),C=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),J=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),N=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])(),B=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_13__[/* c */ \"a\"])();function E(t,e,n,s){Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(q,e,n);const i=t.paths;let r,o,a,m,c,l,f,x,g,d=1/0;for(let t=0;t<i.length;t++){const b=i[t];if(!(b.length<2))for(let t=1;t<b.length;t++)r=b[t-1][0],a=b[t-1][1],o=b[t][0],m=b[t][1],c=Math.min(r,o)-s,l=Math.min(a,m)-s,f=Math.max(r,o)+s,x=Math.max(a,m)+s,e<c||e>f||n<l||n>x||(Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(H,r,a),Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(T,o,m),Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"d\"])(C,T,H),Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"d\"])(J,H,q),Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"a\"])(N,C,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"g\"])(C,J)/Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"g\"])(C,C)),Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"d\"])(B,J,N),g=Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[\"g\"])(B,B),d>g&&(d=g))}return Math.sqrt(d)<=s}function F(t,e,n,s,i,r){let o,a;const m=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.xoffset),c=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.yoffset),f=P*n.angle,x=P*r;switch(n.type){case\"esriSMS\":o=a=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.size);break;case\"esriPMS\":o=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.width),a=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.height)}i<.04&&(s=.04*s/i);const h=Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* i */ \"d\"])(W);Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(h,h,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,t,e)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* r */ \"f\"])(h,h,x-f),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* s */ \"g\"])(h,h,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s,-s)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(h,h,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,m,-c));const p=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(p,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,-.5*o,-.5*a),h);const y=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(y,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,-.5*o,.5*a),h);const j=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(j,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,.5*o,-.5*a),h);const I=[0,0];return Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(I,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,.5*o,.5*a),h),{rings:[[p,j,I,y,p]]}}function G(t,e,n,s,i,r){const o=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_17__[/* CIMSymbolHelper */ \"a\"].getEnvelope(n.data);if(!o)return null;i<.04&&(s=.04*s/i);const a=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(o.width),m=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(o.height),c=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(o.x),f=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(o.y),x=0*P,h=P*r,p=Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* i */ \"d\"])(W);Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(p,p,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,t,e)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* r */ \"f\"])(p,p,h-x),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* s */ \"g\"])(p,p,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s,s));const y=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(y,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,c,f+m),p);const j=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(j,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,c,f),p);const I=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(I,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,c+a,f+m),p);const w=[0,0];return Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(w,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,c+a,f),p),{rings:[[y,I,w,j,y]]}}function D(t,e,n,s,i,r){const o=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.xoffset),a=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(n.yoffset),m=P*n.angle,c=P*r,f=Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* i */ \"d\"])(W);Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(f,f,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,t,e)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* r */ \"f\"])(f,f,c),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* s */ \"g\"])(f,f,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,i,-i));const x=s[0]+s[2]/2,h=s[1]+s[3]/2;Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(f,f,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,o,-a)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(f,f,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,x,h)),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* r */ \"f\"])(f,f,m),Object(_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_11__[/* t */ \"h\"])(f,f,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,-x,-h));const p=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(p,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s[0],s[1]),f);const y=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(y,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s[0],s[1]+s[3]),f);const j=[0,0];Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(j,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s[0]+s[2],s[1]),f);const I=[0,0];return Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* t */ \"n\"])(I,Object(_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_10__[/* s */ \"m\"])(U,s[0]+s[2],s[1]+s[3]),f),{rings:[[p,j,I,y,p]]}}function K(t){let n,l,f,x,u,h,p,y,g,d=null;if(!t)return null;if(\"mesh\"===t.type)return t.toJSON();if(n=t.spatialReference,l=Object(_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__[/* getInfo */ \"d\"])(n),!l)return t.toJSON();f=n.isWebMercator,h=f?102100:4326,x=Y[h].maxX,u=Y[h].minX,p=Y[h].plus180Line,y=Y[h].minus180Line;const b=t.toJSON();if(Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isPoint */ \"f\"])(b))g=et(b,x,u);else if(Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isMultipoint */ \"e\"])(b))b.points=b.points.map((t=>et(t,x,u))),g=b;else if(Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isExtent */ \"d\"])(b))g=function(t,e){if(!e)return t;const n=function(t,e){const n=[],{ymin:s,ymax:i}=t,r=t.xmax-t.xmin,o=t.xmin,a=t.xmax;let m;const[c,l]=e.valid;m=$(t.xmin,e);const f=m.x,x=m.frameId;m=$(t.xmax,e);const u=m.x,h=m.frameId,p=f===u&&r>0;if(r>2*l){const t={xmin:o<a?f:u,ymin:s,xmax:l,ymax:i},e={xmin:c,ymin:s,xmax:o<a?u:f,ymax:i},r={xmin:0,ymin:s,xmax:l,ymax:i},m={xmin:c,ymin:s,xmax:0,ymax:i},p=[],y=[];_(t,r)&&p.push(x),_(t,m)&&y.push(x),_(e,r)&&p.push(h),_(e,m)&&y.push(h);for(let t=x+1;t<h;t++)p.push(t),y.push(t);n.push({extent:t,frameIds:[x]},{extent:e,frameIds:[h]},{extent:r,frameIds:p},{extent:m,frameIds:y})}else f>u||p?n.push({extent:{xmin:f,ymin:s,xmax:l,ymax:i},frameIds:[x]},{extent:{xmin:c,ymin:s,xmax:u,ymax:i},frameIds:[h]}):n.push({extent:{xmin:f,ymin:s,xmax:u,ymax:i},frameIds:[x]});return n}(t,e).map((t=>t.extent));if(n.length<2)return n[0]||t;if(n.length>2)return t.xmin=e.valid[0],t.xmax=e.valid[1],t;return{rings:n.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}(b,l);else if(Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isPolygon */ \"g\"])(b)||Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isPolyline */ \"h\"])(b)){const t=A;Object(_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_5__[/* getBoundsXY */ \"a\"])(t,b);const e={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},n=Z(e.xmin,u)*(2*x),r=0===n?b:function(t,e){const n=function(t){if(Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__[/* isPolygon */ \"g\"])(t))return t.rings;return t.paths}(t);for(const t of n)for(const n of t)n[0]+=e;return t}(b,n);e.xmin+=n,e.xmax+=n,Object(_geometry_support_intersects_js__WEBPACK_IMPORTED_MODULE_4__[/* extentIntersectsPolyline */ \"a\"])(e,p)&&e.xmax!==x||Object(_geometry_support_intersects_js__WEBPACK_IMPORTED_MODULE_4__[/* extentIntersectsPolyline */ \"a\"])(e,y)&&e.xmin!==u?d=r:g=r}else g=t.clone();if(null!==d){return(new nt).cut(d,x)}return g}function Q(t){switch(t.symbol.type){case\"esriSFS\":case\"esriPFS\":{const e=t.symbol.outline;return e?e.width:0}case\"esriSLS\":return Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(t.symbol.width);case\"esriSMS\":return Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(t.symbol.size);case\"esriPMS\":return Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(Math.max(t.symbol.width,t.symbol.height));case\"esriTS\":{const e=[0,0,0,0];V(e,t.symbol,t.mosaicItem);const n=Math.max(Math.abs(e[0]),Math.abs(e[1]));return Math.max(e[2],e[3])+n}case\"expanded-cim\":{const e=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_17__[/* CIMSymbolHelper */ \"a\"].getEnvelope(t.symbol.data);return Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(Math.sqrt(e.width*e.width+e.height*e.height))}case\"composite-symbol\":{if(!t.symbol.layers.length)return 0;const e=t.symbol.layers.length-1;return Q({symbol:t.symbol.layers[e],mosaicItem:null})}case\"label\":default:return 0}}function V(t,e,n){if(!n||0===n.glyphMosaicItems.length)return t;const s=Object(_engine_webgl_util_BidiText_js__WEBPACK_IMPORTED_MODULE_16__[/* bidiText */ \"a\"])(e.text)[1],i=n.glyphMosaicItems,r=Object(_engine_webgl_mesh_templates_shapingUtils_js__WEBPACK_IMPORTED_MODULE_15__[/* shapeGlyphs */ \"a\"])(i,s,{scale:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(e.font.size)/24,angle:e.angle,xOffset:e.xoffset,yOffset:e.yoffset,hAlign:Object(_engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__[/* getXAnchorDirection */ \"d\"])(e.horizontalAlignment||\"center\"),vAlign:Object(_engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__[/* getYAnchorDirection */ \"f\"])(e.verticalAlignment||\"baseline\"),maxLineWidth:Math.max(32,Math.min(e.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(e.lineHeight||1,4)),decoration:e.font.decoration||\"none\",isCIM:!1}).bounds;return t[0]=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(r.x-r.halfWidth),t[1]=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(r.y-r.halfHeight),t[2]=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(r.width),t[3]=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__[/* pt2px */ \"d\"])(r.height),t}const Y={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:{paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].WebMercator},minus180Line:{paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].WGS84}}};function Z(t,e){return Math.ceil((t-e)/(2*e))}function $(t,e){const[n,s]=e.valid,i=2*s;let r,o=0;return t>s?(r=Math.ceil(Math.abs(t-s)/i),t-=r*i,o=r):t<n&&(r=Math.ceil(Math.abs(t-n)/i),t+=r*i,o=-r),{x:t,frameId:o}}function _(t,e){const{xmin:n,ymin:s,xmax:i,ymax:r}=e;return tt(t,n,s)&&tt(t,n,r)&&tt(t,i,r)&&tt(t,i,s)}function tt(t,e,n){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax}function et(t,e,n){if(Array.isArray(t)){const s=t[0];if(s>e){const n=Z(s,e);t[0]=s+n*(-2*e)}else if(s<n){const e=Z(s,n);t[0]=s+e*(-2*n)}}else{const s=t.x;if(s>e){const n=Z(s,e);t.x+=n*(-2*e)}else if(s<n){const e=Z(s,n);t.x+=e*(-2*n)}}return t}class nt{cut(t,e){let n;if(t.rings)this.closed=!0,n=t.rings,this.minPts=4;else{if(!t.paths)return null;this.closed=!1,n=t.paths,this.minPts=2}const s=n.length,i=-2*e;for(let t=0;t<s;t++){const e=n[t];if(e&&e.length>=this.minPts){const t=[];for(const n of e)t.push([n[0]+i,n[1]]);n.push(t)}}return this.closed?t.rings=n:t.paths=n,t}}\n\n\n/***/ }),\n\n/***/ \"Vh9r\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Accessor.js + 5 modules\nvar Accessor = __webpack_require__(\"/CmD\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js\nvar spatialReferenceUtils = __webpack_require__(\"f4Nx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/SpatialReference.js\nvar SpatialReference = __webpack_require__(\"WZb1\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/coordsUtils.js\nvar coordsUtils = __webpack_require__(\"Mu3I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Polygon.js\nvar Polygon = __webpack_require__(\"Ehki\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/jsonUtils.js\nvar jsonUtils = __webpack_require__(\"qatw\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(\"qRWG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(\"kYAx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/symbols/support/defaults.js\nvar defaults = __webpack_require__(\"psH3\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/HandleOwner.js\nvar HandleOwner = __webpack_require__(\"kJYu\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js\nvar projectionSupport = __webpack_require__(\"HsO1\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js\nvar definitions = __webpack_require__(\"jIHu\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities.js\nvar capabilities = __webpack_require__(\"sq/B\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/BidiText.js\nvar BidiText = __webpack_require__(\"t7mB\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/symbols/cim/cimSymbolUtils.js + 1 modules\nvar cimSymbolUtils = __webpack_require__(\"ZxoT\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileData.js + 4 modules\nvar TileData = __webpack_require__(\"fZs+\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js + 5 modules\nvar WGLTile = __webpack_require__(\"KFVX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js + 1 modules\nvar schemaUtils = __webpack_require__(\"owVx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/matcherUtils.js + 1 modules\nvar matcherUtils = __webpack_require__(\"Bcjy\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTemplateStore.js + 12 modules\nvar WGLTemplateStore = __webpack_require__(\"Dw8i\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/WGLMeshFactory.js + 3 modules\nvar WGLMeshFactory = __webpack_require__(\"J3nV\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js\nvar AttributeStore = __webpack_require__(\"2AbE\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js + 2 modules\nvar ComputedAttributeStorage = __webpack_require__(\"Swtj\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js\nvar featureConversionUtils = __webpack_require__(\"ZlUD\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js\nvar FeatureSetReader = __webpack_require__(\"8NDJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js\nvar FeatureSetReaderJSON = __webpack_require__(\"Q0oN\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/GraphicsReader.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass GraphicsReader_s extends FeatureSetReaderJSON[\"a\" /* FeatureSetReaderJSON */]{constructor(e,r){super(e,r,null)}static from(o){const n=FeatureSetReader[\"a\" /* FeatureSetReader */].createInstance(),c=[],i=o.filter((e=>!!e.geometry));for(const t of i){const o=Object(jsonUtils[\"c\" /* getJsonType */])(t.geometry);Object(featureConversionUtils[\"e\" /* convertFromGraphics */])(c,[t],o,!1,!1,\"uid\")}return new GraphicsReader_s(n,c)}get geometryType(){const e=this._current;return e?e.geometryType:null}readGraphic(){return this._current}getCursor(){return this.copy()}copy(){const e=new GraphicsReader_s(this.instance,this._features);return this.copyInto(e),e}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js\nvar TileStore = __webpack_require__(\"w5u1\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(\"yE7X\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js + 2 modules\nvar FeatureContainer = __webpack_require__(\"by2V\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var GraphicContainer = (class extends FeatureContainer[\"a\" /* FeatureContainer */]{get hasLabels(){return!1}get labelsVisible(){return!1}renderChildren(r){this.attributeView.bindTextures(r.context),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===enums[\"c\" /* WGLDrawPhase */].MAP&&this._renderChildren(r),r.drawPhase===enums[\"c\" /* WGLDrawPhase */].HIGHLIGHT&&this._renderHighlight(r))}_renderChildren(e,r){for(const i of this.children)i.isReady&&i.hasData&&(i.commitChanges(e),e.context.setStencilFunction(514,i.stencilRef,255),i._displayList.replay(e,i,r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js\nvar graphicsUtils = __webpack_require__(\"M08Z\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/contains.js\nvar contains = __webpack_require__(\"IXLn\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/extentUtils.js\nvar extentUtils = __webpack_require__(\"+NQI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/unitUtils.js\nvar unitUtils = __webpack_require__(\"gEht\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules\nvar normalizeUtils = __webpack_require__(\"qNUd\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/rbush.js\nvar rbush = __webpack_require__(\"kB+0\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/centroid.js\nvar centroid = __webpack_require__(\"V+VG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js\nvar OptimizedGeometry = __webpack_require__(\"gVKr\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/quantizationUtils.js\nvar quantizationUtils = __webpack_require__(\"AIxD\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStoreItem.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst GraphicStoreItem_p=new OptimizedGeometry[\"a\" /* default */],GraphicStoreItem_c=new OptimizedGeometry[\"a\" /* default */];function GraphicStoreItem_d(e){e.coords.length=0,e.lengths.length=0}class GraphicStoreItem_f{constructor(){this.bounds=Object(aaBoundingRect[\"d\" /* create */])(),this.graphic=null,this.size=[0,0,0,0]}static acquire(e=null,t,s,r,o,i){let h;return 0===GraphicStoreItem_f._pool.length?h=new GraphicStoreItem_f:(h=GraphicStoreItem_f._pool.pop(),this._set.delete(h)),h.acquire(e,t,s,r,o,i),h}static release(e){e&&!this._set.has(e)&&(e.release(),this._pool.push(e),this._set.add(e))}static getCentroidQuantized(r,o){if(Object(jsonUtils[\"g\" /* isPolygon */])(r.geometry)){const s=r.symbol;if(Object(maybe[\"g\" /* isNone */])(s))return null;if(Object(graphicsUtils[\"g\" /* isMarkerSymbol */])(s.type)){const e=Object(centroid[\"a\" /* polygonCentroid */])(r.geometry);return Object(quantizationUtils[\"b\" /* quantizePoint */])(o,{},{x:e[0],y:e[1]},!1,!1)}}return null}acquire(e=null,t,s,r,o,i){e&&this.set(e,t,s,r,o,i)}release(){this.graphic=null,this.symbolResource=null,this.geometry=null}get symbol(){return this.symbolResource.symbol}set(e,t,s,r,o,i){this.graphic=e,this.geometry=s,this.symbolResource=t,this.updateBounds(r,o,i)}updateBounds(e,t,s){Object(graphicsUtils[\"a\" /* getBounds */])(this.bounds,this.size,this.symbolResource,this.geometry,e,t,s)}getGeometryQuantized(e){if(Object(jsonUtils[\"g\" /* isPolygon */])(this.geometry)){const t=this.geometry.rings;if(1===t.length&&2===t[0].length)return Object(quantizationUtils[\"a\" /* quantizeGeometry */])(e,{paths:[[t[0][0],t[0][1]]]})}else if(Object(jsonUtils[\"h\" /* isPolyline */])(this.geometry))return GraphicStoreItem_d(GraphicStoreItem_p),GraphicStoreItem_d(GraphicStoreItem_c),Object(featureConversionUtils[\"h\" /* convertFromPolyline */])(GraphicStoreItem_p,this.geometry),Object(featureConversionUtils[\"q\" /* generalizeOptimizedGeometry */])(GraphicStoreItem_c,GraphicStoreItem_p,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e.scale[0]),Object(featureConversionUtils[\"u\" /* quantizeOptimizedGeometry */])(GraphicStoreItem_p,GraphicStoreItem_c,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e),Object(featureConversionUtils[\"o\" /* convertToPolyline */])(GraphicStoreItem_p,this.geometry.hasZ,this.geometry.hasM);return Object(quantizationUtils[\"a\" /* quantizeGeometry */])(e,this.geometry)}}GraphicStoreItem_f._pool=[],GraphicStoreItem_f._set=new Set;/* harmony default export */ var GraphicStoreItem = (GraphicStoreItem_f);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStore.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst GraphicStore_b={minX:0,minY:0,maxX:0,maxY:0},x=Object(aaBoundingRect[\"d\" /* create */])(),GraphicStore_G=[];function z(e,t,i,r,s){return GraphicStore_b.minX=t,GraphicStore_b.minY=i,GraphicStore_b.maxX=r,GraphicStore_b.maxY=s,e.search(GraphicStore_b)}/* harmony default export */ var GraphicStore = (class{constructor(t,i,r,s,n,a){this._graphics=s,this._onAdd=n,this._onRemove=a,this._index=Object(rbush[\"a\" /* r */])(9,Object(has[\"a\" /* default */])(\"csp-restrictions\")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this._itemByGraphic=new Map,this._currentLevel=-1/0,this._tileInfoView=t,this._uidFieldName=r;const u=t.getClosestInfoForScale(i);u&&(this._currentLevel=u.level,this._resolution=this._tileInfoView.getTileResolution(u.level)),this._metersPerUnit=Object(unitUtils[\"b\" /* getMetersPerUnit */])(t.spatialReference)}hitTest(e,o,u,h,l){e=Object(normalizeUtils[\"b\" /* normalizeMapX */])(e,this._tileInfoView.spatialReference);const m=.5*h*u;x[0]=e-m,x[1]=o-m,x[2]=e+m,x[3]=o+m;const f=.5*h*(u+50),b=z(this._index,e-f,o-f,e+f,o+f);if(!b||0===b.length)return[];const G={x:e,y:o},I=[];let B;for(const u of b)if(u.graphic.visible)switch(Object(jsonUtils[\"c\" /* getJsonType */])(u.geometry)){case\"esriGeometryPoint\":{const e=u.symbol;if(!e)continue;const i=u.geometry,{x:r,y:s}=i,o=h*this._metersPerUnit;let n;switch(e.type){case\"esriTS\":n=Object(graphicsUtils[\"d\" /* getTextSymbolBounds */])(r,s,e,u.size,h,l);break;case\"expanded-cim\":n=Object(graphicsUtils[\"b\" /* getCIMMarkerBounds */])(r,s,e,h,o,l);break;case\"esriSMS\":case\"esriPMS\":n=Object(graphicsUtils[\"c\" /* getMarkerSymbolBounds */])(r,s,e,h,o,l)}Object(contains[\"g\" /* polygonContainsPoint */])(n,G)&&I.push(u)}break;case\"esriGeometryPolyline\":{const t=u.symbol;if(!t||!t.layers.length)continue;const i=t.layers[0];B=1.5*h*window.devicePixelRatio*Object(screenUtils[\"d\" /* pt2px */])(i.width),Object(graphicsUtils[\"h\" /* isPointOnPolyline */])(u.geometry,e,o,B)&&I.push(u)}break;case\"esriGeometryEnvelope\":{const e=u.geometry,t=Object(aaBoundingRect[\"i\" /* fromValues */])(e.xmin,e.ymin,e.xmax,e.ymax);Object(aaBoundingRect[\"k\" /* intersects */])(t,x)&&I.push(u);break}case\"esriGeometryPolygon\":{if(Object(contains[\"g\" /* polygonContainsPoint */])(u.geometry,G)){I.push(u);break}const e=Object(extentUtils[\"b\" /* getPolygonExtent */])(u.geometry);if(Math.abs(e.ymax-e.ymin)<5*h||Math.abs(e.xmax-e.xmin)<5*h){const t=Object(aaBoundingRect[\"i\" /* fromValues */])(e.xmin,e.ymin,e.xmax,e.ymax);Object(aaBoundingRect[\"k\" /* intersects */])(t,x)&&I.push(u)}break}case\"esriGeometryMultipoint\":{const e=u.symbol;if(!e)continue;const i=u.geometry.points;let r;for(let s=0;s<i.length;s++)if(r=\"esriTS\"===e.type?Object(graphicsUtils[\"d\" /* getTextSymbolBounds */])(i[s][0],i[s][1],e,u.size,h,l):Object(graphicsUtils[\"c\" /* getMarkerSymbolBounds */])(i[s][0],i[s][1],e,h,h*this._metersPerUnit,l),Object(contains[\"g\" /* polygonContainsPoint */])(r,G)){I.push(u);break}break}}return I.sort(((e,t)=>{const i=Object(graphicsUtils[\"f\" /* graphicGeometryToNumber */])(e.graphic),r=Object(graphicsUtils[\"f\" /* graphicGeometryToNumber */])(t.graphic);return i===r?t.zorder-e.zorder:i-r})),I.map((e=>e.graphic))}getGraphicsData(e,t,i){const r=z(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);if(0===r.length||0===i.length)return[];r.sort(((e,t)=>e.zorder-t.zorder)),r[0].insertAfter=-1;for(let e=1;e<r.length;e++)r[e].insertAfter=r[e-1].graphic.uid;r.sort(((e,t)=>e.graphic.uid-t.graphic.uid)),i.sort(((e,t)=>e.uid-t.uid));let s,o=0,n=0;const a=[],u={originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]};for(const t of i){for(n=-2;o<r.length;)if(s=r[o],o++,t.uid===s.graphic.uid){n=s.insertAfter;break}if(!s.geometry||-2===n)continue;const i=s.getGeometryQuantized(u),h={...s.graphic.attributes};h[this._uidFieldName]=t.uid,null==s.groupId&&(s.groupId=e.createTemplateGroup(s.symbol,null)),a.push({centroid:GraphicStoreItem.getCentroidQuantized(s,u),geometry:i,attributes:h,symbol:s.symbol,groupId:s.groupId,insertAfter:n,zorder:s.zorder})}return a.sort(((e,t)=>e.zorder-t.zorder)),a}queryTileData(e,t){const i=50*t.resolution,r=Object(aaBoundingRect[\"l\" /* pad */])(t.bounds,i,Object(aaBoundingRect[\"d\" /* create */])()),s=z(this._index,r[0],r[1],r[2],r[3]),o=[];return this._createTileGraphics(o,e,s,{originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),o}has(e){return this._itemByGraphic.has(e)}getBounds(e){return this._itemByGraphic.has(e)?this._itemByGraphic.get(e).bounds:null}addOrModify(e,t,i){if(!e)return;this.has(e)&&this.remove(e),this._onAdd(e);const r=GraphicStoreItem.acquire(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference);return this._itemByGraphic.set(e,r),i&&this._index.insert(r),r.bounds}remove(e){if(!this._itemByGraphic.has(e))return;this._onRemove(e);const t=this._itemByGraphic.get(e);this._index.remove(t),this._itemByGraphic.delete(e)}updateZ(){const e=this._graphics.items;let t,i;for(let r=0;r<e.length;r++)i=e[r],t=this._itemByGraphic.get(i),t&&(t.zorder=r)}update(e,t,i){const r=this._itemByGraphic.get(e);r.groupId=null;const s=Object(aaBoundingRect[\"b\" /* clone */])(r.bounds);return r.size[0]=r.size[1]=0,this._index.remove(r),r.set(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),i&&this._index.insert(r),{oldBounds:s,newBounds:r.bounds}}updateLevel(e){if(this._currentLevel===e)return;this._currentLevel=e;const t=this._tileInfoView.getTileResolution(e);this._resolution=t,this._index.clear(),GraphicStore_G.length=0,this._itemByGraphic.forEach((e=>{e.updateBounds(this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),e.geometry&&GraphicStore_G.push(e)})),this._index.load(GraphicStore_G)}clear(){this._itemByGraphic.clear(),this._index.clear()}_createTileGraphics(e,t,i,r){const s=this._uidFieldName;let o,n,a,u;i.sort(((e,t)=>e.zorder-t.zorder));for(let h=0;h<i.length;h++){a=i[h],o=a.graphic,n=a.getGeometryQuantized(r),u=0===h?-1:i[h-1].graphic.uid;const l={...a.graphic.attributes};l[s]=o.uid,null==a.groupId&&(a.groupId=t.createTemplateGroup(a.symbol,null)),e.push({centroid:GraphicStoreItem.getCentroidQuantized(a,r),geometry:n,attributes:l,symbol:a.symbol,groupId:a.groupId,insertAfter:u,zorder:a.zorder})}}});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Identifiable.js\nvar Identifiable = __webpack_require__(\"pdg3\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/GraphicsView.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst GraphicsView_t=t=>{let p=class extends(Object(Identifiable[\"a\" /* IdentifiableMixin */])(t)){constructor(){super(...arguments),this.graphics=null,this.renderer=null,this.view=null}};return Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],p.prototype,\"graphics\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],p.prototype,\"renderer\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],p.prototype,\"updating\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],p.prototype,\"view\",void 0),p=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.GraphicsView\")],p),p};\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction Z(t,e,i){if(i.has(t))return i.get(t);const s={tile:e,addedOrModified:[],removed:[]};return i.set(t,s),s}let K=class extends(GraphicsView_t(Object(HandleOwner[\"b\" /* HandleOwnerMixin */])(Accessor[\"a\" /* default */]))){constructor(t){super(t),this._storage=new ComputedAttributeStorage[\"a\" /* ComputedAttributeStorage */],this._displayIds=new Map,this._tiles=new Map,this._graphicStoreUpdate=!1,this._graphicsSet=new Set,this._matcher=Object(promiseUtils[\"u\" /* resolve */])(null),this._tileUpdateSet=new Set,this._tilesToUpdate=new Map,this._graphicIdToAbortController=new Map,this._attached=!1,this._highlightIds=new Map,this._updatingGraphicsTimer=null,this._processing=!1,this._needsProcessing=!1,this._pendingUpdate={added:new Set,updated:new Set,removed:new Set},this.lastUpdateId=-1,this.updateRequested=!1,this.graphicUpdateHandler=this.graphicUpdateHandler.bind(this),this._processAnalyzedGraphics=this._processAnalyzedGraphics.bind(this),this._graphicsChangeHandler=this._graphicsChangeHandler.bind(this)}_createMatcher(t,e){if(t){const i=Object(schemaUtils[\"a\" /* createMatcherSchema */])({indexCount:0,fields:{}},\"feature\",t);this._matcher=Object(matcherUtils[\"a\" /* createMatcher */])(i,e,null)}}_createDisplayId(t){return this._displayIds.has(t)||this._displayIds.set(t,this._storage.createDisplayId()),this._displayIds.get(t)}initialize(){this._tileStore=new TileStore[\"a\" /* default */](this.view.featuresTilingScheme),this.container=new GraphicContainer(this.view.featuresTilingScheme),this._attributeStore=new AttributeStore[\"a\" /* default */]({type:\"local\",initialize:t=>Object(promiseUtils[\"u\" /* resolve */])(this.container.attributeView.initialize(t)),update:t=>this.container.attributeView.requestUpdate(t),render:()=>this.container.requestRender()},Object(capabilities[\"a\" /* default */])());this._graphicStore=new GraphicStore(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,(t=>{this._createDisplayId(t.uid),this._setFilterState(t.uid,t.visible)}),(t=>{const e=this._displayIds.get(t.uid);this._displayIds.delete(t.uid),this._storage.releaseDisplayId(e)}));const t=new WGLTemplateStore[\"a\" /* WGLTemplateStore */](this.container.getMaterialItems.bind(this.container),!0);this._createMatcher(this.renderer,t),this._meshFactory=new WGLMeshFactory[\"a\" /* WGLMeshFactory */](null,this.uid,t),this._templateStore=t,this.watch(\"renderer\",(e=>{this._createMatcher(e,t);for(const t of this.graphics)this._pendingUpdate.updated.add(t);this.requestUpdate()})),this._tileStore.on(\"update\",this._onTileUpdate.bind(this)),this.container.on(\"attach\",(()=>{this.graphics.items.length>0&&this._graphicsChangeHandler({target:this.graphics,added:this.graphics.items,removed:[],moved:[]}),this.handles.add(this.graphics.on(\"change\",this._graphicsChangeHandler),\"graphics\"),this._attached=!0,this.notifyChange(\"updating\")}))}destroy(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")),this.container.destroy(),this._set(\"graphics\",null),this._graphicStore.clear(),this._tileStore.destroy(),this._attributeStore=null}get updating(){return!this._attached||null!==this._updatingGraphicsTimer||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0}hitTest(t,e){if(!this.view||!this.view.position)return Object(promiseUtils[\"u\" /* resolve */])();const i=this.view.toMap(Object(screenUtils[\"b\" /* createScreenPoint */])(t,e));return this.searchFeatures(i).then((t=>t&&t.length?t[0]:null))}async searchFeatures(t,e=2){return this._graphicStore.hitTest(t.x,t.y,e,this.view.state.resolution,this.view.state.rotation)}update(t){const e=t.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(e.scale).level;if(this._graphicStore.updateLevel(i),this._tileStore.setViewState(e),this._graphicStoreUpdate=!0,this.updateRequested=!1,this._pendingUpdate.updated.size>0){if(!this._processing)return void this._updateGraphics();this._needsProcessing=!0}}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback())}processUpdate(t){this.updateRequested&&(this.updateRequested=!1,this.update(t))}graphicUpdateHandler(t){const{graphic:e,property:i,newValue:s}=t,r=e;switch(i){case\"attributes\":break;case\"geometry\":case\"symbol\":this._pendingUpdate.updated.add(r),this.requestUpdate();break;case\"visible\":this._setFilterState(r.uid,s),this._attributeStore.sendUpdates()}}addHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e);this._highlightIds.set(e,t+1)}else this._highlightIds.set(e,1);this._updateHighlight()}removeHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e)-1;0===t?this._highlightIds.delete(e):this._highlightIds.set(e,t)}this._updateHighlight()}_updateHighlight(){const t=Array.from(this._highlightIds.keys()),e=t.map((t=>this._displayIds.get(t)));this._attributeStore.setHighlight(t,e)}_getIntersectingTiles(t){const e=this._graphicStore.getBounds(t);return!e||0===Object(aaBoundingRect[\"o\" /* width */])(e)||0===Object(aaBoundingRect[\"j\" /* height */])(e)?[]:this._tileStore.boundsIntersections(e)}_updateTile(t){const e=t.tile,i=this._getGraphicsData(this._templateStore,e,t.addedOrModified);return this._processGraphics(i).then((i=>(this._patchTile(e.key,{type:\"update\",addOrUpdate:i,remove:t.removed,end:!0}),i)))}_patchTile(t,e){if(!this._tiles.has(t))return;const i=this._tiles.get(t);this.container.onTileData(i,e),this.container.requestRender()}_graphicsChangeHandler(t){for(const e of t.added)this._pendingUpdate.added.add(e);for(const e of t.moved)this._pendingUpdate.added.add(e);for(const e of t.removed)this._pendingUpdate.added.has(e)?this._pendingUpdate.added.delete(e):this._pendingUpdate.removed.add(e);this._processing?this._needsProcessing=!0:this._updateGraphics()}_getGraphicsToUpdate(){const t={added:[],removed:[],updated:[]},e=this._pendingUpdate;for(const i of this.graphics.items)e.added.has(i)?t.added.push(i):e.updated.has(i)&&t.updated.push(i);for(const i of e.removed)this._graphicStore.has(i)&&t.removed.push(i);return e.added.clear(),e.removed.clear(),e.updated.clear(),t}async _updateGraphics(){this._processing=!0;const{added:t,removed:e,updated:i}=this._getGraphicsToUpdate(),s=this._tilesToUpdate;let r;try{if(!this._graphicStoreUpdate){const t=this.view.state,e=this.view.featuresTilingScheme.getClosestInfoForScale(t.scale).level;this._graphicStore.updateLevel(e),this._tileStore.setViewState(t)}const a=[],h=new Array(t.length+e.length);for(let t=0;t<i.length;t++){const e=i[t],o=this._getIntersectingTiles(e);for(const t of o){r=t.id;Z(r,t,s).removed.push(this._displayIds.get(e.uid))}a.push(this._updateGraphic(e,null)),h[t]=e}const n=i.length;for(let e=0;e<t.length;e++){const i=t[e];h[n+e]=i,this._graphicsSet.add(i),a.push(this.addGraphic(i))}for(const t of e){this._abortProcessingGraphic(t.uid);const e=this._getIntersectingTiles(t);for(const i of e){r=i.id;Z(r,i,s).removed.push(this._displayIds.get(t.uid))}this._graphicsSet.delete(t),this._graphicStore.remove(t)}let d;this._flipUpdatingGraphics(),await Object(promiseUtils[\"b\" /* all */])(a);for(let t=0;t<h.length;t++){d=h[t];const e=this._getIntersectingTiles(d);for(const t of e){r=t.id;Z(r,t,s).addedOrModified.push(d)}}this._graphicStore.updateZ();const p=[];for(const[t,e]of s)p.push(this._updateTile(e));await Object(promiseUtils[\"b\" /* all */])(p)}catch(t){}s.clear(),this.notifyChange(\"updating\"),this._processing=!1,this._needsProcessing&&(this._needsProcessing=!1,this._updateGraphics())}_getArcadeInfo(t){const i=(t.attributes?Object.keys(t.attributes):[]).map((e=>({name:e,alias:e,type:\"string\"==typeof t.attributes[e]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})));return Object(maybe[\"g\" /* isNone */])(t.geometry)?null:{geometryType:Object(jsonUtils[\"c\" /* getJsonType */])(t.geometry),spatialReference:SpatialReference[\"a\" /* default */].fromJSON(t.geometry.spatialReference),fields:i}}async _getSymbolForGraphic(t,e){return Object(maybe[\"h\" /* isSome */])(t.symbol)?t.symbol:Object(maybe[\"h\" /* isSome */])(this.renderer)?this.renderer.getSymbolAsync(t,{scale:this.view.scale,abortOptions:e}):this._getNullSymbol(t)}async _getSymbolResources(t,e){if(!this.container.stage)return Object(promiseUtils[\"u\" /* resolve */])(null);const i=this._getArcadeInfo(t),s=await this._getSymbolForGraphic(t,e),r=Object(schemaUtils[\"c\" /* createSymbolSchema */])(s),o=await Object(cimSymbolUtils[\"a\" /* expandSymbol */])(r,i,e);if(\"esriTS\"===o.type){const t=[],[e]=Object(BidiText[\"a\" /* bidiText */])(o.text);for(let i=0;i<e.length;i++)t.push(e.charCodeAt(i));const i={symbol:o,id:0,glyphIds:t},[{mosaicItem:s}]=await this.container.getMaterialItems([i]);return{symbol:o,mosaicItem:s}}return{symbol:o,mosaicItem:null}}async _projectAndNormalizeGeometry(t){if(Object(maybe[\"g\" /* isNone */])(t.geometry))return Object(promiseUtils[\"u\" /* resolve */])(null);let i=t.geometry;if(Object(jsonUtils[\"g\" /* isPolygon */])(i)){const t=i.rings;i.rings=t}else if(Object(jsonUtils[\"h\" /* isPolyline */])(i)){const t=i.paths;i.paths=t}else Object(jsonUtils[\"d\" /* isExtent */])(i)&&(i=Polygon[\"a\" /* default */].fromExtent(i));return Object(projectionSupport[\"a\" /* checkProjectionSupport */])(i.spatialReference,this.view.spatialReference).then((()=>{const t=Object(graphicsUtils[\"i\" /* normalizeCentralMeridian */])(i),e=Object(projectionSupport[\"b\" /* project */])(t,i.spatialReference,this.view.spatialReference);return Object(coordsUtils[\"a\" /* closeRingsAndFixWinding */])(e),e}))}_onTileUpdate(t){const e=Object(spatialReferenceUtils[\"d\" /* getInfo */])(this.view.spatialReference);if(t.added&&t.added.length>0)for(const i of t.added)this._addNewTile(i,e);if(t.removed&&t.removed.length>0)for(const e of t.removed)this._removeTile(e.key)}addGraphic(t){this._abortProcessingGraphic(t.uid);const e=Object(promiseUtils[\"d\" /* createAbortController */])();this._graphicIdToAbortController.set(t.uid,e);const i={signal:e.signal};return this._addOrUpdateGraphic(t,i).then((()=>{this._graphicIdToAbortController.delete(t.uid)})).catch((e=>{if(this._graphicIdToAbortController.delete(t.uid),!Object(promiseUtils[\"n\" /* isAbortError */])(e))throw e}))}async _updateGraphic(t,e){const i=this._projectAndNormalizeGeometry(t),s=this._getSymbolResources(t,e),[r,a]=await Object(promiseUtils[\"b\" /* all */])([i,s]);this._graphicStore.addOrModify(t,a,r)}async _addOrUpdateGraphic(t,e){const i=this._projectAndNormalizeGeometry(t),s=this._getSymbolResources(t,e);try{const[e,r]=await Object(promiseUtils[\"b\" /* all */])([i,s]);this._addProjectedGraphic(t,r,e)}catch(t){if(!Object(promiseUtils[\"n\" /* isAbortError */])(t))throw t}}_addProjectedGraphic(t,e,i){this._graphicsSet.has(t)&&this._graphicStore.addOrModify(t,e,i)}_addTile(t){const e=Object(aaBoundingRect[\"d\" /* create */])();this.view.featuresTilingScheme.getTileBounds(e,t);const i=new WGLTile[\"a\" /* WGLTile */](t,e,!0);return this._tiles.set(t,i),this.container.addChild(i),i}_addNewTile(t,e){const i=this._addTile(t.key),s=this._graphicStore.queryTileData(this._templateStore,t);if(e){const i=Math.round((e.valid[1]-e.valid[0])/t.resolution);for(const t of s)t.geometry&&Object(jsonUtils[\"f\" /* isPoint */])(t.geometry)&&this._wrapPoints(t,i)}const r=t.key;this._tileUpdateSet.add(t.key),this.notifyChange(\"updating\"),this._processGraphics(s).then((t=>{const e={type:\"update\",clear:!0,addOrUpdate:t,remove:[],end:!0};i.setData(e),this._tileUpdateSet.delete(r),this.notifyChange(\"updating\")})).catch((t=>{if(this._tileUpdateSet.delete(r),this.notifyChange(\"updating\"),!Object(promiseUtils[\"n\" /* isAbortError */])(t))throw t}))}_removeTile(t){if(!this._tiles.has(t))return;const e=this._tiles.get(t);this.container.removeChild(e),e.destroy(),this._tiles.delete(t)}_setFilterState(t,e){const i=this._displayIds.get(t),s=this._attributeStore.getHighlightFlag(t);this._attributeStore.setData(i,0,0,s|(e?definitions[\"i\" /* FILTER_FLAG_0 */]:0))}_getGraphicsData(t,e,i){const s=Object(spatialReferenceUtils[\"d\" /* getInfo */])(this.view.spatialReference),r=this._graphicStore.getGraphicsData(t,e,i);if(s){const t=Math.round((s.valid[1]-s.valid[0])/e.resolution);for(const e of r)e.geometry&&Object(jsonUtils[\"f\" /* isPoint */])(e.geometry)&&this._wrapPoints(e,t)}return r}_wrapPoints(t,e){const i=t.geometry;512===e?i.x<20?t.geometry={points:[[i.x,i.y],[e,0]]}:i.x>492&&(t.geometry={points:[[i.x,i.y],[-e,0]]}):i.x<-20?t.geometry={points:[[i.x,i.y],[e,0]]}:i.x>532&&(t.geometry={points:[[i.x,i.y],[-e,0]]})}async _processGraphics(t,e){if(!(t&&t.length)||!this._meshFactory)return null;const i=GraphicsReader_s.from(t),s=this._meshFactory;return await s.analyzeGraphics(i,await this._matcher,null,null,e),this._attributeStore.sendUpdates(),this._processAnalyzedGraphics(i)}_processAnalyzedGraphics(t){const e=this._meshFactory,i=e.createMeshData(t.getApproximateSize()),s=t.getCursor();for(;s.next();){const t=s.readGraphic();t.insertAfter=-1===t.insertAfter?-1:this._displayIds.get(t.insertAfter),t.displayId=this._displayIds.get(t.attributes[this.uid]),e.writeGraphic(i,s)}const r={};return i.encode(r,[]),TileData[\"a\" /* TileData */].decode(r)}_abortProcessingGraphic(t){if(this._graphicIdToAbortController.has(t)){this._graphicIdToAbortController.get(t).abort()}}_getNullSymbol(t){const e=t.geometry;return Object(jsonUtils[\"h\" /* isPolyline */])(e)?defaults[\"d\" /* errorPolylineSymbol2D */]:Object(jsonUtils[\"g\" /* isPolygon */])(e)||Object(jsonUtils[\"d\" /* isExtent */])(e)?defaults[\"c\" /* errorPolygonSymbol2D */]:defaults[\"b\" /* errorPointSymbol2D */]}_flipUpdatingGraphics(){this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout((()=>{this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")}),160),this.notifyChange(\"updating\")}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({constructOnly:!0})],K.prototype,\"requestUpdateCallback\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({constructOnly:!0})],K.prototype,\"graphics\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],K.prototype,\"updating\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],K.prototype,\"view\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],K.prototype,\"updateRequested\",void 0),K=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.2d.layers.support.GraphicsView2D\")],K);var Q=K;/* harmony default export */ var GraphicsView2D = __webpack_exports__[\"a\"] = (Q);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}