{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{\"5LEI\":function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return l}),i(\"wSAH\");var s=i(\"HJJS\"),r=i(\"rlSK\"),a=i(\"jHF5\"),n=i(\"fEsP\");class l extends n.a{constructor(e,t,i,s=i){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(a.b)(),tileMat3:Object(a.b)()},this.triangleCount=0,this.key=new r.a(e),this.bounds=t,this.size=i,this.coordRange=s}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const i=t/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[a,n]=e.toScreenNoRotation([0,0],this.coords),l=this.size[0]/this.coordRange[0]*i,o=this.size[1]/this.coordRange[1]*i;Object(s.i)(r,l,0,0,0,o,0,a,n,1),Object(s.f)(this.transforms.dvs,e.displayViewMat3,r)}}},\"6UvW\":function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return n});var s=i(\"srIe\"),r=i(\"OvF4\"),a=(i(\"4GrV\"),i(\"gEht\"));function n(e,t,i,n=new r.a){let l;if(\"2d\"===i.type)l=t*i.resolution;else if(\"3d\"===i.type){const r=i.overlayPixelSizeInMapUnits(e),n=i.basemapSpatialReference;l=Object(s.h)(n)&&!n.equals(i.spatialReference)?Object(a.c)(n)/Object(a.c)(i.spatialReference):t*r}const o=e.x-l,h=e.y-l,u=e.x+l,c=e.y+l,{spatialReference:p}=i;return n.xmin=Math.min(o,u),n.ymin=Math.min(h,c),n.xmax=Math.max(o,u),n.ymax=Math.max(h,c),n.spatialReference=p,n}i(\"U282\"),new r.a},NloG:function(e,t,i){\"use strict\";var s=i(\"pO5D\"),r=(i(\"wSAH\"),i(\"6S2I\")),a=(i(\"zqDF\"),i(\"WbKI\")),n=i(\"04ZG\"),l=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"/CmD\")),o=i(\"zm0L\"),h=i(\"pdg3\"),u=i(\"+rMe\"),c=i(\"kJYu\");let p=class extends(Object(c.b)(Object(h.a)(Object(u.b)(o.a.EventedMixin(l.a))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",i=this.layer&&this.layer.title||\"no title\";throw r.a.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}})}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(s.a)([Object(a.b)({dependsOn:[\"layer.opacity\",\"parent.fullOpacity\"]})],p.prototype,\"fullOpacity\",null),Object(s.a)([Object(a.b)()],p.prototype,\"layer\",void 0),Object(s.a)([Object(a.b)()],p.prototype,\"parent\",void 0),Object(s.a)([Object(a.b)({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],p.prototype,\"suspended\",null),Object(s.a)([Object(a.b)({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],p.prototype,\"suspendInfo\",null),Object(s.a)([Object(a.b)({readOnly:!0,dependsOn:[\"suspended\",\"layer.legendEnabled?\"]})],p.prototype,\"legendEnabled\",null),Object(s.a)([Object(a.b)({type:Boolean,dependsOn:[\"updatingHandles.updating\"],readOnly:!0})],p.prototype,\"updating\",null),Object(s.a)([Object(a.b)({dependsOn:[\"layer.visible\"]})],p.prototype,\"visible\",null),p=Object(s.a)([Object(n.a)(\"esri.views.layers.LayerView\")],p),t.a=p},Piei:function(e,t,i){\"use strict\";var s,r=i(\"pO5D\"),a=(i(\"wSAH\"),i(\"f/qv\")),n=i(\"srIe\"),l=i(\"6S2I\"),o=i(\"WbKI\"),h=i(\"Gj5k\"),u=i(\"04ZG\"),c=i(\"zlDU\"),p=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"ag7Y\"));const d=l.a.getLogger(\"esri.layers.support.PixelBlock\");let f=s=class extends p.a{constructor(e){super(e),this.width=null,this.height=null,this.pixelType=\"f32\",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.pixels=null,this.statistics=null}static createEmptyBand(e,t){return new(s.getPixelArrayConstructor(e))(t)}static getPixelArrayConstructor(e){let t;switch(e){case\"u1\":case\"u2\":case\"u4\":case\"u8\":t=Uint8Array;break;case\"u16\":t=Uint16Array;break;case\"u32\":t=Uint32Array;break;case\"s8\":t=Int8Array;break;case\"s16\":t=Int16Array;break;case\"s32\":t=Int32Array;break;case\"u32\":t=Uint32Array;break;case\"f32\":t=Float32Array;break;case\"f64\":t=Float64Array;break;case\"c64\":case\"c128\":case\"unknown\":t=Float32Array}return t}castPixelType(e){if(!e)return\"f32\";let t=e.toLowerCase();return[\"u1\",\"u2\",\"u4\"].indexOf(t)>-1?t=\"u8\":-1===[\"unknown\",\"u8\",\"s8\",\"u16\",\"s16\",\"u32\",\"s32\",\"f32\",\"f64\"].indexOf(t)&&(t=\"f32\"),t}getPlaneCount(){return this.pixels&&this.pixels.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new c.a(\"pixelblock:invalid-or-missing-pixels\",\"add data requires valid pixels array that has same length defined by pixel block width * height\");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case\"s8\":case\"s16\":case\"u16\":case\"s32\":case\"u32\":case\"f32\":case\"f64\":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){this.statistics=this.pixels.map(e=>this._calculateBandStatistics(e,this.mask));const e=this.mask;let t=0;if(e)for(let i=0;i<e.length;i++)e[i]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||\"f64\"===e||\"f32\"===e)return;let t;switch(e){case\"u8\":t=[0,255];break;case\"u16\":t=[0,65535];break;case\"u32\":t=[0,4294967295];break;case\"s8\":t=[-128,127];break;case\"s16\":t=[-32768,32767];break;case\"s32\":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}const[i,r]=t,a=this.pixels,n=this.width*this.height,l=a.length;let o,h,u;const c=[];for(let p=0;p<l;p++){u=s.createEmptyBand(e,n),o=a[p];for(let e=0;e<n;e++)h=o[e],u[e]=h>r?r:h<i?i:h;c.push(u)}this.pixels=c,this.pixelType=e}extractBands(e){if(Object(n.g)(e)||0===e.length||null==this.pixels||0===this.pixels.length)return this;const t=this.pixels.length,i=e.some(e=>e>=this.pixels.length),r=t===e.length&&!e.some((e,t)=>e!==t);return i||r?this:new s({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map(e=>this.pixels[e]),statistics:this.statistics&&e.map(e=>this.statistics[e])})}clone(){const e=new s({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask&&(e.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));const i=s.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const s=this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=s?this.pixels[t].slice(0,this.pixels[t].length):new i(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=Object(a.a)(this.statistics[t]);return e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:i,pixels:s}=this;if(!e||!s||!s.length)return void d.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The input pixel block is empty.\");let r,a,n,l;r=a=n=s[0],s.length>=3?(a=s[1],n=s[2]):2===s.length&&(a=s[1]);const o=new Uint32Array(e),h=this.width*this.height;if(r.length===h)if(t&&t.length===h)if(i)for(l=0;l<h;l++)t[l]&&(o[l]=t[l]<<24|n[l]<<16|a[l]<<8|r[l]);else for(l=0;l<h;l++)t[l]&&(o[l]=255<<24|n[l]<<16|a[l]<<8|r[l]);else for(l=0;l<h;l++)o[l]=255<<24|n[l]<<16|a[l]<<8|r[l];else d.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The pixelblock is invalid.\")}_fillFromNon8Bit(e){const{pixels:t,mask:i,statistics:s}=this;if(!e||!t||!t.length)return void d.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The input pixel block is empty.\");const r=this.pixelType;let a=1,n=0,l=1;if(s&&s.length>0)n=s.map(e=>e.minValue).reduce((e,t)=>Math.min(e,t)),l=s.map(e=>e.maxValue-e.minValue).reduce((e,t)=>Math.max(e,t)),a=255/l;else{let e=255;\"s8\"===r?(n=-128,e=127):\"u16\"===r?e=65535:\"s16\"===r?(n=-32768,e=32767):\"u32\"===r?e=4294967295:\"s32\"===r?(n=-2147483648,e=2147483647):\"f32\"===r?(n=-34e38,e=34e38):\"f64\"===r&&(n=-Number.MAX_VALUE,e=Number.MAX_VALUE),a=255/(e-n)}const o=new Uint32Array(e),h=this.width*this.height;let u,c,p,f,m;if(u=c=p=t[0],u.length!==h)return d.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The pixelblock is invalid.\");if(t.length>=2)if(c=t[1],t.length>=3&&(p=t[2]),i&&i.length===h)for(f=0;f<h;f++)i[f]&&(o[f]=255<<24|(p[f]-n)*a<<16|(c[f]-n)*a<<8|(u[f]-n)*a);else for(f=0;f<h;f++)o[f]=255<<24|(p[f]-n)*a<<16|(c[f]-n)*a<<8|(u[f]-n)*a;else if(i&&i.length===h)for(f=0;f<h;f++)m=(u[f]-n)*a,i[f]&&(o[f]=255<<24|m<<16|m<<8|m);else for(f=0;f<h;f++)m=(u[f]-n)*a,o[f]=255<<24|m<<16|m<<8|m}_fillFrom32Bit(e){const{pixels:t,mask:i}=this;if(!e||!t||!t.length)return d.error(\"getAsRGBAFloat()\",\"Unable to convert to RGBA. The input pixel block is empty.\");let s,r,a,n;s=r=a=t[0],t.length>=3?(r=t[1],a=t[2]):2===t.length&&(r=t[1]);const l=this.width*this.height;if(s.length!==l)return d.error(\"getAsRGBAFloat()\",\"Unable to convert to RGBA. The pixelblock is invalid.\");let o=0;if(i&&i.length===l)for(n=0;n<l;n++)e[o++]=s[n],e[o++]=r[n],e[o++]=a[n],e[o++]=1&i[n];else for(n=0;n<l;n++)e[o++]=s[n],e[o++]=r[n],e[o++]=a[n],e[o++]=1}_calculateBandStatistics(e,t){let i=1/0,s=-1/0;const r=e.length;let a,n=0;if(t)for(a=0;a<r;a++)t[a]&&(n=e[a],i=n<i?n:i,s=n>s?n:s);else for(a=0;a<r;a++)n=e[a],i=n<i?n:i,s=n>s?n:s;return{minValue:i,maxValue:s}}};Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"width\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"height\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"pixelType\",void 0),Object(r.a)([Object(h.a)(\"pixelType\")],f.prototype,\"castPixelType\",null),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"validPixelCount\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"mask\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"maskIsAlpha\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"pixels\",void 0),Object(r.a)([Object(o.b)({json:{write:!0}})],f.prototype,\"statistics\",void 0),f=s=Object(r.a)([Object(u.a)(\"esri.layers.support.PixelBlock\")],f),t.a=f},U282:function(e,t,i){\"use strict\";function s(e,t){return t?\"xoffset\"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):\"yoffset\"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return\"number\"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,i=0;for(let s=0;s<e.length;s++){const r=e[s].size;\"number\"==typeof r&&(t+=r,i++)}return t/i}(e.stops):t}function a(e){const t=e&&e.renderer,i=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;const a=\"visualVariables\"in t?function(e,t){if(!t)return e;const i=t.filter(e=>\"size\"===e.type).map(t=>{const{maxSize:i,minSize:s}=t;return(r(i,e)+r(s,e))/2});let s=0;const a=i.length;if(0===a)return e;for(let r=0;r<a;r++)s+=i[r];const n=Math.floor(s/a);return Math.max(n,e)}(i,t.visualVariables):i;if(\"simple\"===t.type)return s(a,t.symbol);if(\"unique-value\"===t.type){let e=a;return t.uniqueValueInfos.forEach(t=>{e=s(e,t.symbol)}),e}if(\"class-breaks\"===t.type){let e=a;return t.classBreakInfos.forEach(t=>{e=s(e,t.symbol)}),e}return a}i.d(t,\"a\",function(){return a})},Vm2Q:function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return I});var s=i(\"pO5D\"),r=(i(\"wSAH\"),i(\"6S2I\"),i(\"zqDF\"),i(\"WbKI\")),a=i(\"04ZG\"),n=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"LE9a\")),l=i(\"fX31\"),o=i(\"N5XI\"),h=i(\"ag7Y\");let u=class extends h.a{};u=Object(s.a)([Object(a.a)(\"esri.views.layers.support.ClipArea\")],u);var c,p=u;let d=c=class extends p{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new c({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};Object(s.a)([Object(r.b)({type:[Number,String],json:{write:!0}})],d.prototype,\"left\",void 0),Object(s.a)([Object(r.b)({type:[Number,String],json:{write:!0}})],d.prototype,\"right\",void 0),Object(s.a)([Object(r.b)({type:[Number,String],json:{write:!0}})],d.prototype,\"top\",void 0),Object(s.a)([Object(r.b)({type:[Number,String],json:{write:!0}})],d.prototype,\"bottom\",void 0),Object(s.a)([Object(r.b)({readOnly:!0,dependsOn:[\"left\",\"right\",\"top\",\"bottom\"]})],d.prototype,\"version\",null),d=c=Object(s.a)([Object(a.a)(\"esri.views.layers.support.ClipRect\")],d);var f,m=d,b=i(\"AMBt\"),y=i(\"N2DF\"),g=i(\"OvF4\"),x=i(\"Ehki\"),w=i(\"qatw\");i(\"4GrV\");const _={base:y.a,key:\"type\",typeMap:{extent:g.a,polygon:x.a}};let O=f=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new f({geometry:this.geometry.clone()})}};Object(s.a)([Object(r.b)({types:_,json:{read:w.a,write:!0}})],O.prototype,\"geometry\",void 0),Object(s.a)([Object(r.b)({readOnly:!0,dependsOn:[\"geometry\"]})],O.prototype,\"version\",null),O=f=Object(s.a)([Object(a.a)(\"esri.views.layers.support.Geometry\")],O);var v=O;let j=class extends p{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};Object(s.a)([Object(r.b)({type:[[[Number]]],json:{write:!0}})],j.prototype,\"path\",void 0),Object(s.a)([Object(r.b)({readOnly:!0,dependsOn:[\"path\"]})],j.prototype,\"version\",null),j=Object(s.a)([Object(a.a)(\"esri.views.layers.support.Path\")],j);const T=n.a.ofType({key:\"type\",base:p,typeMap:{rect:m,path:j,geometry:v}}),I=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new T,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new b.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(o.a)(this,\"suspended\",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(o.a)(this,[\"layer.opacity\",\"container\"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(o.a)(this,[\"layer.blendMode\"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(o.a)(this,[\"layer.effect\"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on(\"change\",()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(e){let t=!0;const i=this.layer,s=i.minScale,r=i.maxScale;if(null!=s&&null!=r){let i=!s,a=!r;!i&&e<=s&&(i=!0),!a&&e>=r&&(a=!0),t=i&&a}return t}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(s.a)([Object(r.b)({type:T,set(e){const t=Object(l.b)(e,this._get(\"clips\"),T);this._set(\"clips\",t)}})],t.prototype,\"clips\",void 0),Object(s.a)([Object(r.b)()],t.prototype,\"moving\",void 0),Object(s.a)([Object(r.b)()],t.prototype,\"attached\",void 0),Object(s.a)([Object(r.b)()],t.prototype,\"container\",void 0),Object(s.a)([Object(r.b)({dependsOn:[\"view.scale\",\"layer.minScale\",\"layer.maxScale\"]})],t.prototype,\"suspended\",void 0),Object(s.a)([Object(r.b)({readOnly:!0})],t.prototype,\"updateParameters\",void 0),Object(s.a)([Object(r.b)()],t.prototype,\"updateRequested\",void 0),Object(s.a)([Object(r.b)({dependsOn:[\"attached\",\"updateRequested\",\"suspended\"]})],t.prototype,\"updating\",null),Object(s.a)([Object(r.b)()],t.prototype,\"view\",void 0),t=Object(s.a)([Object(a.a)(\"esri.views.2d.layers.LayerView2D\")],t),t}},ZyIX:function(e,t,i){\"use strict\";var s=i(\"yE7X\"),r=i(\"b3VY\"),a=i(\"7F7D\"),n=i(\"mgI5\");const l=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;t.a=class extends n.a{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(l),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(t.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(t.scale)}}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"stencil\",brushes:[a.a],drawPhase:s.c.DEBUG|s.c.MAP|s.c.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=e.registerRenderPass({name:\"tileInfo\",brushes:[r.a],drawPhase:s.c.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(e),t,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},ne7T:function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return T}),i.d(t,\"b\",function(){return l}),i.d(t,\"c\",function(){return n}),i.d(t,\"d\",function(){return u}),i.d(t,\"e\",function(){return h}),i.d(t,\"f\",function(){return o}),i.d(t,\"g\",function(){return a}),i.d(t,\"h\",function(){return p}),i.d(t,\"i\",function(){return b}),i.d(t,\"j\",function(){return m}),i.d(t,\"k\",function(){return d}),i.d(t,\"l\",function(){return y}),i.d(t,\"m\",function(){return j}),i.d(t,\"n\",function(){return c});var s=i(\"Piei\");const r=function(e){return e&&\"esri.layers.support.PixelBlock\"===e.declaredClass&&e.pixels&&e.pixels.length>0};function a(e,t){if(!t||!r(e))return e;const i=e.pixels.length;return t&&t.some(e=>e>=i)||1===i&&1===t.length&&0===t[0]?e:i!==t.length||t.some((e,t)=>e!==t)?new s.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map(t=>e.pixels[t]),statistics:e.statistics&&t.map(t=>e.statistics[t])}):e}function n(e){if(!e)return;const t=e.colormap;if(!t||0===t.length)return;const i=t.sort((e,t)=>e[0]-t[0]);let s=0;i[0][0]<0&&(s=i[0][0]);const r=Math.max(256,i[i.length-1][0]-s+1),a=new Uint8Array(4*r),n=[];let l,o=0,h=0;const u=5===i[0].length;if(r>65536)return i.forEach(e=>{n[e[0]-s]=u?e.slice(1):e.slice(1).concat([255])}),{indexed2DColormap:n,offset:s,alphaSpecified:u};if(e.fillUnspecified)for(l=i[h],o=l[0]-s;o<r;o++)a[4*o]=l[1],a[4*o+1]=l[2],a[4*o+2]=l[3],a[4*o+3]=u?l[4]:255,o===l[0]-s&&(l=h===i.length-1?l:i[++h]);else for(o=0;o<i.length;o++)l=i[o],h=4*(l[0]-s),a[h]=l[1],a[h+1]=l[2],a[h+2]=l[3],a[h+3]=u?l[4]:255;return{indexedColormap:a,offset:s,alphaSpecified:u}}function l(e,t){if(!r(e))return e;if(!t&&(t.indexedColormap||t.indexed2DColormap))return e;const i=e.clone(),s=i.pixels;let a=i.mask;const n=i.width*i.height;if(1!==s.length)return e;const{indexedColormap:l,indexed2DColormap:o,offset:h,alphaSpecified:u}=t,c=l.length-1;let p=0;const d=s[0],f=new Uint8Array(d.length),m=new Uint8Array(d.length),b=new Uint8Array(d.length);let y,g=0;if(l)if(a)for(p=0;p<n;p++)a[p]&&(g=4*(d[p]-h),g<h||g>c?a[p]=0:(f[p]=l[g],m[p]=l[g+1],b[p]=l[g+2],a[p]=l[g+3]));else{for(a=new Uint8Array(n),p=0;p<n;p++)g=4*(d[p]-h),g<h||g>c?a[p]=0:(f[p]=l[g],m[p]=l[g+1],b[p]=l[g+2],a[p]=l[g+3]);i.mask=a}else if(a)for(p=0;p<n;p++)a[p]&&(y=o[d[p]],f[p]=y[0],m[p]=y[1],b[p]=y[2],a[p]=y[3]);else{for(a=new Uint8Array(n),p=0;p<n;p++)y=o[d[p]],f[p]=y[0],m[p]=y[1],b[p]=y[2],a[p]=y[3];i.mask=a}return i.pixels=[f,m,b],i.statistics=null,i.pixelType=\"u8\",i.maskIsAlpha=u,i}function o(e){if(!r(e))return null;e.statistics||e.updateStatistics();const{pixels:t,mask:i,pixelType:s,statistics:a}=e,n=e.width*e.height,l=t.length;let o,h,u,c,p;const d=[],f=[];let m,b,y,g,x,w,_,O,v,j;const T=256;for(c=0;c<l;c++){if(m=new Uint32Array(T),y=t[c],\"u8\"===s)if(o=-.5,h=255.5,i)for(p=0;p<n;p++)i[p]&&m[y[p]]++;else for(p=0;p<n;p++)m[y[p]]++;else{if(o=a[c].minValue,h=a[c].maxValue,u=(h-o)/T,b=new Uint32Array(257),i)for(p=0;p<n;p++)i[p]&&b[Math.floor((y[p]-o)/u)]++;else for(p=0;p<n;p++)b[Math.floor((y[p]-o)/u)]++;for(p=0;p<255;p++)m[p]=b[p];m[255]=b[255]+b[256]}for(d.push({min:o,max:h,size:T,counts:m}),g=0,x=0,O=0,p=0;p<T;p++)g+=m[p],x+=p*m[p];for(v=x/g,p=0;p<T;p++)O+=m[p]*Math.pow(p-v,2);j=Math.sqrt(O/(g-1)),u=(h-o)/T,w=(v+.5)*u+o,_=j*u,f.push({min:o,max:h,avg:w,stddev:_})}return{statistics:f,histograms:d}}function h(e){const t=[];for(let i=0;i<e.length;i++){const{min:s,max:r,size:a,counts:n}=e[i];let l=0,o=0;for(let e=0;e<a;e++)l+=n[e],o+=e*n[e];const h=o/l;let u=0;for(let e=0;e<a;e++)u+=n[e]*Math.pow(e-h,2);const c=(r-s)/a,p=(h+.5)*c+s,d=Math.sqrt(u/(l-1))*c;t.push({min:s,max:r,avg:p,stddev:d})}return t}function u(e){const{minCutOff:t,maxCutOff:i,gamma:s,pixelType:r}=e,a=e.outMin||0,n=e.outMax||255;if(-1===[\"u8\",\"u16\",\"s8\",\"s16\"].indexOf(r))return null;const l=t.length;let o,h,u=0;\"s8\"===r?u=-127:\"s16\"===r&&(u=-32767);let c=256;[\"u16\",\"s16\"].indexOf(r)>-1&&(c=65536);const p=[],d=[],f=n-a;for(o=0;o<l;o++)d[o]=i[o]-t[o],p[o]=f/(i[o]-t[o]);const m=s&&s.length>=l,b=[];if(m)for(o=0;o<l;o++)b[o]=s[o]>1?s[o]>2?6.5+Math.pow(s[o]-2,2.5):6.5+100*Math.pow(2-s[o],4):1;let y;const g=[];let x,w,_;if(m)for(o=0;o<l;o++){for(_=[],h=0;h<c;h++)x=h+u,y=(x-t[o])/d[o],w=1,s[o]>1&&(w-=Math.pow(1/f,y*b[o])),_[h]=x<i[o]&&x>t[o]?Math.floor(w*f*Math.pow(y,1/s[o]))+a:x>=i[o]?n:a;g[o]=_}else for(o=0;o<l;o++){for(_=[],h=0;h<c;h++)x=h+u,_[h]=x<=t[o]?a:x>=i[o]?n:Math.floor((x-t[o])/d[o]*f)+a;g[o]=_}if(null!=e.contrastOffset){const t=function(e,t){const i=Math.min(Math.max(e,-100),100),s=Math.min(Math.max(t,-100),100);let r,a;const n=new Uint8Array(256);for(r=0;r<256;r++)i>0&&i<100?a=(200*r-25500+510*s)/(2*(100-i))+128:i<=0&&i>-100?a=(200*r-25500+510*s)*(100+i)/2e4+128:100===i?(a=200*r-25500+256*(100-i)+510*s,a=a>0?255:0):-100===i&&(a=128),n[r]=a>255?255:a<0?0:a;return n}(e.contrastOffset,e.brightnessOffset);for(o=0;o<l;o++)for(_=g[o],h=0;h<c;h++)_[h]=t[_[h]]}return{lut:g,offset:u}}function c(e,t){if(!r(e))return null;const i=e.clone(),{pixels:s,mask:a}=i,{minCutOff:n,maxCutOff:l,gamma:o}=t,h=t.outMin||0,u=t.outMax||255,c=i.width*i.height,p=s.length;let d,f,m,b,y;const g=u-h,x=[],w=[];for(d=0;d<p;d++)w[d]=l[d]-n[d],x[d]=g/(l[d]-n[d]);const _=o&&o.length>=p,O=[];if(_)for(d=0;d<p;d++)O[d]=o[d]>1?o[d]>2?6.5+Math.pow(o[d]-2,2.5):6.5+100*Math.pow(2-o[d],4):1;if(_)if(null!=a){for(f=0;f<c;f++)if(a[f])for(d=0;d<p;d++)m=s[d][f],y=(m-n[d])/w[d],b=1,o[d]>1&&(b-=Math.pow(1/g,y*O[d])),s[d][f]=m<l[d]&&m>n[d]?Math.floor(b*g*Math.pow(y,1/o[d]))+h:m>=l[d]?u:h}else for(f=0;f<c;f++)for(d=0;d<p;d++)m=s[d][f],y=(m-n[d])/w[d],b=1,o[d]>1&&(b-=Math.pow(1/g,y*O[d])),s[d][f]=m<l[d]&&m>n[d]?Math.floor(b*g*Math.pow(y,1/o[d]))+h:m>=l[d]?u:h;else if(null!=a){for(f=0;f<c;f++)if(a[f])for(d=0;d<p;d++)m=s[d][f],s[d][f]=m<l[d]&&m>n[d]?Math.floor((m-n[d])/w[d]*g)+h:m>=l[d]?u:h}else for(f=0;f<c;f++)for(d=0;d<p;d++)m=s[d][f],s[d][f]=m<l[d]&&m>n[d]?Math.floor((m-n[d])/w[d]*g)+h:m>=l[d]?u:h;return i.pixelType=\"u8\",i.updateStatistics(),i}function p(e,t){if(!r(e))return null;const{pixels:i,mask:a}=e,n=e.width*e.height,l=i.length;let o=t.lut;const{offset:h}=t;let u,c;o&&1===o[0].length&&(o=i.map(()=>o));const p=[];let d,f,m;if(h)if(null==a)for(u=0;u<l;u++){for(d=i[u],f=o[u],m=new Uint8Array(n),c=0;c<n;c++)m[c]=f[d[c]-h];p.push(m)}else for(u=0;u<l;u++){for(d=i[u],f=o[u],m=new Uint8Array(n),c=0;c<n;c++)a[c]&&(m[c]=f[d[c]-h]);p.push(m)}else if(null==a)for(u=0;u<l;u++){for(d=i[u],f=o[u],m=new Uint8Array(n),c=0;c<n;c++)m[c]=f[d[c]];p.push(m)}else for(u=0;u<l;u++){for(d=i[u],f=o[u],m=new Uint8Array(n),c=0;c<n;c++)a[c]&&(m[c]=f[d[c]]);p.push(m)}const b=new s.a({width:e.width,height:e.height,pixels:p,mask:a,pixelType:\"u8\"});return b.updateStatistics(),b}function d(e,t){if(!r(e))return null;const i=e.clone(),{pixels:s}=i,a=i.width*i.height,n=t.length,l=Math.floor(n/2),o=t[Math.floor(l)],h=s[0];let u,c,p,d,f,m,b=!1;const y=new Uint8Array(a),g=new Uint8Array(a),x=new Uint8Array(a);let w=i.mask;const _=4===t[0].mappedColor.length;for(w||(w=new Uint8Array(a),w.fill(_?255:1),i.mask=w),f=0;f<a;f++)if(w[f]){for(u=h[f],b=!1,m=l,c=o,p=0,d=n-1;d-p>1;){if(u===c.value){b=!0;break}u>c.value?p=m:d=m,m=Math.floor((p+d)/2),c=t[Math.floor(m)]}b||(u===t[p].value?(c=t[p],b=!0):u===t[d].value?(c=t[d],b=!0):u<t[p].value?(b=!1,c=null):u>t[p].value&&(u<t[d].value?(c=t[p],b=!0):d===n-1?(b=!1,c=null):(c=t[d],b=!0))),b?(y[f]=c.mappedColor[0],g[f]=c.mappedColor[1],x[f]=c.mappedColor[2],w[f]=c.mappedColor[3]):y[f]=g[f]=x[f]=w[f]=0}return i.pixels=[y,g,x],i.mask=w,i.pixelType=\"u8\",i.maskIsAlpha=_,i}function f(e,t,i,s,r,a,n,l){return{xmin:r<=i*e?0:r<i*e+e?r-i*e:e,ymin:a<=s*t?0:a<s*t+t?a-s*t:t,xmax:r+n<=i*e?0:r+n<i*e+e?r+n-i*e:e,ymax:a+l<=s*t?0:a+l<s*t+t?a+l-s*t:t}}function m(e,t){if(!e||0===e.length)return null;const i=e.filter(e=>e.pixelBlock)[0];if(!i)return null;const s=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,r=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,a=.01*Math.min(s,r),n=e.sort((e,t)=>Math.abs(e.extent.ymax-t.extent.ymax)>a?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>a?e.extent.xmin-t.extent.xmin:0),l=Math.min.apply(null,n.map(e=>e.extent.xmin)),o=Math.min.apply(null,n.map(e=>e.extent.ymin)),h=Math.max.apply(null,n.map(e=>e.extent.xmax)),u=Math.max.apply(null,n.map(e=>e.extent.ymax)),c={x:Math.round((t.xmin-l)/s),y:Math.round((u-t.ymax)/r)},p={width:Math.round((h-l)/s),height:Math.round((u-o)/r)},d={width:Math.round((t.xmax-t.xmin)/s),height:Math.round((t.ymax-t.ymin)/r)};return Math.round(p.width/i.pixelBlock.width)*Math.round(p.height/i.pixelBlock.height)!==n.length||c.x<0||c.y<0||p.width<d.width||p.height<d.height?null:{extent:t,pixelBlock:b(n.map(e=>e.pixelBlock),p,c,d)}}function b(e,t,i,a){const n=e.filter(e=>r(e))[0];if(null==n)return null;const l=a?a.width:t.width,o=a?a.height:t.height,h=n.width,u=n.height,c=t.width/h,p=t.height/u,d=i?i.x:0,m=i?i.y:0,b=n.pixelType,y=s.a.getPixelArrayConstructor(b),g=n.pixels.length,x=[];let w,_,O,v,j,T,I,k,R,P,U,M,A;for(T=0;T<g;T++){for(_=new y(l*o),I=0;I<p;I++)for(k=0;k<c;k++)if(O=e[I*c+k],O)for(w=O.pixels[T],U=f(h,u,k,I,d,m,l,o),R=U.ymin;R<U.ymax;R++)for(v=(I*u+R-m)*l+(k*h-d),j=R*h,P=U.xmin;P<U.xmax;P++)_[v+P]=w[j+P];x.push(_)}if(e.some(e=>null==e||e.mask&&e.mask.length>0))for(M=new Uint8Array(l*o),I=0;I<p;I++)for(k=0;k<c;k++)if(O=e[I*c+k],A=O?O.mask:null,U=f(h,u,k,I,d,m,l,o),A)for(R=U.ymin;R<U.ymax;R++)for(v=(I*u+R-m)*l+(k*h-d),j=R*h,P=U.xmin;P<U.xmax;P++)M[v+P]=A[j+P];else if(O)for(R=U.ymin;R<U.ymax;R++)for(v=(I*u+R-m)*l+(k*h-d),j=R*h,P=U.xmin;P<U.xmax;P++)M[v+P]=1;else for(R=U.ymin;R<U.ymax;R++)for(v=(I*u+R-m)*l+(k*h-d),j=R*h,P=U.xmin;P<U.xmax;P++)M[v+P]=0;const S=new s.a({width:l,height:o,pixels:x,pixelType:b,mask:M});return S.updateStatistics(),S}function y(e,t,i){if(!r(e))return null;const{width:s,height:a}=e,n=t.x,l=t.y,o=i.width+n,h=i.height+l;if(n<0||l<0||o>s||h>a)return e;if(0===n&&0===l&&o===s&&h===a)return e;e.mask||(e.mask=new Uint8Array(s*a));const u=e.mask;for(let r=0;r<a;r++){const e=r*s;for(let t=0;t<s;t++)u[e+t]=r<l||r>=h||t<n||t>=o?0:1}return e.updateStatistics(),e}function g(e){if(!r(e))return null;const t=e.clone(),{width:i,height:s,pixels:a,mask:n}=e,l=a[0],o=t.pixels[0];for(let r=2;r<s-1;r++){const e=new Map;for(let s=r-2;s<r+2;s++)for(let t=0;t<4;t++){const r=s*i+t;_(e,l[r],n?n[r]:1)}o[r*i]=x(e),o[r*i+1]=o[r*i+2]=o[r*i];let t=3;for(;t<i-1;t++){let s=(r-2)*i+t+1;_(e,l[s],n?n[s]:1),s=(r-1)*i+t+1,_(e,l[s],n?n[s]:1),s=r*i+t+1,_(e,l[s],n?n[s]:1),s=(r+1)*i+t+1,_(e,l[s],n?n[s]:1),s=(r-2)*i+t-3,w(e,l[s],n?n[s]:1),s=(r-1)*i+t-3,w(e,l[s],n?n[s]:1),s=r*i+t-3,w(e,l[s],n?n[s]:1),s=(r+1)*i+t-3,w(e,l[s],n?n[s]:1),o[r*i+t]=x(e)}o[r*i+t+1]=o[r*i+t]}for(let r=0;r<i;r++)o[r]=o[i+r]=o[2*i+r],o[(s-1)*i+r]=o[(s-2)*i+r];return t.updateStatistics(),t}function x(e){if(0===e.size)return 0;let t=0,i=-1,s=0;const r=e.keys();let a=r.next();for(;!a.done;)s=e.get(a.value),s>t&&(i=a.value,t=s),a=r.next();return i}function w(e,t,i){if(0===i)return;const s=e.get(t);1===s?e.delete(t):e.set(t,s-1)}function _(e,t,i){0!==i&&e.set(t,e.has(t)?e.get(t)+1:1)}function O(e,t,i){let{x:a,y:n}=t;const{width:l,height:o}=i;if(0===a&&0===n&&o===e.height&&l===e.width)return e;const{width:h,height:u}=e,c=Math.max(0,n),p=Math.max(0,a),d=Math.min(a+l,h),f=Math.min(n+o,u);if(d<0||f<0||!r(e))return null;a=Math.max(0,-a),n=Math.max(0,-n);const{pixels:m,mask:b}=e,y=l*o,g=m.length,x=[];for(let r=0;r<g;r++){const t=m[r],i=s.a.createEmptyBand(e.pixelType,y);for(let e=c;e<f;e++){const s=e*h;let r=(e+n-c)*l+a;for(let e=p;e<d;e++)i[r++]=t[s+e]}x.push(i)}const w=new Uint8Array(y);for(let s=c;s<f;s++){const e=s*h;let t=(s+n-c)*l+a;for(let i=p;i<d;i++)w[t++]=b?b[e+i]:1}const _=new s.a({width:i.width,height:i.height,pixelType:e.pixelType,pixels:x,mask:w});return _.updateStatistics(),_}function v(e,t=!0){if(!r(e))return null;const{pixels:i,width:a,height:n,mask:l,pixelType:o}=e,h=[],u=Math.round(a/2),c=Math.round(n/2),p=n-1,d=a-1;for(let r=0;r<i.length;r++){const e=i[r],l=s.a.createEmptyBand(o,u*c);let f=0;for(let i=0;i<n;i+=2)for(let s=0;s<a;s+=2){const r=e[i*a+s];if(t){const t=s===d?r:e[i*a+s+1],n=i===p?r:e[i*a+s+a];l[f++]=(r+t+n+(s===d?n:i===p?t:e[i*a+s+a+1]))/4}else l[f++]=r}h.push(l)}let f=null;if(l){f=new Uint8Array(u*c);let e=0;for(let i=0;i<n;i+=2)for(let s=0;s<a;s+=2){const r=l[i*a+s];if(t){const t=s===d?r:l[i*a+s+1],n=i===p?r:l[i*a+s+a];f[e++]=r*t*n*(s===d?n:i===p?t:l[i*a+s+a+1])?1:0}else f[e++]=r}}return new s.a({width:u,height:c,pixelType:o,pixels:h,mask:f})}function j(e,t,i){if(!r(e))return null;const{width:s,height:a}=t;let{width:n,height:l}=e;const o=new Map,h={x:0,y:0},u=null==i?1:1+i;let c=e;for(let r=0;r<u;r++){const e=Math.ceil(n/s),i=Math.ceil(l/a);for(let n=0;n<i;n++){h.y=n*a;for(let i=0;i<e;i++){h.x=i*s;const e=O(c,h,t);o.set(`${r}/${n}/${i}`,e)}}r<u-1&&(c=v(c)),n=Math.round(n/2),l=Math.round(l/2)}return o}function T(e,t,i,a,n=\"nearest\"){if(!r(e))return null;\"majority\"===n&&(e=g(e));const{pixels:l,mask:o,pixelType:h}=e,u=e.width,c=e.height,p=s.a.getPixelArrayConstructor(h),d=l.length,{width:f,height:m}=t,b=a.cols,y=a.rows,x=Math.ceil(f/b),w=Math.ceil(m/y);let _,O,v,j,T,I,k,R=!1;for(let s=0;s<i.length;s+=3)-1===i[s]&&-1===i[s+1]&&-1===i[s+2]&&(R=!0);const P=new Float32Array(f*m),U=new Float32Array(f*m);let M,A,S=0;const C=\"majority\"===n?0:.5;for(let s=0;s<w;s++)for(let e=0;e<x;e++){_=12*(s*x+e),O=i[_],v=i[_+1],j=i[_+2],T=i[_+3],I=i[_+4],k=i[_+5];for(let t=0;t<y;t++){S=(s*y+t)*f+e*b,A=(t+.5)/y;for(let e=0;e<t;e++)M=(e+.5)/b,P[S+e]=Math.round((O*M+v*A+j)*u-C),U[S+e]=Math.round((T*M+I*A+k)*c-C)}_+=6,O=i[_],v=i[_+1],j=i[_+2],T=i[_+3],I=i[_+4],k=i[_+5];for(let t=0;t<y;t++){S=(s*y+t)*f+e*b,A=(t+.5)/y;for(let e=t;e<b;e++)M=(e+.5)/b,P[S+e]=Math.round((O*M+v*A+j)*u-C),U[S+e]=Math.round((T*M+I*A+k)*c-C)}}const B=(e,t)=>{for(let i=0;i<m;i++){_=i*f;for(let i=0;i<f;i++)e[_]=P[_]<0||U[_]<0?0:t[P[_]+U[_]*u],_++}},V=[];let z;for(let s=0;s<d;s++)z=new p(f*m),B(z,l[s]),V.push(z);const G=new s.a({width:f,height:m,pixelType:h,pixels:V});if(o)G.mask=new Uint8Array(f*m),B(G.mask,o);else if(R){G.mask=new Uint8Array(f*m);for(let e=0;e<f*m;e++)G.mask[e]=P[e]<0||U[e]<0?0:1}return G.updateStatistics(),G}},rXMu:function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return n}),i.d(t,\"b\",function(){return a});var s=i(\"srIe\"),r=i(\"wdpY\");async function a(e,t=e.popupTemplate){if(!Object(s.h)(t))return[];const i=await t.getRequiredFields(e.fields),{lastEditInfoEnabled:a}=t,{objectIdField:n,typeIdField:l,globalIdField:o,relationships:h}=e;if(i.includes(\"*\"))return[\"*\"];const u=a?await Object(r.m)(e):[],c=Object(r.i)(e.fields,[...i,...u]);return l&&c.push(l),c&&n&&Object(r.p)(e.fields,n)&&-1===c.indexOf(n)&&c.push(n),c&&o&&Object(r.p)(e.fields,o)&&-1===c.indexOf(o)&&c.push(o),h&&h.forEach(t=>{const{keyField:i}=t;c&&i&&Object(r.p)(e.fields,i)&&-1===c.indexOf(i)&&c.push(i)}),c}function n(e,t){return e.popupTemplate?e.popupTemplate:Object(s.h)(t)&&t.defaultPopupTemplateEnabled&&Object(s.h)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},rrwe:function(e,t,i){\"use strict\";i.r(t);var s=i(\"pO5D\"),r=(i(\"wSAH\"),i(\"srIe\")),a=i(\"6S2I\"),n=(i(\"zqDF\"),i(\"WbKI\")),l=i(\"04ZG\"),o=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"9MzC\")),h=i(\"SuVq\"),u=i(\"OvF4\"),c=(i(\"4GrV\"),i(\"qRWG\")),p=i(\"jWBI\"),d=i(\"N5XI\"),f=i(\"Piei\"),m=i(\"3/ME\"),b=i(\"ne7T\"),y=i(\"tODX\"),g=i(\"IYxN\"),x=i(\"bHqs\"),w=i(\"sq/B\"),_=i(\"AY31\"),O=i(\"B81a\"),v=i(\"0wLv\"),j=i(\"NloG\"),T=i(\"6UvW\"),I=i(\"zlDU\"),k=i(\"rXMu\");const R=e=>{let t=class extends e{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,t){const{layer:i}=this;if(!e)return Object(o.t)(new I.a(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:i}));const{popupEnabled:s}=i,a=Object(k.a)(i,t);if(!s||!Object(r.h)(a))throw new I.a(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:s,popupTemplate:a});const n=[],{value:l}=await i.identify(e);if(l){var h,u;const e=l.join(\", \"),t={ObjectId:0},s=\"Raster.ServicePixelValue\";t[s]=this._formatAttributeValue(e,s);const r=null==(h=i.rasterInfo)||null==(u=h.attributeTable)?void 0:u.features;if(r&&r.length>0){const i=r.filter(t=>String(t.attributes.value||t.attributes.Value||t.attributes.VALUE)===e);if(i.length>0){const e=i[0];if(e)for(const i in e.attributes)if(e.attributes.hasOwnProperty(i)){const s=this._rasterFieldPrefix+i;t[s]=this._formatAttributeValue(e.attributes[i],s)}}}const a=new p.a(this.fullExtent.clone(),null,t);a.layer=i,a.sourceLayer=a.layer,n.push(a)}return n}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new I.a(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const i=Object(y.d)(this.layer.fullExtent,this.view.spatialReference,this.datumTransformation);return null==i&&(t=new I.a(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",i),t?Object(o.t)(t):Object(o.u)()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const i=this._getFieldInfo(this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,t),s=i&&i.format;if(s){let t,i;return e.trim().indexOf(\",\")>-1?(t=\",\",i=t+\" \",this._formatDelimitedString(e,t,i,s)):e.trim().indexOf(\" \")>-1?(t=i=\" \",this._formatDelimitedString(e,t,i,s)):this._formatNumberFromString(e,s)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let s;return e.some(e=>!(!e.fieldName||e.fieldName.toLowerCase()!==i&&e.fieldName.toLowerCase()!==i.replace(/ /g,\"_\")||(s=e,0))),s}_formatDelimitedString(e,t,i,s){return e&&t&&i&&s?e.trim().split(t).map(e=>this._formatNumberFromString(e,s)).join(i):e}_formatNumberFromString(e,t){if(!e||!t)return e;const i=Number(e);return isNaN(i)?e:t.format(i)}};return Object(s.a)([Object(n.b)()],t.prototype,\"layer\",void 0),Object(s.a)([Object(n.b)()],t.prototype,\"view\",void 0),Object(s.a)([Object(n.b)()],t.prototype,\"fullExtent\",void 0),Object(s.a)([Object(n.b)()],t.prototype,\"tileInfo\",void 0),Object(s.a)([Object(n.b)({readOnly:!0,dependsOn:[\"layer.renderer\"]})],t.prototype,\"hasTilingEffects\",null),t=Object(s.a)([Object(l.a)(\"esri.views.layers.ImageryTileLayerView\")],t),t};var P=i(\"kYAx\"),U=i(\"yE7X\"),M=i(\"Oxob\"),A=i(\"ZyIX\"),S=i(\"5LEI\"),C=i(\"HJJS\"),B=i(\"jHF5\"),V=i(\"c46T\"),z=i(\"fEsP\"),G=i(\"vrr1\");const q={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,type:\"stretch\"};class F extends z.a{constructor(e=null,t=null,i=null){super(),this._textureInvalidated=!0,this._memoryUsed=null,this._supportsBilinear=!0,this.stencilRef=0,this.coordScale=[1,1],this._symbolizerParameters=null,this.height=null,this.isRendereredSource=!1,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this.rawPixelData=null,this._suspended=!1,this._bandIds=null,this._interpolation=null,this._transformGrid=null,this.width=null,this.x=0,this.y=0,this.transforms={dvs:Object(B.b)()},this.source=e,this.transformGrid=t,this.interpolation=i}get symbolizerParameters(){return this._symbolizerParameters||q}set symbolizerParameters(e){this._symbolizerParameters=e}get source(){return this._source}set source(e){this._source=e,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._memoryUsed=null)}get suspended(){return this._suspended}set suspended(e){this._suspended&&!e&&this.stage&&(this.ready(),this.requestRender()),this._suspended=e}get bandIds(){return this._bandIds}set bandIds(e){this._bandIds=e,this.invalidateTexture()}get interpolation(){return this._interpolation}set interpolation(e){this._interpolation=e,this._rasterTexture&&this._rasterTexture.setSamplingMode(!this._supportsBilinear||\"bilinear\"!==e&&\"cubic\"!==e?9728:9729)}get transformGrid(){return this._transformGrid}set transformGrid(e){this._transformGrid=e,this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null,this._memoryUsed=null)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRender())}setTransform(e){const t=Object(C.d)(this.transforms.dvs),[i,s]=e.toScreenNoRotation([0,0],this.x,this.y),r=this.resolution/this.pixelRatio/e.resolution,a=r*this.width,n=r*this.height,l=Math.PI*this.rotation/180;Object(C.a)(t,t,Object(V.b)(i,s)),Object(C.a)(t,t,Object(V.b)(a/2,n/2)),Object(C.h)(t,t,-l),Object(C.a)(t,t,Object(V.b)(-a/2,-n/2)),Object(C.e)(t,t,Object(V.b)(a,n)),Object(C.f)(this.transforms.dvs,e.displayViewMat3,t)}getTextures(){if(!this._rasterTexture)return null;const e=[],t=[];return this._transformGridTexture&&(t.push(this._transformGridTexture),e.push(\"u_transformGrid\")),this._rasterTexture&&(t.push(this._rasterTexture),e.push(\"u_image\")),this._colormapTexture&&(t.push(this._colormapTexture),e.push(\"u_colormap\")),{names:e,textures:t}}getMemoryUsage(){if(Object(r.g)(this._memoryUsed)){const e=this.getTextures();if(null==e)return 0;this._memoryUsed=e.textures.map(e=>e.descriptor.width*e.descriptor.height*4).reduce((e,t)=>e+t)}return this._memoryUsed}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}updateTexture({context:e}){var t,i,s;if(!this.stage)return null==(t=this._rasterTexture)||t.dispose(),null==(i=this._transformGridTexture)||i.dispose(),null==(s=this._colormapTexture)||s.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._transformGridTexture=null,void(this._colormapTexture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1;const r=this.source,a=r&&r.pixels&&r.pixels.length>0;this._createOrDestroyRasterTexture(e),this._rasterTexture&&(a?(this._updateColormapTexture(e),this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=Object(G.c)(e,this.transformGrid))):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender())}_createOrDestroyRasterTexture(e){var t,i;const s=this.source?Object(b.g)(this.source,this.bandIds):null;if(!(s&&s.pixels&&s.pixels.length>0))return void(this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null));const r=null==this._rasterTextureBandIds&&null==this.bandIds||this._rasterTextureBandIds&&this.bandIds&&this._rasterTextureBandIds.join(\"\")===this.bandIds.join(\"\");if(this._rasterTexture){if(r)return;this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null}const a=this.interpolation||\"nearest\",n=this.isRendereredSource||!(null!=(t=e.capabilities.textureFloat)&&t.textureFloat);this._rasterTexture=Object(G.b)(e,s,a,n),this._supportsBilinear=null==(i=e.capabilities.textureFloat)?void 0:i.textureFloatLinear,this._rasterTextureBandIds=this.bandIds}_updateColormapTexture(e){const t=this._colormap,i=this.symbolizerParameters.colormap;return i?t?i.length!==t.length||i.some((e,i)=>e!==t[i])?(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=Object(G.a)(e,i),void(this._colormap=i)):void 0:(this._colormapTexture=Object(G.a)(e,i),void(this._colormap=i)):(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),void(this._colormap=null))}}class E extends S.a{constructor(e,t,i,s=null){super(e,t,i),this.bitmap=new F(s,null,null),this.bitmap.coordScale=i,this.bitmap.once(\"isReady\",()=>this.ready())}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}getMemoryUsage(){return this.bitmap.getMemoryUsage()}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}release(){return this.destroy(),this.bitmap=null,this.stage=null,!0}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}class D extends A.a{createTile(e){const t=this._tileInfoView.getTileBounds(Object(P.d)(),e);return new E(e,t,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[M.a.raster],target:()=>this.children.map(e=>e.bitmap),drawPhase:U.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===U.c.MAP&&super.doRender(e)}}var L=i(\"Vm2Q\");const N=a.a.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),H=[0,0];let W=class extends(R(Object(x.a)(Object(L.a)(j.a)))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._bitmapView=null,this._emptyTilePixelBlock=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this.useWebGLForProcessing=!0,this.datumTransformation=null,this._redrawDebounced=Object(o.i)(e=>this._redrawImage(e),2e3)}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new v.a({cachePolicy:e?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate())}hitTest(e,t){if(this.suspended)return Object(o.u)(null);const i=this.view.toMap(Object(c.b)(e,t));return Object(o.u)(new p.a({attributes:{},geometry:i}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var a;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:u.a.fromJSON(t);Object(g.h)(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(a=this._previousLOD)?void 0:a.level)!==r.level&&(this._previousLOD=r,null!=this._symbolizerParams&&this._updateSymbolizerParams())}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),Object(w.a)().supportsTextureFloat||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0),this._initializeTileInfo(),this._tileInfoView=new _.a(this.tileInfo,this.fullExtent),this._fetchQueue=new O.a({tileInfoView:this._tileInfoView,concurrency:10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new v.a({cachePolicy:this.useProgressiveUpdate?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new D(this._tileInfoView),this.container.addChild(this._bitmapView),this.handles.add([Object(d.d)(this,[\"layer.bandIds\",\"layer.renderer\"],()=>this._redrawDebounced().catch(e=>{Object(o.n)(e)||N.error(e)})),Object(d.d)(this,[\"layer.interpolation\"],(e,t)=>{\"majority\"!==e&&\"majority\"!==t||!this._canUseMajorityInterpolationOnDataSource()?this._redrawDebounced().catch(e=>{Object(o.n)(e)||N.error(e)}):this.refreshDebounced()}),Object(d.d)(this,[\"layer.multidimensionalDefinition\"],this.refreshDebounced)],\"attach\"),this._updateBlockCacheRegistry()}detach(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,Object(g.g)(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=Object(o.d)(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then(()=>{this._globalUpdateRequested=!1,this.requestUpdate()})),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return Object(T.a)(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._updateSymbolizerParams(),this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach(e=>this._enqueueTileFetch(e)),this.notifyChange(\"updating\"))}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(H,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",()=>{e.destroy(),this.requestUpdate()}),this.requestUpdate()}fetchTile(e,t){const i=!Object(r.g)(t)&&t.signal,s=this._canUseWebGLForProcessing(),a={tileInfo:this.tileInfo,signal:Object(r.n)(i),registryId:this._blockCacheRegistryId,requestRawData:s,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:s?\"nearest\":this.layer.interpolation};return this.layer.fetchTile(e.level,e.row,e.col,a)}_canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}_initializeTileInfo(){const e=this.view.spatialReference,t=new h.a({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s}=Object(y.a)(this.layer.rasterInfo,e),r=m.a.create({spatialReference:e,size:512,scales:i});(0===r.origin.x||r.origin.x>t.x)&&(r.origin=t),this._set(\"tileInfo\",r),this._srcResolutions=null!=s?s:[]}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:i}=this.layer;let s=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){s=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(e){Object(o.n)(e)&&N.error(e)}this._globalUpdateRequested=!1}const r=this._canUseWebGLForProcessing();if(r&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock){if(r)e.bitmap.source=t.pixelBlock,e.bitmap.isRendereredSource=!1;else{const i={extent:t.extent,pixelBlock:t.pixelBlock},s=await this.layer.applyRenderer(i,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null);e.bitmap.rawPixelData=i,e.bitmap.source=s,e.bitmap.isRendereredSource=!0}e.bitmap.symbolizerParameters=r?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.transformGrid=!e.bitmap.transformGrid&&r?t.transformGrid:null}else{const t=this._createEmptyTilePixelBlock();e.bitmap.source=t,e.bitmap.symbolizerParameters=r?this._symbolizerParams:null,e.bitmap.transformGrid=null}e.bitmap.bandIds=i,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=s,e.bitmap.invalidateTexture(),e.once(\"attach\",()=>this.requestUpdate()),this._bitmapView.addChild(e)}catch(e){Object(o.n)(e)||N.error(e)}this.requestUpdate()}}async _redrawImage(e){this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const{bandIds:t}=this.layer,i=this._bitmapView.children.map(async e=>{const i=this._canUseWebGLForProcessing();i?e.bitmap.isRendereredSource=!1:(e.bitmap.source=await this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null),e.bitmap.isRendereredSource=!0),e.bitmap.symbolizerParameters=i?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1});await Object(o.j)(i),this.container.requestRender()}_createEmptyTilePixelBlock(){if(!this._emptyTilePixelBlock){const e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new f.a({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:\"u8\"})}return this._emptyTilePixelBlock}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:Object(b.g)(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this._canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map(e=>255*e),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(){const{url:e,rasterInfo:t,multidimensionalDefinition:i,raster:s}=this.layer,r=null!=t&&t.multidimensionalInfo?s.getSliceIndex(i):null,a=Object(g.d)(e,r);a!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&Object(g.g)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=Object(g.f)(a,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=a)}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}_getLayerInterpolation(){const e=this.layer.renderer.type;return\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e?\"nearest\":this.layer.interpolation}};Object(s.a)([Object(n.b)()],W.prototype,\"useProgressiveUpdate\",null),W=Object(s.a)([Object(l.a)(\"esri.views.2d.layers.ImageryTileLayerView2D\")],W),t.default=W}}]);","name":"22.a360df5a9bc81ee4eebc.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[22],{\n\n/***/ \"5LEI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return r; });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HJJS\");\n/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rlSK\");\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"jHF5\");\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"fEsP\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__[/* DisplayObject */ \"a\"]{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])(),tileMat3:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])()},this.triangleCount=0,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"](s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* s */ \"i\"])(r,a,0,0,0,d,0,n,h,1),Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* m */ \"f\"])(this.transforms.dvs,o.displayViewMat3,r)}}\n\n\n/***/ }),\n\n/***/ \"6UvW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return a; });\n/* unused harmony export intersectsDrapedGeometry */\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"OvF4\");\n/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"4GrV\");\n/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"gEht\");\n/* harmony import */ var _renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"U282\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction a(t,i,a,o=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"]){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isSome */ \"h\"])(o)&&!o.equals(a.spatialReference)?Object(_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__[/* getMetersPerUnitForSR */ \"c\"])(o)/Object(_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__[/* getMetersPerUnitForSR */ \"c\"])(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isNone */ \"g\"])(o))return!1;return a(o,Object(_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_4__[/* calculateTolerance */ \"a\"])(),n,s).intersects(r)}const s=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"];\n\n\n/***/ }),\n\n/***/ \"NloG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"pO5D\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"6S2I\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"zqDF\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"WbKI\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"04ZG\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"4EHJ\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"ju1D\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"9AIY\");\n/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"/CmD\");\n/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"zm0L\");\n/* harmony import */ var _core_Identifiable_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"pdg3\");\n/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"+rMe\");\n/* harmony import */ var _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"kJYu\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet d=class extends(Object(_core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_13__[/* HandleOwnerMixin */ \"b\"])(Object(_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_11__[/* IdentifiableMixin */ \"a\"])(Object(_core_Promise_js__WEBPACK_IMPORTED_MODULE_12__[/* EsriPromiseMixin */ \"b\"])(_core_Evented_js__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"]))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({dependsOn:[\"layer.opacity\",\"parent.fullOpacity\"]})],d.prototype,\"fullOpacity\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])()],d.prototype,\"layer\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])()],d.prototype,\"parent\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],d.prototype,\"suspended\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],d.prototype,\"suspendInfo\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({readOnly:!0,dependsOn:[\"suspended\",\"layer.legendEnabled?\"]})],d.prototype,\"legendEnabled\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({type:Boolean,dependsOn:[\"updatingHandles.updating\"],readOnly:!0})],d.prototype,\"updating\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__[/* property */ \"b\"])({dependsOn:[\"layer.visible\"]})],d.prototype,\"visible\",null),d=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__[/* subclass */ \"a\"])(\"esri.views.layers.LayerView\")],d);var p=d;/* harmony default export */ __webpack_exports__[\"a\"] = (p);\n\n\n/***/ }),\n\n/***/ \"Piei\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"pO5D\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"f/qv\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"6S2I\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"WbKI\");\n/* harmony import */ var _core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"Gj5k\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"04ZG\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"zlDU\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"4EHJ\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"ju1D\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"9AIY\");\n/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"ag7Y\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar n;const p=_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getLogger(\"esri.layers.support.PixelBlock\");let c=n=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_12__[/* JSONSupport */ \"a\"]{constructor(t){super(t),this.width=null,this.height=null,this.pixelType=\"f32\",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.pixels=null,this.statistics=null}static createEmptyBand(t,e){return new(n.getPixelArrayConstructor(t))(e)}static getPixelArrayConstructor(t){let e;switch(t){case\"u1\":case\"u2\":case\"u4\":case\"u8\":e=Uint8Array;break;case\"u16\":e=Uint16Array;break;case\"u32\":e=Uint32Array;break;case\"s8\":e=Int8Array;break;case\"s16\":e=Int16Array;break;case\"s32\":e=Int32Array;break;case\"u32\":e=Uint32Array;break;case\"f32\":e=Float32Array;break;case\"f64\":e=Float64Array;break;case\"c64\":case\"c128\":case\"unknown\":e=Float32Array}return e}castPixelType(t){if(!t)return\"f32\";let e=t.toLowerCase();return[\"u1\",\"u2\",\"u4\"].indexOf(e)>-1?e=\"u8\":-1===[\"unknown\",\"u8\",\"s8\",\"u16\",\"s16\",\"u32\",\"s32\",\"f32\",\"f64\"].indexOf(e)&&(e=\"f32\"),e}getPlaneCount(){return this.pixels&&this.pixels.length}addData(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"](\"pixelblock:invalid-or-missing-pixels\",\"add data requires valid pixels array that has same length defined by pixel block width * height\");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics||{minValue:null,maxValue:null})}getAsRGBA(){const t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case\"s8\":case\"s16\":case\"u16\":case\"s32\":case\"u32\":case\"f32\":case\"f64\":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}getAsRGBAFloat(){const t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}updateStatistics(){this.statistics=this.pixels.map((t=>this._calculateBandStatistics(t,this.mask)));const t=this.mask;let e=0;if(t)for(let s=0;s<t.length;s++)t[s]&&e++;else e=this.width*this.height;this.validPixelCount=e}clamp(t){if(!t||\"f64\"===t||\"f32\"===t)return;let e;switch(t){case\"u8\":e=[0,255];break;case\"u16\":e=[0,65535];break;case\"u32\":e=[0,4294967295];break;case\"s8\":e=[-128,127];break;case\"s16\":e=[-32768,32767];break;case\"s32\":e=[-2147483648,2147483647];break;default:e=[-34e38,34e38]}const[s,i]=e,r=this.pixels,l=this.width*this.height,a=r.length;let o,h,p;const c=[];for(let e=0;e<a;e++){p=n.createEmptyBand(t,l),o=r[e];for(let t=0;t<l;t++)h=o[t],p[t]=h>i?i:h<s?s:h;c.push(p)}this.pixels=c,this.pixelType=t}extractBands(t){if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__[/* isNone */ \"g\"])(t)||0===t.length||null==this.pixels||0===this.pixels.length)return this;const e=this.pixels.length,i=t.some((t=>t>=this.pixels.length)),r=e===t.length&&!t.some(((t,e)=>t!==e));return i||r?this:new n({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map((t=>this.pixels[t])),statistics:this.statistics&&t.map((t=>this.statistics[t]))})}clone(){const t=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let s;this.mask&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0));const i=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];const e=this.pixels[0].slice;for(s=0;s<this.pixels.length;s++)t.pixels[s]=e?this.pixels[s].slice(0,this.pixels[s].length):new i(this.pixels[s])}if(this.statistics)for(t.statistics=[],s=0;s<this.statistics.length;s++)t.statistics[s]=Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_2__[/* clone */ \"a\"])(this.statistics[s]);return t}_fillFrom8Bit(t){const{mask:e,maskIsAlpha:s,pixels:i}=this;if(!t||!i||!i.length)return void p.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The input pixel block is empty.\");let r,l,a,o;r=l=a=i[0],i.length>=3?(l=i[1],a=i[2]):2===i.length&&(l=i[1]);const h=new Uint32Array(t),n=this.width*this.height;if(r.length===n)if(e&&e.length===n)if(s)for(o=0;o<n;o++)e[o]&&(h[o]=e[o]<<24|a[o]<<16|l[o]<<8|r[o]);else for(o=0;o<n;o++)e[o]&&(h[o]=255<<24|a[o]<<16|l[o]<<8|r[o]);else for(o=0;o<n;o++)h[o]=255<<24|a[o]<<16|l[o]<<8|r[o];else p.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The pixelblock is invalid.\")}_fillFromNon8Bit(t){const{pixels:e,mask:s,statistics:i}=this;if(!t||!e||!e.length)return void p.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The input pixel block is empty.\");const r=this.pixelType;let l=1,a=0,o=1;if(i&&i.length>0)a=i.map((t=>t.minValue)).reduce(((t,e)=>Math.min(t,e))),o=i.map((t=>t.maxValue-t.minValue)).reduce(((t,e)=>Math.max(t,e))),l=255/o;else{let t=255;\"s8\"===r?(a=-128,t=127):\"u16\"===r?t=65535:\"s16\"===r?(a=-32768,t=32767):\"u32\"===r?t=4294967295:\"s32\"===r?(a=-2147483648,t=2147483647):\"f32\"===r?(a=-34e38,t=34e38):\"f64\"===r&&(a=-Number.MAX_VALUE,t=Number.MAX_VALUE),l=255/(t-a)}const h=new Uint32Array(t),n=this.width*this.height;let c,u,m,x,f;if(c=u=m=e[0],c.length!==n)return p.error(\"getAsRGBA()\",\"Unable to convert to RGBA. The pixelblock is invalid.\");if(e.length>=2)if(u=e[1],e.length>=3&&(m=e[2]),s&&s.length===n)for(x=0;x<n;x++)s[x]&&(h[x]=255<<24|(m[x]-a)*l<<16|(u[x]-a)*l<<8|(c[x]-a)*l);else for(x=0;x<n;x++)h[x]=255<<24|(m[x]-a)*l<<16|(u[x]-a)*l<<8|(c[x]-a)*l;else if(s&&s.length===n)for(x=0;x<n;x++)f=(c[x]-a)*l,s[x]&&(h[x]=255<<24|f<<16|f<<8|f);else for(x=0;x<n;x++)f=(c[x]-a)*l,h[x]=255<<24|f<<16|f<<8|f}_fillFrom32Bit(t){const{pixels:e,mask:s}=this;if(!t||!e||!e.length)return p.error(\"getAsRGBAFloat()\",\"Unable to convert to RGBA. The input pixel block is empty.\");let i,r,l,a;i=r=l=e[0],e.length>=3?(r=e[1],l=e[2]):2===e.length&&(r=e[1]);const o=this.width*this.height;if(i.length!==o)return p.error(\"getAsRGBAFloat()\",\"Unable to convert to RGBA. The pixelblock is invalid.\");let h=0;if(s&&s.length===o)for(a=0;a<o;a++)t[h++]=i[a],t[h++]=r[a],t[h++]=l[a],t[h++]=1&s[a];else for(a=0;a<o;a++)t[h++]=i[a],t[h++]=r[a],t[h++]=l[a],t[h++]=1}_calculateBandStatistics(t,e){let s=1/0,i=-1/0;const r=t.length;let l,a=0;if(e)for(l=0;l<r;l++)e[l]&&(a=t[l],s=a<s?a:s,i=a>i?a:i);else for(l=0;l<r;l++)a=t[l],s=a<s?a:s,i=a>i?a:i;return{minValue:s,maxValue:i}}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"width\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"height\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"pixelType\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_6__[/* cast */ \"a\"])(\"pixelType\")],c.prototype,\"castPixelType\",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"validPixelCount\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"mask\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"maskIsAlpha\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"pixels\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__[/* property */ \"b\"])({json:{write:!0}})],c.prototype,\"statistics\",void 0),c=n=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__[/* subclass */ \"a\"])(\"esri.layers.support.PixelBlock\")],c);var u=c;/* harmony default export */ __webpack_exports__[\"a\"] = (u);\n\n\n/***/ }),\n\n/***/ \"U282\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return n; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}\n\n\n/***/ }),\n\n/***/ \"Vm2Q\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ LayerView2D_l; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Collection.js\nvar Collection = __webpack_require__(\"LE9a\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/collectionUtils.js\nvar collectionUtils = __webpack_require__(\"fX31\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/watchUtils.js\nvar watchUtils = __webpack_require__(\"N5XI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/JSONSupport.js\nvar JSONSupport = __webpack_require__(\"ag7Y\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/support/ClipArea.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet ClipArea_e=class extends JSONSupport[\"a\" /* JSONSupport */]{};ClipArea_e=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.support.ClipArea\")],ClipArea_e);var p=ClipArea_e;/* harmony default export */ var ClipArea = (p);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/support/ClipRect.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar s;let ClipRect_p=s=class extends ClipArea{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Number,String],json:{write:!0}})],ClipRect_p.prototype,\"left\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Number,String],json:{write:!0}})],ClipRect_p.prototype,\"right\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Number,String],json:{write:!0}})],ClipRect_p.prototype,\"top\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Number,String],json:{write:!0}})],ClipRect_p.prototype,\"bottom\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,dependsOn:[\"left\",\"right\",\"top\",\"bottom\"]})],ClipRect_p.prototype,\"version\",null),ClipRect_p=s=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.support.ClipRect\")],ClipRect_p);var ClipRect_i=ClipRect_p;/* harmony default export */ var ClipRect = (ClipRect_i);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/Container.js\nvar Container = __webpack_require__(\"AMBt\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Geometry.js\nvar Geometry = __webpack_require__(\"N2DF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Extent.js\nvar Extent = __webpack_require__(\"OvF4\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Polygon.js\nvar Polygon = __webpack_require__(\"Ehki\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/jsonUtils.js\nvar jsonUtils = __webpack_require__(\"qatw\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry.js\nvar geometry = __webpack_require__(\"4GrV\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/support/Geometry.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar n;const y={base:Geometry[\"a\" /* default */],key:\"type\",typeMap:{extent:Extent[\"a\" /* default */],polygon:Polygon[\"a\" /* default */]}};let c=n=class extends ClipArea{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new n({geometry:this.geometry.clone()})}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({types:y,json:{read:jsonUtils[\"a\" /* fromJSON */],write:!0}})],c.prototype,\"geometry\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,dependsOn:[\"geometry\"]})],c.prototype,\"version\",null),c=n=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.support.Geometry\")],c);var l=c;/* harmony default export */ var support_Geometry = (l);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/support/Path.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet Path_t=class extends ClipArea{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[[[Number]]],json:{write:!0}})],Path_t.prototype,\"path\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,dependsOn:[\"path\"]})],Path_t.prototype,\"version\",null),Path_t=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.support.Path\")],Path_t);var Path_p=Path_t;/* harmony default export */ var Path = (Path_p);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst LayerView2D_c=Collection[\"a\" /* default */].ofType({key:\"type\",base:ClipArea,typeMap:{rect:ClipRect,path:Path,geometry:support_Geometry}}),LayerView2D_l=i=>{let o=class extends i{constructor(){super(...arguments),this.clips=new LayerView2D_c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new Container[\"a\" /* Container */]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(watchUtils[\"a\" /* init */])(this,\"suspended\",(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),!0),Object(watchUtils[\"a\" /* init */])(this,[\"layer.opacity\",\"container\"],(()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)}),!0),Object(watchUtils[\"a\" /* init */])(this,[\"layer.blendMode\"],(e=>{this.container&&(this.container.blendMode=e)}),!0),Object(watchUtils[\"a\" /* init */])(this,[\"layer.effect\"],(e=>{this.container&&(this.container.effect=e)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(e){let t=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,a=!r;!s&&e<=i&&(s=!0),!a&&e>=r&&(a=!0),t=s&&a}return t}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:LayerView2D_c,set(e){const t=Object(collectionUtils[\"b\" /* referenceSetter */])(e,this._get(\"clips\"),LayerView2D_c);this._set(\"clips\",t)}})],o.prototype,\"clips\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],o.prototype,\"moving\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],o.prototype,\"attached\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],o.prototype,\"container\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({dependsOn:[\"view.scale\",\"layer.minScale\",\"layer.maxScale\"]})],o.prototype,\"suspended\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0})],o.prototype,\"updateParameters\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],o.prototype,\"updateRequested\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({dependsOn:[\"attached\",\"updateRequested\",\"suspended\"]})],o.prototype,\"updating\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],o.prototype,\"view\",void 0),o=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.2d.layers.LayerView2D\")],o),o};\n\n\n/***/ }),\n\n/***/ \"ZyIX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export sortByLevel */\n/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"yE7X\");\n/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"b3VY\");\n/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7F7D\");\n/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"mgI5\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;/* harmony default export */ __webpack_exports__[\"a\"] = (class extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}});\n\n\n/***/ }),\n\n/***/ \"ne7T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return U; });\n/* unused harmony export clip */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return l; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return i; });\n/* unused harmony export createContrastBrightnessLUT */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return a; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return o; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return n; });\n/* unused harmony export getClipBounds */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return f; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return u; });\n/* unused harmony export resampleByMajority */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return m; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return A; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return h; });\n/* harmony import */ var _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"Piei\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e=function(t){return t&&\"esri.layers.support.PixelBlock\"===t.declaredClass&&t.pixels&&t.pixels.length>0};function n(n,i){if(!i||!e(n))return n;const l=n.pixels.length;return i&&i.some((t=>t>=l))||1===l&&1===i.length&&0===i[0]?n:l!==i.length||i.some(((t,e)=>t!==e))?new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({pixelType:n.pixelType,width:n.width,height:n.height,mask:n.mask,validPixelCount:n.validPixelCount,maskIsAlpha:n.maskIsAlpha,pixels:i.map((t=>n.pixels[t])),statistics:n.statistics&&i.map((t=>n.statistics[t]))}):n}function i(t){if(!t)return;const e=t.colormap;if(!e||0===e.length)return;const n=e.sort(((t,e)=>t[0]-e[0]));let i=0;n[0][0]<0&&(i=n[0][0]);const l=Math.max(256,n[n.length-1][0]-i+1),o=new Uint8Array(4*l),r=[];let a,s=0,h=0;const f=5===n[0].length;if(l>65536)return n.forEach((t=>{r[t[0]-i]=f?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:r,offset:i,alphaSpecified:f};if(t.fillUnspecified)for(a=n[h],s=a[0]-i;s<l;s++)o[4*s]=a[1],o[4*s+1]=a[2],o[4*s+2]=a[3],o[4*s+3]=f?a[4]:255,s===a[0]-i&&(a=h===n.length-1?a:n[++h]);else for(s=0;s<n.length;s++)a=n[s],h=4*(a[0]-i),o[h]=a[1],o[h+1]=a[2],o[h+2]=a[3],o[h+3]=f?a[4]:255;return{indexedColormap:o,offset:i,alphaSpecified:f}}function l(t,n){if(!e(t))return t;if(!n&&(n.indexedColormap||n.indexed2DColormap))return t;const i=t.clone(),l=i.pixels;let o=i.mask;const r=i.width*i.height;if(1!==l.length)return t;const{indexedColormap:a,indexed2DColormap:s,offset:h,alphaSpecified:f}=n,u=a.length-1;let x=0;const p=l[0],c=new Uint8Array(p.length),m=new Uint8Array(p.length),d=new Uint8Array(p.length);let w,y=0;if(a)if(o)for(x=0;x<r;x++)o[x]&&(y=4*(p[x]-h),y<h||y>u?o[x]=0:(c[x]=a[y],m[x]=a[y+1],d[x]=a[y+2],o[x]=a[y+3]));else{for(o=new Uint8Array(r),x=0;x<r;x++)y=4*(p[x]-h),y<h||y>u?o[x]=0:(c[x]=a[y],m[x]=a[y+1],d[x]=a[y+2],o[x]=a[y+3]);i.mask=o}else if(o)for(x=0;x<r;x++)o[x]&&(w=s[p[x]],c[x]=w[0],m[x]=w[1],d[x]=w[2],o[x]=w[3]);else{for(o=new Uint8Array(r),x=0;x<r;x++)w=s[p[x]],c[x]=w[0],m[x]=w[1],d[x]=w[2],o[x]=w[3];i.mask=o}return i.pixels=[c,m,d],i.statistics=null,i.pixelType=\"u8\",i.maskIsAlpha=f,i}function o(t){if(!e(t))return null;t.statistics||t.updateStatistics();const{pixels:n,mask:i,pixelType:l,statistics:o}=t,r=t.width*t.height,a=n.length;let s,h,f,u,x;const p=[],c=[];let m,d,w,y,g,M,k,A,U,C;const T=256;for(u=0;u<a;u++){if(m=new Uint32Array(T),w=n[u],\"u8\"===l)if(s=-.5,h=255.5,i)for(x=0;x<r;x++)i[x]&&m[w[x]]++;else for(x=0;x<r;x++)m[w[x]]++;else{if(s=o[u].minValue,h=o[u].maxValue,f=(h-s)/T,d=new Uint32Array(257),i)for(x=0;x<r;x++)i[x]&&d[Math.floor((w[x]-s)/f)]++;else for(x=0;x<r;x++)d[Math.floor((w[x]-s)/f)]++;for(x=0;x<255;x++)m[x]=d[x];m[255]=d[255]+d[256]}for(p.push({min:s,max:h,size:T,counts:m}),y=0,g=0,A=0,x=0;x<T;x++)y+=m[x],g+=x*m[x];for(U=g/y,x=0;x<T;x++)A+=m[x]*Math.pow(x-U,2);C=Math.sqrt(A/(y-1)),f=(h-s)/T,M=(U+.5)*f+s,k=C*f,c.push({min:s,max:h,avg:M,stddev:k})}return{statistics:c,histograms:p}}function r(t){const e=[];for(let n=0;n<t.length;n++){const{min:i,max:l,size:o,counts:r}=t[n];let a=0,s=0;for(let t=0;t<o;t++)a+=r[t],s+=t*r[t];const h=s/a;let f=0;for(let t=0;t<o;t++)f+=r[t]*Math.pow(t-h,2);const u=(l-i)/o,x=(h+.5)*u+i,p=Math.sqrt(f/(a-1))*u;e.push({min:i,max:l,avg:x,stddev:p})}return e}function a(t){const{minCutOff:e,maxCutOff:n,gamma:i,pixelType:l}=t,o=t.outMin||0,r=t.outMax||255;if(-1===[\"u8\",\"u16\",\"s8\",\"s16\"].indexOf(l))return null;const a=e.length;let h,f,u=0;\"s8\"===l?u=-127:\"s16\"===l&&(u=-32767);let x=256;[\"u16\",\"s16\"].indexOf(l)>-1&&(x=65536);const p=[],c=[],m=r-o;for(h=0;h<a;h++)c[h]=n[h]-e[h],p[h]=m/(n[h]-e[h]);const d=i&&i.length>=a,w=[];if(d)for(h=0;h<a;h++)i[h]>1?i[h]>2?w[h]=6.5+Math.pow(i[h]-2,2.5):w[h]=6.5+100*Math.pow(2-i[h],4):w[h]=1;let y;const g=[];let M,k,A;if(d)for(h=0;h<a;h++){for(A=[],f=0;f<x;f++)M=f+u,y=(M-e[h])/c[h],k=1,i[h]>1&&(k-=Math.pow(1/m,y*w[h])),M<n[h]&&M>e[h]?A[f]=Math.floor(k*m*Math.pow(y,1/i[h]))+o:M>=n[h]?A[f]=r:A[f]=o;g[h]=A}else for(h=0;h<a;h++){for(A=[],f=0;f<x;f++)M=f+u,M<=e[h]?A[f]=o:M>=n[h]?A[f]=r:A[f]=Math.floor((M-e[h])/c[h]*m)+o;g[h]=A}if(null!=t.contrastOffset){const e=s(t.contrastOffset,t.brightnessOffset);for(h=0;h<a;h++)for(A=g[h],f=0;f<x;f++)A[f]=e[A[f]]}return{lut:g,offset:u}}function s(t,e){const n=Math.min(Math.max(t,-100),100),i=Math.min(Math.max(e,-100),100),l=255;let o,r;const a=new Uint8Array(256);for(o=0;o<256;o++)n>0&&n<100?r=(200*o-25500+510*i)/(2*(100-n))+128:n<=0&&n>-100?r=(200*o-25500+510*i)*(100+n)/2e4+128:100===n?(r=200*o-25500+256*(100-n)+510*i,r=r>0?l:0):-100===n&&(r=128),a[o]=r>l?l:r<0?0:r;return a}function h(t,n){if(!e(t))return null;const i=t.clone(),{pixels:l,mask:o}=i,{minCutOff:r,maxCutOff:a,gamma:s}=n,h=n.outMin||0,f=n.outMax||255,u=i.width*i.height,x=l.length;let p,c,m,d,w;const y=f-h,g=[],M=[];for(p=0;p<x;p++)M[p]=a[p]-r[p],g[p]=y/(a[p]-r[p]);const k=s&&s.length>=x,A=[];if(k)for(p=0;p<x;p++)s[p]>1?s[p]>2?A[p]=6.5+Math.pow(s[p]-2,2.5):A[p]=6.5+100*Math.pow(2-s[p],4):A[p]=1;if(k)if(null!=o){for(c=0;c<u;c++)if(o[c])for(p=0;p<x;p++)m=l[p][c],w=(m-r[p])/M[p],d=1,s[p]>1&&(d-=Math.pow(1/y,w*A[p])),m<a[p]&&m>r[p]?l[p][c]=Math.floor(d*y*Math.pow(w,1/s[p]))+h:m>=a[p]?l[p][c]=f:l[p][c]=h}else for(c=0;c<u;c++)for(p=0;p<x;p++)m=l[p][c],w=(m-r[p])/M[p],d=1,s[p]>1&&(d-=Math.pow(1/y,w*A[p])),m<a[p]&&m>r[p]?l[p][c]=Math.floor(d*y*Math.pow(w,1/s[p]))+h:m>=a[p]?l[p][c]=f:l[p][c]=h;else if(null!=o){for(c=0;c<u;c++)if(o[c])for(p=0;p<x;p++)m=l[p][c],m<a[p]&&m>r[p]?l[p][c]=Math.floor((m-r[p])/M[p]*y)+h:m>=a[p]?l[p][c]=f:l[p][c]=h}else for(c=0;c<u;c++)for(p=0;p<x;p++)m=l[p][c],m<a[p]&&m>r[p]?l[p][c]=Math.floor((m-r[p])/M[p]*y)+h:m>=a[p]?l[p][c]=f:l[p][c]=h;return i.pixelType=\"u8\",i.updateStatistics(),i}function f(n,i){if(!e(n))return null;const{pixels:l,mask:o}=n,r=n.width*n.height,a=l.length;let s=i.lut;const{offset:h}=i;let f,u;s&&1===s[0].length&&(s=l.map((()=>s)));const x=[];let p,c,m;if(h)if(null==o)for(f=0;f<a;f++){for(p=l[f],c=s[f],m=new Uint8Array(r),u=0;u<r;u++)m[u]=c[p[u]-h];x.push(m)}else for(f=0;f<a;f++){for(p=l[f],c=s[f],m=new Uint8Array(r),u=0;u<r;u++)o[u]&&(m[u]=c[p[u]-h]);x.push(m)}else if(null==o)for(f=0;f<a;f++){for(p=l[f],c=s[f],m=new Uint8Array(r),u=0;u<r;u++)m[u]=c[p[u]];x.push(m)}else for(f=0;f<a;f++){for(p=l[f],c=s[f],m=new Uint8Array(r),u=0;u<r;u++)o[u]&&(m[u]=c[p[u]]);x.push(m)}const d=new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({width:n.width,height:n.height,pixels:x,mask:o,pixelType:\"u8\"});return d.updateStatistics(),d}function u(t,n){if(!e(t))return null;const i=t.clone(),{pixels:l}=i,o=i.width*i.height,r=n.length,a=Math.floor(r/2),s=n[Math.floor(a)],h=l[0];let f,u,x,p,c,m,d=!1;const w=new Uint8Array(o),y=new Uint8Array(o),g=new Uint8Array(o);let M=i.mask;const k=4===n[0].mappedColor.length;for(M||(M=new Uint8Array(o),M.fill(k?255:1),i.mask=M),c=0;c<o;c++)if(M[c]){for(f=h[c],d=!1,m=a,u=s,x=0,p=r-1;p-x>1;){if(f===u.value){d=!0;break}f>u.value?x=m:p=m,m=Math.floor((x+p)/2),u=n[Math.floor(m)]}d||(f===n[x].value?(u=n[x],d=!0):f===n[p].value?(u=n[p],d=!0):f<n[x].value?(d=!1,u=null):f>n[x].value&&(f<n[p].value?(u=n[x],d=!0):p===r-1?(d=!1,u=null):(u=n[p],d=!0))),d?(w[c]=u.mappedColor[0],y[c]=u.mappedColor[1],g[c]=u.mappedColor[2],M[c]=u.mappedColor[3]):w[c]=y[c]=g[c]=M[c]=0}return i.pixels=[w,y,g],i.mask=M,i.pixelType=\"u8\",i.maskIsAlpha=k,i}function x(t,e,n,i,l,o,r,a){return{xmin:l<=n*t?0:l<n*t+t?l-n*t:t,ymin:o<=i*e?0:o<i*e+e?o-i*e:e,xmax:l+r<=n*t?0:l+r<n*t+t?l+r-n*t:t,ymax:o+a<=i*e?0:o+a<i*e+e?o+a-i*e:e}}function p(t,e){if(!t||0===t.length)return null;const n=t.filter((t=>t.pixelBlock))[0];if(!n)return null;const i=(n.extent.xmax-n.extent.xmin)/n.pixelBlock.width,l=(n.extent.ymax-n.extent.ymin)/n.pixelBlock.height,o=.01*Math.min(i,l),r=t.sort(((t,e)=>Math.abs(t.extent.ymax-e.extent.ymax)>o?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>o?t.extent.xmin-e.extent.xmin:0)),a=Math.min.apply(null,r.map((t=>t.extent.xmin))),s=Math.min.apply(null,r.map((t=>t.extent.ymin))),h=Math.max.apply(null,r.map((t=>t.extent.xmax))),f=Math.max.apply(null,r.map((t=>t.extent.ymax))),u={x:Math.round((e.xmin-a)/i),y:Math.round((f-e.ymax)/l)},x={width:Math.round((h-a)/i),height:Math.round((f-s)/l)},p={width:Math.round((e.xmax-e.xmin)/i),height:Math.round((e.ymax-e.ymin)/l)};if(Math.round(x.width/n.pixelBlock.width)*Math.round(x.height/n.pixelBlock.height)!==r.length||u.x<0||u.y<0||x.width<p.width||x.height<p.height)return null;return{extent:e,pixelBlock:c(r.map((t=>t.pixelBlock)),x,u,p)}}function c(n,i,l,o){const r=n.filter((t=>e(t)))[0];if(null==r)return null;const a=o?o.width:i.width,s=o?o.height:i.height,h=r.width,f=r.height,u=i.width/h,p=i.height/f,c=l?l.x:0,m=l?l.y:0,d=r.pixelType,w=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].getPixelArrayConstructor(d),y=r.pixels.length,g=[];let M,k,A,U,C,T,v,B,S,O,P;for(T=0;T<y;T++){for(k=new w(a*s),v=0;v<p;v++)for(B=0;B<u;B++)if(A=n[v*u+B],A)for(M=A.pixels[T],P=x(h,f,B,v,c,m,a,s),S=P.ymin;S<P.ymax;S++)for(U=(v*f+S-m)*a+(B*h-c),C=S*h,O=P.xmin;O<P.xmax;O++)k[U+O]=M[C+O];g.push(k)}let b,I;if(n.some((t=>null==t||t.mask&&t.mask.length>0)))for(b=new Uint8Array(a*s),v=0;v<p;v++)for(B=0;B<u;B++)if(A=n[v*u+B],I=A?A.mask:null,P=x(h,f,B,v,c,m,a,s),I)for(S=P.ymin;S<P.ymax;S++)for(U=(v*f+S-m)*a+(B*h-c),C=S*h,O=P.xmin;O<P.xmax;O++)b[U+O]=I[C+O];else if(A)for(S=P.ymin;S<P.ymax;S++)for(U=(v*f+S-m)*a+(B*h-c),C=S*h,O=P.xmin;O<P.xmax;O++)b[U+O]=1;else for(S=P.ymin;S<P.ymax;S++)for(U=(v*f+S-m)*a+(B*h-c),C=S*h,O=P.xmin;O<P.xmax;O++)b[U+O]=0;const j=new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({width:a,height:s,pixels:g,pixelType:d,mask:b});return j.updateStatistics(),j}function m(t,n,i){if(!e(t))return null;const{width:l,height:o}=t,r=n.x,a=n.y,s=i.width+r,h=i.height+a;if(r<0||a<0||s>l||h>o)return t;if(0===r&&0===a&&s===l&&h===o)return t;t.mask||(t.mask=new Uint8Array(l*o));const f=t.mask;for(let t=0;t<o;t++){const e=t*l;for(let n=0;n<l;n++)f[e+n]=t<a||t>=h||n<r||n>=s?0:1}return t.updateStatistics(),t}function d(t){if(!e(t))return null;const n=t.clone(),{width:i,height:l,pixels:o,mask:r}=t,a=o[0],s=n.pixels[0];for(let t=2;t<l-1;t++){const e=new Map;for(let n=t-2;n<t+2;n++)for(let t=0;t<4;t++){const l=n*i+t;g(e,a[l],r?r[l]:1)}s[t*i]=w(e),s[t*i+1]=s[t*i+2]=s[t*i];let n=3;for(;n<i-1;n++){let l=(t-2)*i+n+1;g(e,a[l],r?r[l]:1),l=(t-1)*i+n+1,g(e,a[l],r?r[l]:1),l=t*i+n+1,g(e,a[l],r?r[l]:1),l=(t+1)*i+n+1,g(e,a[l],r?r[l]:1),l=(t-2)*i+n-3,y(e,a[l],r?r[l]:1),l=(t-1)*i+n-3,y(e,a[l],r?r[l]:1),l=t*i+n-3,y(e,a[l],r?r[l]:1),l=(t+1)*i+n-3,y(e,a[l],r?r[l]:1),s[t*i+n]=w(e)}s[t*i+n+1]=s[t*i+n]}for(let t=0;t<i;t++)s[t]=s[i+t]=s[2*i+t],s[(l-1)*i+t]=s[(l-2)*i+t];return n.updateStatistics(),n}function w(t){if(0===t.size)return 0;let e=0,n=-1,i=0;const l=t.keys();let o=l.next();for(;!o.done;)i=t.get(o.value),i>e&&(n=o.value,e=i),o=l.next();return n}function y(t,e,n){if(0===n)return;const i=t.get(e);1===i?t.delete(e):t.set(e,i-1)}function g(t,e,n){0!==n&&t.set(e,t.has(e)?t.get(e)+1:1)}function M(n,i,l){let{x:o,y:r}=i;const{width:a,height:s}=l;if(0===o&&0===r&&s===n.height&&a===n.width)return n;const{width:h,height:f}=n,u=Math.max(0,r),x=Math.max(0,o),p=Math.min(o+a,h),c=Math.min(r+s,f);if(p<0||c<0||!e(n))return null;o=Math.max(0,-o),r=Math.max(0,-r);const{pixels:m,mask:d}=n,w=a*s,y=m.length,g=[];for(let e=0;e<y;e++){const i=m[e],l=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].createEmptyBand(n.pixelType,w);for(let t=u;t<c;t++){const e=t*h;let n=(t+r-u)*a+o;for(let t=x;t<p;t++)l[n++]=i[e+t]}g.push(l)}const M=new Uint8Array(w);for(let t=u;t<c;t++){const e=t*h;let n=(t+r-u)*a+o;for(let t=x;t<p;t++)M[n++]=d?d[e+t]:1}const k=new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({width:l.width,height:l.height,pixelType:n.pixelType,pixels:g,mask:M});return k.updateStatistics(),k}function k(n,i=!0){if(!e(n))return null;const{pixels:l,width:o,height:r,mask:a,pixelType:s}=n,h=[],f=Math.round(o/2),u=Math.round(r/2),x=r-1,p=o-1;for(let e=0;e<l.length;e++){const n=l[e],a=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].createEmptyBand(s,f*u);let c=0;for(let t=0;t<r;t+=2)for(let e=0;e<o;e+=2){const l=n[t*o+e];if(i){const i=e===p?l:n[t*o+e+1],r=t===x?l:n[t*o+e+o],s=e===p?r:t===x?i:n[t*o+e+o+1];a[c++]=(l+i+r+s)/4}else a[c++]=l}h.push(a)}let c=null;if(a){c=new Uint8Array(f*u);let t=0;for(let e=0;e<r;e+=2)for(let n=0;n<o;n+=2){const l=a[e*o+n];if(i){const i=n===p?l:a[e*o+n+1],r=e===x?l:a[e*o+n+o],s=n===p?r:e===x?i:a[e*o+n+o+1];c[t++]=l*i*r*s?1:0}else c[t++]=l}}return new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({width:f,height:u,pixelType:s,pixels:h,mask:c})}function A(t,n,i){if(!e(t))return null;const{width:l,height:o}=n;let{width:r,height:a}=t;const s=new Map,h={x:0,y:0},f=null==i?1:1+i;let u=t;for(let t=0;t<f;t++){const e=Math.ceil(r/l),i=Math.ceil(a/o);for(let r=0;r<i;r++){h.y=r*o;for(let i=0;i<e;i++){h.x=i*l;const e=M(u,h,n);s.set(`${t}/${r}/${i}`,e)}}t<f-1&&(u=k(u)),r=Math.round(r/2),a=Math.round(a/2)}return s}function U(n,i,l,o,r=\"nearest\"){if(!e(n))return null;\"majority\"===r&&(n=d(n));const{pixels:a,mask:s,pixelType:h}=n,f=n.width,u=n.height,x=_PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].getPixelArrayConstructor(h),p=a.length,{width:c,height:m}=i,w=o.cols,y=o.rows,g=Math.ceil(c/w),M=Math.ceil(m/y);let k,A,U,C,T,v,B,S=!1;for(let t=0;t<l.length;t+=3)-1===l[t]&&-1===l[t+1]&&-1===l[t+2]&&(S=!0);const O=new Float32Array(c*m),P=new Float32Array(c*m);let b,I,j=0;const z=\"majority\"===r?0:.5;for(let t=0;t<M;t++)for(let e=0;e<g;e++){k=12*(t*g+e),A=l[k],U=l[k+1],C=l[k+2],T=l[k+3],v=l[k+4],B=l[k+5];for(let n=0;n<y;n++){j=(t*y+n)*c+e*w,I=(n+.5)/y;for(let t=0;t<n;t++)b=(t+.5)/w,O[j+t]=Math.round((A*b+U*I+C)*f-z),P[j+t]=Math.round((T*b+v*I+B)*u-z)}k+=6,A=l[k],U=l[k+1],C=l[k+2],T=l[k+3],v=l[k+4],B=l[k+5];for(let n=0;n<y;n++){j=(t*y+n)*c+e*w,I=(n+.5)/y;for(let t=n;t<w;t++)b=(t+.5)/w,O[j+t]=Math.round((A*b+U*I+C)*f-z),P[j+t]=Math.round((T*b+v*I+B)*u-z)}}const D=(t,e)=>{for(let n=0;n<m;n++){k=n*c;for(let n=0;n<c;n++)O[k]<0||P[k]<0?t[k]=0:t[k]=e[O[k]+P[k]*f],k++}},E=[];let $;for(let t=0;t<p;t++)$=new x(c*m),D($,a[t]),E.push($);const q=new _PixelBlock_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"]({width:c,height:m,pixelType:h,pixels:E});if(s)q.mask=new Uint8Array(c*m),D(q.mask,s);else if(S){q.mask=new Uint8Array(c*m);for(let t=0;t<c*m;t++)q.mask[t]=O[t]<0||P[t]<0?0:1}return q.updateStatistics(),q}\n\n\n/***/ }),\n\n/***/ \"rXMu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return i; });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"wdpY\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nasync function i(i,d=i.popupTemplate){if(!Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isSome */ \"h\"])(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* getFeatureEditFields */ \"m\"])(i):[],m=Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* fixFields */ \"i\"])(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* hasField */ \"p\"])(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* hasField */ \"p\"])(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* hasField */ \"p\"])(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isSome */ \"h\"])(l)&&l.defaultPopupTemplateEnabled&&Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isSome */ \"h\"])(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}\n\n\n/***/ }),\n\n/***/ \"rrwe\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Point.js + 2 modules\nvar Point = __webpack_require__(\"SuVq\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/Extent.js\nvar Extent = __webpack_require__(\"OvF4\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry.js\nvar geometry = __webpack_require__(\"4GrV\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(\"qRWG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Graphic.js\nvar Graphic = __webpack_require__(\"jWBI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/watchUtils.js\nvar watchUtils = __webpack_require__(\"N5XI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/PixelBlock.js\nvar PixelBlock = __webpack_require__(\"Piei\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/TileInfo.js\nvar TileInfo = __webpack_require__(\"3/ME\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterFunctions/pixelUtils.js\nvar pixelUtils = __webpack_require__(\"ne7T\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js\nvar rasterProjectionHelper = __webpack_require__(\"tODX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/rasterDatasets/RawBlockCache.js + 1 modules\nvar RawBlockCache = __webpack_require__(\"IYxN\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js\nvar RefreshableLayerView = __webpack_require__(\"bHqs\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities.js\nvar capabilities = __webpack_require__(\"sq/B\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js + 2 modules\nvar TileInfoView = __webpack_require__(\"AY31\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js\nvar TileQueue = __webpack_require__(\"B81a\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js + 1 modules\nvar TileStrategy = __webpack_require__(\"0wLv\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/LayerView.js\nvar LayerView = __webpack_require__(\"NloG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/support/drapedUtils.js\nvar drapedUtils = __webpack_require__(\"6UvW\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Error.js\nvar Error = __webpack_require__(\"zlDU\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/layers/support/popupUtils.js\nvar popupUtils = __webpack_require__(\"rXMu\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst ImageryTileLayerView_u=u=>{let m=class extends u{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,r){const{layer:i}=this;if(!e)return Object(promiseUtils[\"t\" /* reject */])(new Error[\"a\" /* default */](\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:i}));const{popupEnabled:n}=i,l=Object(popupUtils[\"a\" /* getFetchPopupTemplate */])(i,r);if(!n||!Object(maybe[\"h\" /* isSome */])(l))throw new Error[\"a\" /* default */](\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:n,popupTemplate:l});const u=[],{value:m}=await i.identify(e);if(m){var f,c;const e=m.join(\", \"),t={ObjectId:0},r=\"Raster.ServicePixelValue\";t[r]=this._formatAttributeValue(e,r);const o=null==(f=i.rasterInfo)||null==(c=f.attributeTable)?void 0:c.features;if(o&&o.length>0){const r=o.filter((t=>{const r=t.attributes.value||t.attributes.Value||t.attributes.VALUE;return String(r)===e}));if(r.length>0){const e=r[0];if(e)for(const r in e.attributes)if(e.attributes.hasOwnProperty(r)){const i=this._rasterFieldPrefix+r;t[i]=this._formatAttributeValue(e.attributes[r],i)}}}const s=new Graphic[\"a\" /* default */](this.fullExtent.clone(),null,t);s.layer=i,s.sourceLayer=s.layer,u.push(s)}return u}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new Error[\"a\" /* default */](\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const r=Object(rasterProjectionHelper[\"d\" /* projectExtent */])(this.layer.fullExtent,this.view.spatialReference,this.datumTransformation);return null==r&&(t=new Error[\"a\" /* default */](\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",r),t?Object(promiseUtils[\"t\" /* reject */])(t):Object(promiseUtils[\"u\" /* resolve */])()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],m.prototype,\"layer\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],m.prototype,\"view\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],m.prototype,\"fullExtent\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],m.prototype,\"tileInfo\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,dependsOn:[\"layer.renderer\"]})],m.prototype,\"hasTilingEffects\",null),m=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.layers.ImageryTileLayerView\")],m),m};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(\"kYAx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(\"yE7X\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/brushes.js + 14 modules\nvar brushes = __webpack_require__(\"Oxob\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js\nvar TileContainer = __webpack_require__(\"ZyIX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js\nvar TiledDisplayObject = __webpack_require__(\"5LEI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat3.js\nvar mat3 = __webpack_require__(\"HJJS\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat3f32.js\nvar mat3f32 = __webpack_require__(\"jHF5\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2f32.js\nvar vec2f32 = __webpack_require__(\"c46T\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js\nvar DisplayObject = __webpack_require__(\"fEsP\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/rasterUtils.js\nvar rasterUtils = __webpack_require__(\"vrr1\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/RasterBitmap.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst RasterBitmap_={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,type:\"stretch\"};class RasterBitmap_p extends DisplayObject[\"a\" /* DisplayObject */]{constructor(t=null,e=null,s=null){super(),this._textureInvalidated=!0,this._memoryUsed=null,this._supportsBilinear=!0,this.stencilRef=0,this.coordScale=[1,1],this._symbolizerParameters=null,this.height=null,this.isRendereredSource=!1,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this.rawPixelData=null,this._suspended=!1,this._bandIds=null,this._interpolation=null,this._transformGrid=null,this.width=null,this.x=0,this.y=0,this.transforms={dvs:Object(mat3f32[\"b\" /* c */])()},this.source=t,this.transformGrid=e,this.interpolation=s}get symbolizerParameters(){return this._symbolizerParameters||RasterBitmap_}set symbolizerParameters(t){this._symbolizerParameters=t}get source(){return this._source}set source(t){this._source=t,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._memoryUsed=null)}get suspended(){return this._suspended}set suspended(t){this._suspended&&!t&&this.stage&&(this.ready(),this.requestRender()),this._suspended=t}get bandIds(){return this._bandIds}set bandIds(t){this._bandIds=t,this.invalidateTexture()}get interpolation(){return this._interpolation}set interpolation(t){this._interpolation=t,this._rasterTexture&&this._rasterTexture.setSamplingMode(!this._supportsBilinear||\"bilinear\"!==t&&\"cubic\"!==t?9728:9729)}get transformGrid(){return this._transformGrid}set transformGrid(t){this._transformGrid=t,this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null,this._memoryUsed=null)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRender())}setTransform(t){const o=Object(mat3[\"d\" /* i */])(this.transforms.dvs),[u,h]=t.toScreenNoRotation([0,0],this.x,this.y),l=this.resolution/this.pixelRatio/t.resolution,d=l*this.width,m=l*this.height,_=Math.PI*this.rotation/180;Object(mat3[\"a\"])(o,o,Object(vec2f32[\"b\" /* f */])(u,h)),Object(mat3[\"a\"])(o,o,Object(vec2f32[\"b\" /* f */])(d/2,m/2)),Object(mat3[\"h\" /* r */])(o,o,-_),Object(mat3[\"a\"])(o,o,Object(vec2f32[\"b\" /* f */])(-d/2,-m/2)),Object(mat3[\"e\" /* j */])(o,o,Object(vec2f32[\"b\" /* f */])(d,m)),Object(mat3[\"f\" /* m */])(this.transforms.dvs,t.displayViewMat3,o)}getTextures(){if(!this._rasterTexture)return null;const t=[],e=[];return this._transformGridTexture&&(e.push(this._transformGridTexture),t.push(\"u_transformGrid\")),this._rasterTexture&&(e.push(this._rasterTexture),t.push(\"u_image\")),this._colormapTexture&&(e.push(this._colormapTexture),t.push(\"u_colormap\")),{names:t,textures:e}}getMemoryUsage(){if(Object(maybe[\"g\" /* isNone */])(this._memoryUsed)){const t=this.getTextures();if(null==t)return 0;this._memoryUsed=t.textures.map((t=>t.descriptor.width*t.descriptor.height*4)).reduce(((t,e)=>t+e))}return this._memoryUsed}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}updateTexture({context:t}){var e,s,r;if(!this.stage)return null==(e=this._rasterTexture)||e.dispose(),null==(s=this._transformGridTexture)||s.dispose(),null==(r=this._colormapTexture)||r.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._transformGridTexture=null,void(this._colormapTexture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1;const i=this.source,a=i&&i.pixels&&i.pixels.length>0;this._createOrDestroyRasterTexture(t),this._rasterTexture&&(a?(this._updateColormapTexture(t),this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=Object(rasterUtils[\"c\" /* createTransformTexture */])(t,this.transformGrid))):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender())}_createOrDestroyRasterTexture(t){var e,s;const r=this.source?Object(pixelUtils[\"g\" /* extractBands */])(this.source,this.bandIds):null;if(!(r&&r.pixels&&r.pixels.length>0))return void(this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null));const i=null==this._rasterTextureBandIds&&null==this.bandIds||this._rasterTextureBandIds&&this.bandIds&&this._rasterTextureBandIds.join(\"\")===this.bandIds.join(\"\");if(this._rasterTexture){if(i)return;this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null}const a=this.interpolation||\"nearest\",u=this.isRendereredSource||!(null!=(e=t.capabilities.textureFloat)&&e.textureFloat);this._rasterTexture=Object(rasterUtils[\"b\" /* createRasterTexture */])(t,r,a,u),this._supportsBilinear=null==(s=t.capabilities.textureFloat)?void 0:s.textureFloatLinear,this._rasterTextureBandIds=this.bandIds}_updateColormapTexture(t){const e=this._colormap,s=this.symbolizerParameters.colormap;return s?e?s.length!==e.length||s.some(((t,s)=>t!==e[s]))?(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=Object(rasterUtils[\"a\" /* createColormapTexture */])(t,s),void(this._colormap=s)):void 0:(this._colormapTexture=Object(rasterUtils[\"a\" /* createColormapTexture */])(t,s),void(this._colormap=s)):(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),void(this._colormap=null))}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/RasterTile.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass RasterTile_e extends TiledDisplayObject[\"a\" /* TiledDisplayObject */]{constructor(t,e,i,a=null){super(t,e,i),this.bitmap=new RasterBitmap_p(a,null,null),this.bitmap.coordScale=i,this.bitmap.once(\"isReady\",(()=>this.ready()))}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}getMemoryUsage(){return this.bitmap.getMemoryUsage()}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}release(){return this.destroy(),this.bitmap=null,this.stage=null,!0}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass RasterTileContainer_o extends TileContainer[\"a\" /* default */]{createTile(r){const s=this._tileInfoView.getTileBounds(Object(aaBoundingRect[\"d\" /* create */])(),r);return new RasterTile_e(r,s,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[brushes[\"a\" /* brushes */].raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:enums[\"c\" /* WGLDrawPhase */].MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===enums[\"c\" /* WGLDrawPhase */].MAP&&super.doRender(e)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js + 4 modules\nvar LayerView2D = __webpack_require__(\"Vm2Q\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst L=Logger[\"a\" /* default */].getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),q=[0,0];let D=class extends(ImageryTileLayerView_u(Object(RefreshableLayerView[\"a\" /* RefreshableLayerView */])(Object(LayerView2D[\"a\" /* LayerView2DMixin */])(LayerView[\"a\" /* default */])))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._bitmapView=null,this._emptyTilePixelBlock=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this.useWebGLForProcessing=!0,this.datumTransformation=null,this._redrawDebounced=Object(promiseUtils[\"i\" /* debounce */])((e=>this._redrawImage(e)),2e3)}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new TileStrategy[\"a\" /* default */]({cachePolicy:e?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate())}hitTest(e,t){if(this.suspended)return Object(promiseUtils[\"u\" /* resolve */])(null);const i=this.view.toMap(Object(screenUtils[\"b\" /* createScreenPoint */])(e,t));return Object(promiseUtils[\"u\" /* resolve */])(new Graphic[\"a\" /* default */]({attributes:{},geometry:i}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var a;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:Extent[\"a\" /* default */].fromJSON(t);Object(RawBlockCache[\"h\" /* update */])(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(a=this._previousLOD)?void 0:a.level)!==r.level&&(this._previousLOD=r,null!=this._symbolizerParams&&this._updateSymbolizerParams())}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),Object(capabilities[\"a\" /* default */])().supportsTextureFloat||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0),this._initializeTileInfo(),this._tileInfoView=new TileInfoView[\"a\" /* default */](this.tileInfo,this.fullExtent),this._fetchQueue=new TileQueue[\"a\" /* default */]({tileInfoView:this._tileInfoView,concurrency:10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new TileStrategy[\"a\" /* default */]({cachePolicy:this.useProgressiveUpdate?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new RasterTileContainer_o(this._tileInfoView),this.container.addChild(this._bitmapView),this.handles.add([Object(watchUtils[\"d\" /* watch */])(this,[\"layer.bandIds\",\"layer.renderer\"],(()=>this._redrawDebounced().catch((e=>{Object(promiseUtils[\"n\" /* isAbortError */])(e)||L.error(e)})))),Object(watchUtils[\"d\" /* watch */])(this,[\"layer.interpolation\"],((e,t)=>{\"majority\"!==e&&\"majority\"!==t||!this._canUseMajorityInterpolationOnDataSource()?this._redrawDebounced().catch((e=>{Object(promiseUtils[\"n\" /* isAbortError */])(e)||L.error(e)})):this.refreshDebounced()})),Object(watchUtils[\"d\" /* watch */])(this,[\"layer.multidimensionalDefinition\"],this.refreshDebounced)],\"attach\"),this._updateBlockCacheRegistry()}detach(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,Object(RawBlockCache[\"g\" /* unregister */])(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=Object(promiseUtils[\"d\" /* createAbortController */])(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()}))),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return Object(drapedUtils[\"a\" /* createQueryGeometry */])(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._updateSymbolizerParams(),this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(q,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()}fetchTile(e,s){const r=!Object(maybe[\"g\" /* isNone */])(s)&&s.signal,a=this._canUseWebGLForProcessing(),l={tileInfo:this.tileInfo,signal:Object(maybe[\"n\" /* unwrap */])(r),registryId:this._blockCacheRegistryId,requestRawData:a,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:a?\"nearest\":this.layer.interpolation};return this.layer.fetchTile(e.level,e.row,e.col,l)}_canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}_initializeTileInfo(){const e=this.view.spatialReference,t=new Point[\"a\" /* default */]({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s}=Object(rasterProjectionHelper[\"a\" /* computeProjectedScales */])(this.layer.rasterInfo,e),r=TileInfo[\"a\" /* default */].create({spatialReference:e,size:512,scales:i});(0===r.origin.x||r.origin.x>t.x)&&(r.origin=t),this._set(\"tileInfo\",r),this._srcResolutions=null!=s?s:[]}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:i}=this.layer;let s=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){s=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(e){Object(promiseUtils[\"n\" /* isAbortError */])(e)&&L.error(e)}this._globalUpdateRequested=!1}const r=this._canUseWebGLForProcessing();if(r&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock){if(r)e.bitmap.source=t.pixelBlock,e.bitmap.isRendereredSource=!1;else{const i={extent:t.extent,pixelBlock:t.pixelBlock},s=await this.layer.applyRenderer(i,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null);e.bitmap.rawPixelData=i,e.bitmap.source=s,e.bitmap.isRendereredSource=!0}e.bitmap.symbolizerParameters=r?this._globalSymbolizerParams||this._symbolizerParams:null,!e.bitmap.transformGrid&&r?e.bitmap.transformGrid=t.transformGrid:e.bitmap.transformGrid=null}else{const t=this._createEmptyTilePixelBlock();e.bitmap.source=t,e.bitmap.symbolizerParameters=r?this._symbolizerParams:null,e.bitmap.transformGrid=null}e.bitmap.bandIds=i,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=s,e.bitmap.invalidateTexture(),e.once(\"attach\",(()=>this.requestUpdate())),this._bitmapView.addChild(e)}catch(e){Object(promiseUtils[\"n\" /* isAbortError */])(e)||L.error(e)}this.requestUpdate()}}async _redrawImage(e){this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const{bandIds:t}=this.layer,i=this._bitmapView.children.map((async e=>{const i=this._canUseWebGLForProcessing();i?e.bitmap.isRendereredSource=!1:(e.bitmap.source=await this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null),e.bitmap.isRendereredSource=!0),e.bitmap.symbolizerParameters=i?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1}));await Object(promiseUtils[\"j\" /* eachAlways */])(i),this.container.requestRender()}_createEmptyTilePixelBlock(){if(!this._emptyTilePixelBlock){const e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new PixelBlock[\"a\" /* default */]({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:\"u8\"})}return this._emptyTilePixelBlock}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:Object(pixelUtils[\"g\" /* extractBands */])(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this._canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(){const{url:e,rasterInfo:t,multidimensionalDefinition:i,raster:s}=this.layer,r=null!=t&&t.multidimensionalInfo?s.getSliceIndex(i):null,a=Object(RawBlockCache[\"d\" /* getRasterId */])(e,r);a!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&Object(RawBlockCache[\"g\" /* unregister */])(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=Object(RawBlockCache[\"f\" /* register */])(a,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=a)}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}_getLayerInterpolation(){const e=this.layer.renderer.type;return\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e?\"nearest\":this.layer.interpolation}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])()],D.prototype,\"useProgressiveUpdate\",null),D=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.2d.layers.ImageryTileLayerView2D\")],D);var G=D;/* harmony default export */ var ImageryTileLayerView2D = __webpack_exports__[\"default\"] = (G);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}