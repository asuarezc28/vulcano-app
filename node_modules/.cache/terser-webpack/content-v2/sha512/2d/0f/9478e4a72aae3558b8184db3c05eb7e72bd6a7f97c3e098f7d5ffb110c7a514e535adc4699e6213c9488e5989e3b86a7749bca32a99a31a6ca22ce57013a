{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{\"2vGY\":function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return a});var i=s(\"yN2G\");class r{constructor(e,t,s){this.data=e,this.stride=t,this.vertexCount=s}static decode(e){const t=Object(i.c)(e.data,e.stride);return new r(t,e.stride,e.vertexCount)}static fromVertexVector(e){const t=Object(i.c)(e.data.buffer(),e.stride);return new r(t,e.stride,e.vertexCount)}}class a{constructor(e,t,s){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=s}static decode(e){const t=e.geometryType,s=e.indexBuffer,i={};for(const a in e.namedBuffers)i[a]=r.decode(e.namedBuffers[a]);return new a(t,s,i)}static fromVertexVectors(e){const t=e.geometryType,s=e.indexVector.buffer(),i={};for(const a in e.namedVectors)i[a]=r.fromVertexVector(e.namedVectors[a]);return new a(t,s,i)}}},NMeD:function(e,t,s){\"use strict\";var i=s(\"6S2I\"),r=s(\"jIHu\"),a=s(\"c46T\"),n=s(\"e+Fw\"),o=s(\"wnVl\");const h=i.a.getLogger(\"esri/views/2d/engine/webgl/collisions/Metric\");class u{constructor(e,t,s,i,r){this.id=e,this.range=t,this.boxes=null,this.minZoom=-1,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.placementPadding=0,this.anchor=Object(a.b)(s,i),this.baseZoom=r}add(e,t,s){e.x=e.x+t,e.y=e.y+s,this.bounds?this.boxes?(this.boxes.push(e),this.bounds.extend(e)):(this.boxes=[this.bounds,e],this.bounds=this.bounds.clone(),this.bounds.extend(e)):this.bounds=e}computeIndex(){const e=this.anchor[1],t=Math.floor(this.anchor[0]/r.d),s=Math.floor(e/r.d);this.xBucket=t,this.yBucket=s;const i=r.F/r.d;if(this.hasVV)return this.xOverflow=i,void(this.yOverflow=i);this.xOverflow=Math.min(i,Math.ceil(2*this.bounds.width/r.d)),this.yOverflow=Math.min(i,Math.ceil(2*this.bounds.height/r.d))}findCollisionDelta(e){const t=this.bounds.findCollisionDelta(e.bounds),s=this.boxes&&this.boxes.length,i=e.boxes&&e.boxes.length;return Math.abs(t)>r.f||!s&&!i?t:s&&i?this._boxesToBoxes(e):s?this._boxesToBox(e):this._boxToBoxes(e)}computeVVOffset(e,t){t||h.error(\"mapview-labeling\",\"Unable to compute label offset. Expected an evaluator function but found \"+t);let s=this.size;if(this.hasVV){const i=t(e);s=isNaN(i)||null==i||i===1/0?this.size:i}this._computeOffset(s)}setPlacementOffset(e,t,s,i,r){this.hasVV=e,this.size=t,this.placementPadding=Math.round(s),this.directionX=i,this.directionY=r}clone(){const e=new u(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return e.minZoom=this.minZoom,this.bounds&&(e.bounds=this.bounds.clone()),this.boxes&&(e.boxes=this.boxes.map(e=>e.clone())),e.xBucket=this.xBucket,e.yBucket=this.yBucket,e.xOverflow=this.xOverflow,e.yOverflow=this.yOverflow,e.hasVV=this.hasVV,e.size=this.size,e.directionX=this.directionX,e.directionY=this.directionY,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e}_boxToBoxes(e){let t=-1/0;for(const s of e.boxes){const e=this.bounds.findCollisionDelta(s);t=Math.max(e,t)}return t}_boxesToBox(e){let t=this.boxes[0].findCollisionDelta(e.bounds);for(let s=1;s<this.boxes.length;s++){const i=this.boxes[s].findCollisionDelta(e.bounds);t=Math.max(i,t)}return t}_boxesToBoxes(e){let t=-1/0;for(let s=0;s<this.boxes.length;s++){const i=this.boxes[s];for(const s of e.boxes){const e=i.findCollisionDelta(s);t=Math.max(e,t)}}return t}_computeOffset(e){this.offsetX=this.directionX*(e/2+this.placementPadding),this.offsetY=this.directionY*(e/2+this.placementPadding)}serialize(e){return e.push(this.id),this.bounds.serialize(e),e.push(this.range.from),e.push(this.range.count),e.push(this.anchor[0]),e.push(this.anchor[1]),e.push(this.baseZoom),e.push(this.hasVV?1:0),e.push(this.size),e.writeF32(this.directionX),e.writeF32(this.directionY),e.push(this.offsetX),e.push(this.offsetY),e.push(this.placementPadding),Object(o.b)(e,this.boxes),e}static deserialize(e){const t=e.readInt32(),s=n.a.deserialize(e),i={from:e.readInt32(),count:e.readInt32()},r=e.readInt32(),a=e.readInt32(),h=e.readInt32(),l=e.readInt32(),c=e.readInt32(),f=e.readF32(),d=e.readF32(),b=e.readInt32(),p=e.readInt32(),x=e.readInt32(),y=Object(o.a)(e,n.a),_=new u(t,i,r,a,h);return _.bounds=s,_.boxes=y,_.setPlacementOffset(!!l,c,x,f,d),_.offsetX=b,_.offsetY=p,_.computeIndex(),l||_._computeOffset(c),_}}t.a=u},PeSW:function(e,t,s){\"use strict\";t.a=class{constructor(e,t){this._pos=0;const s=t?this._roundToNearest(t,e.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(s),this._buffer=new e(this._array),this._ctor=e}get length(){return this._pos}_roundToNearest(e,t){const s=Math.round(e);return s+(t-s%t)}_ensureSize(e){if(this._pos+e>=this._buffer.length){const t=this._roundToNearest(1.5*(this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),s=new ArrayBuffer(t),i=new this._ctor(s);i.set(this._buffer,0),this._array=s,this._buffer=i}}writeF32(e){this._ensureSize(1);const t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t}push(e){this._ensureSize(1);const t=this._pos;return this._buffer[this._pos++]=e,t}writeFixed(e){this._buffer[this._pos++]=e}setValue(e,t){this._buffer[e]=t}getValue(e){return this._buffer[e]}incr(e){this._buffer[e]++}decr(e){this._buffer[e]--}writeRegion(e){this._ensureSize(e.length);const t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t}buffer(){const e=this._array.slice(0,4*this._pos);return this.destroy(),e}toArray(){const e=this._array,t=[];for(let s=0;s<e.byteLength/4;s++)t.push(e[s]);return t}seek(e){this._pos=e}destroy(){this._array=null,this._buffer=null}}},ZByl:function(e,t,s){\"use strict\";var i=s(\"opKs\"),r=s(\"wnVl\"),a=s(\"NMeD\");class n{constructor(e){this.insertAfter=null,this.id=e,this.displayRecords=[],this.metrics=[]}copy(){const e=new n(this.id);return e.set(this),e}clone(){const e=new n(this.id);return e.displayRecords=this.displayRecords.map(e=>e.clone()),e.metrics=this.metrics.map(e=>e.clone()),e.insertAfter=this.insertAfter,e}set(e){this.id=e.id,this.displayRecords=e.displayRecords,this.metrics=e.metrics,this.insertAfter=e.insertAfter}serialize(e){return e.push(this.id),Object(r.b)(e,this.metrics),Object(r.b)(e,this.displayRecords),e}static deserialize(e){const t=e.readInt32(),s=new n(t),o={id:t},h=Object(r.a)(e,a.a);return h.length&&(s.metrics=h),s.displayRecords=Object(r.a)(e,i.a,o),s}}t.a=n},acOm:function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return u});var i=s(\"opKs\"),r=s(\"wnVl\"),a=s(\"NMeD\"),n=s(\"ZByl\"),o=class{constructor(e){this._pos=0,this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}},h=s(\"PeSW\");class u{constructor(e,t){this.vertexVectorsMap=e,this._currentIndex=-1,this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[];const s=4*(8*t.records+1),i=4*(20*t.metrics+1);this._bufDisplayObjects=new h.a(Uint32Array,4*(4*t.features+1)+4),this._bufDisplayRecords=new h.a(Uint32Array,s+4),this._bufMetrics=new h.a(Uint32Array,i+4),this._bufDisplayObjects.push(0),this._bufDisplayRecords.push(0),this._bufMetrics.push(0)}get vertexBuffersMap(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(let e=0;e<this.vertexVectorsMap.length;e++)this._vertexBuffersMap[e]=this.vertexVectorsMap[e].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap}get(e){return this.vertexVectorsMap[e]}currentDisplayRecordCount(){return this._bufDisplayRecords[this._currentRecordOffset]}writeDisplayObject(e,t){this._bufDisplayObjects.incr(0),this._currentIndex=this._bufDisplayObjects.push(e),this._bufDisplayObjects.push(t),this._bufDisplayObjects.push(0),this._bufDisplayObjects.push(0),this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[]}hasDisplayRecords(){return!(0===this._currentRecordOffset)}endDisplayObject(){this.hasDisplayRecords()?this._currentMetrics&&(0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=this._bufMetrics.length),Object(r.b)(this._bufMetrics,this._currentMetrics)):this._rollbackDisplayObject()}writeDisplayRecord(e,t,s,i,r,a,n=0,o=0){0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset)),this._bufDisplayRecords.incr(this._currentRecordOffset),this._bufDisplayRecords.push(e),this._bufDisplayRecords.push(t),this._bufDisplayRecords.push(s),this._bufDisplayRecords.push(i),this._bufDisplayRecords.push(r),this._bufDisplayRecords.push(a),this._bufDisplayRecords.push(n),this._bufDisplayRecords.push(o)}writeMetrics(e){e&&this._currentMetrics.push(...e)}static deserializeDisplayObjects(e){const{bufDisplayObjects:t,bufMetrics:s,bufRecords:h}=e,u=new o(t),l=new o(h),c=new o(s),f=[];let d=u.readInt32();for(l.readInt32(),c.readInt32();d--;){const e=u.readInt32(),t=u.readInt32(),s=u.readInt32(),o=u.readInt32(),h=new n.a(e);0!==t&&(h.insertAfter=t),0!==s&&(h.displayRecords=Object(r.a)(l,i.a,{id:e})),0!==o&&(h.metrics=Object(r.a)(c,a.a)),f.push(h)}return f}encode(e,t){const s={};for(let i=0;i<this.vertexVectorsMap.length;i++){const e=this.vertexVectorsMap[i];s[i]={},e.transfer(s[i],t)}e.bufDisplayObjects=this._bufDisplayObjects.buffer(),e.bufRecords=this._bufDisplayRecords.buffer(),e.bufMetrics=this._bufMetrics.buffer(),t.push(e.bufDisplayObjects),t.push(e.bufMetrics),t.push(e.bufRecords),e.vertexBuffersMap=s,this.destroy()}destroy(){this.vertexVectorsMap=null,this._bufDisplayObjects=null,this._bufDisplayRecords=null,this._bufMetrics=null}_rollbackDisplayObject(){this._bufDisplayObjects.decr(0),this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4),this._currentIndex=this._bufDisplayObjects.length}}},opKs:function(e,t,s){\"use strict\";var i=s(\"yN2G\"),r=class{constructor(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}clear(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]}update(e,t,s){for(const i in e)this.vertexData.set(i,e[i]);for(const i in this.vertexData)null===e[i]&&this.vertexData.delete(i);this.vertexCount=t,this.indexData=s}};class a{constructor(e,t,s,i=0,r=0){this.id=e,this.geometryType=t,this.materialKey=s,this.minZoom=i,this.maxZoom=r,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}get sortKey(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey}clone(){return this.copy()}copy(){const e=new a(this.id,this.geometryType,this.materialKey);return e.vertexFrom=this.vertexFrom,e.vertexCount=this.vertexCount,e.indexFrom=this.indexFrom,e.indexCount=this.indexCount,e.zOrder=this.zOrder,e.symbolLevel=this.symbolLevel,e.meshData=this.meshData,e.minZoom=this.minZoom,e.maxZoom=this.maxZoom,e}setMeshDataFromBuffers(e,t,s){const a=new r;for(const r in t){const s=t[r].stride,n=t[r].data,o=[],h=Object(i.o)(s);for(let t=0;t<s*e.vertexCount/h;++t)o[t]=n[t+s*e.vertexFrom/h];a.vertexData.set(r,o)}a.indexData.length=0;for(let i=0;i<e.indexCount;++i)a.indexData[i]=s[i+e.indexFrom]-e.vertexFrom;a.vertexCount=e.vertexCount,this.meshData=a}readMeshDataFromBuffers(e,t){this.meshData?this.meshData.clear():this.meshData=new r;for(const s in e){const t=e[s].stride,r=e[s].data,a=[],n=Object(i.o)(t);for(let e=0;e<t*this.vertexCount/n;++e)a[e]=r[e+t*this.vertexFrom/n];this.meshData.vertexData.set(s,a)}this.meshData.indexData.length=0;for(let s=0;s<this.indexCount;++s)this.meshData.indexData[s]=t[s+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount}writeMeshDataToBuffers(e,t,s,r){for(const a in t){const s=t[a].stride,r=this.meshData.vertexData.get(a),n=t[a].data,o=Object(i.o)(s);for(let t=0;t<s*this.meshData.vertexCount/o;++t)n[t+s*e/o]=r[t]}for(let i=0;i<this.meshData.indexData.length;++i)r[i+s]=this.meshData.indexData[i]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=s,this.indexCount=this.meshData.indexData.length}static writeAllMeshDataToBuffers(e,t,s){let i=0,r=0;for(const a of e)a.writeMeshDataToBuffers(i,t,r,s),i+=a.vertexCount,r+=a.indexCount}_computeSortKey(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType}serialize(e){return e.push(this.geometryType),e.push(this.materialKey),e.push(this.vertexFrom),e.push(this.vertexCount),e.push(this.indexFrom),e.push(this.indexCount),e.push(this.minZoom),e.push(this.maxZoom),e}static deserialize(e,t){const s=e.readInt32(),i=e.readInt32(),r=new a(t.id,s,i);return r.vertexFrom=e.readInt32(),r.vertexCount=e.readInt32(),r.indexFrom=e.readInt32(),r.indexCount=e.readInt32(),r.minZoom=e.readInt32(),r.maxZoom=e.readInt32(),r}}t.a=a},wfc5:function(e,t,s){\"use strict\";s.r(t);var i=s(\"pO5D\"),r=(s(\"wSAH\"),s(\"6S2I\"),s(\"zqDF\"),s(\"WbKI\"),s(\"04ZG\")),a=(s(\"4EHJ\"),s(\"ju1D\"),s(\"9AIY\"),s(\"kYAx\")),n=s(\"KFVX\"),o=s(\"tDOP\"),h=s(\"gzK8\"),u=s(\"4xTw\"),l=s(\"9MzC\"),c=s(\"yE7X\"),f=s(\"Oxob\"),d=s(\"by2V\");class b extends d.a{constructor(e,t,s){super(e),this._pointToCallbacks=new Map,this._layer=s,this._layerView=t}renderChildren(e){this.attributeView.update(),this.hasAnimation&&e.painter.effects.integrate.draw(e,e.attributeView),super.renderChildren(e)}hitTest(e,t){const s=[e,t],i=Object(l.g)();return this._pointToCallbacks.set(s,i),this.requestRender(),i.promise}doRender(e){const{minScale:t,maxScale:s}=this._layer,i=e.state.scale;i<=(t||1/0)&&i>=s&&super.doRender(e)}get hasAnimation(){return this.hasLabels}get hasLabels(){const e=this._layer.featureReduction;return this._layer.labelingInfo&&this._layer.labelingInfo.length&&this._layer.labelsVisible||!!(e&&\"cluster\"===e.type&&e.labelsVisible&&e.labelingInfo&&e.labelingInfo.length)}get labelsVisible(){return this._layer.labelsVisible}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"label\",brushes:[f.a.label],target:()=>this.hasLabels?this.children:null,drawPhase:c.c.LABEL|c.c.LABEL_ALPHA}),s=e.registerRenderPass({name:\"geometry\",brushes:[f.a.fill,f.a.line,f.a.marker,f.a.text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.excluded},{apply:e.effects.insideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.included},{apply:e.effects.hittest,enable:()=>!!this._pointToCallbacks.size,args:()=>this._pointToCallbacks}]}),i=e.registerRenderPass({name:\"highlight\",brushes:[f.a.fill,f.a.line,f.a.marker,f.a.text],target:()=>this.children,drawPhase:c.c.HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:e.effects.highlight,enable:()=>!!this._layerView.hasHighlight()}]});return[...super.prepareRenderPasses(e),s,i,t]}}let p=class extends u.a{install(e){const t=new b(this.tileInfoView,this.layerView,this.layer);this.featuresView=t,e.addChild(t)}uninstall(e){e.removeChild(this.featuresView),this.featuresView.destroy()}hitTest(e,t){return this.featuresView.hitTest(e,t)}supportsRenderer(e){return null!=e&&-1!==[\"simple\",\"class-breaks\",\"unique-value\",\"dot-density\",\"dictionary\"].indexOf(e.type)}onConfigUpdate(e){let t=null;if(\"visualVariables\"in e){const s=(Object(o.a)(e).visualVariables||[]).map(e=>{const t=e.clone();return\"normalizationField\"in e&&(t.normalizationField=null),e.valueExpression&&\"$view.scale\"!==e.valueExpression&&(t.valueExpression=null,t.field=\"nop\"),t});t=Object(h.a)(s)}this.featuresView.setRendererInfo(e,t,this.layerView.effects)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach(e=>e.lockUploads())}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach(e=>e.unlockUploads())}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&(this.tiles.forEach(e=>e.isDirty=!0),this.layerView.view.labelManager.requestUpdate())}createTile(e){const t=this.tileInfoView.getTileBounds(Object(a.d)(),e),s=new n.a(e,t);return this.featuresView.hasLabels&&this.layerView.view.labelManager.addTile(this.layerView,s),s}disposeTile(e){this.featuresView.removeChild(e),this.featuresView.hasLabels&&this.layerView.view.labelManager.removeTile(this.layerView,e.key.id),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};p=Object(i.a)([Object(r.a)(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")],p),t.default=p},wnVl:function(e,t,s){\"use strict\";function i(e,t){if(null!==t){e.push(t.length);for(const s of t)s.serialize(e);return e}e.push(0)}function r(e,t,s){const i=e.readInt32(),r=new Array(i);for(let a=0;a<r.length;a++)r[a]=t.deserialize(e,s);return r}s.d(t,\"a\",function(){return r}),s.d(t,\"b\",function(){return i})}}]);","name":"41.84b3f774b3aa0427b6f4.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[41],{\n\n/***/ \"2vGY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return r; });\n/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"yN2G\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(e,t,r){this.data=e,this.stride=t,this.vertexCount=r}static decode(r){const s=Object(_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* allocateTypedArrayBufferwithData */ \"c\"])(r.data,r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}static fromVertexVector(r){const s=Object(_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* allocateTypedArrayBufferwithData */ \"c\"])(r.data.buffer(),r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}}class r{constructor(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}static decode(e){const s=e.geometryType,o=e.indexBuffer,n={};for(const r in e.namedBuffers)n[r]=t.decode(e.namedBuffers[r]);return new r(s,o,n)}static fromVertexVectors(e){const s=e.geometryType,o=e.indexVector.buffer(),n={};for(const r in e.namedVectors)n[r]=t.fromVertexVector(e.namedVectors[r]);return new r(s,o,n)}}/* unused harmony default export */ var _unused_webpack_default_export = (t);\n\n\n/***/ }),\n\n/***/ \"NMeD\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"6S2I\");\n/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"jIHu\");\n/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"c46T\");\n/* harmony import */ var _BoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"e+Fw\");\n/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"wnVl\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst a=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].getLogger(\"esri/views/2d/engine/webgl/collisions/Metric\");class d{constructor(t,s,i,e,h){this.id=t,this.range=s,this.boxes=null,this.minZoom=-1,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.placementPadding=0,this.anchor=Object(_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_2__[/* f */ \"b\"])(i,e),this.baseZoom=h}add(t,s,i){t.x=t.x+s,t.y=t.y+i,this.bounds?this.boxes?(this.boxes.push(t),this.bounds.extend(t)):(this.boxes=[this.bounds,t],this.bounds=this.bounds.clone(),this.bounds.extend(t)):this.bounds=t}computeIndex(){const t=this.anchor[0],i=this.anchor[1],o=Math.floor(t/_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_BUCKET_SIZE */ \"d\"]),h=Math.floor(i/_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_BUCKET_SIZE */ \"d\"]);this.xBucket=o,this.yBucket=h;const n=_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* TILE_SIZE */ \"F\"]/_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_BUCKET_SIZE */ \"d\"];if(this.hasVV)return this.xOverflow=n,void(this.yOverflow=n);this.xOverflow=Math.min(n,Math.ceil(2*this.bounds.width/_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_BUCKET_SIZE */ \"d\"])),this.yOverflow=Math.min(n,Math.ceil(2*this.bounds.height/_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_BUCKET_SIZE */ \"d\"]))}findCollisionDelta(t){const s=this.bounds.findCollisionDelta(t.bounds),e=this.boxes&&this.boxes.length,o=t.boxes&&t.boxes.length;return Math.abs(s)>_definitions_js__WEBPACK_IMPORTED_MODULE_1__[/* COLLISION_MAX_ZOOM_DELTA */ \"f\"]||!e&&!o?s:e&&o?this._boxesToBoxes(t):e?this._boxesToBox(t):this._boxToBoxes(t)}computeVVOffset(t,s){s||a.error(\"mapview-labeling\",`Unable to compute label offset. Expected an evaluator function but found ${s}`);let i=this.size;if(this.hasVV){const e=s(t);i=isNaN(e)||null==e||e===1/0?this.size:e}this._computeOffset(i)}setPlacementOffset(t,s,i,e,o){this.hasVV=t,this.size=s,this.placementPadding=Math.round(i),this.directionX=e,this.directionY=o}clone(){const t=new d(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map((t=>t.clone()))),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.hasVV=this.hasVV,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t}_boxToBoxes(t){let s=-1/0;for(const i of t.boxes){const t=this.bounds.findCollisionDelta(i);s=Math.max(t,s)}return s}_boxesToBox(t){let s=this.boxes[0].findCollisionDelta(t.bounds);for(let i=1;i<this.boxes.length;i++){const e=this.boxes[i].findCollisionDelta(t.bounds);s=Math.max(e,s)}return s}_boxesToBoxes(t){let s=-1/0;for(let i=0;i<this.boxes.length;i++){const e=this.boxes[i];for(const i of t.boxes){const t=e.findCollisionDelta(i);s=Math.max(t,s)}}return s}_computeOffset(t){this.offsetX=this.directionX*(t/2+this.placementPadding),this.offsetY=this.directionY*(t/2+this.placementPadding)}serialize(t){return t.push(this.id),this.bounds.serialize(t),t.push(this.range.from),t.push(this.range.count),t.push(this.anchor[0]),t.push(this.anchor[1]),t.push(this.baseZoom),t.push(this.hasVV?1:0),t.push(this.size),t.writeF32(this.directionX),t.writeF32(this.directionY),t.push(this.offsetX),t.push(this.offsetY),t.push(this.placementPadding),Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_4__[/* serializeList */ \"b\"])(t,this.boxes),t}static deserialize(t){const s=t.readInt32(),i=_BoundingBox_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].deserialize(t),e={from:t.readInt32(),count:t.readInt32()},o=t.readInt32(),n=t.readInt32(),a=t.readInt32(),f=t.readInt32(),l=t.readInt32(),c=t.readF32(),u=t.readF32(),b=t.readInt32(),x=t.readInt32(),m=t.readInt32(),p=Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_4__[/* deserializeList */ \"a\"])(t,_BoundingBox_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]),g=new d(s,e,o,n,a);return g.bounds=i,g.boxes=p,g.setPlacementOffset(!!f,l,m,c,u),g.offsetX=b,g.offsetY=x,g.computeIndex(),f||g._computeOffset(l),g}}/* harmony default export */ __webpack_exports__[\"a\"] = (d);\n\n\n/***/ }),\n\n/***/ \"PeSW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ __webpack_exports__[\"a\"] = (class{constructor(t,s){this._pos=0;const r=s?this._roundToNearest(s,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new t(this._array),this._ctor=t}get length(){return this._pos}_roundToNearest(t,s){const r=Math.round(t);return r+(s-r%s)}_ensureSize(t){if(this._pos+t>=this._buffer.length){const s=this._roundToNearest(1.5*(this._array.byteLength+t*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(s),e=new this._ctor(r);e.set(this._buffer,0),this._array=r,this._buffer=e}}writeF32(t){this._ensureSize(1);const s=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=t,this._pos++,s}push(t){this._ensureSize(1);const s=this._pos;return this._buffer[this._pos++]=t,s}writeFixed(t){this._buffer[this._pos++]=t}setValue(t,s){this._buffer[t]=s}getValue(t){return this._buffer[t]}incr(t){this._buffer[t]++}decr(t){this._buffer[t]--}writeRegion(t){this._ensureSize(t.length);const s=this._pos;return this._buffer.set(t,this._pos),this._pos+=t.length,s}buffer(){const t=this._array.slice(0,4*this._pos);return this.destroy(),t}toArray(){const t=this._array,s=[];for(let r=0;r<t.byteLength/4;r++)s.push(t[r]);return s}seek(t){this._pos=t}destroy(){this._array=null,this._buffer=null}});\n\n\n/***/ }),\n\n/***/ \"ZByl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _WGLDisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"opKs\");\n/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"wnVl\");\n/* harmony import */ var _collisions_Metric_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"NMeD\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass r{constructor(s){this.insertAfter=null,this.id=s,this.displayRecords=[],this.metrics=[]}copy(){const s=new r(this.id);return s.set(this),s}clone(){const s=new r(this.id);return s.displayRecords=this.displayRecords.map((s=>s.clone())),s.metrics=this.metrics.map((s=>s.clone())),s.insertAfter=this.insertAfter,s}set(s){this.id=s.id,this.displayRecords=s.displayRecords,this.metrics=s.metrics,this.insertAfter=s.insertAfter}serialize(s){return s.push(this.id),Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* serializeList */ \"b\"])(s,this.metrics),Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* serializeList */ \"b\"])(s,this.displayRecords),s}static deserialize(i){const c=i.readInt32(),o=new r(c),d={id:c},n=Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* deserializeList */ \"a\"])(i,_collisions_Metric_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"]);return n.length&&(o.metrics=n),o.displayRecords=Object(_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* deserializeList */ \"a\"])(i,_WGLDisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"],d),o}}/* harmony default export */ __webpack_exports__[\"a\"] = (r);\n\n\n/***/ }),\n\n/***/ \"acOm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ MeshData_f; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js + 1 modules\nvar WGLDisplayRecord = __webpack_require__(\"opKs\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js\nvar serializationUtils = __webpack_require__(\"wnVl\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/Metric.js\nvar Metric = __webpack_require__(\"NMeD\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayObject.js\nvar WGLDisplayObject = __webpack_require__(\"ZByl\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/Reader.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var Reader = (class{constructor(t){this._pos=0,this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js\nvar Writer = __webpack_require__(\"PeSW\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass MeshData_f{constructor(s,t){this.vertexVectorsMap=s,this._currentIndex=-1,this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[];const e=4*(4*t.features+1),r=4*(8*t.records+1),i=4*(20*t.metrics+1);this._bufDisplayObjects=new Writer[\"a\" /* default */](Uint32Array,e+4),this._bufDisplayRecords=new Writer[\"a\" /* default */](Uint32Array,r+4),this._bufMetrics=new Writer[\"a\" /* default */](Uint32Array,i+4),this._bufDisplayObjects.push(0),this._bufDisplayRecords.push(0),this._bufMetrics.push(0)}get vertexBuffersMap(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(let s=0;s<this.vertexVectorsMap.length;s++)this._vertexBuffersMap[s]=this.vertexVectorsMap[s].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap}get(s){return this.vertexVectorsMap[s]}currentDisplayRecordCount(){return this._bufDisplayRecords[this._currentRecordOffset]}writeDisplayObject(s,t){this._bufDisplayObjects.incr(0),this._currentIndex=this._bufDisplayObjects.push(s),this._bufDisplayObjects.push(t),this._bufDisplayObjects.push(0),this._bufDisplayObjects.push(0),this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[]}hasDisplayRecords(){return!(0===this._currentRecordOffset)}endDisplayObject(){this.hasDisplayRecords()?this._currentMetrics&&(0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=this._bufMetrics.length),Object(serializationUtils[\"b\" /* serializeList */])(this._bufMetrics,this._currentMetrics)):this._rollbackDisplayObject()}writeDisplayRecord(s,t,e,r,i,c,u=0,f=0){0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset)),this._bufDisplayRecords.incr(this._currentRecordOffset),this._bufDisplayRecords.push(s),this._bufDisplayRecords.push(t),this._bufDisplayRecords.push(e),this._bufDisplayRecords.push(r),this._bufDisplayRecords.push(i),this._bufDisplayRecords.push(c),this._bufDisplayRecords.push(u),this._bufDisplayRecords.push(f)}writeMetrics(s){s&&this._currentMetrics.push(...s)}static deserializeDisplayObjects(t){const{bufDisplayObjects:u,bufMetrics:f,bufRecords:h}=t,p=new Reader(u),a=new Reader(h),l=new Reader(f),n=[];let b=p.readInt32();for(a.readInt32(),l.readInt32();b--;){const t=p.readInt32(),c=p.readInt32(),u=p.readInt32(),f=p.readInt32(),h=new WGLDisplayObject[\"a\" /* default */](t);0!==c&&(h.insertAfter=c),0!==u&&(h.displayRecords=Object(serializationUtils[\"a\" /* deserializeList */])(a,WGLDisplayRecord[\"a\" /* default */],{id:t})),0!==f&&(h.metrics=Object(serializationUtils[\"a\" /* deserializeList */])(l,Metric[\"a\" /* default */])),n.push(h)}return n}encode(s,t){const e={};for(let s=0;s<this.vertexVectorsMap.length;s++){const r=this.vertexVectorsMap[s];e[s]={},r.transfer(e[s],t)}s.bufDisplayObjects=this._bufDisplayObjects.buffer(),s.bufRecords=this._bufDisplayRecords.buffer(),s.bufMetrics=this._bufMetrics.buffer(),t.push(s.bufDisplayObjects),t.push(s.bufMetrics),t.push(s.bufRecords),s.vertexBuffersMap=e,this.destroy()}destroy(){this.vertexVectorsMap=null,this._bufDisplayObjects=null,this._bufDisplayRecords=null,this._bufMetrics=null}_rollbackDisplayObject(){this._bufDisplayObjects.decr(0),this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4),this._currentIndex=this._bufDisplayObjects.length}}\n\n\n/***/ }),\n\n/***/ \"opKs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js + 1 modules\nvar Utils = __webpack_require__(\"yN2G\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/MeshData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var MeshData = (class{constructor(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}clear(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]}update(t,e,a){for(const e in t)this.vertexData.set(e,t[e]);for(const e in this.vertexData)null===t[e]&&this.vertexData.delete(e);this.vertexCount=e,this.indexData=a}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass WGLDisplayRecord_s{constructor(t,e,s,r=0,i=0){this.id=t,this.geometryType=e,this.materialKey=s,this.minZoom=r,this.maxZoom=i,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}get sortKey(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey}clone(){return this.copy()}copy(){const t=new WGLDisplayRecord_s(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t}setMeshDataFromBuffers(s,r,i){const o=new MeshData;for(const e in r){const i=r[e].stride,a=r[e].data,h=[],n=Object(Utils[\"o\" /* strideToPackingFactor */])(i);for(let t=0;t<i*s.vertexCount/n;++t)h[t]=a[t+i*s.vertexFrom/n];o.vertexData.set(e,h)}o.indexData.length=0;for(let t=0;t<s.indexCount;++t)o.indexData[t]=i[t+s.indexFrom]-s.vertexFrom;o.vertexCount=s.vertexCount,this.meshData=o}readMeshDataFromBuffers(s,r){this.meshData?this.meshData.clear():this.meshData=new MeshData;for(const e in s){const r=s[e].stride,i=s[e].data,o=[],a=Object(Utils[\"o\" /* strideToPackingFactor */])(r);for(let t=0;t<r*this.vertexCount/a;++t)o[t]=i[t+r*this.vertexFrom/a];this.meshData.vertexData.set(e,o)}this.meshData.indexData.length=0;for(let t=0;t<this.indexCount;++t)this.meshData.indexData[t]=r[t+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount}writeMeshDataToBuffers(e,s,r,i){for(const r in s){const i=s[r].stride,o=this.meshData.vertexData.get(r),a=s[r].data,h=Object(Utils[\"o\" /* strideToPackingFactor */])(i);for(let t=0;t<i*this.meshData.vertexCount/h;++t)a[t+i*e/h]=o[t]}for(let t=0;t<this.meshData.indexData.length;++t)i[t+r]=this.meshData.indexData[t]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=r,this.indexCount=this.meshData.indexData.length}static writeAllMeshDataToBuffers(t,e,s){let r=0,i=0;for(const o of t)o.writeMeshDataToBuffers(r,e,i,s),r+=o.vertexCount,i+=o.indexCount}_computeSortKey(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType}serialize(t){return t.push(this.geometryType),t.push(this.materialKey),t.push(this.vertexFrom),t.push(this.vertexCount),t.push(this.indexFrom),t.push(this.indexCount),t.push(this.minZoom),t.push(this.maxZoom),t}static deserialize(t,e){const r=t.readInt32(),i=t.readInt32(),o=new WGLDisplayRecord_s(e.id,r,i);return o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o}}/* harmony default export */ var WGLDisplayRecord = __webpack_exports__[\"a\"] = (WGLDisplayRecord_s);\n\n\n/***/ }),\n\n/***/ \"wfc5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(\"kYAx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js + 5 modules\nvar WGLTile = __webpack_require__(\"KFVX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js\nvar rendererUtils = __webpack_require__(\"tDOP\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/visualVariablesUtils.js\nvar visualVariablesUtils = __webpack_require__(\"gzK8\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js\nvar BaseTileRenderer = __webpack_require__(\"4xTw\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(\"yE7X\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/brushes.js + 14 modules\nvar brushes = __webpack_require__(\"Oxob\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js + 2 modules\nvar FeatureContainer = __webpack_require__(\"by2V\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass WGLFeatureView_a extends FeatureContainer[\"a\" /* FeatureContainer */]{constructor(e,s,t){super(e),this._pointToCallbacks=new Map,this._layer=t,this._layerView=s}renderChildren(e){if(this.attributeView.update(),this.hasAnimation){e.painter.effects.integrate.draw(e,e.attributeView)}super.renderChildren(e)}hitTest(s,t){const i=[s,t],a=Object(promiseUtils[\"g\" /* createResolver */])();return this._pointToCallbacks.set(i,a),this.requestRender(),a.promise}doRender(e){const{minScale:s,maxScale:t}=this._layer,i=e.state.scale;i<=(s||1/0)&&i>=t&&super.doRender(e)}get hasAnimation(){return this.hasLabels}get hasLabels(){const e=this._layer.featureReduction,s=e&&\"cluster\"===e.type&&e.labelsVisible&&e.labelingInfo&&e.labelingInfo.length;return this._layer.labelingInfo&&this._layer.labelingInfo.length&&this._layer.labelsVisible||!!s}get labelsVisible(){return this._layer.labelsVisible}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"label\",brushes:[brushes[\"a\" /* brushes */].label],target:()=>this.hasLabels?this.children:null,drawPhase:enums[\"c\" /* WGLDrawPhase */].LABEL|enums[\"c\" /* WGLDrawPhase */].LABEL_ALPHA}),a=e.registerRenderPass({name:\"geometry\",brushes:[brushes[\"a\" /* brushes */].fill,brushes[\"a\" /* brushes */].line,brushes[\"a\" /* brushes */].marker,brushes[\"a\" /* brushes */].text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.excluded},{apply:e.effects.insideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.included},{apply:e.effects.hittest,enable:()=>!!this._pointToCallbacks.size,args:()=>this._pointToCallbacks}]}),r=e.registerRenderPass({name:\"highlight\",brushes:[brushes[\"a\" /* brushes */].fill,brushes[\"a\" /* brushes */].line,brushes[\"a\" /* brushes */].marker,brushes[\"a\" /* brushes */].text],target:()=>this.children,drawPhase:enums[\"c\" /* WGLDrawPhase */].HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:e.effects.highlight,enable:()=>!!this._layerView.hasHighlight()}]});return[...super.prepareRenderPasses(e),a,r,i]}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet n=class extends BaseTileRenderer[\"a\" /* default */]{install(e){const t=new WGLFeatureView_a(this.tileInfoView,this.layerView,this.layer);this.featuresView=t,e.addChild(t)}uninstall(e){e.removeChild(this.featuresView),this.featuresView.destroy()}hitTest(e,t){return this.featuresView.hitTest(e,t)}supportsRenderer(e){return null!=e&&-1!==[\"simple\",\"class-breaks\",\"unique-value\",\"dot-density\",\"dictionary\"].indexOf(e.type)}onConfigUpdate(e){let t=null;if(\"visualVariables\"in e){const i=(Object(rendererUtils[\"a\" /* simplifyVVRenderer */])(e).visualVariables||[]).map((e=>{const t=e.clone();return\"normalizationField\"in e&&(t.normalizationField=null),e.valueExpression&&\"$view.scale\"!==e.valueExpression&&(t.valueExpression=null,t.field=\"nop\"),t}));t=Object(visualVariablesUtils[\"a\" /* convertVisualVariables */])(i)}this.featuresView.setRendererInfo(e,t,this.layerView.effects)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach((e=>e.lockUploads()))}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach((e=>e.unlockUploads()))}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&(this.tiles.forEach((e=>e.isDirty=!0)),this.layerView.view.labelManager.requestUpdate())}createTile(e){const t=this.tileInfoView.getTileBounds(Object(aaBoundingRect[\"d\" /* create */])(),e),r=new WGLTile[\"a\" /* WGLTile */](e,t);return this.featuresView.hasLabels&&this.layerView.view.labelManager.addTile(this.layerView,r),r}disposeTile(e){this.featuresView.removeChild(e),this.featuresView.hasLabels&&this.layerView.view.labelManager.removeTile(this.layerView,e.key.id),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};n=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")],n);var u=n;/* harmony default export */ var SymbolTileRenderer = __webpack_exports__[\"default\"] = (u);\n\n\n/***/ }),\n\n/***/ \"wnVl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return n; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return e; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let t=0;t<o.length;t++)o[t]=n.deserialize(e,r);return o}\n\n\n/***/ })\n\n}]);","inputSourceMap":null}