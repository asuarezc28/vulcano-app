{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[40,120,121],{\"+yyC\":function(e,t,r){\"use strict\";function n(e,t,r){const n=t&&t.length,o=n?t[0]*r:e.length;let l=i(e,0,o,r,!0);const c=new Array;if(!l||l.next===l.prev)return c;let u,f,d,y,p;if(n&&(l=function(e,t,r,n){const a=new Array;for(let s=0,o=t.length;s<o;s++){const r=i(e,t[s]*n,s<o-1?t[s+1]*n:e.length,n,!1);r===r.next&&(r.steiner=!0),a.push(h(r))}a.sort(b);for(const i of a)x(i,r),r=s(r,r.next);return r}(e,t,l,r)),e.length>80*r){u=d=e[0],f=y=e[1];for(let t=r;t<o;t+=r){const r=e[t],n=e[t+1];u=Math.min(u,r),f=Math.min(f,n),d=Math.max(d,r),y=Math.max(y,n)}p=Math.max(d-u,y-f),p=0!==p?1/p:0}return a(l,c,r,u,f,p),c}function i(e,t,r,n,i){let s;if(i===g(e,t,r,n)>0)for(let a=t;a<r;a+=n)s=c(a,e[a],e[a+1],s);else for(let a=r-n;a>=t;a-=n)s=c(a,e[a],e[a+1],s);return s&&I(s,s.next)&&(u(s),s=s.next),s}function s(e,t=e){if(!e)return e;let r,n=e;do{if(r=!1,n.steiner||!I(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(u(n),n=t=n.prev,n===n.next)break;r=!0}}while(r||n!==t);return t}function a(e,t,r,n,i,c,h=0){if(!e)return;!h&&c&&(e=f(e,n,i,c));let x=e;for(;e.prev!==e.next;){const f=e.prev,d=e.next;if(c?l(e,n,i,c):o(e))t.push(f.index/r),t.push(e.index/r),t.push(d.index/r),u(e),e=d.next,x=d.next;else if((e=d)===x){h?1===h?a(e=B(e,t,r),t,r,n,i,c,2):2===h&&w(e,t,r,n,i,c):a(s(e),t,r,n,i,c,1);break}}}function o(e){const t=e.prev,r=e,n=e.next;if(y(t,r,n)>=0)return!1;let i=e.next.next;const s=i;let a=0;for(;i!==e.prev&&(0===a||i!==s);){if(a++,_(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,r,n){const i=e.prev,s=e,a=e.next;if(y(i,s,a)>=0)return!1;const o=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,l=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,c=V(i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,t,r,n),u=V(o,l,t,r,n);let h=e.prevZ,x=e.nextZ;for(;h&&h.z>=c&&x&&x.z<=u;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,s.x,s.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,x!==e.prev&&x!==e.next&&_(i.x,i.y,s.x,s.y,a.x,a.y,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,s.x,s.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;x&&x.z<=u;){if(x!==e.prev&&x!==e.next&&_(i.x,i.y,s.x,s.y,a.x,a.y,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function c(e,t,r,n){const i=new L(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function u(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function h(e){let t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function x(e,t){if(t=function(e,t){let r=t;const n=e.x,i=e.y;let s,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){const e=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=n&&e>a){if(a=e,e===n){if(i===r.y)return r;if(i===r.next.y)return r.next}s=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!s)return null;if(n===a)return s.prev;const o=s,l=s.x,c=s.y;let u,h=1/0;for(r=s.next;r!==o;)n>=r.x&&r.x>=l&&n!==r.x&&_(i<c?n:a,i,l,c,i<c?a:n,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(n-r.x),(u<h||u===h&&r.x>s.x)&&m(r,e)&&(s=r,h=u)),r=r.next;return s}(e,t)){const r=D(t,e);s(r,r.next)}}function f(e,t,r,n){for(let i;i!==e;i=i.next){if(i=i||e,null===i.z&&(i.z=V(i.x,i.y,t,r,n)),i.prev.next!==i||i.next.prev!==i)return i.prev.next=i,i.next.prev=i,f(e,t,r,n);i.prevZ=i.prev,i.nextZ=i.next}return e.prevZ.nextZ=null,e.prevZ=null,function(e){let t,r=1;for(;;){let n,i=e;e=null,t=null;let s=0;for(;i;){s++,n=i;let a=0;for(;a<r&&n;a++)n=n.nextZ;let o=r;for(;a>0||o>0&&n;){let r;0===a?(r=n,n=n.nextZ,o--):0!==o&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,a--),t?t.nextZ=r:e=r,r.prevZ=t,t=r}i=n}if(t.nextZ=null,r*=2,s<2)return e}}(e)}function d(e,t,r,n){const i=t&&t.length;let s=Math.abs(g(e,0,i?t[0]*r:e.length,r));if(i)for(let o=0,l=t.length;o<l;o++)s-=Math.abs(g(e,t[o]*r,o<l-1?t[o+1]*r:e.length,r));let a=0;for(let o=0;o<n.length;o+=3){const t=n[o]*r,i=n[o+1]*r,s=n[o+2]*r;a+=Math.abs((e[t]-e[s])*(e[i+1]-e[t+1])-(e[t]-e[i])*(e[s+1]-e[t+1]))}return 0===s&&0===a?0:Math.abs((a-s)/s)}function y(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function p(e,t,r,n){return!!(I(e,t)&&I(r,n)||I(e,n)&&I(r,t))||y(e,t,r)>0!=y(e,t,n)>0&&y(r,n,e)>0!=y(r,n,t)>0}function g(e,t,r,n){let i=0;for(let s=t,a=r-n;s<r;s+=n)i+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return i}function _(e,t,r,n,i,s,a,o){return(i-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(n-o)-(r-a)*(t-o)>=0&&(r-a)*(s-o)-(i-a)*(n-o)>=0}function m(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function V(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function I(e,t){return e.x===t.x&&e.y===t.y}function b(e,t){return e.x-t.x}function B(e,t,r){let n=e;do{const i=n.prev,s=n.next.next;!I(i,s)&&p(i,n,n.next,s)&&m(i,s)&&m(s,i)&&(t.push(i.index/r),t.push(n.index/r),t.push(s.index/r),u(n),u(n.next),n=e=s),n=n.next}while(n!==e);return n}function w(e,t,r,n,i,o){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.index!==e.index&&v(l,e)){let c=D(l,e);return l=s(l,l.next),c=s(c,c.next),a(l,t,r,n,i,o),void a(c,t,r,n,i,o)}e=e.next}l=l.next}while(l!==e)}function v(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!function(e,t){let r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&p(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&m(e,t)&&m(t,e)&&function(e,t){let r=e,n=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function D(e,t){const r=new L(e.index,e.x,e.y),n=new L(t.index,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}r.d(t,\"a\",function(){return d}),r.d(t,\"b\",function(){return n});class L{constructor(e,t,r){this.index=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}},\"179/\":function(e,t,r){\"use strict\";const n=[[\"(\",\")\"],[\")\",\"(\"],[\"<\",\">\"],[\">\",\"<\"],[\"[\",\"]\"],[\"]\",\"[\"],[\"{\",\"}\"],[\"}\",\"{\"],[\"\\xab\",\"\\xbb\"],[\"\\xbb\",\"\\xab\"],[\"\\u2039\",\"\\u203a\"],[\"\\u203a\",\"\\u2039\"],[\"\\u207d\",\"\\u207e\"],[\"\\u207e\",\"\\u207d\"],[\"\\u208d\",\"\\u208e\"],[\"\\u208e\",\"\\u208d\"],[\"\\u2264\",\"\\u2265\"],[\"\\u2265\",\"\\u2264\"],[\"\\u2329\",\"\\u232a\"],[\"\\u232a\",\"\\u2329\"],[\"\\ufe59\",\"\\ufe5a\"],[\"\\ufe5a\",\"\\ufe59\"],[\"\\ufe5b\",\"\\ufe5c\"],[\"\\ufe5c\",\"\\ufe5b\"],[\"\\ufe5d\",\"\\ufe5e\"],[\"\\ufe5e\",\"\\ufe5d\"],[\"\\ufe64\",\"\\ufe65\"],[\"\\ufe65\",\"\\ufe64\"]],i=[\"\\u0622\",\"\\u0623\",\"\\u0625\",\"\\u0627\"],s=[\"\\ufef5\",\"\\ufef7\",\"\\ufef9\",\"\\ufefb\"],a=[\"\\ufef6\",\"\\ufef8\",\"\\ufefa\",\"\\ufefc\"],o=[\"\\u0627\",\"\\u0628\",\"\\u062a\",\"\\u062b\",\"\\u062c\",\"\\u062d\",\"\\u062e\",\"\\u062f\",\"\\u0630\",\"\\u0631\",\"\\u0632\",\"\\u0633\",\"\\u0634\",\"\\u0635\",\"\\u0636\",\"\\u0637\",\"\\u0638\",\"\\u0639\",\"\\u063a\",\"\\u0641\",\"\\u0642\",\"\\u0643\",\"\\u0644\",\"\\u0645\",\"\\u0646\",\"\\u0647\",\"\\u0648\",\"\\u064a\",\"\\u0625\",\"\\u0623\",\"\\u0622\",\"\\u0629\",\"\\u0649\",\"\\u0644\",\"\\u0645\",\"\\u0646\",\"\\u0647\",\"\\u0648\",\"\\u064a\",\"\\u0625\",\"\\u0623\",\"\\u0622\",\"\\u0629\",\"\\u0649\",\"\\u06cc\",\"\\u0626\",\"\\u0624\"],l=[\"\\ufe8d\",\"\\ufe8f\",\"\\ufe95\",\"\\ufe99\",\"\\ufe9d\",\"\\ufea1\",\"\\ufea5\",\"\\ufea9\",\"\\ufeab\",\"\\ufead\",\"\\ufeaf\",\"\\ufeb1\",\"\\ufeb5\",\"\\ufeb9\",\"\\ufebd\",\"\\ufec1\",\"\\ufec5\",\"\\ufec9\",\"\\ufecd\",\"\\ufed1\",\"\\ufed5\",\"\\ufed9\",\"\\ufedd\",\"\\ufee1\",\"\\ufee5\",\"\\ufee9\",\"\\ufeed\",\"\\ufef1\",\"\\ufe87\",\"\\ufe83\",\"\\ufe81\",\"\\ufe93\",\"\\ufeef\",\"\\ufbfc\",\"\\ufe89\",\"\\ufe85\",\"\\ufe70\",\"\\ufe72\",\"\\ufe74\",\"\\ufe76\",\"\\ufe78\",\"\\ufe7a\",\"\\ufe7c\",\"\\ufe7e\",\"\\ufe80\",\"\\ufe89\",\"\\ufe85\"],c=[\"\\ufe8e\",\"\\ufe90\",\"\\ufe96\",\"\\ufe9a\",\"\\ufe9e\",\"\\ufea2\",\"\\ufea6\",\"\\ufeaa\",\"\\ufeac\",\"\\ufeae\",\"\\ufeb0\",\"\\ufeb2\",\"\\ufeb6\",\"\\ufeba\",\"\\ufebe\",\"\\ufec2\",\"\\ufec6\",\"\\ufeca\",\"\\ufece\",\"\\ufed2\",\"\\ufed6\",\"\\ufeda\",\"\\ufede\",\"\\ufee2\",\"\\ufee6\",\"\\ufeea\",\"\\ufeee\",\"\\ufef2\",\"\\ufe88\",\"\\ufe84\",\"\\ufe82\",\"\\ufe94\",\"\\ufef0\",\"\\ufbfd\",\"\\ufe8a\",\"\\ufe86\",\"\\ufe70\",\"\\ufe72\",\"\\ufe74\",\"\\ufe76\",\"\\ufe78\",\"\\ufe7a\",\"\\ufe7c\",\"\\ufe7e\",\"\\ufe80\",\"\\ufe8a\",\"\\ufe86\"],u=[\"\\ufe8e\",\"\\ufe92\",\"\\ufe98\",\"\\ufe9c\",\"\\ufea0\",\"\\ufea4\",\"\\ufea8\",\"\\ufeaa\",\"\\ufeac\",\"\\ufeae\",\"\\ufeb0\",\"\\ufeb4\",\"\\ufeb8\",\"\\ufebc\",\"\\ufec0\",\"\\ufec4\",\"\\ufec8\",\"\\ufecc\",\"\\ufed0\",\"\\ufed4\",\"\\ufed8\",\"\\ufedc\",\"\\ufee0\",\"\\ufee4\",\"\\ufee8\",\"\\ufeec\",\"\\ufeee\",\"\\ufef4\",\"\\ufe88\",\"\\ufe84\",\"\\ufe82\",\"\\ufe94\",\"\\ufef0\",\"\\ufbff\",\"\\ufe8c\",\"\\ufe86\",\"\\ufe71\",\"\\ufe72\",\"\\ufe74\",\"\\ufe77\",\"\\ufe79\",\"\\ufe7b\",\"\\ufe7d\",\"\\ufe7f\",\"\\ufe80\",\"\\ufe8c\",\"\\ufe86\"],h=[\"\\ufe8d\",\"\\ufe91\",\"\\ufe97\",\"\\ufe9b\",\"\\ufe9f\",\"\\ufea3\",\"\\ufea7\",\"\\ufea9\",\"\\ufeab\",\"\\ufead\",\"\\ufeaf\",\"\\ufeb3\",\"\\ufeb7\",\"\\ufebb\",\"\\ufebf\",\"\\ufec3\",\"\\ufec7\",\"\\ufecb\",\"\\ufecf\",\"\\ufed3\",\"\\ufed7\",\"\\ufedb\",\"\\ufedf\",\"\\ufee3\",\"\\ufee7\",\"\\ufeeb\",\"\\ufeed\",\"\\ufef3\",\"\\ufe87\",\"\\ufe83\",\"\\ufe81\",\"\\ufe93\",\"\\ufeef\",\"\\ufbfe\",\"\\ufe8b\",\"\\ufe85\",\"\\ufe70\",\"\\ufe72\",\"\\ufe74\",\"\\ufe76\",\"\\ufe78\",\"\\ufe7a\",\"\\ufe7c\",\"\\ufe7e\",\"\\ufe80\",\"\\ufe8b\",\"\\ufe85\"],x=[\"\\u0621\",\"\\u0622\",\"\\u0623\",\"\\u0624\",\"\\u0625\",\"\\u0627\",\"\\u0629\",\"\\u062f\",\"\\u0630\",\"\\u0631\",\"\\u0632\",\"\\u0648\",\"\\u0649\"],f=[\"\\u064b\",\"\\u064b\",\"\\u064c\",\"\\u061f\",\"\\u064d\",\"\\u061f\",\"\\u064e\",\"\\u064e\",\"\\u064f\",\"\\u064f\",\"\\u0650\",\"\\u0650\",\"\\u0651\",\"\\u0651\",\"\\u0652\",\"\\u0652\",\"\\u0621\",\"\\u0622\",\"\\u0622\",\"\\u0623\",\"\\u0623\",\"\\u0624\",\"\\u0624\",\"\\u0625\",\"\\u0625\",\"\\u0626\",\"\\u0626\",\"\\u0626\",\"\\u0626\",\"\\u0627\",\"\\u0627\",\"\\u0628\",\"\\u0628\",\"\\u0628\",\"\\u0628\",\"\\u0629\",\"\\u0629\",\"\\u062a\",\"\\u062a\",\"\\u062a\",\"\\u062a\",\"\\u062b\",\"\\u062b\",\"\\u062b\",\"\\u062b\",\"\\u062c\",\"\\u062c\",\"\\u062c\",\"\\u062c\",\"\\u062d\",\"\\u062d\",\"\\u062d\",\"\\u062d\",\"\\u062e\",\"\\u062e\",\"\\u062e\",\"\\u062e\",\"\\u062f\",\"\\u062f\",\"\\u0630\",\"\\u0630\",\"\\u0631\",\"\\u0631\",\"\\u0632\",\"\\u0632\",\"\\u0633\",\"\\u0633\",\"\\u0633\",\"\\u0633\",\"\\u0634\",\"\\u0634\",\"\\u0634\",\"\\u0634\",\"\\u0635\",\"\\u0635\",\"\\u0635\",\"\\u0635\",\"\\u0636\",\"\\u0636\",\"\\u0636\",\"\\u0636\",\"\\u0637\",\"\\u0637\",\"\\u0637\",\"\\u0637\",\"\\u0638\",\"\\u0638\",\"\\u0638\",\"\\u0638\",\"\\u0639\",\"\\u0639\",\"\\u0639\",\"\\u0639\",\"\\u063a\",\"\\u063a\",\"\\u063a\",\"\\u063a\",\"\\u0641\",\"\\u0641\",\"\\u0641\",\"\\u0641\",\"\\u0642\",\"\\u0642\",\"\\u0642\",\"\\u0642\",\"\\u0643\",\"\\u0643\",\"\\u0643\",\"\\u0643\",\"\\u0644\",\"\\u0644\",\"\\u0644\",\"\\u0644\",\"\\u0645\",\"\\u0645\",\"\\u0645\",\"\\u0645\",\"\\u0646\",\"\\u0646\",\"\\u0646\",\"\\u0646\",\"\\u0647\",\"\\u0647\",\"\\u0647\",\"\\u0647\",\"\\u0648\",\"\\u0648\",\"\\u0649\",\"\\u0649\",\"\\u064a\",\"\\u064a\",\"\\u064a\",\"\\u064a\",\"\\ufef5\",\"\\ufef6\",\"\\ufef7\",\"\\ufef8\",\"\\ufef9\",\"\\ufefa\",\"\\ufefb\",\"\\ufefc\",\"\\u061f\",\"\\u061f\",\"\\u061f\"],d=[\"\\u0621\",\"\\u0641\"],y=[\"\\u063a\",\"\\u064a\"],p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=[\"UBAT_L\",\"UBAT_R\",\"UBAT_EN\",\"UBAT_AN\",\"UBAT_ON\",\"UBAT_B\",\"UBAT_S\",\"UBAT_AL\",\"UBAT_WS\",\"UBAT_CS\",\"UBAT_ES\",\"UBAT_ET\",\"UBAT_NSM\",\"UBAT_LRE\",\"UBAT_RLE\",\"UBAT_PDF\",\"UBAT_LRO\",\"UBAT_RLO\",\"UBAT_BN\"],m=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],V=[[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,1,12,1,12,12,1,12,12,1,12,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,11,11,7,9,7,4,4,12,12,12,12,12,12,12,12,12,12,12,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,3,3,3,3,3,3,3,3,3,3,11,3,3,7,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,3,4,12,12,12,12,12,12,7,7,12,12,4,12,12,12,12,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,12,12,12,12,12,12,12,12,12,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,18,18,18,18,18,4,4,4,4,4,18,18,18,18,18,18,2,0,4,4,2,2,2,2,2,2,10,10,4,4,4,0,2,2,2,2,2,2,2,2,2,2,10,10,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,12,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,11,4,4,10,10,4,4,4,4,4,11,11,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,18],[4,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,11,11,4,4,4,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function I(e,t,r,n,i){const s=function(e,t,r){if(void 0===t.inFormat&&(t.inFormat=r.defInFormat),void 0===t.outFormat&&(t.outFormat=r.defOutFormat),void 0===t.swap&&(t.swap=r.defSwap),t.inFormat===t.outFormat)return t;const n=t.inFormat.substring(0,1),i=t.outFormat.substring(0,1);let s,a=t.inFormat.substring(1,4),o=t.outFormat.substring(1,4);return\"C\"===a.charAt(0)&&(s=b(e),a=\"ltr\"===s||\"rtl\"===s?s.toUpperCase():\"L\"===t.inFormat.charAt(2)?\"LTR\":\"RTL\",t.inFormat=n+a),\"C\"===o.charAt(0)&&(s=b(e),\"rtl\"===s?o=\"RTL\":\"ltr\"===s?(s=function(e){const t=e.split(\"\");return t.reverse(),b(t.join(\"\"))}(e),o=s.toUpperCase()):o=\"L\"===t.outFormat.charAt(2)?\"LTR\":\"RTL\",t.outFormat=i+o),t}(e,{inFormat:t,outFormat:r,swap:n},i);if(s.inFormat===s.outFormat)return e;r=s.outFormat,n=s.swap;const a=(t=s.inFormat).substring(0,1),o=t.substring(1,4),l=r.substring(0,1),c=r.substring(1,4);if(i.inFormat=t,i.outFormat=r,i.swap=n,\"L\"===a&&\"VLTR\"===r){if(\"LTR\"===o)return i.dir=W,B(e,i);if(\"RTL\"===o)return i.dir=Y,B(e,i)}if(\"V\"===a&&\"V\"===l)return i.dir=\"RTL\"===o?Y:W,D(e,i);if(\"L\"===a&&\"VRTL\"===r)return\"LTR\"===o?(i.dir=W,e=B(e,i)):(i.dir=Y,e=B(e,i)),D(e);if(\"VLTR\"===t&&\"LLTR\"===r)return i.dir=W,B(e,i);if(\"V\"===a&&\"L\"===l&&o!==c)return e=D(e),\"RTL\"===o?I(e,\"LLTR\",\"VLTR\",n,i):I(e,\"LRTL\",\"VRTL\",n,i);if(\"VRTL\"===t&&\"LRTL\"===r)return I(e,\"LRTL\",\"VRTL\",n,i);if(\"L\"===a&&\"L\"===l){const t=i.swap;return i.swap=t.substr(0,1)+\"N\",\"RTL\"===o?(i.dir=Y,e=B(e,i),i.swap=\"N\"+t.substr(1,2),i.dir=W,e=B(e,i)):(i.dir=W,e=B(e,i),i.swap=\"N\"+t.substr(1,2),e=I(e,\"VLTR\",\"LRTL\",i.swap,i)),e}return e}function b(e){const t=/[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec(e);return t?t[0]<=\"z\"?\"ltr\":\"rtl\":\"\"}function B(e,t){const r=e.split(\"\"),n=[];return w(r,n,t),function(e,t,r){if(0!==r.hiLevel&&r.swap.substr(0,1)!==r.swap.substr(1,2))for(let n=0;n<e.length;n++)1===t[n]&&(e[n]=N(e[n]))}(r,n,t),P(2,r,n,t),P(1,r,n,t),G=n,r.join(\"\")}function w(e,t,r){const n=e.length,i=r.dir?g:p;let s=0,a=-1;const o=[],l=[];r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1;for(let c=0;c<n;c++)o[c]=v(e[c]);for(let c=0;c<n;c++){const n=s,u=S(e,o,l,c,r);l[c]=u,s=i[n][u];const h=240&s;s&=15;const x=i[s][H];if(t[c]=x,h>0)if(16===h){for(let e=a;e<c;e++)t[e]=1;a=-1}else a=-1;if(i[s][K])-1===a&&(a=c);else if(a>-1){for(let e=a;e<c;e++)t[e]=x;a=-1}5===o[c]&&(t[c]=0),r.hiLevel|=x}r.hasUbatS&&function(e,t,r,n){for(let i=0;i<r;i++)if(6===e[i]){t[i]=n.dir;for(let r=i-1;r>=0&&8===e[r];r--)t[r]=n.dir}}(o,t,n,r)}function v(e){const t=e.charCodeAt(0),r=m[t>>8];return r<100?r:V[r-100][255&t]}function D(e,t){const r=e.split(\"\");if(t){const e=[];w(r,e,t),G=e}return r.reverse(),j.reverse(),r.join(\"\")}function L(e,t,r){for(let n=0;n<t;n++)if(e[n]===r)return n;return-1}function T(e){for(let t=0;t<d.length;t++)if(e>=d[t]&&e<=y[t])return!0;return!1}function A(e,t,r,n){for(;t*r<n&&F(e[t]);)t+=r;return!!(t*r<n&&T(e[t]))}function M(e,t,r,n){for(;t*r<n&&F(e[t]);)t+=r;let s=\" \";if(!(t*r<n))return!1;s=e[t];for(let a=0;a<i.length;a++)if(i[a]===s)return!0;return!1}function P(e,t,r,n){if(n.hiLevel<e)return;if(1===e&&n.dir===Y&&!n.hasUbatB)return t.reverse(),void j.reverse();const i=t.length;let s,a,o,l,c,u=0;for(;u<i;){if(r[u]>=e){for(s=u+1;s<i&&r[s]>=e;)s++;for(a=u,o=s-1;a<o;a++,o--)l=t[a],t[a]=t[o],t[o]=l,c=j[a],j[a]=j[o],j[o]=c;u=s}u++}}function S(e,t,r,n,i){return{UBAT_L:()=>(i.lastArabic=!1,0),UBAT_R:()=>(i.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>i.lastArabic?3:2,UBAT_AL:()=>(i.lastArabic=!0,i.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{let e,s;return n<1||n+1>=t.length||2!==(e=r[n-1])&&3!==e||2!==(s=t[n+1])&&3!==s?4:(i.lastArabic&&(s=3),s===e?s:4)},UBAT_ES:()=>2===(n>0?r[n-1]:5)&&n+1<t.length&&2===t[n+1]?2:4,UBAT_ET:()=>{if(n>0&&2===r[n-1])return 2;if(i.lastArabic)return 4;let e=n+1;const s=t.length;for(;e<s&&11===t[e];)e++;return e<s&&2===t[e]?2:4},UBAT_NSM:()=>{if(\"VLTR\"===i.inFormat){const r=t.length;let i=n+1;for(;i<r&&12===t[i];)i++;if(i<r){const r=e[n].charCodeAt[0],s=t[i];if((r>=1425&&r<=2303||64286===r)&&(1===s||7===s))return 1}}return n<1||5===t[n-1]?4:r[n-1]},UBAT_B:()=>(i.lastArabic=!0,i.hasUbatB=!0,i.dir),UBAT_S:()=>(i.hasUbatS=!0,4),UBAT_LRE:()=>(i.lastArabic=!1,4),UBAT_RLE:()=>(i.lastArabic=!1,4),UBAT_LRO:()=>(i.lastArabic=!1,4),UBAT_RLO:()=>(i.lastArabic=!1,4),UBAT_PDF:()=>(i.lastArabic=!1,4),UBAT_BN:()=>4}[_[t[n]]]()}function N(e){let t,r=0,i=n.length-1;for(;r<=i;)if(t=Math.floor((r+i)/2),e<n[t][0])i=t-1;else{if(!(e>n[t][0]))return n[t][1];r=t+1}return e}function C(e){for(let t=0;t<x.length;t++)if(x[t]===e)return!0;return!1}function k(e){for(let t=0;t<o.length;t++)if(e===o[t])return u[t];return e}function E(e,t){for(let r=0;r<o.length;r++)if(e===o[r])return t[r];return e}function F(e){return e>=\"\\u064b\"&&e<=\"\\u0655\"}function O(e){return\"L\"===e?\"LTR\":\"R\"===e?\"RTL\":\"C\"===e?\"CLR\":\"D\"===e?\"CRL\":\"\"}function U(e,t,r,n){for(;t*r<n&&F(e[t]);)t+=r;return t*r<n&&(e[t]=\" \",!0)}function R(e,t){for(let r=0;r<i.length;r++)if(e===i[r])return t[r];return e}function z(e,t,r,n){for(let i=0;i<e.length;i++)(e[i]>t||!r&&e[i]===t)&&(e[i]+=n)}let j=[],Z=[],G=[];const q={dir:0,defInFormat:\"LLTR\",defoutFormat:\"VLTR\",defSwap:\"YN\",inFormat:\"LLTR\",outFormat:\"VLTR\",swap:\"YN\",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:\"\"},H=5,K=6,W=0,Y=1,J=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Q=/[\\u0591-\\u06ff\\ufb1d-\\ufefc]/;t.a=class{constructor(){this.inputFormat=\"ILYNN\",this.outputFormat=\"VLNNN\",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return\"\";if(function(e,t,r){j=[],G=[];for(let n=0;n<r;n++)e[n]=n,t[n]=n,j[n]=n}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;r=this.outputFormat;let n=e;const o=q,u=O((t=this.inputFormat).charAt(1)),x=O(r.charAt(1)),d=(\"I\"===t.charAt(0)?\"L\":t.charAt(0))+u,y=(\"I\"===r.charAt(0)?\"L\":r.charAt(0))+x,p=t.charAt(2)+r.charAt(2);o.defInFormat=d,o.defOutFormat=y,o.defSwap=p;const g=I(e,d,y,p,o);let _=!1;return\"R\"===r.charAt(1)?_=!0:\"C\"!==r.charAt(1)&&\"D\"!==r.charAt(1)||(_=\"rtl\"===this.checkContextual(g)),this.sourceToTarget=j,this.targetToSource=function(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[e[r]]=r;return t}(this.sourceToTarget),Z=this.targetToSource,n=t.charAt(3)===r.charAt(3)?g:\"S\"===r.charAt(3)?function(e,t,r){if(0===t.length)return\"\";void 0===e&&(e=!0),void 0===r&&(r=!0);const n=(t=String(t)).split(\"\");let i=0,o=1,u=n.length;e||(i=n.length-1,o=-1,u=1);const x=function(e,t,r,n,i){let o=0;const u=[];let x=0;for(let f=t;f*r<n;f+=r)if(T(e[f])||F(e[f])){if(\"\\u0644\"===e[f]&&M(e,f+r,r,n)){e[f]=R(e[f+r],0===o?s:a),f+=r,U(e,f,r,n),i&&(u[x]=f,x++),o=0;continue}const t=e[f];e[f]=1===o?A(e,f+r,r,n)?k(e[f]):E(e[f],c):!0===A(e,f+r,r,n)?E(e[f],h):E(e[f],l),F(t)||(o=1),!0===C(t)&&(o=0)}else o=0;return u}(n,i,o,u,r);let f=\"\";for(let s=0;s<n.length;s++)r&&L(x,x.length,s)>-1?(z(Z,s,!e,-1),j.splice(s,1)):f+=n[s];return f}(_,g,!0):function(e,t,r){if(0===e.length)return\"\";void 0===r&&(r=!0),void 0===t&&(t=!0);let n=\"\";const s=(e=String(e)).split(\"\");for(let a=0;a<e.length;a++){let o=!1;if(s[a]>=\"\\ufe70\"&&s[a]<\"\\ufeff\"){const l=e.charCodeAt(a);s[a]>=\"\\ufef5\"&&s[a]<=\"\\ufefc\"?(t?(a>0&&r&&\" \"===s[a-1]?n=n.substring(0,n.length-1)+\"\\u0644\":(n+=\"\\u0644\",o=!0),n+=i[(l-65269)/2]):(n+=i[(l-65269)/2],n+=\"\\u0644\",a+1<e.length&&r&&\" \"===s[a+1]?a++:o=!0),o&&(z(Z,a,!0,1),j.splice(a,0,j[a]))):n+=f[l-65136]}else n+=s[a]}return n}(g,_,!0),this.sourceToTarget=j,this.targetToSource=Z,this.levels=G,n}_inputFormatSetter(e){if(!J.test(e))throw new Error(\"dojox/string/BidiEngine: the bidi layout string is wrong!\");this.inputFormat=e}_outputFormatSetter(e){if(!J.test(e))throw new Error(\"dojox/string/BidiEngine: the bidi layout string is wrong!\");this.outputFormat=e}checkParameters(e,t){return e?this._inputFormatSetter(e):e=this.inputFormat,t?this._outputFormatSetter(t):t=this.outputFormat,e!==t}checkContextual(e){let t=b(e);if(\"ltr\"!==t&&\"rtl\"!==t){try{t=document.dir.toLowerCase()}catch(e){}\"ltr\"!==t&&\"rtl\"!==t&&(t=\"ltr\")}return t}hasBidiChar(e){return Q.test(e)}}},\"2yHJ\":function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return i}),r.d(t,\"b\",function(){return s}),r.d(t,\"c\",function(){return n}),r.d(t,\"d\",function(){return a});const n=!0,i=32,s=1.5,a=200},HQFP:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return c}),r.d(t,\"b\",function(){return o}),r.d(t,\"c\",function(){return l}),r.d(t,\"d\",function(){return a});const n=128/Math.PI,i=1/Math.LN2;function s(e,t){return(e%=t)>=0?e:e+t}function a(e){return s(e*n,256)}function o(e){return s(.7111111111111111*e,256)}function l(e){return Math.log(e)*i}function c(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}},VLY0:function(e,t,r){\"use strict\";r.r(t);var n,i,s=r(\"9MzC\"),a=r(\"kB7V\"),o=r(\"srIe\");(i=n||(n={}))[i.INITIALIZED=0]=\"INITIALIZED\",i[i.NO_DATA=1]=\"NO_DATA\",i[i.READY=2]=\"READY\",i[i.MODIFIED=3]=\"MODIFIED\",i[i.INVALID=4]=\"INVALID\";var l=r(\"OxmL\"),c=r(\"2yHJ\"),u=r(\"OXZQ\"),h=r(\"qcDN\");function x(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)}const f=24;class d{constructor(e,t,r,n,i,s,a){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=n,this._hAnchor=i,this._vAnchor=s,this._justify=a}getShaping(e,t,r){const n=this._letterSpacing,i=this._lineHeight,s=this._justify,a=this._maxWidth,o=[];let l=0,c=0,u=0,h=0,f=-1,d=0,y=-1;const p=e.length;for(let g=0;g<p;g++){const _=e.charCodeAt(g),m=r&&x(_);if(10===_){if(g===p-1)continue;if(f>=h){const e=o[f];d=Math.max(e.x+e.glyphMosaicItem.metrics.advance,d),s&&this._applyJustification(o,h,f),h=o.length}t?c-=i:c+=i,l=0,++u;continue}let V;for(const e of this._glyphItems)if(V=e[_],V)break;if(V){if(o.push({codePoint:_,x:l,y:c,vertical:m,glyphMosaicItem:V}),l+=V.metrics.advance+n,a>0&&l>a&&y>=0){const e=y+1,r=o[e].x;d=Math.max(r,d);for(let n=e;n<o.length;n++)t?o[n].y-=i:o[n].y+=i,o[n].x-=r;s&&this._applyJustification(o,h,y),t?c-=i:c+=i,l-=r,++u,h=e,y=-1}++f,32===_&&(y=o.length-1)}}if(f>=h){const e=o[f];d=Math.max(d,e.x+e.glyphMosaicItem.metrics.advance),s&&this._applyJustification(o,h,f)}if(o.length>0){const e=(s-this._hAnchor)*d;let r=(-this._vAnchor*(u+1)+.5)*i;t&&u&&(r+=u*i);for(const t of o)t.x+=e,t.y+=r}return o}static getTextBox(e,t){if(!e.length)return null;let r=1/0,n=1/0,i=0,s=0;for(const a of e){const e=a.x,o=a.y-17,l=e+a.glyphMosaicItem.metrics.advance,c=o+t;r=Math.min(r,e),i=Math.max(i,l),n=Math.min(n,o),s=Math.max(s,c)}return{x:r,y:n,width:i-r,height:s-n}}static getBox(e){if(!e.length)return null;let t=1/0,r=1/0,n=0,i=0;for(const s of e){const{height:e,left:a,top:o,width:l}=s.glyphMosaicItem.metrics,c=s.x,u=s.y-(e-Math.abs(o)),h=c+l+a,x=u+e;t=Math.min(t,c),n=Math.max(n,h),r=Math.min(r,u),i=Math.max(i,x)}return{x:t,y:r,width:n-t,height:i-r}}static addDecoration(e,t){const r=e.length;if(0===r)return;let n=e[0].x+e[0].glyphMosaicItem.metrics.left,i=e[0].y;for(let a=1;a<r;a++){const r=e[a];if(r.y!==i){const s=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:i+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new h.a(4,0,4,8),metrics:{width:s-n,height:8,left:0,top:0,advance:0},page:0,code:0}}),i=r.y,n=r.x+r.glyphMosaicItem.metrics.left}}const s=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:i+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new h.a(4,0,4,8),metrics:{width:s-n,height:8,left:0,top:0,advance:0},page:0,code:0}})}_applyJustification(e,t,r){const n=e[r],i=(n.x+(n.vertical?24:n.glyphMosaicItem.metrics.advance))*this._justify;for(let s=t;s<=r;s++)e[s].x-=i}}class y{constructor(e,t,r=0,n=-1,i=.5){this.x=e,this.y=t,this.angle=r,this.segment=n,this.minzoom=i}}class p{constructor(e,t,r,n,i,s=.5,a=l.c){this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=n,this.alternateVerticalGlyph=i,this.minzoom=s,this.maxzoom=a}}class g{constructor(e,t,r,n,i,s,a,o,l,c,u,h){this.tl=e,this.tr=t,this.bl=r,this.br=n,this.mosaicRect=i,this.labelAngle=s,this.minAngle=a,this.maxAngle=o,this.anchor=l,this.minzoom=c,this.maxzoom=u,this.page=h}}class _{constructor(e){this.shapes=e}}class m{getIconPlacement(e,t,r){const n=new u.a(e.x,e.y),i=0===r.rotationAlignment,s=r.keepUpright;let a=r.rotate*l.b;i&&(a+=e.angle);const o=new _([]);return r.allowOverlap&&r.ignorePlacement||!c.c||(o.iconColliders=[]),this._addIconPlacement(o,n,t,r,a),i&&s&&this._addIconPlacement(o,n,t,r,a+l.d),o}_addIconPlacement(e,t,r,n,i){const s=r.pixelRatio,a=r.width/s,o=r.height/s,h=n.offset;let x=h[0],f=h[1];switch(n.anchor){case 0:x-=a/2,f-=o/2;break;case 1:f-=o/2;break;case 2:x-=a,f-=o/2;break;case 3:x-=a/2;break;case 4:x-=a/2,f-=o;break;case 5:break;case 7:f-=o;break;case 6:x-=a;break;case 8:x-=a,f-=o}const d=r.rect,y=2/s,p=x-y,_=f-y,m=p+d.width/s,V=_+d.height/s,I=new u.a(p,_),b=new u.a(m,V),B=new u.a(p,V),w=new u.a(m,_);if(0!==i){const e=Math.cos(i),t=Math.sin(i);I.rotate(e,t),b.rotate(e,t),B.rotate(e,t),w.rotate(e,t)}const v=new g(I,w,B,b,d,i,0,256,t,.5,l.c,0);if(e.shapes.push(v),(!n.allowOverlap||!n.ignorePlacement)&&c.c){const r=n.size,s=n.padding;e.iconColliders.push({xTile:t.x,yTile:t.y,dxPixels:x*r-s,dyPixels:f*r-s,hard:!n.optional,partIndex:0,width:a*r+2*s,height:o*r+2*s,angle:i,minLod:.5,maxLod:l.c})}}getTextPlacement(e,t,r,n){const i=new u.a(e.x,e.y),s=n.rotate*l.b,a=0===n.rotationAlignment,o=n.keepUpright,c=n.padding;let h=.5;const x=a?e.angle:0,y=e.segment>=0&&a,m=n.allowOverlap&&n.ignorePlacement?null:[],V=[],I=!y;let b=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,w=b,v=B;const D=(y||a)&&o,L=n.size/f;let T=!1;for(const l of t)if(l.vertical){T=!0;break}let A,M=0,P=0;if(!y&&T){const e=d.getTextBox(t,n.lineHeight*f);switch(n.anchor){case 1:M=e.height/2,P=-e.width/2;break;case 2:M=-e.height/2,P=e.width/2;break;case 3:M=e.height/2,P=e.width/2;break;case 4:M=-e.height/2,P=-e.width/2;break;case 5:M=e.height;break;case 7:P=-e.width;break;case 6:P=e.width;break;case 8:M=-e.height}}M+=n.offset[0]*f,P+=n.offset[1]*f;for(const f of t){const t=f.glyphMosaicItem;if(!t||t.rect.isEmpty)continue;const d=t.rect,_=t.metrics,S=t.page;if(m&&I){if(void 0!==A&&A!==f.y){let t,r,i,a;T?(t=-v+M,r=b+P,i=v-w,a=B-b):(t=b+M,r=w+P,i=B-b,a=v-w),m.push({xTile:e.x,yTile:e.y,dxPixels:t*L-c,dyPixels:r*L-c,hard:!n.optional,partIndex:1,width:i*L+2*c,height:a*L+2*c,angle:s,minLod:.5,maxLod:l.c}),b=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,w=b,v=B}A=f.y}const N=[];if(y){const n=(f.x+_.left-4+.5*t.metrics.width)*L*8;if(h=this._placeGlyph(e,h,n,r,e.segment,1,f.vertical,S,N),o&&(h=this._placeGlyph(e,h,n,r,e.segment,-1,f.vertical,S,N)),h>=2)break}else N.push(new p(i,x,x,S,!1)),a&&o&&N.push(new p(i,x+l.d,x+l.d,S,!1));const C=f.x+_.left,k=f.y-17-_.top,E=C+_.width,F=k+_.height;let O,U,R,z,j,Z,G,q;!y&&T?f.vertical?(O=new u.a(-((k+F)/2+_.width/2)-4+M,(C+E)/2-_.height/2-4+P),U=new u.a(O.x+d.width,O.y+d.height),R=new u.a(O.x,U.y),z=new u.a(U.x,O.y)):(O=new u.a(4-k+M,C-4+P),U=new u.a(O.x-d.height,O.y+d.width),R=new u.a(U.x,O.y),z=new u.a(O.x,U.y)):(O=new u.a(C-4+M,k-4+P),U=new u.a(O.x+d.width,O.y+d.height),R=new u.a(O.x,U.y),z=new u.a(U.x,O.y));for(const r of N){let t,i,a,o;r.alternateVerticalGlyph?(j||(j=new u.a((C+E)/2+M-_.height/2-4,(k+F)/2+P+_.width/2+4),Z=new u.a(j.x+d.height,j.y-d.width),G=new u.a(Z.x,j.y),q=new u.a(j.x,Z.y)),t=j,i=G,a=q,o=Z):(t=O,i=R,a=z,o=U);const l=k,h=F,x=r.glyphAngle+s;if(0!==x){const e=Math.cos(x),r=Math.sin(x);t=t.clone(),i=i.clone(),a=a.clone(),o=o.clone(),t.rotate(e,r),o.rotate(e,r),i.rotate(e,r),a.rotate(e,r)}let p=0,A=256;y&&T?f.vertical?r.alternateVerticalGlyph?(p=32,A=96):(p=224,A=32):(p=224,A=96):(p=192,A=64),V.push(new g(t,a,i,o,d,r.labelAngle,p,A,r.anchor,r.minzoom,r.maxzoom,r.page)),!m||D&&!this._legible(r.labelAngle)||(I?(C<b&&(b=C),l<w&&(w=l),E>B&&(B=E),h>v&&(v=h)):r.minzoom<2&&m.push({xTile:e.x,yTile:e.y,dxPixels:(C+M)*L-c,dyPixels:(l+M)*L-c,hard:!n.optional,partIndex:1,width:(E-C)*L+2*c,height:(h-l)*L+2*c,angle:x,minLod:r.minzoom,maxLod:r.maxzoom}))}}if(h>=2)return null;if(m&&I){let t,r,i,a;T?(t=-v+M,r=b+P,i=v-w,a=B-b):(t=b+M,r=w+P,i=B-b,a=v-w),m.push({xTile:e.x,yTile:e.y,dxPixels:t*L-c,dyPixels:r*L-c,hard:!n.optional,partIndex:1,width:i*L+2*c,height:a*L+2*c,angle:s,minLod:.5,maxLod:l.c})}const S=new _(V);return m&&m.length>0&&(S.textColliders=m),S}_legible(e){const t=Object(l.h)(e);return t<65||t>=193}_placeGlyph(e,t,r,n,i,s,a,o,c){let h=s;const x=h<0?Object(l.g)(e.angle+l.d,l.a):e.angle;let f=0;r<0&&(h*=-1,r*=-1,f=l.d),h>0&&++i;let d=new u.a(e.x,e.y),y=n[i],g=l.c;if(n.length<=i)return g;for(;;){const e=y.x-d.x,s=y.y-d.y,u=Math.sqrt(e*e+s*s),_=Math.max(r/u,t),m=e/u,V=s/u,I=Object(l.g)(Math.atan2(V,m)+f,l.a);if(c.push(new p(d,x,I,o,!1,_,g)),a&&c.push(new p(d,x,I,o,!0,_,g)),_<=t)return _;d=y.clone();do{if(n.length<=(i+=h)||i<0)return _;y=n[i]}while(d.isEqual(y));let b=y.x-d.x,B=y.y-d.y;const w=Math.sqrt(b*b+B*B);b*=u/w,B*=u/w,d.x-=b,d.y-=B,g=_}}}var V=r(\"ATu9\"),I=r(\"LaVW\"),b=class{constructor(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}pushFeature(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}hasFeatures(){return this._features.length>0}},B=class extends b{constructor(e,t,r,n){super(e,t),this.type=4,this._circleVertexBuffer=r,this._circleIndexBuffer=n}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(e){const t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;const n=this.layer,i=this.zoom;e&&e.setExtent(this.layerExtent);let s=1,a=[1,1,1,1],o=1,l=0,c=1,u=[1,1,1,1],h=1;for(const x of this._features){const f=x.getGeometry(e);if(f){n.hasDataDrivenRadius&&(s=n.getPaintValue(\"circle-radius\",i,x)),n.hasDataDrivenColor&&(a=n.getPaintValue(\"circle-color\",i,x)),n.hasDataDrivenOpacity&&(o=n.getPaintValue(\"circle-opacity\",i,x)),n.hasDataDrivenStrokeWidth&&(c=n.getPaintValue(\"circle-stroke-width\",i,x)),n.hasDataDrivenStrokeColor&&(u=n.getPaintValue(\"circle-stroke-color\",i,x)),n.hasDataDrivenStrokeOpacity&&(h=n.getPaintValue(\"circle-stroke-opacity\",i,x)),n.hasDataDrivenBlur&&(l=n.getPaintValue(\"circle-blur\",i,x));for(const e of f)if(e)for(const n of e){const e=t.index;t.add(n.x,n.y,0,0,s,a,o,l,c,u,h),t.add(n.x,n.y,0,1,s,a,o,l,c,u,h),t.add(n.x,n.y,1,0,s,a,o,l,c,u,h),t.add(n.x,n.y,1,1,s,a,o,l,c,u,h),r.add(e+0,e+1,e+2),r.add(e+1,e+2,e+3),this._circleIndexCount+=6}}}}serialize(){let e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),n=new Int32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let i=0;i<this.layerUIDs.length;i++)r[t++]=this.layerUIDs[i];r[t++]=this._circleIndexStart,r[t++]=this._circleIndexCount,r[t++]=this._circleVertexBuffer.array.length;for(let i=0;i<this._circleVertexBuffer.array.length;i++)n[t++]=this._circleVertexBuffer.array[i];r[t++]=this._circleIndexBuffer.array.length;for(let i=0;i<this._circleIndexBuffer.array.length;i++)r[t++]=this._circleIndexBuffer.array[i];return r.buffer}},w=class{constructor(e,t){this.values={};const r=t.keys,n=t.values;for(;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:{const t=e.getMessage(),i=this.values;for(;!t.empty();){const e=t.getUInt32(),s=t.getUInt32();i[r[e]]=n[s]}t.release();break}case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}getGeometry(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const t=this._pbfGeometry;let r,n;this._pbfGeometry=null,e?e.reset(this.type):r=[];let i,s=1,a=0,o=0,l=0;for(;!t.empty();){if(0===a){const e=t.getUInt32();s=7&e,a=e>>3}switch(a--,s){case 1:o+=t.getSInt32(),l+=t.getSInt32(),e?e.moveTo(o,l):(n&&r.push(n),n=[],n.push(new u.a(o,l)));break;case 2:o+=t.getSInt32(),l+=t.getSInt32(),e?e.lineTo(o,l):n.push(new u.a(o,l));break;case 7:e?e.close():n&&!n[0].equals(o,l)&&n.push(n[0].clone());break;default:throw t.release(),new Error(\"Invalid path operation\")}}return e?i=e.result():(n&&r.push(n),i=r),t.release(),this._geometry=i,i}},v=r(\"VW+2\"),D=r(\"+yyC\");const L=new(r(\"6NBT\").a);class T extends b{constructor(e,t,r,n,i,s){if(super(e,t),this.type=1,e.hasDataDrivenFill!==r.isDataDriven())throw new Error(\"incompatible fill buffer\");if(e.hasDataDrivenOutline!==i.isDataDriven())throw new Error(\"incompatible outline buffer\");this._fillVertexBuffer=r,this._fillIndexBuffer=n,this._outlineVertexBuffer=i,this._outlineIndexBuffer=s}get fillIndexStart(){return this._fillIndexStart}get fillIndexCount(){return this._fillIndexCount}get outlineIndexStart(){return this._outlineIndexStart}get outlineIndexCount(){return this._outlineIndexCount}processFeatures(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;const t=this.layer,r=this.zoom,n=t.hasDataDrivenFill,i=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);const s=t.getPaintValue(\"fill-pattern\",r);let a=t.getPaintValue(\"fill-antialias\",r)&&void 0===s,o=[1,1,1,1],l=[1,1,1,1],c=1;if(t.outlineUsesFillColor){if(a&&!t.hasDataDrivenOpacity){const e=t.getPaintValue(\"fill-opacity\",r),n=t.getPaintValue(\"fill-opacity\",r+1);e<1&&n<1&&(a=!1)}if(a&&!t.hasDataDrivenColor){const e=t.getPaintValue(\"fill-color\",r),n=t.getPaintValue(\"fill-color\",r+1);e[3]<1&&n[3]<1&&(a=!1)}}for(const u of this._features){let h,x;!s&&t.hasDataDrivenColor&&(o=t.getPaintValue(\"fill-color\",r,u)),t.hasDataDrivenOpacity&&(c=t.getPaintValue(\"fill-opacity\",r,u)),!s&&t.hasDataDrivenOutlineColor&&(l=t.getPaintValue(\"fill-outline-color\",r,u)),n&&(h={color:o,opacity:c}),i&&(x={color:t.outlineUsesFillColor?o:l,opacity:c});const f=u.getGeometry(e);this._processFeature(f,a,t.outlineUsesFillColor,h,x,null==e?void 0:e.validateTessellation)}}serialize(){let e=12;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),n=new Int32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let i=0;i<this.layerUIDs.length;i++)r[t++]=this.layerUIDs[i];r[t++]=this._fillIndexStart,r[t++]=this._fillIndexCount,r[t++]=this._outlineIndexStart,r[t++]=this._outlineIndexCount,r[t++]=this._fillVertexBuffer.isDataDriven()?1:0,r[t++]=this._outlineVertexBuffer.isDataDriven()?1:0,r[t++]=this._fillVertexBuffer.array.length;for(let i=0;i<this._fillVertexBuffer.array.length;i++)n[t++]=this._fillVertexBuffer.array[i];r[t++]=this._fillIndexBuffer.array.length;for(let i=0;i<this._fillIndexBuffer.array.length;i++)r[t++]=this._fillIndexBuffer.array[i];r[t++]=this._outlineVertexBuffer.array.length;for(let i=0;i<this._outlineVertexBuffer.array.length;i++)n[t++]=this._outlineVertexBuffer.array[i];r[t++]=this._outlineIndexBuffer.array.length;for(let i=0;i<this._outlineIndexBuffer.array.length;i++)r[t++]=this._outlineIndexBuffer.array[i];return r.buffer}_processFeature(e,t,r,n,i,s){if(!e)return;const a=e.length;if(t&&(!r||!i||i.color[3]*i.opacity==1))for(let l=0;l<a;l++)this._processOutline(e[l],i);let o;for(let l=0;l<a;l++){const t=T._area(e[l]);t>128?(void 0!==o&&this._processFill(e,o,n,s),o=[l]):t<-128&&void 0!==o&&o.push(l)}void 0!==o&&this._processFill(e,o,n,s)}_processOutline(e,t){const r=this._outlineVertexBuffer,n=this._outlineIndexBuffer,i=n.index;let s,a,o;const l=new u.a(0,0),c=new u.a(0,0),h=new u.a(0,0);let x=-1,f=-1,d=-1,y=-1,p=-1,g=!1,_=e.length;if(_<2)return;const m=e[0];let V=e[_-1];for(;_&&V.isEqual(m);)--_,V=e[_-1];if(!(_-0<2)){for(let i=0;i<_;++i){0===i?(s=e[_-1],a=e[0],o=e[1],l.assignSub(a,s),l.normalize(),l.rightPerpendicular()):(s=a,a=o,o=i!==_-1?e[i+1]:e[0],l.assign(c));const u=this._isClipEdge(s,a);-1===y&&(g=u),c.assignSub(o,a),c.normalize(),c.rightPerpendicular();const m=l.x*c.y-l.y*c.x;h.assignAdd(l,c),h.normalize();const V=-h.x*-l.x+-h.y*-l.y;let I=Math.abs(0!==V?1/V:1);I>8&&(I=8),m>=0?(d=r.add(a.x,a.y,l.x,l.y,0,1,t),-1===y&&(y=d),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),f=r.add(a.x,a.y,I*-h.x,I*-h.y,0,-1,t),-1===p&&(p=f),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),x=f,f=d,d=r.add(a.x,a.y,h.x,h.y,0,1,t),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),f=r.add(a.x,a.y,c.x,c.y,0,1,t),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d)):(d=r.add(a.x,a.y,I*h.x,I*h.y,0,1,t),-1===y&&(y=d),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),f=r.add(a.x,a.y,-l.x,-l.y,0,-1,t),-1===p&&(p=f),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),x=f,f=d,d=r.add(a.x,a.y,-h.x,-h.y,0,-1,t),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d),x=r.add(a.x,a.y,-c.x,-c.y,0,-1,t),x>=0&&f>=0&&d>=0&&!u&&n.add(x,f,d))}x>=0&&f>=0&&y>=0&&!g&&n.add(x,f,y),x>=0&&y>=0&&p>=0&&!g&&n.add(x,p,y),this._outlineIndexCount+=3*(n.index-i)}}_processFill(e,t,r,n){let i;t.length>1&&(i=[]);let s=0;for(const c of t)0!==s&&i.push(s),s+=e[c].length;const a=2*s,o=v.a.acquire();for(const c of t){const t=e[c],r=t.length;for(let e=0;e<r;++e)o.push(t[e].x,t[e].y)}const l=Object(D.b)(o,i,2);if(n&&Object(D.a)(o,i,2,l)>0){const n=[],i=[];if(function(e,t,r,n){let i,s;L.beginPolygon(e,t);for(const a of n){const e=r[a];if(!(e.length<3)){L.beginContour();for(let t=0;t<e.length;++t){i=e[t].x,s=e[t].y;const r=[i,s,0];L.addVertex(r,r)}L.endContour()}}L.endPolygon()}(n,i,e,t),i.length>0){const e=this._fillVertexBuffer.index;let t=0;for(;t<n.length;)this._fillVertexBuffer.add(n[t++],n[t++],r);let s=0;for(;s<i.length;)this._fillIndexBuffer.add(e+i[s+0],e+i[s+1],e+i[s+2]),s+=3;this._fillIndexCount+=i.length}}else{const e=l.length;if(e>0){const t=this._fillVertexBuffer.index;let n=0;for(;n<a;)this._fillVertexBuffer.add(o[n++],o[n++],r);let i=0;for(;i<e;)this._fillIndexBuffer.add(t+l[i++],t+l[i++],t+l[i++]);this._fillIndexCount+=e}}v.a.release(o)}_isClipEdge(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}static _area(e){let t=0;const r=e.length-1;for(let n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return t+=(e[r].x-e[0].x)*(e[r].y+e[0].y),.5*t}}var A=T,M=class{constructor(e){this._array=[],e<=0&&console.error(\"strideInBytes must be positive!\"),this._stride=e}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(e,t){return 65535&e|t<<16}static i8888to32(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}static i8816to32(e,t,r){return 255&e|(255&t)<<8|r<<16}};class P extends M{constructor(){super(12)}add(e,t,r){const n=this.array;n.push(e),n.push(t),n.push(r)}}r(\"wSAH\");var S=r(\"aixI\"),N=r(\"Jimw\");const C=e=>t=>{t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)},k=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,t.rightEntry2,t.leftExit2)},E=e=>t=>{const r=2===e._joinType?e._miterLimitCosine:e._roundLimitCosine,n=t.isCap&&0!==e._capType;let i,s=!1;if(t.cosine>.97?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)):t.cosine<1-.97?(t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.canSplit?(Object(N.c)(),t.sign>0?(t.splitInner?(t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftInner.x,t.leftInner.y,0,-1,t.distance,e._ddValues),t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightInner.x,t.rightInner.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)),t.cosine<r?(s=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.splitOuter?(s=s||t.gapOuter,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftOuter.x,-t.leftOuter.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightOuter.x,-t.rightOuter.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.splitInner?(t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftInner.x,-t.leftInner.y,0,1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightInner.x,-t.rightInner.y,0,1,t.distance,e._ddValues)):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)),t.cosine<r?(s=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):t.splitOuter?(s=s||t.gapOuter,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftOuter.x,t.leftOuter.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightOuter.x,t.rightOuter.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)))):t.sign>0?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.cosine<r?(s=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues),t.cosine<r?(s=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues))),t.canSplit&&(t.splitInner||t.splitOuter)||s||n?(i=t.entry1=t.exit1=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,0,0,0,0,t.distance,e._ddValues)):i=t.entry1=t.exit1=null,s&&1!==e._joinType)e._lineIndexBuffer.add(i,t.sign>0?t.exit2:t.entry0,t.sign>0?t.entry2:t.exit0);else if(n&&1===e._capType||s&&1===e._joinType){let r,n,s,a,o,l;if(t.isCap){const e=Math.PI;o=Math.ceil(e/.8),l=e/o,t.isFirstVertex?(r=t.prevNormal.x,n=t.prevNormal.y,s=t.entry0,a=t.entry2):t.isLastVertex&&(r=-t.nextNormal.x,n=-t.nextNormal.y,s=t.exit2,a=t.exit0)}else{const e=2*Math.acos(t.cosine);o=Math.ceil(e/.8),l=e/o,r=t.sign>0?-t.prevNormal.x:t.nextNormal.x,n=t.sign>0?-t.prevNormal.y:t.nextNormal.y,s=t.sign>0?t.entry2:t.exit0,a=t.sign>0?t.exit2:t.entry0}const c=Math.cos(l),u=Math.sin(l),h=u*r+c*n;let x,f;r=c*r-u*n,n=h;for(let d=0;d<o;++d){x=f,d<o-1&&(t.isCap?(f=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,r,n,t.isFirstVertex?-1:1,0,t.distance,e._ddValues)):(f=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,r,n,0,t.sign,t.distance,e._ddValues))),e._lineIndexBuffer.add(0===d?s:x,i,d===o-1?a:f);const l=u*r+c*n;r=c*r-u*n,n=l}}else if(n&&2===e._capType){const r=t.isFirstVertex?1:-1;let n,s;e._hasPattern?(n=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-r*t.inbound.x,t.prevNormal.y-r*t.inbound.y,-r,-1,t.distance,e._ddValues),s=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-r*t.inbound.x,-t.prevNormal.y-r*t.inbound.y,-r,1,t.distance,e._ddValues)):(n=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-r*t.inbound.x,t.prevNormal.y-r*t.inbound.y,0,-1,t.distance,e._ddValues),s=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-r*t.inbound.x,-t.prevNormal.y-r*t.inbound.y,0,1,t.distance,e._ddValues)),r>0?(e._lineIndexBuffer.add(i,t.entry2,s),e._lineIndexBuffer.add(i,s,n),e._lineIndexBuffer.add(i,n,t.entry0)):(e._lineIndexBuffer.add(i,s,t.exit2),e._lineIndexBuffer.add(i,n,s),e._lineIndexBuffer.add(i,t.exit0,n))}},F=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,null!=t.leftExit1?t.leftExit1:t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,null!=t.rightEntry1?t.rightEntry1:t.rightEntry2,null!=t.leftExit1?t.leftExit1:t.leftExit2),null!=t.leftExit1&&null!=t.rightEntry1?(e._lineIndexBuffer.add(t.leftExit1,t.rightEntry1,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)):null!=t.leftExit1?e._lineIndexBuffer.add(t.leftExit1,t.rightEntry2,t.leftExit2):null!=t.rightEntry1&&e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)};var O=class extends b{constructor(e,t,r,n){if(super(e,t),this.type=2,this._tessellationOptions={},this.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_hasPattern:null,_ddValues:null,_capType:null,_joinType:null,_miterLimitCosine:null,_roundLimitCosine:null},e.hasDataDrivenLine!==r.isDataDriven())throw new Error(\"incompatible line buffer\");this.tessellationProperties._lineVertexBuffer=r,this.tessellationProperties._lineIndexBuffer=n,this.tessellationProperties._hasPattern=e.getPaintValue(\"line-pattern\",this.zoom)||e.getPaintValue(\"line-dasharray\",this.zoom).length>0,this._isThinLine=e.isThinLine,this._tessellationCallbacks=this._isThinLine?{vertex:C(this.tessellationProperties),bridge:k(this.tessellationProperties)}:{vertex:E(this.tessellationProperties),bridge:F(this.tessellationProperties)}}get lineIndexStart(){return this._lineIndexStart}get lineIndexCount(){return this._lineIndexCount}processFeatures(e){this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;const t=this.layer,r=this.zoom,n=t.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);let i=[1,1,1,1],s=1,a=1;for(const o of this._features){let l;if(!this.tessellationProperties._hasPattern&&t.hasDataDrivenColor&&(i=t.getPaintValue(\"line-color\",r,o)),t.hasDataDrivenOpacity&&(s=t.getPaintValue(\"line-opacity\",r,o)),t.hasDataDrivenWidth&&(a=t.getPaintValue(\"line-width\",r,o)),n&&(l={color:i,opacity:s,size:Math.max(Math.min(a,256),0)},l.size<=0||l.opacity<=0||l.color[3]<=0))continue;this.tessellationProperties._capType=t.getLayoutValue(\"line-cap\",r,o),this.tessellationProperties._joinType=t.getLayoutValue(\"line-join\",r,o),this.tessellationProperties._miterLimitCosine=Object(S.b)(t.getLayoutValue(\"line-miter-limit\",r,o)),this.tessellationProperties._roundLimitCosine=Object(S.b)(t.getLayoutValue(\"line-round-limit\",r,o));const c=o.getGeometry(e);this._processFeature(c,l)}Object(N.b)()}serialize(){let e=7;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),n=new Int32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let i=0;i<this.layerUIDs.length;i++)r[t++]=this.layerUIDs[i];r[t++]=this._lineIndexStart,r[t++]=this._lineIndexCount,r[t++]=this.tessellationProperties._lineVertexBuffer.isDataDriven()?1:0,r[t++]=this.tessellationProperties._lineVertexBuffer.array.length;for(let i=0;i<this.tessellationProperties._lineVertexBuffer.array.length;i++)n[t++]=this.tessellationProperties._lineVertexBuffer.array[i];r[t++]=this.tessellationProperties._lineIndexBuffer.array.length;for(let i=0;i<this.tessellationProperties._lineIndexBuffer.array.length;i++)r[t++]=this.tessellationProperties._lineIndexBuffer.array[i];return r.buffer}_processFeature(e,t){if(!e)return;const r=e.length;for(let n=0;n<r;n++)this._processGeometry(e[n],t)}_processGeometry(e,t){if(e.length<2)return;let r,n,i=e[0],s=1;for(;s<e.length;)r=e[s].x-i.x,n=e[s].y-i.y,r*r+n*n<1e-6?e.splice(s,1):(i=e[s],++s);if(e.length<2)return;const a=3*this.tessellationProperties._lineIndexBuffer.index;this._tessellationOptions.trackDistance=this.tessellationProperties._hasPattern,this._tessellationOptions.initialDistance=0,this._tessellationOptions.thin=this._isThinLine,this._tessellationOptions.wrapDistance=65535,this._tessellationOptions.outerBisectorAutoSplitThreshold=.2631578947368421,this._tessellationOptions.enableOuterBisectorSplit=this.tessellationProperties._hasPattern,this._tessellationOptions.innerBisectorAutoSplitThreshold=.2631578947368421,this._tessellationOptions.enableInnerBisectorSplit=this.tessellationProperties._hasPattern,this.tessellationProperties._ddValues=t,Object(N.d)(e,this._tessellationOptions,this._tessellationCallbacks),this._lineIndexCount+=3*this.tessellationProperties._lineIndexBuffer.index-a}};class U{constructor(e){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=e.clone();e.next();)switch(e.tag()){case 1:this.name=e.getString();break;case 3:this.keys.push(e.getString());break;case 4:this.values.push(e.processMessage(U._parseValue));break;case 5:this.extent=e.getUInt32();break;default:e.skip()}}getData(){return this._pbfLayer}static _parseValue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}var R=U,z=r(\"s7YA\"),j=r(\"179/\"),Z=r(\"Ip4x\");function G(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}class q extends b{constructor(e,t,r,n,i,s,a,o){if(super(e,t),this.type=3,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,e.hasDataDrivenIcon!==r.isDataDriven())throw new Error(\"incompatible icon buffer\");if(e.hasDataDrivenText!==i.isDataDriven())throw new Error(\"incompatible text buffer\");this._iconVertexBuffer=r,this._iconIndexBuffer=n,this._textVertexBuffer=i,this._textIndexBuffer=s,this._placementEngine=a,this._workerTileHandler=o}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(e,t,r){const n=this.layer,i=this.zoom,s=n.hasDataDrivenIcon,a=n.hasDataDrivenText;e&&e.setExtent(this.layerExtent);const o=n.getLayoutProperty(\"icon-image\"),l=n.getLayoutProperty(\"text-field\"),c=[];let u,h,x,f,d,y,p,g,_,m,V=[1,1,1,1],I=1,b=1,B=[1,1,1,1],w=1,v=1;for(const D of this._features){const L=D.getGeometry(e);if(!L||0===L.length)continue;let T,A;o&&(T=n.getLayoutValue(\"icon-image\",i,D),o.isDataDriven||(T=this._replaceKeys(T,D.values)),T&&(t.add(T),u=n.getLayoutValue(\"icon-rotate\",i,D),h=n.getLayoutValue(\"icon-anchor\",i,D),x=n.getLayoutValue(\"icon-offset\",i,D)));let M=!1;if(l&&(A=n.getLayoutValue(\"text-field\",i,D),A&&!l.isDataDriven&&(A=this._replaceKeys(A,D.values)),A)){switch(A=A.replace(/\\\\n/g,\"\\n\"),n.getLayoutValue(\"text-transform\",i,D)){case 2:A=A.toLowerCase();break;case 1:A=A.toUpperCase()}if(q._bidiEngine.hasBidiChar(A)){let e;e=\"rtl\"===q._bidiEngine.checkContextual(A)?\"IDNNN\":\"ICNNN\",A=q._bidiEngine.bidiTransform(A,e,\"VLYSN\"),M=!0}const e=A.length;if(e>0){m=n.getLayoutValue(\"text-font\",i,D);for(const t of m){let n=r[t];n||(n=r[t]=new Set);for(let t=0;t<e;t++){const e=A.charCodeAt(t);n.add(e)}}f=n.getLayoutValue(\"text-rotate\",i,D),d=n.getLayoutValue(\"text-anchor\",i,D),y=n.getLayoutValue(\"text-offset\",i,D),p=n.getLayoutValue(\"text-justify\",i,D),g=n.getLayoutValue(\"text-letter-spacing\",i,D),_=n.getLayoutValue(\"text-max-width\",i,D)}}if(!T&&!A)continue;const P=n.getLayoutValue(\"icon-size\",i,D),S=n.getLayoutValue(\"text-size\",i,D);n.hasDataDrivenIconColor&&(V=n.getPaintValue(\"icon-color\",i,D)),n.hasDataDrivenIconOpacity&&(I=n.getPaintValue(\"icon-opacity\",i,D)),n.hasDataDrivenIconSize&&(b=P),n.hasDataDrivenTextColor&&(B=n.getPaintValue(\"text-color\",i,D)),n.hasDataDrivenTextOpacity&&(w=n.getPaintValue(\"text-opacity\",i,D)),n.hasDataDrivenTextSize&&(v=S);const N=n.getLayoutValue(\"symbol-sort-key\",i,D),C={sprite:T,label:A,rtl:M,type:D.type,geometry:L,hash:(A?Object(z.b)(A):0)^(T?Object(z.b)(T):0),priority:N,iconSize:P,iconRotate:u,ddIconValues:s?{color:V,opacity:I,size:b}:null,iconAnchor:h,iconOffset:x,textSize:S,textRotate:f,ddTextValues:a?{color:B,opacity:w,size:v}:null,textAnchor:d,textOffset:y,textJustify:p,textLetterSpacing:g,textMaxWidth:_,textFontArray:m};c.push(C)}this._symbolFeatures=c}processFeatures(e){e&&e.setExtent(this.layerExtent);const t=this.layer,r=this.zoom,n=t.getLayoutValue(\"symbol-placement\",r),i=0!==n,s=8*t.getLayoutValue(\"symbol-spacing\",r),a=t.getLayoutProperty(\"icon-image\"),o=t.getLayoutProperty(\"text-field\"),c=a?new Z.d(t,r,i):null,u=o?new Z.g(t,r,i):null,h=this._workerTileHandler;let x;a&&(x=h.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const p=[];let g=1;u&&u.size&&(g=u.size/f);const _=u?u.maxAngle*l.b:0,m=u?8*u.size:0;for(const l of this._symbolFeatures){let e,t;c&&x&&l.sprite&&(e=x[l.sprite],e&&e.sdf&&(this._isIconSDF=!0)),e&&(c.size=l.iconSize,c.rotate=l.iconRotate,c.offset=l.iconOffset);let r=0;const a=l.label;if(a){u.size=l.textSize,u.rotate=l.textRotate,u.anchor=l.textAnchor,u.fontArray=l.textFontArray,u.justify=l.textJustify,u.letterSpacing=l.textLetterSpacing,u.maxWidth=l.textMaxWidth,u.offset=l.textOffset;const e=i?u.keepUpright:u.writingMode&&u.writingMode.indexOf(1)>=0;let n=.5;switch(u.anchor){case 5:case 1:case 7:n=0;break;case 6:case 2:case 8:n=1}let s=.5;switch(u.anchor){case 5:case 3:case 6:s=0;break;case 7:case 4:case 8:s=1}let o=.5;switch(u.justify){case 0:o=n;break;case 1:o=0;break;case 3:o=1}const c=u.letterSpacing*f,x=i?0:u.maxWidth*f,y=u.lineHeight*f;let p,_;if(p=u.fontArray.map(e=>h.getGlyphItems(e)),_=new d(p,x,y,c,n,s,o),t=_.getShaping(a,l.rtl,e),t&&t.length>0){let e=1e30,n=-1e30;for(const r of t)e=Math.min(e,r.x),n=Math.max(n,r.x);r=(n-e+48)*g*8}}for(let o of l.geometry){const a=[];if(1===n){if(t&&t.length>0&&u&&u.size){const e=8*u.size*(2+Math.min(2,4*Math.abs(u.offset[1])));o=q._smoothVertices(o,e)}q._pushAnchors(a,o,s,r)}else 2===n?q._pushCenterAnchor(a,o):3===l.type?q._pushCentroid(a,o):a.push(new y(o[0].x,o[0].y));for(const n of a){if(n.x<0||n.x>4096||n.y<0||n.y>4096)continue;if(i&&r>0&&0===u.rotationAlignment&&!q._honorsTextMaxAngle(o,n,r,_,m))continue;const s={shaping:t,line:o,iconMosaicItem:e,anchor:n,symbolFeature:l,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};p.push(s),this._processFeature(s,c,u)}}}p.sort(G),this._addPlacedGlyphs(),this._symbolInstances=p}serialize(){let e=13;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=q.symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),n=new Int32Array(r.buffer),i=new Float32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let s=0;s<this.layerUIDs.length;s++)r[t++]=this.layerUIDs[s];r[t++]=this._isIconSDF?1:0,r[t++]=this._iconVertexBuffer.isDataDriven()?1:0,r[t++]=this._textVertexBuffer.isDataDriven()?1:0,r[t++]=this.markerPageMap.size,this.markerPageMap.forEach(([e,n],i)=>{r[t++]=i,r[t++]=e,r[t++]=n}),r[t++]=this.glyphsPageMap.size,this.glyphsPageMap.forEach(([e,n],i)=>{r[t++]=i,r[t++]=e,r[t++]=n}),r[t++]=this._iconVertexBuffer.index/4,r[t++]=this._textVertexBuffer.index/4,t=q.serializeSymbols(r,n,i,t,this._symbolInstances),r[t++]=this._iconVertexBuffer.array.length;for(let s=0;s<this._iconVertexBuffer.array.length;s++)n[t++]=this._iconVertexBuffer.array[s];r[t++]=this._iconIndexBuffer.array.length;for(let s=0;s<this._iconIndexBuffer.array.length;s++)r[t++]=this._iconIndexBuffer.array[s];r[t++]=this._textVertexBuffer.array.length;for(let s=0;s<this._textVertexBuffer.array.length;s++)n[t++]=this._textVertexBuffer.array[s];r[t++]=this._textIndexBuffer.array.length;for(let s=0;s<this._textIndexBuffer.array.length;s++)r[t++]=this._textIndexBuffer.array[s];return r.buffer}static symbolsSerializationLength(e){let t=0;t+=1;for(const r of e||[]){t+=4,t+=1;for(const e of r.textColliders)t+=10;for(const e of r.iconColliders)t+=10;t+=1,t+=2*r.textVertexRanges.length,t+=1,t+=2*r.iconVertexRanges.length}return t}static serializeSymbols(e,t,r,n,i){t[n++]=(i=i||[]).length;for(const s of i){t[n++]=s.anchor.x,t[n++]=s.anchor.y,t[n++]=s.symbolFeature.hash,t[n++]=s.symbolFeature.priority,t[n++]=s.textColliders.length+s.iconColliders.length;for(const e of s.textColliders)t[n++]=e.xTile,t[n++]=e.yTile,t[n++]=e.dxPixels,t[n++]=e.dyPixels,t[n++]=e.hard?1:0,t[n++]=e.partIndex,r[n++]=e.minLod,r[n++]=e.maxLod,t[n++]=e.width,t[n++]=e.height;for(const e of s.iconColliders)t[n++]=e.xTile,t[n++]=e.yTile,t[n++]=e.dxPixels,t[n++]=e.dyPixels,t[n++]=e.hard?1:0,t[n++]=e.partIndex,r[n++]=e.minLod,r[n++]=e.maxLod,t[n++]=e.width,t[n++]=e.height;t[n++]=s.textVertexRanges.length;for(const[e,r]of s.textVertexRanges)t[n++]=e,t[n++]=r;t[n++]=s.iconVertexRanges.length;for(const[e,r]of s.iconVertexRanges)t[n++]=e,t[n++]=r}return n}_replaceKeys(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:\"\"})}_processFeature(e,t,r){const n=e.line,i=e.iconMosaicItem,s=e.shaping,a=e.anchor,o=!!i;let c=!0;o&&(c=t.optional||!i);const u=s&&s.length>0;let h,x,f=!0;if(u&&(f=r.optional||!s||0===s.length),o&&(h=this._placementEngine.getIconPlacement(a,i,t)),(h||c)&&(u&&(x=this._placementEngine.getTextPlacement(a,s,n,r)),x||f)){if(h&&x||(f||c?f||x?c||h||(x=null):h=null:(h=null,x=null)),x&&(this._storePlacedGlyphs(e,x.shapes,this.zoom,r.rotationAlignment),x.textColliders)){e.textColliders=x.textColliders;for(const e of x.textColliders){e.minLod=Math.max(this.zoom+Object(l.f)(e.minLod),0),e.maxLod=Math.min(this.zoom+Object(l.f)(e.maxLod),25);const t=e.angle;if(t){const r=Math.cos(t),n=Math.sin(t),i=e.dxPixels*r-e.dyPixels*n,s=e.dxPixels*n+e.dyPixels*r,a=(e.dxPixels+e.width)*r-e.dyPixels*n,o=(e.dxPixels+e.width)*n+e.dyPixels*r,l=e.dxPixels*r-(e.dyPixels+e.height)*n,c=e.dxPixels*n+(e.dyPixels+e.height)*r,u=(e.dxPixels+e.width)*r-(e.dyPixels+e.height)*n,h=(e.dxPixels+e.width)*n+(e.dyPixels+e.height)*r,x=Math.min(i,a,l,u),f=Math.max(i,a,l,u),d=Math.min(s,o,c,h),y=Math.max(s,o,c,h);e.dxPixels=x,e.dyPixels=d,e.width=f-x,e.height=y-d}}}if(h&&(this._addPlacedIcons(e,h.shapes,this.zoom,i.page,1===t.rotationAlignment),h.iconColliders)){e.iconColliders=h.iconColliders;for(const e of h.iconColliders){e.minLod=Math.max(this.zoom+Object(l.f)(e.minLod),0),e.maxLod=Math.min(this.zoom+Object(l.f)(e.maxLod),25);const t=e.angle;if(t){const r=Math.cos(t),n=Math.sin(t),i=e.dxPixels*r-e.dyPixels*n,s=e.dxPixels*n+e.dyPixels*r,a=(e.dxPixels+e.width)*r-e.dyPixels*n,o=(e.dxPixels+e.width)*n+e.dyPixels*r,l=e.dxPixels*r-(e.dyPixels+e.height)*n,c=e.dxPixels*n+(e.dyPixels+e.height)*r,u=(e.dxPixels+e.width)*r-(e.dyPixels+e.height)*n,h=(e.dxPixels+e.width)*n+(e.dyPixels+e.height)*r,x=Math.min(i,a,l,u),f=Math.max(i,a,l,u),d=Math.min(s,o,c,h),y=Math.max(s,o,c,h);e.dxPixels=x,e.dyPixels=d,e.width=f-x,e.height=y-d}}}}}_addPlacedIcons(e,t,r,n,i){const s=e.symbolFeature.ddIconValues,a=Math.max(r-1,0),o=this._iconVertexBuffer,c=this._iconIndexBuffer,u=this._markerMap;for(const h of t){const t=i?0:Math.max(r+Object(l.f)(h.minzoom),a),x=i?25:Math.min(r+Object(l.f)(h.maxzoom),25);if(x<=t)continue;const f=h.tl,d=h.tr,y=h.bl,p=h.br,g=h.mosaicRect,_=h.labelAngle,m=h.minAngle,V=h.maxAngle,I=h.anchor,b=o.index,B=g.x,w=g.y,v=B+g.width,D=w+g.height,L=o.index;o.add(I.x,I.y,f.x,f.y,B,w,_,m,V,t,x,s),o.add(I.x,I.y,d.x,d.y,v,w,_,m,V,t,x,s),o.add(I.x,I.y,y.x,y.y,B,D,_,m,V,t,x,s),o.add(I.x,I.y,p.x,p.y,v,D,_,m,V,t,x,s),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===L?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([L,4]),c.add(b+0,b+1,b+2),c.add(b+1,b+2,b+3),u.has(n)?u.get(n)[1]+=6:u.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const e=this._textVertexBuffer,t=this._textIndexBuffer,r=this._glyphMap;this._glyphBufferDataStorage.forEach((n,i)=>{for(const s of n){const n=e.index,a=s.symbolInstance,o=a.symbolFeature.ddTextValues,l=e.index;e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,o),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,o),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,o),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,o),a.textVertexRanges.length>0&&a.textVertexRanges[0][0]+a.textVertexRanges[0][1]===l?a.textVertexRanges[0][1]+=4:a.textVertexRanges.push([l,4]),t.add(n+0,n+1,n+2),t.add(n+1,n+2,n+3),r.has(i)?r.get(i)[1]+=6:r.set(i,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}}),this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(e,t,r,n){const i=Math.max(r-1,0),s=1===n;let a,o,c,u,h,x,f,d,y,p,g;for(const _ of t)a=s?0:Math.max(r+Object(l.f)(_.minzoom),i),o=s?25:Math.min(r+Object(l.f)(_.maxzoom),25),o<=a||(c=_.tl,u=_.tr,h=_.bl,x=_.br,f=_.labelAngle,d=_.minAngle,y=_.maxAngle,p=_.anchor,g=_.mosaicRect,this._glyphBufferDataStorage.has(_.page)||this._glyphBufferDataStorage.set(_.page,[]),this._glyphBufferDataStorage.get(_.page).push({glyphAnchor:[p.x,p.y],tl:[c.x,c.y],tr:[u.x,u.y],bl:[h.x,h.y],br:[x.x,x.y],xmin:g.x,ymin:g.y,xmax:g.x+g.width,ymax:g.y+g.height,labelAngle:f,minAngle:d,maxAngle:y,minLod:a,maxLod:o,placementLod:i,symbolInstance:e}))}static _pushAnchors(e,t,r,n){r+=n;let i=0;const s=t.length-1;for(let l=0;l<s;l++)i+=u.a.distance(t[l],t[l+1]);let a=n||r;if(a*=.5,i<=a)return;const o=a/i;let c=0,h=-(r=i/Math.max(Math.round(i/r),1))/2;const x=t.length-1;for(let u=0;u<x;u++){const n=t[u],i=t[u+1],s=i.x-n.x,a=i.y-n.y,x=Math.sqrt(s*s+a*a);let f;for(;h+r<c+x;){h+=r;const t=(h-c)/x,d=Object(l.e)(n.x,i.x,t),p=Object(l.e)(n.y,i.y,t);void 0===f&&(f=Math.atan2(a,s)),e.push(new y(d,p,f,u,o))}c+=x}}static _pushCenterAnchor(e,t){let r=0;const n=t.length-1;for(let o=0;o<n;o++)r+=u.a.distance(t[o],t[o+1]);const i=r/2;let s=0;const a=t.length-1;for(let o=0;o<a;o++){const r=t[o],n=t[o+1],a=n.x-r.x,c=n.y-r.y,u=Math.sqrt(a*a+c*c);if(i<s+u){const t=(i-s)/u,h=Object(l.e)(r.x,n.x,t),x=Object(l.e)(r.y,n.y,t),f=Math.atan2(c,a);return void e.push(new y(h,x,f,o,0))}s+=u}}static _deviation(e,t,r){return Math.atan2((t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x),(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y))}static _honorsTextMaxAngle(e,t,r,n,i){let s=0;const a=r/2;let o=new u.a(t.x,t.y),l=t.segment+1;for(;s>-a;){if(--l,l<0)return!1;s-=u.a.distance(e[l],o),o=e[l]}s+=u.a.distance(e[l],e[l+1]);const c=[];let h=0;const x=e.length;for(;s<a;){const t=e[l];let r,a=l;do{if(++a,a===x)return!1;r=e[a]}while(r.isEqual(t));let o,f=a;do{if(++f,f===x)return!1;o=e[f]}while(o.isEqual(r));const d=this._deviation(t,r,o);for(c.push({deviation:d,distToAnchor:s}),h+=d;s-c[0].distToAnchor>i;)h-=c.shift().deviation;if(Math.abs(h)>n)return!1;s+=u.a.distance(r,o),l=a}return!0}static _smoothVertices(e,t){if(t<=0)return e;let r=e.length;if(r<3)return e;const n=[];let i=0,s=0;n.push(0);for(let y=1;y<r;y++){const t=u.a.distance(e[y],e[y-1]);t>0&&(i+=t,n.push(i),s++,s!==y&&(e[s]=e[y]))}if(r=s+1,r<3)return e;t=Math.min(t,.2*i);const a=e[0].x,o=e[0].y,l=e[r-1].x,c=e[r-1].y,h=u.a.sub(e[0],e[1]);h.normalize(),e[0].x+=t*h.x,e[0].y+=t*h.y,h.assignSub(e[r-1],e[r-2]),h.normalize(),e[r-1].x+=t*h.x,e[r-1].y+=t*h.y,n[0]-=t,n[r-1]+=t;const x=[];x.push(new u.a(a,o));const f=1e-6,d=.5*t;for(let y=1;y<r-1;y++){let i=0,s=0,a=0;for(let r=y-1;r>=0;r--){const o=d+n[r+1]-n[y];if(o<0)break;const l=n[r+1]-n[r],c=n[y]-n[r]<d?1:o/l;if(c<f)break;const u=c*c,h=c*o-.5*u*l,x=c*l/t,p=e[r+1],g=e[r].x-p.x,_=e[r].y-p.y;i+=x/h*(p.x*c*o+.5*u*(o*g-l*p.x)-u*c*l*g/3),s+=x/h*(p.y*c*o+.5*u*(o*_-l*p.y)-u*c*l*_/3),a+=x}for(let o=y+1;o<r;o++){const r=d-n[o-1]+n[y];if(r<0)break;const l=n[o]-n[o-1],c=n[o]-n[y]<d?1:r/l;if(c<f)break;const u=c*c,h=c*r-.5*u*l,x=c*l/t,p=e[o-1],g=e[o].x-p.x,_=e[o].y-p.y;i+=x/h*(p.x*c*r+.5*u*(r*g-l*p.x)-u*c*l*g/3),s+=x/h*(p.y*c*r+.5*u*(r*_-l*p.y)-u*c*l*_/3),a+=x}x.push(new u.a(i/a,s/a))}return x.push(new u.a(l,c)),e[0].x=a,e[0].y=o,e[r-1].x=l,e[r-1].y=c,x}static _pushCentroid(e,t){const r=4096,n=4096,i=t.length-1;let s=0,a=0,o=0,l=t[0].x,c=t[0].y;l>r&&(l=r),l<0&&(l=0),c>n&&(c=n),c<0&&(c=0);for(let u=1;u<i;u++){let e=t[u].x,i=t[u].y,h=t[u+1].x,x=t[u+1].y;e>r&&(e=r),e<0&&(e=0),i>n&&(i=n),i<0&&(i=0),h>r&&(h=r),h<0&&(h=0),x>n&&(x=n),x<0&&(x=0);const f=(e-l)*(x-c)-(h-l)*(i-c);s+=f*(l+e+h),a+=f*(c+i+x),o+=f}s/=3*o,a/=3*o,isNaN(s)||isNaN(a)||e.push(new y(s,a))}}q._bidiEngine=new j.a;var H=q;const K=new Float32Array(1),W=new Uint32Array(K.buffer);class Y extends M{constructor(e){super(e?20:12),this._isDataDriven=e}isDataDriven(){return this._isDataDriven}add(e,t,r,n,i,s,a,o){const l=this.array;let c=M.i1616to32(e,t);if(l.push(c),c=M.i8888to32(Math.round(31*r),Math.round(31*n),Math.round(31*i),Math.round(31*s)),l.push(c),c=M.i1616to32(a,0),l.push(c),this._isDataDriven){if(!o)throw new Error(\"Expecting data driven values.\");const e=o.color,t=e[3]*o.opacity*255;l.push(M.i8888to32(e[0]*t,e[1]*t,e[2]*t,t)),K[0]=o.size,l.push(W[0])}}}class J extends M{constructor(e){super(e?8:4),this._isDataDriven=e}isDataDriven(){return this._isDataDriven}add(e,t,r){const n=this.array;if(n.push(M.i1616to32(e,t)),this._isDataDriven){if(!r)throw new Error(\"Expecting data driven values.\");const e=r.color,t=e[3]*r.opacity*255;n.push(M.i8888to32(e[0]*t,e[1]*t,e[2]*t,t))}}}class Q extends M{constructor(e){super(e?12:8),this._isDataDriven=e}isDataDriven(){return this._isDataDriven}add(e,t,r,n,i,s,a){const o=this.array,l=this.index;let c=M.i1616to32(e,t);if(o.push(c),c=M.i8888to32(Math.round(15*r),Math.round(15*n),i,s),o.push(c),this._isDataDriven){if(!a)throw new Error(\"Expecting data driven values.\");const e=a.color,t=e[3]*a.opacity*255;o.push(M.i8888to32(e[0]*t,e[1]*t,e[2]*t,t))}return l}}class X extends M{constructor(e){super(e?24:16),this._isDataDriven=e}isDataDriven(){return this._isDataDriven}add(e,t,r,n,i,s,a,o,c,u,h,x){const f=this.array;let d=M.i1616to32(e,t);if(f.push(d),d=M.i1616to32(Math.round(8*r),Math.round(8*n)),f.push(d),d=M.i8888to32(i/4,s/4,o,c),f.push(d),d=M.i8888to32(0,Object(l.h)(a),10*u,Math.min(10*h,255)),f.push(d),this._isDataDriven){if(!x)throw new Error(\"Expecting data driven values.\");const e=x.color,t=e[3]*x.opacity*255;f.push(M.i8888to32(e[0]*t,e[1]*t,e[2]*t,t)),K[0]=x.size,f.push(W[0])}}}class $ extends M{constructor(){super(16)}add(e,t,r,n,i,s,a,o,l,c,u){const h=this.array;let x=M.i1616to32(2*e+r,2*t+n);h.push(x);const f=s[3]*a*255;x=M.i8888to32(s[0]*f,s[1]*f,s[2]*f,f),h.push(x);const d=c[3]*u*255;x=M.i8888to32(c[0]*d,c[1]*d,c[2]*d,d),h.push(x),x=M.i8888to32(Math.min(32*o,255),Math.min(4*l,255),Math.min(i,255),0),h.push(x)}}t.default=class{constructor(){this._spriteInfo={},this._glyphInfo={}}reset(){return this._spriteInfo={},this._glyphInfo={},Object(s.u)()}getLayers(){var e;return null==(e=this._styleRepository)?void 0:e.layers}async createTileAndParse(e,t){const{key:r}=e,i={};for(const n of Object.keys(e.sourceName2DataAndRefKey))i[n]=e.sourceName2DataAndRefKey[n].refKey;const a=new class{constructor(e,t,r,i){this.status=n.INITIALIZED,this.placementEngine=new m,this.tileKey=e,this.refKeys=t,this._workerTileHandler=r,this._styleRepository=i}release(){this.tileKey=\"\",this.refKeys=null,this.status=n.INITIALIZED,this._workerTileHandler=null}async parse(t,r,i){const a=i&&i.signal;if(Object(o.h)(a)){const e=()=>{a.removeEventListener(\"abort\",e),this.status=n.INVALID};a.addEventListener(\"abort\",e)}let l;try{l=await this._parse(t,i)}catch(e){if(Object(s.n)(e))throw e;return{result:[],transferList:[]}}this.status=n.READY;const c=[];for(const e of l){const t=e.serialize();c.push(t)}return{result:c,transferList:c.length<=r&&c}}setObsolete(){this.status=n.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}async _parse(e,t){const r=e.sourceName2DataAndRefKey;return 0===Object.keys(r).length?[]:(this.status=n.MODIFIED,new class{constructor(e,t,r,n,i){if(this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,i){this._styleLayerUIDs=new Set;for(const e of i)this._styleLayerUIDs.add(e)}this._styleRepository=n,this._layers=this._styleRepository.layers;const[s,a,o]=t.tileKey.split(\"/\").map(parseFloat);this._level=s;const l=Math.max(8,Math.round(1*this._level)-8);for(const c of Object.keys(e)){const t=e[c];if(this._pbfTiles[c]=new V.a(new Uint8Array(t.protobuff),new DataView(t.protobuff)),t.refKey){const[e]=t.refKey.split(\"/\").map(parseFloat),r=s-e;if(r>0){const e=(1<<r)-1;this._tileClippers[c]=new I.b(r,a&e,o&e,8,l)}}this._tileClippers[c]||(this._tileClippers[c]=new I.a)}}_canParseStyleLayer(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}async parse(e){const t=this._initialize(e),{returnedBuckets:r}=t;this._processLayers(t),this._linkReferences(t),this._filterFeatures(t);const i=new Set,a={};for(const n of r)3===n.type&&n.getResources(n.tileClipper,i,a);if(this._tile.status===n.INVALID)return Object(s.u)([]);const o=this._fetchResources(i,a,e);return Object(s.b)(o).then(()=>this._processFeatures(t.returnedBuckets))}_initialize(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}_processLayers(e){const{sourceNameToTileData:t,layers:r,zoom:n,sourceNameToTileClipper:i,sourceNameToUniqueSourceLayerBuckets:s,sourceNameToUniqueSourceLayers:a,returnedBuckets:o,layerIdToBucket:l,referencerUIDToReferencedId:c}=e;for(let u=r.length-1;u>=0;u--){const e=r[u];if(!this._canParseStyleLayer(e.uid)||e.minzoom&&n<Math.floor(e.minzoom)||e.maxzoom&&n>=e.maxzoom||0===e.type)continue;if(!t[e.source]||!i[e.source])continue;const h=i[e.source],x=e.sourceLayer,f=t[e.source][x];if(f){let t=a[e.source];if(t||(t=a[e.source]=new Set),t.add(e.sourceLayer),e.refLayerId)c.set(e.uid,e.refLayerId);else{const t=this._createBucket(e);if(t){t.layerUIDs=[e.uid],t.layerExtent=f.extent,t.tileClipper=h;let r=s[e.source];r||(r=s[e.source]={});let n=r[x];n||(n=r[x]=[]),n.push(t),o.push(t),l[e.id.toLowerCase()]=t}}}}}_linkReferences(e){const{layerIdToBucket:t,referencerUIDToReferencedId:r}=e;r.forEach((e,r)=>{e=e.toLowerCase(),t[e]&&t[e].layerUIDs.push(r)})}_filterFeatures(e){const{signal:t,sourceNameToTileData:r,sourceNameToUniqueSourceLayerBuckets:n,sourceNameToUniqueSourceLayers:i}=e,a=10*this._level,o=10*(this._level+1),l=[],c=[];for(const s of Object.keys(i))i[s].forEach(e=>{l.push(e),c.push(s)});for(let u=0;u<l.length;u++){const e=c[u],i=l[u];if(!r[e]||!n[e])continue;const h=r[e][i],x=n[e][i];if(!x||0===x.length)continue;if(Object(s.o)(t))return;const f=h.getData();for(;f.nextTag(2);){const e=f.getMessage(),t=new w(e,h);e.release();const r=t.values;if(r){const e=r._minzoom;if(e&&e>=o)continue;const t=r._maxzoom;if(t&&t<=a)continue}for(const n of x)n.pushFeature(t)}}}_fetchResources(e,t,r){const n=[],i=this._tile.getWorkerTileHandler();let s,a;e.size>0&&(s=i.fetchSprites(e,this._client,r),n.push(s));for(const o in t){const e=t[o];e.size>0&&(a=i.fetchGlyphs(this._tile.tileKey,o,e,this._client,r),n.push(a))}return n}_processFeatures(e){const t=e.filter(e=>e.hasFeatures());for(const r of t)r.processFeatures(r.tileClipper);return t}_parseTileData(e){const t={};for(const r of Object.keys(e)){const n=e[r],i={};for(;n.next();)switch(n.tag()){case 3:{const e=n.getMessage(),t=new R(e);e.release(),i[t.name]=t;break}default:n.skip()}t[r]=i}return t}_createBucket(e){switch(e.type){case 0:return null;case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}}_createFillBucket(e){return new A(e,this._level,new J(e.hasDataDrivenFill),new P,new Q(e.hasDataDrivenOutline),new P)}_createLineBucket(e){return new O(e,this._level,new Y(e.hasDataDrivenLine),new P)}_createCircleBucket(e){return new B(e,this._level,new $,new P)}_createSymbolBucket(e){const t=this._tile;return new H(e,this._level,new X(e.hasDataDrivenIcon),new P,new X(e.hasDataDrivenText),new P,t.placementEngine,t.getWorkerTileHandler())}}(r,this,t.client,this._styleRepository,e.styleLayerUIDs).parse(t))}}(r,i,this,this._styleRepository);try{return await a.parse(e,this._vectorTileLayerMaxBuffers,t)}catch(e){if(a.setObsolete(),a.release(),!Object(s.n)(e))throw e;return null}}updateStyle(e){if(!e||0===e.length||!this._styleRepository)return;const t=this._styleRepository;for(const r of e){const e=r.data;switch(r.type){case 0:t.setPaintProperties(e.layer,e.paint);break;case 1:t.setLayoutProperties(e.layer,e.layout);break;case 3:t.deleteStyleLayer(e.layerName);break;case 2:t.setStyleLayer(e.layer,e.index)}}}setStyle(e){this._styleRepository=new a.a(e.style),this._spriteInfo={},this._glyphInfo={},this._vectorTileLayerMaxBuffers=e.vectorTileLayerMaxBuffers}fetchSprites(e,t,r){const n=[],i=this._spriteInfo;return e.forEach(e=>{void 0===i[e]&&n.push(e)}),0===n.length?Object(s.u)():t.invoke(\"getSprites\",n,{signal:r&&r.signal}).then(e=>{for(const t in e)i[t]=e[t]})}getSpriteItems(){return this._spriteInfo}fetchGlyphs(e,t,r,n,i){const a=[];let o=this._glyphInfo[t];return o?r.forEach(e=>{o[e]||a.push(e)}):(o=this._glyphInfo[t]=[],r.forEach(e=>a.push(e))),0===a.length?Object(s.u)():n.invoke(\"getGlyphs\",{tileID:e,font:t,codePoints:a},i).then(e=>{for(let t=0;t<e.length;t++)e[t]&&(o[t]=e[t])})}getGlyphItems(e){return this._glyphInfo[e]}}},X2wA:function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function i(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return s()}},r.exports),r.exports}function s(){throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\")}r.d(t,\"a\",function(){return s}),r.d(t,\"b\",function(){return i}),r.d(t,\"c\",function(){return n}),\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self&&self},jIHu:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return D}),r.d(t,\"b\",function(){return L}),r.d(t,\"c\",function(){return d}),r.d(t,\"d\",function(){return a}),r.d(t,\"e\",function(){return u}),r.d(t,\"f\",function(){return c}),r.d(t,\"g\",function(){return o}),r.d(t,\"h\",function(){return P}),r.d(t,\"i\",function(){return M}),r.d(t,\"j\",function(){return x}),r.d(t,\"k\",function(){return h}),r.d(t,\"l\",function(){return A}),r.d(t,\"m\",function(){return N}),r.d(t,\"n\",function(){return l}),r.d(t,\"o\",function(){return T}),r.d(t,\"p\",function(){return n}),r.d(t,\"q\",function(){return i}),r.d(t,\"r\",function(){return F}),r.d(t,\"s\",function(){return _}),r.d(t,\"t\",function(){return m}),r.d(t,\"u\",function(){return V}),r.d(t,\"v\",function(){return I}),r.d(t,\"w\",function(){return g}),r.d(t,\"x\",function(){return p}),r.d(t,\"y\",function(){return b}),r.d(t,\"z\",function(){return B}),r.d(t,\"A\",function(){return w}),r.d(t,\"B\",function(){return v}),r.d(t,\"C\",function(){return y}),r.d(t,\"D\",function(){return f}),r.d(t,\"E\",function(){return S}),r.d(t,\"F\",function(){return s}),r.d(t,\"G\",function(){return E}),r.d(t,\"H\",function(){return k}),r.d(t,\"I\",function(){return C});const n=1e-30,i=4294967295,s=512,a=128,o=8,l=29,c=1,u=16,h=50,x=10,f=8,d={metrics:{width:15,height:17,left:0,top:-7,advance:14}},y=0,p=0,g=0,_=1,m=2,V=3,I=4,b=5,B=6,w=5,v=6,D=1,L=2,T=2,A=1,M=2,P=4,S=2.5,N=6,C=5,k=6,E=1.15,F=2},qcDN:function(e,t,r){\"use strict\";t.a=class{constructor(e=0,t=0,r=0,n=0){this.x=e,this.y=t,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}}}]);","name":"40.98e258def50f2569a091.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[40,120,121],{\n\n/***/ \"+yyC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return e; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,r,i){const u=r&&r.length,o=u?r[0]*i:e.length;let y=n(e,0,o,i,!0);const p=new Array;if(!y||y.next===y.prev)return p;let c,v,s,h,d;if(u&&(y=function(e,x,r,i){const u=new Array;for(let t=0,r=x.length;t<r;t++){const o=n(e,x[t]*i,t<r-1?x[t+1]*i:e.length,i,!1);o===o.next&&(o.steiner=!0),u.push(l(o))}u.sort(w);for(const e of u)f(e,r),r=t(r,r.next);return r}(e,r,y,i)),e.length>80*i){c=s=e[0],v=h=e[1];for(let n=i;n<o;n+=i){const t=e[n],x=e[n+1];c=Math.min(c,t),v=Math.min(v,x),s=Math.max(s,t),h=Math.max(h,x)}d=Math.max(s-c,h-v),d=0!==d?1/d:0}return x(y,p,i,c,v,d),p}function n(e,n,t,x,r){let i;if(r===s(e,n,t,x)>0)for(let r=n;r<t;r+=x)i=u(r,e[r],e[r+1],i);else for(let r=t-x;r>=n;r-=x)i=u(r,e[r],e[r+1],i);return i&&a(i,i.next)&&(o(i),i=i.next),i}function t(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!a(x,x.next)&&0!==c(x.prev,x,x.next))x=x.next;else{if(o(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function x(e,n,u,l,f,p,c=0){if(!e)return;!c&&p&&(e=y(e,l,f,p));let v=e;for(;e.prev!==e.next;){const y=e.prev,s=e.next;if(p?i(e,l,f,p):r(e))n.push(y.index/u),n.push(e.index/u),n.push(s.index/u),o(e),e=s.next,v=s.next;else if((e=s)===v){c?1===c?x(e=g(e,n,u),n,u,l,f,p,2):2===c&&M(e,n,u,l,f,p):x(t(e),n,u,l,f,p,1);break}}}function r(e){const n=e.prev,t=e,x=e.next;if(c(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,h(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&c(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function i(e,n,t,x){const r=e.prev,i=e,u=e.next;if(c(r,i,u)>=0)return!1;const o=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,l=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,f=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,y=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=Z(o,l,n,t,x),v=Z(f,y,n,t,x);let s=e.prevZ,d=e.nextZ;for(;s&&s.z>=p&&d&&d.z<=v;){if(s!==e.prev&&s!==e.next&&h(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&c(s.prev,s,s.next)>=0)return!1;if(s=s.prevZ,d!==e.prev&&d!==e.next&&h(r.x,r.y,i.x,i.y,u.x,u.y,d.x,d.y)&&c(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;s&&s.z>=p;){if(s!==e.prev&&s!==e.next&&h(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&c(s.prev,s,s.next)>=0)return!1;s=s.prevZ}for(;d&&d.z<=v;){if(d!==e.prev&&d!==e.next&&h(r.x,r.y,i.x,i.y,u.x,u.y,d.x,d.y)&&c(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function u(e,n,t,x){const r=new m(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function l(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function f(e,n){if(n=function(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const o=i,l=i.x,f=i.y;let y,p=1/0;t=i.next;for(;t!==o;)x>=t.x&&t.x>=l&&x!==t.x&&h(r<f?x:u,r,l,f,r<f?u:x,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(x-t.x),(y<p||y===p&&t.x>i.x)&&d(t,e)&&(i=t,p=y)),t=t.next;return i}(e,n)){const x=b(n,e);t(x,x.next)}}function y(e,n,t,x){for(let r;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=Z(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,y(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,function(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let o=t;for(;u>0||o>0&&x;){let t;0===u?(t=x,x=x.nextZ,o--):0!==o&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,o--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}(e)}function p(e,n,t,x){const r=n&&n.length,i=r?n[0]*t:e.length;let u=Math.abs(s(e,0,i,t));if(r)for(let x=0,r=n.length;x<r;x++){const i=n[x]*t,o=x<r-1?n[x+1]*t:e.length;u-=Math.abs(s(e,i,o,t))}let o=0;for(let n=0;n<x.length;n+=3){const r=x[n]*t,i=x[n+1]*t,u=x[n+2]*t;o+=Math.abs((e[r]-e[u])*(e[i+1]-e[r+1])-(e[r]-e[i])*(e[u+1]-e[r+1]))}return 0===u&&0===o?0:Math.abs((o-u)/u)}function c(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function v(e,n,t,x){return!!(a(e,n)&&a(t,x)||a(e,x)&&a(t,n))||c(e,n,t)>0!=c(e,n,x)>0&&c(t,x,e)>0!=c(t,x,n)>0}function s(e,n,t,x){let r=0;for(let i=n,u=t-x;i<t;i+=x)r+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return r}function h(e,n,t,x,r,i,u,o){return(r-u)*(n-o)-(e-u)*(i-o)>=0&&(e-u)*(x-o)-(t-u)*(n-o)>=0&&(t-u)*(i-o)-(r-u)*(x-o)>=0}function d(e,n){return c(e.prev,e,e.next)<0?c(e,n,e.next)>=0&&c(e,e.prev,n)>=0:c(e,n,e.prev)<0||c(e,e.next,n)<0}function Z(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function a(e,n){return e.x===n.x&&e.y===n.y}function w(e,n){return e.x-n.x}function g(e,n,t){let x=e;do{const r=x.prev,i=x.next.next;!a(r,i)&&v(r,x,x.next,i)&&d(r,i)&&d(i,r)&&(n.push(r.index/t),n.push(x.index/t),n.push(i.index/t),o(x),o(x.next),x=e=i),x=x.next}while(x!==e);return x}function M(e,n,r,i,u,o){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.index!==e.index&&z(l,e)){let f=b(l,e);return l=t(l,l.next),f=t(f,f.next),x(l,n,r,i,u,o),void x(f,n,r,i,u,o)}e=e.next}l=l.next}while(l!==e)}function z(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!function(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&v(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}(e,n)&&d(e,n)&&d(n,e)&&function(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}(e,n)}function b(e,n){const t=new m(e.index,e.x,e.y),x=new m(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}class m{constructor(e,n,t){this.index=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}\n\n\n/***/ }),\n\n/***/ \"179/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/core/bidiEngineTables.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst A=[[\"(\",\")\"],[\")\",\"(\"],[\"<\",\">\"],[\">\",\"<\"],[\"[\",\"]\"],[\"]\",\"[\"],[\"{\",\"}\"],[\"}\",\"{\"],[\"«\",\"»\"],[\"»\",\"«\"],[\"‹\",\"›\"],[\"›\",\"‹\"],[\"⁽\",\"⁾\"],[\"⁾\",\"⁽\"],[\"₍\",\"₎\"],[\"₎\",\"₍\"],[\"≤\",\"≥\"],[\"≥\",\"≤\"],[\"〈\",\"〉\"],[\"〉\",\"〈\"],[\"﹙\",\"﹚\"],[\"﹚\",\"﹙\"],[\"﹛\",\"﹜\"],[\"﹜\",\"﹛\"],[\"﹝\",\"﹞\"],[\"﹞\",\"﹝\"],[\"﹤\",\"﹥\"],[\"﹥\",\"﹤\"]],B=[\"آ\",\"أ\",\"إ\",\"ا\"],bidiEngineTables_T=[\"ﻵ\",\"ﻷ\",\"ﻹ\",\"ﻻ\"],U=[\"ﻶ\",\"ﻸ\",\"ﻺ\",\"ﻼ\"],_=[\"ا\",\"ب\",\"ت\",\"ث\",\"ج\",\"ح\",\"خ\",\"د\",\"ذ\",\"ر\",\"ز\",\"س\",\"ش\",\"ص\",\"ض\",\"ط\",\"ظ\",\"ع\",\"غ\",\"ف\",\"ق\",\"ك\",\"ل\",\"م\",\"ن\",\"ه\",\"و\",\"ي\",\"إ\",\"أ\",\"آ\",\"ة\",\"ى\",\"ل\",\"م\",\"ن\",\"ه\",\"و\",\"ي\",\"إ\",\"أ\",\"آ\",\"ة\",\"ى\",\"ی\",\"ئ\",\"ؤ\"],L=[\"ﺍ\",\"ﺏ\",\"ﺕ\",\"ﺙ\",\"ﺝ\",\"ﺡ\",\"ﺥ\",\"ﺩ\",\"ﺫ\",\"ﺭ\",\"ﺯ\",\"ﺱ\",\"ﺵ\",\"ﺹ\",\"ﺽ\",\"ﻁ\",\"ﻅ\",\"ﻉ\",\"ﻍ\",\"ﻑ\",\"ﻕ\",\"ﻙ\",\"ﻝ\",\"ﻡ\",\"ﻥ\",\"ﻩ\",\"ﻭ\",\"ﻱ\",\"ﺇ\",\"ﺃ\",\"ﺁ\",\"ﺓ\",\"ﻯ\",\"ﯼ\",\"ﺉ\",\"ﺅ\",\"ﹰ\",\"ﹲ\",\"ﹴ\",\"ﹶ\",\"ﹸ\",\"ﹺ\",\"ﹼ\",\"ﹾ\",\"ﺀ\",\"ﺉ\",\"ﺅ\"],E=[\"ﺎ\",\"ﺐ\",\"ﺖ\",\"ﺚ\",\"ﺞ\",\"ﺢ\",\"ﺦ\",\"ﺪ\",\"ﺬ\",\"ﺮ\",\"ﺰ\",\"ﺲ\",\"ﺶ\",\"ﺺ\",\"ﺾ\",\"ﻂ\",\"ﻆ\",\"ﻊ\",\"ﻎ\",\"ﻒ\",\"ﻖ\",\"ﻚ\",\"ﻞ\",\"ﻢ\",\"ﻦ\",\"ﻪ\",\"ﻮ\",\"ﻲ\",\"ﺈ\",\"ﺄ\",\"ﺂ\",\"ﺔ\",\"ﻰ\",\"ﯽ\",\"ﺊ\",\"ﺆ\",\"ﹰ\",\"ﹲ\",\"ﹴ\",\"ﹶ\",\"ﹸ\",\"ﹺ\",\"ﹼ\",\"ﹾ\",\"ﺀ\",\"ﺊ\",\"ﺆ\"],N=[\"ﺎ\",\"ﺒ\",\"ﺘ\",\"ﺜ\",\"ﺠ\",\"ﺤ\",\"ﺨ\",\"ﺪ\",\"ﺬ\",\"ﺮ\",\"ﺰ\",\"ﺴ\",\"ﺸ\",\"ﺼ\",\"ﻀ\",\"ﻄ\",\"ﻈ\",\"ﻌ\",\"ﻐ\",\"ﻔ\",\"ﻘ\",\"ﻜ\",\"ﻠ\",\"ﻤ\",\"ﻨ\",\"ﻬ\",\"ﻮ\",\"ﻴ\",\"ﺈ\",\"ﺄ\",\"ﺂ\",\"ﺔ\",\"ﻰ\",\"ﯿ\",\"ﺌ\",\"ﺆ\",\"ﹱ\",\"ﹲ\",\"ﹴ\",\"ﹷ\",\"ﹹ\",\"ﹻ\",\"ﹽ\",\"ﹿ\",\"ﺀ\",\"ﺌ\",\"ﺆ\"],R=[\"ﺍ\",\"ﺑ\",\"ﺗ\",\"ﺛ\",\"ﺟ\",\"ﺣ\",\"ﺧ\",\"ﺩ\",\"ﺫ\",\"ﺭ\",\"ﺯ\",\"ﺳ\",\"ﺷ\",\"ﺻ\",\"ﺿ\",\"ﻃ\",\"ﻇ\",\"ﻋ\",\"ﻏ\",\"ﻓ\",\"ﻗ\",\"ﻛ\",\"ﻟ\",\"ﻣ\",\"ﻧ\",\"ﻫ\",\"ﻭ\",\"ﻳ\",\"ﺇ\",\"ﺃ\",\"ﺁ\",\"ﺓ\",\"ﻯ\",\"ﯾ\",\"ﺋ\",\"ﺅ\",\"ﹰ\",\"ﹲ\",\"ﹴ\",\"ﹶ\",\"ﹸ\",\"ﹺ\",\"ﹼ\",\"ﹾ\",\"ﺀ\",\"ﺋ\",\"ﺅ\"],S=[\"ء\",\"آ\",\"أ\",\"ؤ\",\"إ\",\"ا\",\"ة\",\"د\",\"ذ\",\"ر\",\"ز\",\"و\",\"ى\"],O=[\"ً\",\"ً\",\"ٌ\",\"؟\",\"ٍ\",\"؟\",\"َ\",\"َ\",\"ُ\",\"ُ\",\"ِ\",\"ِ\",\"ّ\",\"ّ\",\"ْ\",\"ْ\",\"ء\",\"آ\",\"آ\",\"أ\",\"أ\",\"ؤ\",\"ؤ\",\"إ\",\"إ\",\"ئ\",\"ئ\",\"ئ\",\"ئ\",\"ا\",\"ا\",\"ب\",\"ب\",\"ب\",\"ب\",\"ة\",\"ة\",\"ت\",\"ت\",\"ت\",\"ت\",\"ث\",\"ث\",\"ث\",\"ث\",\"ج\",\"ج\",\"ج\",\"ج\",\"ح\",\"ح\",\"ح\",\"ح\",\"خ\",\"خ\",\"خ\",\"خ\",\"د\",\"د\",\"ذ\",\"ذ\",\"ر\",\"ر\",\"ز\",\"ز\",\"س\",\"س\",\"س\",\"س\",\"ش\",\"ش\",\"ش\",\"ش\",\"ص\",\"ص\",\"ص\",\"ص\",\"ض\",\"ض\",\"ض\",\"ض\",\"ط\",\"ط\",\"ط\",\"ط\",\"ظ\",\"ظ\",\"ظ\",\"ظ\",\"ع\",\"ع\",\"ع\",\"ع\",\"غ\",\"غ\",\"غ\",\"غ\",\"ف\",\"ف\",\"ف\",\"ف\",\"ق\",\"ق\",\"ق\",\"ق\",\"ك\",\"ك\",\"ك\",\"ك\",\"ل\",\"ل\",\"ل\",\"ل\",\"م\",\"م\",\"م\",\"م\",\"ن\",\"ن\",\"ن\",\"ن\",\"ه\",\"ه\",\"ه\",\"ه\",\"و\",\"و\",\"ى\",\"ى\",\"ي\",\"ي\",\"ي\",\"ي\",\"ﻵ\",\"ﻶ\",\"ﻷ\",\"ﻸ\",\"ﻹ\",\"ﻺ\",\"ﻻ\",\"ﻼ\",\"؟\",\"؟\",\"؟\"],bidiEngineTables_o=[\"ء\",\"ف\"],bidiEngineTables_t=[\"غ\",\"ي\"],bidiEngineTables_c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],bidiEngineTables_e=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],bidiEngineTables_n=0,p=1,bidiEngineTables_r=2,bidiEngineTables_s=3,x=4,C=5,D=6,F=7,M=8,P=9,W=10,bidiEngineTables_a=11,b=12,d=13,bidiEngineTables_f=14,g=15,bidiEngineTables_h=16,bidiEngineTables_i=17,j=18,k=[\"UBAT_L\",\"UBAT_R\",\"UBAT_EN\",\"UBAT_AN\",\"UBAT_ON\",\"UBAT_B\",\"UBAT_S\",\"UBAT_AL\",\"UBAT_WS\",\"UBAT_CS\",\"UBAT_ES\",\"UBAT_ET\",\"UBAT_NSM\",\"UBAT_LRE\",\"UBAT_RLE\",\"UBAT_PDF\",\"UBAT_LRO\",\"UBAT_RLO\",\"UBAT_BN\"],bidiEngineTables_l=100,m=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],q=[[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,1,12,1,12,12,1,12,12,1,12,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,11,11,7,9,7,4,4,12,12,12,12,12,12,12,12,12,12,12,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,3,3,3,3,3,3,3,3,3,3,11,3,3,7,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,3,4,12,12,12,12,12,12,7,7,12,12,4,12,12,12,12,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,12,12,12,12,12,12,12,12,12,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,18,18,18,18,18,4,4,4,4,4,18,18,18,18,18,18,2,0,4,4,2,2,2,2,2,2,10,10,4,4,4,0,2,2,2,2,2,2,2,2,2,2,10,10,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,12,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,11,4,4,10,10,4,4,4,4,4,11,11,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,18],[4,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,11,11,4,4,4,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/core/BidiEngine.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction BidiEngine_C(t,r,e,n,o){const i=function(t,r,e){void 0===r.inFormat&&(r.inFormat=e.defInFormat);void 0===r.outFormat&&(r.outFormat=e.defOutFormat);void 0===r.swap&&(r.swap=e.defSwap);if(r.inFormat===r.outFormat)return r;const n=r.inFormat.substring(0,1),o=r.outFormat.substring(0,1);let i,u=r.inFormat.substring(1,4),s=r.outFormat.substring(1,4);\"C\"===u.charAt(0)&&(i=V(t),u=\"ltr\"===i||\"rtl\"===i?i.toUpperCase():\"L\"===r.inFormat.charAt(2)?\"LTR\":\"RTL\",r.inFormat=n+u);\"C\"===s.charAt(0)&&(i=V(t),\"rtl\"===i?s=\"RTL\":\"ltr\"===i?(i=function(t){const r=t.split(\"\");return r.reverse(),V(r.join(\"\"))}(t),s=i.toUpperCase()):s=\"L\"===r.outFormat.charAt(2)?\"LTR\":\"RTL\",r.outFormat=o+s);return r}(t,{inFormat:r,outFormat:e,swap:n},o);if(i.inFormat===i.outFormat)return t;r=i.inFormat,e=i.outFormat,n=i.swap;const u=r.substring(0,1),s=r.substring(1,4),a=e.substring(0,1),f=e.substring(1,4);if(o.inFormat=r,o.outFormat=e,o.swap=n,\"L\"===u&&\"VLTR\"===e){if(\"LTR\"===s)return o.dir=nt,BidiEngine_E(t,o);if(\"RTL\"===s)return o.dir=ot,BidiEngine_E(t,o)}if(\"V\"===u&&\"V\"===a)return o.dir=\"RTL\"===s?ot:nt,BidiEngine_x(t,o);if(\"L\"===u&&\"VRTL\"===e)return\"LTR\"===s?(o.dir=nt,t=BidiEngine_E(t,o)):(o.dir=ot,t=BidiEngine_E(t,o)),BidiEngine_x(t);if(\"VLTR\"===r&&\"LLTR\"===e)return o.dir=nt,BidiEngine_E(t,o);if(\"V\"===u&&\"L\"===a&&s!==f)return t=BidiEngine_x(t),\"RTL\"===s?BidiEngine_C(t,\"LLTR\",\"VLTR\",n,o):BidiEngine_C(t,\"LRTL\",\"VRTL\",n,o);if(\"VRTL\"===r&&\"LRTL\"===e)return BidiEngine_C(t,\"LRTL\",\"VRTL\",n,o);if(\"L\"===u&&\"L\"===a){const r=o.swap;return o.swap=r.substr(0,1)+\"N\",\"RTL\"===s?(o.dir=ot,t=BidiEngine_E(t,o),o.swap=\"N\"+r.substr(1,2),o.dir=nt,t=BidiEngine_E(t,o)):(o.dir=nt,t=BidiEngine_E(t,o),o.swap=\"N\"+r.substr(1,2),t=BidiEngine_C(t,\"VLTR\",\"LRTL\",o.swap,o)),t}return t}function V(t){const r=/[A-Za-z\\u05d0-\\u065f\\u066a-\\u06ef\\u06fa-\\u07ff\\ufb1d-\\ufdff\\ufe70-\\ufefc]/.exec(t);return r?r[0]<=\"z\"?\"ltr\":\"rtl\":\"\"}function BidiEngine_E(t,r){const e=t.split(\"\"),n=[];return I(e,n,r),function(t,r,e){if(0===e.hiLevel||e.swap.substr(0,1)===e.swap.substr(1,2))return;for(let e=0;e<t.length;e++)1===r[e]&&(t[e]=z(t[e]))}(e,n,r),Y(2,e,n,r),Y(1,e,n,r),X=n,e.join(\"\")}function I(t,r,o){const i=t.length,u=o.dir?bidiEngineTables_e:bidiEngineTables_c;let c=0,l=-1;const h=[],T=[];o.hiLevel=o.dir,o.lastArabic=!1,o.hasUbatAl=!1,o.hasUbatB=!1,o.hasUbatS=!1;for(let r=0;r<i;r++)h[r]=BidiEngine_j(t[r]);for(let e=0;e<i;e++){const n=c,i=BidiEngine_P(t,h,T,e,o);T[e]=i,c=u[n][i];const a=240&c;c&=15;const f=u[c][rt];if(r[e]=f,a>0)if(16===a){for(let t=l;t<e;t++)r[t]=1;l=-1}else l=-1;if(u[c][et])-1===l&&(l=e);else if(l>-1){for(let t=l;t<e;t++)r[t]=f;l=-1}h[e]===C&&(r[e]=0),o.hiLevel|=f}o.hasUbatS&&function(t,r,e,n){for(let o=0;o<e;o++)if(t[o]===D){r[o]=n.dir;for(let e=o-1;e>=0&&t[e]===M;e--)r[e]=n.dir}}(h,r,i,o)}function BidiEngine_j(t){const r=t.charCodeAt(0),e=m[r>>8];return e<bidiEngineTables_l?e:q[e-bidiEngineTables_l][255&r]}function BidiEngine_x(t,r){const e=t.split(\"\");if(r){const t=[];I(e,t,r),X=t}return e.reverse(),K.reverse(),e.join(\"\")}function BidiEngine_O(t,r,e){for(let n=0;n<r;n++)if(t[n]===e)return n;return-1}function BidiEngine_k(t){for(let r=0;r<bidiEngineTables_o.length;r++)if(t>=bidiEngineTables_o[r]&&t<=bidiEngineTables_t[r])return!0;return!1}function y(t,r,e,n){for(;r*e<n&&$(t[r]);)r+=e;return!!(r*e<n&&BidiEngine_k(t[r]))}function BidiEngine_D(r,e,n,o){for(;e*n<o&&$(r[e]);)e+=n;let i=\" \";if(!(e*n<o))return!1;i=r[e];for(let r=0;r<B.length;r++)if(B[r]===i)return!0;return!1}function Y(t,r,e,n){if(n.hiLevel<t)return;if(1===t&&n.dir===ot&&!n.hasUbatB)return r.reverse(),void K.reverse();const o=r.length;let i,u,s,a,f,c=0;for(;c<o;){if(e[c]>=t){for(i=c+1;i<o&&e[i]>=t;)i++;for(u=c,s=i-1;u<s;u++,s--)a=r[u],r[u]=r[s],r[s]=a,f=K[u],K[u]=K[s],K[s]=f;c=i}c++}}function BidiEngine_P(t,r,e,n,o){const i=r[n];return{UBAT_L:()=>(o.lastArabic=!1,bidiEngineTables_n),UBAT_R:()=>(o.lastArabic=!1,p),UBAT_ON:()=>x,UBAT_AN:()=>bidiEngineTables_s,UBAT_EN:()=>o.lastArabic?bidiEngineTables_s:bidiEngineTables_r,UBAT_AL:()=>(o.lastArabic=!0,o.hasUbatAl=!0,p),UBAT_WS:()=>x,UBAT_CS:()=>{let t,i;return n<1||n+1>=r.length||(t=e[n-1])!==bidiEngineTables_r&&t!==bidiEngineTables_s||(i=r[n+1])!==bidiEngineTables_r&&i!==bidiEngineTables_s?x:(o.lastArabic&&(i=bidiEngineTables_s),i===t?i:x)},UBAT_ES:()=>(n>0?e[n-1]:C)===bidiEngineTables_r&&n+1<r.length&&r[n+1]===bidiEngineTables_r?bidiEngineTables_r:x,UBAT_ET:()=>{if(n>0&&e[n-1]===bidiEngineTables_r)return bidiEngineTables_r;if(o.lastArabic)return x;let t=n+1;const i=r.length;for(;t<i&&r[t]===bidiEngineTables_a;)t++;return t<i&&r[t]===bidiEngineTables_r?bidiEngineTables_r:x},UBAT_NSM:()=>{if(\"VLTR\"===o.inFormat){const e=r.length;let o=n+1;for(;o<e&&r[o]===b;)o++;if(o<e){const e=t[n].charCodeAt[0],i=e>=1425&&e<=2303||64286===e,u=r[o];if(i&&(u===p||u===F))return p}}return n<1||r[n-1]===C?x:e[n-1]},UBAT_B:()=>(o.lastArabic=!0,o.hasUbatB=!0,o.dir),UBAT_S:()=>(o.hasUbatS=!0,x),UBAT_LRE:()=>(o.lastArabic=!1,x),UBAT_RLE:()=>(o.lastArabic=!1,x),UBAT_LRO:()=>(o.lastArabic=!1,x),UBAT_RLO:()=>(o.lastArabic=!1,x),UBAT_PDF:()=>(o.lastArabic=!1,x),UBAT_BN:()=>x}[k[i]]()}function z(t){let r,e=0,n=A.length-1;for(;e<=n;)if(r=Math.floor((e+n)/2),t<A[r][0])n=r-1;else{if(!(t>A[r][0]))return A[r][1];e=r+1}return t}function BidiEngine_M(t){for(let r=0;r<S.length;r++)if(S[r]===t)return!0;return!1}function BidiEngine_W(t){for(let r=0;r<_.length;r++)if(t===_[r])return N[r];return t}function Z(t,r){for(let e=0;e<_.length;e++)if(t===_[e])return r[e];return t}function $(t){return t>=\"ً\"&&t<=\"ٕ\"}function BidiEngine_q(t){return\"L\"===t?\"LTR\":\"R\"===t?\"RTL\":\"C\"===t?\"CLR\":\"D\"===t?\"CRL\":\"\"}function G(t,r,e,n){for(;r*e<n&&$(t[r]);)r+=e;return r*e<n&&(t[r]=\" \",!0)}function H(r,e){for(let n=0;n<B.length;n++)if(r===B[n])return e[n];return r}function J(t,r,e,n){for(let o=0;o<t.length;o++)(t[o]>r||!e&&t[o]===r)&&(t[o]+=n)}let K=[],Q=[],X=[];const tt={dir:0,defInFormat:\"LLTR\",defoutFormat:\"VLTR\",defSwap:\"YN\",inFormat:\"LLTR\",outFormat:\"VLTR\",swap:\"YN\",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:\"\"},rt=5,et=6,nt=0,ot=1,it=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,ut=/[\\u0591-\\u06ff\\ufb1d-\\ufefc]/;/* harmony default export */ var BidiEngine = __webpack_exports__[\"a\"] = (class{constructor(){this.inputFormat=\"ILYNN\",this.outputFormat=\"VLNNN\",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,n,o){if(this.sourceToTarget=[],this.targetToSource=[],!e)return\"\";if(function(t,r,e){K=[],X=[];for(let n=0;n<e;n++)t[n]=n,r[n]=n,K[n]=n}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(n,o))return e;n=this.inputFormat,o=this.outputFormat;let i=e;const u=tt,s=BidiEngine_q(n.charAt(1)),a=BidiEngine_q(o.charAt(1)),f=(\"I\"===n.charAt(0)?\"L\":n.charAt(0))+s,c=(\"I\"===o.charAt(0)?\"L\":o.charAt(0))+a,l=n.charAt(2)+o.charAt(2);u.defInFormat=f,u.defOutFormat=c,u.defSwap=l;const h=BidiEngine_C(e,f,c,l,u);let T=!1;return\"R\"===o.charAt(1)?T=!0:\"C\"!==o.charAt(1)&&\"D\"!==o.charAt(1)||(T=\"rtl\"===this.checkContextual(h)),this.sourceToTarget=K,this.targetToSource=function(t){const r=new Array(t.length);for(let e=0;e<t.length;e++)r[t[e]]=e;return r}(this.sourceToTarget),Q=this.targetToSource,i=n.charAt(3)===o.charAt(3)?h:\"S\"===o.charAt(3)?function(t,r,e){if(0===r.length)return\"\";void 0===t&&(t=!0);void 0===e&&(e=!0);const n=(r=String(r)).split(\"\");let o=0,i=1,u=n.length;t||(o=n.length-1,i=-1,u=1);const s=function(t,r,e,n,o){let i=0;const u=[];let s=0;for(let a=r;a*e<n;a+=e)if(BidiEngine_k(t[a])||$(t[a])){if(\"ل\"===t[a]&&BidiEngine_D(t,a+e,e,n)){t[a]=H(t[a+e],0===i?bidiEngineTables_T:U),a+=e,G(t,a,e,n),o&&(u[s]=a,s++),i=0;continue}const r=t[a];1===i?t[a]=y(t,a+e,e,n)?BidiEngine_W(t[a]):Z(t[a],E):!0===y(t,a+e,e,n)?t[a]=Z(t[a],R):t[a]=Z(t[a],L),$(r)||(i=1),!0===BidiEngine_M(r)&&(i=0)}else i=0;return u}(n,o,i,u,e);let a=\"\";for(let r=0;r<n.length;r++)e&&BidiEngine_O(s,s.length,r)>-1?(J(Q,r,!t,-1),K.splice(r,1)):a+=n[r];return a}(T,h,!0):function(e,n,o){if(0===e.length)return\"\";void 0===o&&(o=!0);void 0===n&&(n=!0);e=String(e);let i=\"\";const u=e.split(\"\");for(let s=0;s<e.length;s++){let a=!1;if(u[s]>=\"ﹰ\"&&u[s]<\"\\ufeff\"){const f=e.charCodeAt(s);u[s]>=\"ﻵ\"&&u[s]<=\"ﻼ\"?(n?(s>0&&o&&\" \"===u[s-1]?i=i.substring(0,i.length-1)+\"ل\":(i+=\"ل\",a=!0),i+=B[(f-65269)/2]):(i+=B[(f-65269)/2],i+=\"ل\",s+1<e.length&&o&&\" \"===u[s+1]?s++:a=!0),a&&(J(Q,s,!0,1),K.splice(s,0,K[s]))):i+=O[f-65136]}else i+=u[s]}return i}(h,T,!0),this.sourceToTarget=K,this.targetToSource=Q,this.levels=X,i}_inputFormatSetter(t){if(!it.test(t))throw new Error(\"dojox/string/BidiEngine: the bidi layout string is wrong!\");this.inputFormat=t}_outputFormatSetter(t){if(!it.test(t))throw new Error(\"dojox/string/BidiEngine: the bidi layout string is wrong!\");this.outputFormat=t}checkParameters(t,r){return t?this._inputFormatSetter(t):t=this.inputFormat,r?this._outputFormatSetter(r):r=this.outputFormat,t!==r}checkContextual(t){let r=V(t);if(\"ltr\"!==r&&\"rtl\"!==r){try{r=document.dir.toLowerCase()}catch(t){}\"ltr\"!==r&&\"rtl\"!==r&&(r=\"ltr\")}return r}hasBidiChar(t){return ut.test(t)}});\n\n\n/***/ }),\n\n/***/ \"2yHJ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return t; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return o; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return e; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst o=!0,t=32,c=1.5,e=200;\n\n\n/***/ }),\n\n/***/ \"HQFP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export C_256_TO_RAD */\n/* unused harmony export C_2PI */\n/* unused harmony export C_DEG_TO_256 */\n/* unused harmony export C_DEG_TO_RAD */\n/* unused harmony export C_INFINITY */\n/* unused harmony export C_PI */\n/* unused harmony export C_PI_BY_2 */\n/* unused harmony export C_RAD_TO_256 */\n/* unused harmony export C_SQRT2 */\n/* unused harmony export C_SQRT2_INV */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return g; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return M; });\n/* unused harmony export interpolate */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return P; });\n/* unused harmony export positiveMod */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return h; });\n/* unused harmony export sqr */\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=Number.POSITIVE_INFINITY,t=Math.PI,r=2*t,u=t/2,o=128/t,e=t/128,c=256/360,f=t/180,i=1.414213562,I=1/1.414213562,N=1/Math.LN2;function a(n,t){return(n%=t)>=0?n:n+t}function h(n){return a(n*o,256)}function M(n){return a(.7111111111111111*n,256)}function P(n){return Math.log(n)*N}function T(n){return n*n}function b(n,t,r){return n*(1-r)+t*r}function g(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}\n\n\n/***/ }),\n\n/***/ \"VLY0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleRepository.js\nvar StyleRepository = __webpack_require__(\"kB7V\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/tiling/enums.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar enums_I;!function(I){I[I.INITIALIZED=0]=\"INITIALIZED\",I[I.NO_DATA=1]=\"NO_DATA\",I[I.READY=2]=\"READY\",I[I.MODIFIED=3]=\"MODIFIED\",I[I.INVALID=4]=\"INVALID\"}(enums_I||(enums_I={}));\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GeometryUtils.js\nvar GeometryUtils = __webpack_require__(\"OxmL\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js\nvar config = __webpack_require__(\"2yHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Geometry.js\nvar Geometry = __webpack_require__(\"OXZQ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js\nvar Rect = __webpack_require__(\"qcDN\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/ScriptUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction ScriptUtils_n(n){return 746===n||747===n||!(n<4352)&&(n>=12704&&n<=12735||(n>=12544&&n<=12591||(n>=65072&&n<=65103&&!(n>=65097&&n<=65103)||(n>=63744&&n<=64255||(n>=13056&&n<=13311||(n>=11904&&n<=12031||(n>=12736&&n<=12783||(n>=12288&&n<=12351&&!(n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||(n>=13312&&n<=19903||(n>=19968&&n<=40959||(n>=12800&&n<=13055||(n>=12592&&n<=12687||(n>=43360&&n<=43391||(n>=55216&&n<=55295||(n>=4352&&n<=4607||(n>=44032&&n<=55215||(n>=12352&&n<=12447||(n>=12272&&n<=12287||(n>=12688&&n<=12703||(n>=12032&&n<=12255||(n>=12784&&n<=12799||(n>=12448&&n<=12543&&12540!==n||(n>=65280&&n<=65519&&!(65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||(n>=65104&&n<=65135&&!(n>=65112&&n<=65118||n>=65123&&n<=65126)||(n>=5120&&n<=5759||(n>=6320&&n<=6399||(n>=65040&&n<=65055||(n>=19904&&n<=19967||(n>=40960&&n<=42127||n>=42128&&n<=42191)))))))))))))))))))))))))))))}function ScriptUtils_r(n){return 32===n}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TextShaping.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst TextShaping_e=24,TextShaping_s=17;class TextShaping_c{constructor(t,i,e,s,c,h,o){this._glyphItems=t,this._maxWidth=i,this._lineHeight=e,this._letterSpacing=s,this._hAnchor=c,this._vAnchor=h,this._justify=o}getShaping(t,e,s){const c=this._letterSpacing,h=this._lineHeight,o=this._justify,a=this._maxWidth,n=[];let l=0,r=0,m=0,f=0,g=-1,p=0,y=-1;const x=t.length;for(let d=0;d<x;d++){const M=t.charCodeAt(d),u=s&&ScriptUtils_n(M);if(10===M){if(d===x-1)continue;if(g>=f){const t=n[g],i=t.x+t.glyphMosaicItem.metrics.advance;p=Math.max(i,p),o&&this._applyJustification(n,f,g),f=n.length}e?r-=h:r+=h,l=0,++m;continue}let _;for(const t of this._glyphItems)if(_=t[M],_)break;if(_){if(n.push({codePoint:M,x:l,y:r,vertical:u,glyphMosaicItem:_}),l+=_.metrics.advance+c,a>0&&l>a&&y>=0){const t=y+1,i=n[t].x;p=Math.max(i,p);for(let s=t;s<n.length;s++)e?n[s].y-=h:n[s].y+=h,n[s].x-=i;o&&this._applyJustification(n,f,y),e?r-=h:r+=h,l-=i,++m,f=t,y=-1}++g,32===M&&(y=n.length-1)}}if(g>=f){const t=n[g],i=t.x+t.glyphMosaicItem.metrics.advance;p=Math.max(p,i),o&&this._applyJustification(n,f,g)}if(n.length>0){const t=(o-this._hAnchor)*p;let i=(-this._vAnchor*(m+1)+.5)*h;e&&m&&(i+=m*h);for(const e of n)e.x+=t,e.y+=i}return n}static getTextBox(t,i){if(!t.length)return null;let e=1/0,s=1/0,c=0,h=0;for(const o of t){const t=o.glyphMosaicItem.metrics.advance,a=o.x,n=o.y-17,l=a+t,r=n+i;e=Math.min(e,a),c=Math.max(c,l),s=Math.min(s,n),h=Math.max(h,r)}return{x:e,y:s,width:c-e,height:h-s}}static getBox(t){if(!t.length)return null;let i=1/0,e=1/0,s=0,c=0;for(const h of t){const{height:t,left:o,top:a,width:n}=h.glyphMosaicItem.metrics,l=h.x,r=h.y-(t-Math.abs(a)),m=l+n+o,f=r+t;i=Math.min(i,l),s=Math.max(s,m),e=Math.min(e,r),c=Math.max(c,f)}return{x:i,y:e,width:s-i,height:c-e}}static addDecoration(i,e){const s=i.length;if(0===s)return;let c=i[0].x+i[0].glyphMosaicItem.metrics.left,h=i[0].y;for(let o=1;o<s;o++){const s=i[o];if(s.y!==h){const a=i[o-1].x+i[o-1].glyphMosaicItem.metrics.left+i[o-1].glyphMosaicItem.metrics.width;i.push({codePoint:0,x:c,y:h+e-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new Rect[\"a\" /* default */](4,0,4,8),metrics:{width:a-c,height:8,left:0,top:0,advance:0},page:0,code:0}}),h=s.y,c=s.x+s.glyphMosaicItem.metrics.left}}const o=i[s-1].x+i[s-1].glyphMosaicItem.metrics.left+i[s-1].glyphMosaicItem.metrics.width;i.push({codePoint:0,x:c,y:h+e-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new Rect[\"a\" /* default */](4,0,4,8),metrics:{width:o-c,height:8,left:0,top:0,advance:0},page:0,code:0}})}_applyJustification(t,i,e){const s=t[e],c=s.vertical?24:s.glyphMosaicItem.metrics.advance,h=(s.x+c)*this._justify;for(let s=i;s<=e;s++)t[s].x-=h}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/Placement.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst Placement_g=4096,Placement_m=512,Placement_x=8;class Placement_d{constructor(e,t,i=0,n=-1,s=.5){this.x=e,this.y=t,this.angle=i,this.segment=n,this.minzoom=s}}class Placement_w{constructor(e,t,n,s,a,o=.5,l=GeometryUtils[\"c\" /* C_INFINITY */]){this.anchor=e,this.labelAngle=t,this.glyphAngle=n,this.page=s,this.alternateVerticalGlyph=a,this.minzoom=o,this.maxzoom=l}}class Placement_p{constructor(e,t,i,n,s,a,o,l,h,r,c,g){this.tl=e,this.tr=t,this.bl=i,this.br=n,this.mosaicRect=s,this.labelAngle=a,this.minAngle=o,this.maxAngle=l,this.anchor=h,this.minzoom=r,this.maxzoom=c,this.page=g}}class Placement_y{constructor(e){this.shapes=e}}class Placement_f{getIconPlacement(i,n,s){const a=new Geometry[\"a\" /* Point */](i.x,i.y),h=0===s.rotationAlignment,r=s.keepUpright;let c=s.rotate*GeometryUtils[\"b\" /* C_DEG_TO_RAD */];h&&(c+=i.angle);const g=new Placement_y([]);return s.allowOverlap&&s.ignorePlacement||!config[\"c\" /* DECLUTTER_TILES */]||(g.iconColliders=[]),this._addIconPlacement(g,a,n,s,c),h&&r&&this._addIconPlacement(g,a,n,s,c+GeometryUtils[\"d\" /* C_PI */]),g}_addIconPlacement(e,t,n,s,a){const h=n.pixelRatio,r=n.width/h,c=n.height/h,g=s.offset;let m=g[0],x=g[1];switch(s.anchor){case 0:m-=r/2,x-=c/2;break;case 1:x-=c/2;break;case 2:m-=r,x-=c/2;break;case 3:m-=r/2;break;case 4:m-=r/2,x-=c;break;case 5:break;case 7:x-=c;break;case 6:m-=r;break;case 8:m-=r,x-=c}const d=n.rect,w=2/h,y=m-w,f=x-w,b=y+d.width/h,u=f+d.height/h,I=new Geometry[\"a\" /* Point */](y,f),k=new Geometry[\"a\" /* Point */](b,u),T=new Geometry[\"a\" /* Point */](y,u),P=new Geometry[\"a\" /* Point */](b,f);if(0!==a){const e=Math.cos(a),t=Math.sin(a);I.rotate(e,t),k.rotate(e,t),T.rotate(e,t),P.rotate(e,t)}const N=new Placement_p(I,P,T,k,d,a,0,256,t,.5,GeometryUtils[\"c\" /* C_INFINITY */],0);if(e.shapes.push(N),(!s.allowOverlap||!s.ignorePlacement)&&config[\"c\" /* DECLUTTER_TILES */]){const n=s.size,o=s.padding,l={xTile:t.x,yTile:t.y,dxPixels:m*n-o,dyPixels:x*n-o,hard:!s.optional,partIndex:0,width:r*n+2*o,height:c*n+2*o,angle:a,minLod:.5,maxLod:GeometryUtils[\"c\" /* C_INFINITY */]};e.iconColliders.push(l)}}getTextPlacement(n,s,a,o){const g=new Geometry[\"a\" /* Point */](n.x,n.y),m=o.rotate*GeometryUtils[\"b\" /* C_DEG_TO_RAD */],x=0===o.rotationAlignment,d=o.keepUpright,f=o.padding;let b=.5;const u=!x?0:n.angle,I=n.segment>=0&&x,k=o.allowOverlap&&o.ignorePlacement?null:[],T=[],P=!I;let N=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,A=N,_=z;const G=(I||x)&&d,v=o.size/TextShaping_e;let M=!1;for(const e of s)if(e.vertical){M=!0;break}let E,L=0,V=0;if(!I&&M){const e=TextShaping_c.getTextBox(s,o.lineHeight*TextShaping_e);switch(o.anchor){case 1:L=e.height/2,V=-e.width/2;break;case 2:L=-e.height/2,V=e.width/2;break;case 3:L=e.height/2,V=e.width/2;break;case 4:L=-e.height/2,V=-e.width/2;break;case 5:L=e.height;break;case 7:V=-e.width;break;case 6:V=e.width;break;case 8:L=-e.height}}L+=o.offset[0]*TextShaping_e,V+=o.offset[1]*TextShaping_e;for(const e of s){const s=e.glyphMosaicItem;if(!s||s.rect.isEmpty)continue;const h=s.rect,r=s.metrics,y=s.page;if(k&&P){if(void 0!==E&&E!==e.y){let e,t,s,a;M?(e=-_+L,t=N+V,s=_-A,a=z-N):(e=N+L,t=A+V,s=z-N,a=_-A);const l={xTile:n.x,yTile:n.y,dxPixels:e*v-f,dyPixels:t*v-f,hard:!o.optional,partIndex:1,width:s*v+2*f,height:a*v+2*f,angle:m,minLod:.5,maxLod:GeometryUtils[\"c\" /* C_INFINITY */]};k.push(l),N=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,A=N,_=z}E=e.y}const O=[];if(I){const t=.5*s.metrics.width,i=(e.x+r.left-4+t)*v*8;if(b=this._placeGlyph(n,b,i,a,n.segment,1,e.vertical,y,O),d&&(b=this._placeGlyph(n,b,i,a,n.segment,-1,e.vertical,y,O)),b>=2)break}else O.push(new Placement_w(g,u,u,y,!1)),x&&d&&O.push(new Placement_w(g,u+GeometryUtils[\"d\" /* C_PI */],u+GeometryUtils[\"d\" /* C_PI */],y,!1));const j=e.x+r.left,F=e.y-TextShaping_s-r.top,Y=j+r.width,q=F+r.height;let C,S,U,R,B,H,D,J;if(!I&&M)if(e.vertical){const e=(j+Y)/2-r.height/2,t=(F+q)/2+r.width/2;C=new Geometry[\"a\" /* Point */](-t-4+L,e-4+V),S=new Geometry[\"a\" /* Point */](C.x+h.width,C.y+h.height),U=new Geometry[\"a\" /* Point */](C.x,S.y),R=new Geometry[\"a\" /* Point */](S.x,C.y)}else C=new Geometry[\"a\" /* Point */](4-F+L,j-4+V),S=new Geometry[\"a\" /* Point */](C.x-h.height,C.y+h.width),U=new Geometry[\"a\" /* Point */](S.x,C.y),R=new Geometry[\"a\" /* Point */](C.x,S.y);else C=new Geometry[\"a\" /* Point */](j-4+L,F-4+V),S=new Geometry[\"a\" /* Point */](C.x+h.width,C.y+h.height),U=new Geometry[\"a\" /* Point */](C.x,S.y),R=new Geometry[\"a\" /* Point */](S.x,C.y);for(const t of O){let i,s,a,c;if(t.alternateVerticalGlyph){if(!B){const e=(F+q)/2+V;B=new Geometry[\"a\" /* Point */]((j+Y)/2+L-r.height/2-4,e+r.width/2+4),H=new Geometry[\"a\" /* Point */](B.x+h.height,B.y-h.width),D=new Geometry[\"a\" /* Point */](H.x,B.y),J=new Geometry[\"a\" /* Point */](B.x,H.y)}i=B,s=D,a=J,c=H}else i=C,s=U,a=R,c=S;const g=F,x=q,d=t.glyphAngle+m;if(0!==d){const e=Math.cos(d),t=Math.sin(d);i=i.clone(),s=s.clone(),a=a.clone(),c=c.clone(),i.rotate(e,t),c.rotate(e,t),s.rotate(e,t),a.rotate(e,t)}let w=0,y=256;if(I&&M?e.vertical?t.alternateVerticalGlyph?(w=32,y=96):(w=224,y=32):(w=224,y=96):(w=192,y=64),T.push(new Placement_p(i,a,s,c,h,t.labelAngle,w,y,t.anchor,t.minzoom,t.maxzoom,t.page)),k&&(!G||this._legible(t.labelAngle)))if(P)j<N&&(N=j),g<A&&(A=g),Y>z&&(z=Y),x>_&&(_=x);else if(t.minzoom<2){const e={xTile:n.x,yTile:n.y,dxPixels:(j+L)*v-f,dyPixels:(g+L)*v-f,hard:!o.optional,partIndex:1,width:(Y-j)*v+2*f,height:(x-g)*v+2*f,angle:d,minLod:t.minzoom,maxLod:t.maxzoom};k.push(e)}}}if(b>=2)return null;if(k&&P){let e,t,s,a;M?(e=-_+L,t=N+V,s=_-A,a=z-N):(e=N+L,t=A+V,s=z-N,a=_-A);const l={xTile:n.x,yTile:n.y,dxPixels:e*v-f,dyPixels:t*v-f,hard:!o.optional,partIndex:1,width:s*v+2*f,height:a*v+2*f,angle:m,minLod:.5,maxLod:GeometryUtils[\"c\" /* C_INFINITY */]};k.push(l)}const O=new Placement_y(T);return k&&k.length>0&&(O.textColliders=k),O}_legible(e){const t=Object(GeometryUtils[\"h\" /* radToByte */])(e);return t<65||t>=193}_placeGlyph(e,n,o,h,r,c,g,m,x){let d=c;const p=d<0?Object(GeometryUtils[\"g\" /* positiveMod */])(e.angle+GeometryUtils[\"d\" /* C_PI */],GeometryUtils[\"a\" /* C_2PI */]):e.angle;let y=0;o<0&&(d*=-1,o*=-1,y=GeometryUtils[\"d\" /* C_PI */]),d>0&&++r;let f=new Geometry[\"a\" /* Point */](e.x,e.y),b=h[r],u=GeometryUtils[\"c\" /* C_INFINITY */];if(h.length<=r)return u;for(;;){const e=b.x-f.x,t=b.y-f.y,i=Math.sqrt(e*e+t*t),l=Math.max(o/i,n),c=e/i,I=t/i,k=Object(GeometryUtils[\"g\" /* positiveMod */])(Math.atan2(I,c)+y,GeometryUtils[\"a\" /* C_2PI */]);if(x.push(new Placement_w(f,p,k,m,!1,l,u)),g&&x.push(new Placement_w(f,p,k,m,!0,l,u)),l<=n)return l;f=b.clone();do{if(r+=d,h.length<=r||r<0)return l;b=h[r]}while(f.isEqual(b));let T=b.x-f.x,P=b.y-f.y;const N=Math.sqrt(T*T+P*P);T*=i/N,P*=i/N,f.x-=T,f.y-=P,u=l}}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/pbf.js\nvar pbf = __webpack_require__(\"ATu9\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileClipper.js\nvar TileClipper = __webpack_require__(\"LaVW\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/BaseBucket.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var BaseBucket = (class{constructor(t,e){this.layerExtent=4096,this._features=[],this.layer=t,this.zoom=e,this._filter=t.getFeatureFilter()}pushFeature(t){this._filter&&!this._filter.filter(t,this.zoom)||this._features.push(t)}hasFeatures(){return this._features.length>0}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/CircleBucket.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var CircleBucket = (class extends BaseBucket{constructor(e,t,r,i){super(e,t),this.type=4,this._circleVertexBuffer=r,this._circleIndexBuffer=i}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(e){const t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;const i=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);let c=1,s=[1,1,1,1],l=1,n=0,h=1,o=[1,1,1,1],f=1;for(const u of this._features){const d=u.getGeometry(e);if(d){i.hasDataDrivenRadius&&(c=i.getPaintValue(\"circle-radius\",a,u)),i.hasDataDrivenColor&&(s=i.getPaintValue(\"circle-color\",a,u)),i.hasDataDrivenOpacity&&(l=i.getPaintValue(\"circle-opacity\",a,u)),i.hasDataDrivenStrokeWidth&&(h=i.getPaintValue(\"circle-stroke-width\",a,u)),i.hasDataDrivenStrokeColor&&(o=i.getPaintValue(\"circle-stroke-color\",a,u)),i.hasDataDrivenStrokeOpacity&&(f=i.getPaintValue(\"circle-stroke-opacity\",a,u)),i.hasDataDrivenBlur&&(n=i.getPaintValue(\"circle-blur\",a,u));for(const e of d)if(e)for(const i of e){const e=t.index;t.add(i.x,i.y,0,0,c,s,l,n,h,o,f),t.add(i.x,i.y,0,1,c,s,l,n,h,o,f),t.add(i.x,i.y,1,0,c,s,l,n,h,o,f),t.add(i.x,i.y,1,1,c,s,l,n,h,o,f),r.add(e+0,e+1,e+2),r.add(e+1,e+2,e+3),this._circleIndexCount+=6}}}}serialize(){let e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),i=new Int32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let e=0;e<this.layerUIDs.length;e++)r[t++]=this.layerUIDs[e];r[t++]=this._circleIndexStart,r[t++]=this._circleIndexCount,r[t++]=this._circleVertexBuffer.array.length;for(let e=0;e<this._circleVertexBuffer.array.length;e++)i[t++]=this._circleVertexBuffer.array[e];r[t++]=this._circleIndexBuffer.array.length;for(let e=0;e<this._circleIndexBuffer.array.length;e++)r[t++]=this._circleIndexBuffer.array[e];return r.buffer}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/Feature.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var Feature = (class{constructor(e,t){this.values={};const s=t.keys,r=t.values;for(;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:{const t=e.getMessage(),o=this.values;for(;!t.empty();){const e=t.getUInt32(),a=t.getUInt32();o[s[e]]=r[a]}t.release();break}case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}getGeometry(t){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const s=this._pbfGeometry;let r,o;this._pbfGeometry=null,t?t.reset(this.type):r=[];let a,n=1,i=0,l=0,h=0;for(;!s.empty();){if(0===i){const e=s.getUInt32();n=7&e,i=e>>3}switch(i--,n){case 1:l+=s.getSInt32(),h+=s.getSInt32(),t?t.moveTo(l,h):(o&&r.push(o),o=[],o.push(new Geometry[\"a\" /* Point */](l,h)));break;case 2:l+=s.getSInt32(),h+=s.getSInt32(),t?t.lineTo(l,h):o.push(new Geometry[\"a\" /* Point */](l,h));break;case 7:t?t.close():o&&!o[0].equals(l,h)&&o.push(o[0].clone());break;default:throw s.release(),new Error(\"Invalid path operation\")}}return t?a=t.result():(o&&r.push(o),a=r),s.release(),this._geometry=a,a}});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/ArrayPool.js\nvar ArrayPool = __webpack_require__(\"VW+2\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/libs/earcut/earcut.js\nvar earcut = __webpack_require__(\"+yyC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/Tesselator.js\nvar Tesselator = __webpack_require__(\"6NBT\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/FillBucket.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst FillBucket_o=new Tesselator[\"a\" /* default */];class FillBucket_a extends BaseBucket{constructor(e,t,l,i,r,n){if(super(e,t),this.type=1,e.hasDataDrivenFill!==l.isDataDriven())throw new Error(\"incompatible fill buffer\");if(e.hasDataDrivenOutline!==r.isDataDriven())throw new Error(\"incompatible outline buffer\");this._fillVertexBuffer=l,this._fillIndexBuffer=i,this._outlineVertexBuffer=r,this._outlineIndexBuffer=n}get fillIndexStart(){return this._fillIndexStart}get fillIndexCount(){return this._fillIndexCount}get outlineIndexStart(){return this._outlineIndexStart}get outlineIndexCount(){return this._outlineIndexCount}processFeatures(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;const t=this.layer,l=this.zoom,i=t.hasDataDrivenFill,r=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);const n=t.getPaintValue(\"fill-pattern\",l);let o=t.getPaintValue(\"fill-antialias\",l)&&void 0===n,a=[1,1,1,1],s=[1,1,1,1],f=1;if(t.outlineUsesFillColor){if(o&&!t.hasDataDrivenOpacity){const e=t.getPaintValue(\"fill-opacity\",l),i=t.getPaintValue(\"fill-opacity\",l+1);e<1&&i<1&&(o=!1)}if(o&&!t.hasDataDrivenColor){const e=t.getPaintValue(\"fill-color\",l),i=t.getPaintValue(\"fill-color\",l+1);e[3]<1&&i[3]<1&&(o=!1)}}for(const u of this._features){let h,d;!n&&t.hasDataDrivenColor&&(a=t.getPaintValue(\"fill-color\",l,u)),t.hasDataDrivenOpacity&&(f=t.getPaintValue(\"fill-opacity\",l,u)),!n&&t.hasDataDrivenOutlineColor&&(s=t.getPaintValue(\"fill-outline-color\",l,u)),i&&(h={color:a,opacity:f}),r&&(d={color:t.outlineUsesFillColor?a:s,opacity:f});const x=u.getGeometry(e),y=null==e?void 0:e.validateTessellation;this._processFeature(x,o,t.outlineUsesFillColor,h,d,y)}}serialize(){let e=12;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length;let t=0;const l=new Uint32Array(e),i=new Int32Array(l.buffer);l[t++]=this.type,l[t++]=this.layerUIDs.length;for(let e=0;e<this.layerUIDs.length;e++)l[t++]=this.layerUIDs[e];l[t++]=this._fillIndexStart,l[t++]=this._fillIndexCount,l[t++]=this._outlineIndexStart,l[t++]=this._outlineIndexCount,l[t++]=this._fillVertexBuffer.isDataDriven()?1:0,l[t++]=this._outlineVertexBuffer.isDataDriven()?1:0,l[t++]=this._fillVertexBuffer.array.length;for(let e=0;e<this._fillVertexBuffer.array.length;e++)i[t++]=this._fillVertexBuffer.array[e];l[t++]=this._fillIndexBuffer.array.length;for(let e=0;e<this._fillIndexBuffer.array.length;e++)l[t++]=this._fillIndexBuffer.array[e];l[t++]=this._outlineVertexBuffer.array.length;for(let e=0;e<this._outlineVertexBuffer.array.length;e++)i[t++]=this._outlineVertexBuffer.array[e];l[t++]=this._outlineIndexBuffer.array.length;for(let e=0;e<this._outlineIndexBuffer.array.length;e++)l[t++]=this._outlineIndexBuffer.array[e];return l.buffer}_processFeature(e,t,l,i,r,n){if(!e)return;const o=e.length;if(t&&(!l||!r||r.color[3]*r.opacity==1))for(let t=0;t<o;t++)this._processOutline(e[t],r);let s;for(let t=0;t<o;t++){const l=FillBucket_a._area(e[t]);l>128?(void 0!==s&&this._processFill(e,s,i,n),s=[t]):l<-128&&void 0!==s&&s.push(t)}void 0!==s&&this._processFill(e,s,i,n)}_processOutline(e,t){const l=this._outlineVertexBuffer,r=this._outlineIndexBuffer,n=r.index;let o,a,s;const f=new Geometry[\"a\" /* Point */](0,0),u=new Geometry[\"a\" /* Point */](0,0),h=new Geometry[\"a\" /* Point */](0,0);let d=-1,x=-1,y=-1,c=-1,_=-1,g=!1;let I=e.length;if(I<2)return;const p=e[0];let B=e[I-1];for(;I&&B.isEqual(p);)--I,B=e[I-1];if(!(I-0<2)){for(let i=0;i<I;++i){0===i?(o=e[I-1],a=e[0],s=e[1],f.assignSub(a,o),f.normalize(),f.rightPerpendicular()):(o=a,a=s,s=i!==I-1?e[i+1]:e[0],f.assign(u));const n=this._isClipEdge(o,a);-1===c&&(g=n),u.assignSub(s,a),u.normalize(),u.rightPerpendicular();const p=f.x*u.y-f.y*u.x;h.assignAdd(f,u),h.normalize();const B=-h.x*-f.x+-h.y*-f.y;let D=Math.abs(0!==B?1/B:1);D>8&&(D=8),p>=0?(y=l.add(a.x,a.y,f.x,f.y,0,1,t),-1===c&&(c=y),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),x=l.add(a.x,a.y,D*-h.x,D*-h.y,0,-1,t),-1===_&&(_=x),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),d=x,x=y,y=l.add(a.x,a.y,h.x,h.y,0,1,t),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),x=l.add(a.x,a.y,u.x,u.y,0,1,t),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y)):(y=l.add(a.x,a.y,D*h.x,D*h.y,0,1,t),-1===c&&(c=y),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),x=l.add(a.x,a.y,-f.x,-f.y,0,-1,t),-1===_&&(_=x),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),d=x,x=y,y=l.add(a.x,a.y,-h.x,-h.y,0,-1,t),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y),d=l.add(a.x,a.y,-u.x,-u.y,0,-1,t),d>=0&&x>=0&&y>=0&&!n&&r.add(d,x,y))}d>=0&&x>=0&&c>=0&&!g&&r.add(d,x,c),d>=0&&c>=0&&_>=0&&!g&&r.add(d,_,c),this._outlineIndexCount+=3*(r.index-n)}}_processFill(i,r,n,a){let s;r.length>1&&(s=[]);let f=0;for(const e of r)0!==f&&s.push(f),f+=i[e].length;const u=2*f,h=ArrayPool[\"a\" /* default */].acquire();for(const e of r){const t=i[e],l=t.length;for(let e=0;e<l;++e)h.push(t[e].x,t[e].y)}const d=Object(earcut[\"b\" /* earcut */])(h,s,2);if(a&&Object(earcut[\"a\" /* deviation */])(h,s,2,d)>0){const e=[],t=[];if(function(e,t,l,i){let r,n;FillBucket_o.beginPolygon(e,t);for(const e of i){const t=l[e];if(!(t.length<3)){FillBucket_o.beginContour();for(let e=0;e<t.length;++e){r=t[e].x,n=t[e].y;const l=[r,n,0];FillBucket_o.addVertex(l,l)}FillBucket_o.endContour()}}FillBucket_o.endPolygon()}(e,t,i,r),t.length>0){const l=this._fillVertexBuffer.index;let i=0;for(;i<e.length;)this._fillVertexBuffer.add(e[i++],e[i++],n);let r=0;for(;r<t.length;)this._fillIndexBuffer.add(l+t[r+0],l+t[r+1],l+t[r+2]),r+=3;this._fillIndexCount+=t.length}}else{const e=d.length;if(e>0){const t=this._fillVertexBuffer.index;let l=0;for(;l<u;)this._fillVertexBuffer.add(h[l++],h[l++],n);let i=0;for(;i<e;)this._fillIndexBuffer.add(t+d[i++],t+d[i++],t+d[i++]);this._fillIndexCount+=e}}ArrayPool[\"a\" /* default */].release(h)}_isClipEdge(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}static _area(e){let t=0;const l=e.length-1;for(let i=0;i<l;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return t+=(e[l].x-e[0].x)*(e[l].y+e[0].y),.5*t}}/* harmony default export */ var FillBucket = (FillBucket_a);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/MemoryBuffer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var MemoryBuffer = (class{constructor(t){this._array=[],t<=0&&console.error(\"strideInBytes must be positive!\"),this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,r){return 65535&t|r<<16}static i8888to32(t,r,e,i){return 255&t|(255&r)<<8|(255&e)<<16|i<<24}static i8816to32(t,r,e){return 255&t|(255&r)<<8|e<<16}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/IndexMemoryBuffer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass IndexMemoryBuffer_r extends MemoryBuffer{constructor(){super(12)}add(s,r,t){const e=this.array;e.push(s),e.push(r),e.push(t)}}class IndexMemoryBuffer_t extends MemoryBuffer{constructor(){super(4)}add(s){this.array.push(s)}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/util.js\nvar util = __webpack_require__(\"aixI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TurboLine.js\nvar TurboLine = __webpack_require__(\"Jimw\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/LineBucket.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst LineBucket_l=e=>t=>{t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)},LineBucket_s=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,t.rightEntry2,t.leftExit2)},LineBucket_x=e=>r=>{const n=2===e._joinType?e._miterLimitCosine:e._roundLimitCosine,i=r.isCap&&0!==e._capType;let l=!1;r.cosine>.97?(r.exit0=r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.bisector.x/r.cosine,r.bisector.y/r.cosine,0,-1,r.distance,e._ddValues),r.exit2=r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.bisector.x/r.cosine,-r.bisector.y/r.cosine,0,1,r.distance,e._ddValues)):r.cosine<1-.97?(r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.prevNormal.x,r.prevNormal.y,0,-1,r.distance,e._ddValues),r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.prevNormal.x,-r.prevNormal.y,0,1,r.distance,e._ddValues),r.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.nextNormal.x,r.nextNormal.y,0,-1,r.distance,e._ddValues),r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.nextNormal.x,-r.nextNormal.y,0,1,r.distance,e._ddValues)):r.canSplit?(Object(TurboLine[\"c\" /* splitVertex */])(),r.sign>0?(r.splitInner?(r.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.leftInner.x,r.leftInner.y,0,-1,r.distance,e._ddValues),r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.rightInner.x,r.rightInner.y,0,-1,r.distance,e._ddValues)):(r.exit0=r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.bisector.x/r.cosine,r.bisector.y/r.cosine,0,-1,r.distance,e._ddValues)),r.cosine<n?(l=!r.isCap,r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.prevNormal.x,-r.prevNormal.y,0,1,r.distance,e._ddValues),r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.nextNormal.x,-r.nextNormal.y,0,1,r.distance,e._ddValues)):r.splitOuter?(l=l||r.gapOuter,r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.leftOuter.x,-r.leftOuter.y,0,1,r.distance,e._ddValues),r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.rightOuter.x,-r.rightOuter.y,0,1,r.distance,e._ddValues)):(r.entry2=r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.bisector.x/r.cosine,-r.bisector.y/r.cosine,0,1,r.distance,e._ddValues))):(r.splitInner?(r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.leftInner.x,-r.leftInner.y,0,1,r.distance,e._ddValues),r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.rightInner.x,-r.rightInner.y,0,1,r.distance,e._ddValues)):(r.exit2=r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.bisector.x/r.cosine,-r.bisector.y/r.cosine,0,1,r.distance,e._ddValues)),r.cosine<n?(l=!r.isCap,r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.prevNormal.x,r.prevNormal.y,0,-1,r.distance,e._ddValues),r.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.nextNormal.x,r.nextNormal.y,0,-1,r.distance,e._ddValues)):r.splitOuter?(l=l||r.gapOuter,r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.leftOuter.x,r.leftOuter.y,0,-1,r.distance,e._ddValues),r.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.rightOuter.x,r.rightOuter.y,0,-1,r.distance,e._ddValues)):(r.exit0=r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.bisector.x/r.cosine,r.bisector.y/r.cosine,0,-1,r.distance,e._ddValues)))):r.sign>0?(r.exit0=r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.bisector.x/r.cosine,r.bisector.y/r.cosine,0,-1,r.distance,e._ddValues),r.cosine<n?(l=!r.isCap,r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.prevNormal.x,-r.prevNormal.y,0,1,r.distance,e._ddValues),r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.nextNormal.x,-r.nextNormal.y,0,1,r.distance,e._ddValues)):(r.entry2=r.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.bisector.x/r.cosine,-r.bisector.y/r.cosine,0,1,r.distance,e._ddValues))):(r.exit2=r.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.bisector.x/r.cosine,-r.bisector.y/r.cosine,0,1,r.distance,e._ddValues),r.cosine<n?(l=!r.isCap,r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.prevNormal.x,r.prevNormal.y,0,-1,r.distance,e._ddValues),r.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.nextNormal.x,r.nextNormal.y,0,-1,r.distance,e._ddValues)):(r.exit0=r.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.bisector.x/r.cosine,r.bisector.y/r.cosine,0,-1,r.distance,e._ddValues)));let s;if(r.canSplit&&(r.splitInner||r.splitOuter)||l||i?(s=r.entry1=r.exit1=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,0,0,0,0,r.distance,e._ddValues)):s=r.entry1=r.exit1=null,l&&1!==e._joinType)e._lineIndexBuffer.add(s,r.sign>0?r.exit2:r.entry0,r.sign>0?r.entry2:r.exit0);else if(i&&1===e._capType||l&&1===e._joinType){let t,n,i,l,x,a;if(r.isCap){const e=Math.PI;x=Math.ceil(e/.8),a=e/x,r.isFirstVertex?(t=r.prevNormal.x,n=r.prevNormal.y,i=r.entry0,l=r.entry2):r.isLastVertex&&(t=-r.nextNormal.x,n=-r.nextNormal.y,i=r.exit2,l=r.exit0)}else{const e=2*Math.acos(r.cosine);x=Math.ceil(e/.8),a=e/x,t=r.sign>0?-r.prevNormal.x:r.nextNormal.x,n=r.sign>0?-r.prevNormal.y:r.nextNormal.y,i=r.sign>0?r.entry2:r.exit0,l=r.sign>0?r.exit2:r.entry0}const d=Math.cos(a),u=Math.sin(a),f=u*t+d*n;let o,c;t=d*t-u*n,n=f;for(let a=0;a<x;++a){if(o=c,a<x-1)if(r.isCap){const i=r.isFirstVertex?-1:1;c=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,t,n,i,0,r.distance,e._ddValues)}else c=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,t,n,0,r.sign,r.distance,e._ddValues);e._lineIndexBuffer.add(0===a?i:o,s,a===x-1?l:c);const f=u*t+d*n;t=d*t-u*n,n=f}}else if(i&&2===e._capType){const t=r.isFirstVertex?1:-1;let n,i;e._hasPattern?(n=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.prevNormal.x-t*r.inbound.x,r.prevNormal.y-t*r.inbound.y,-t,-1,r.distance,e._ddValues),i=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.prevNormal.x-t*r.inbound.x,-r.prevNormal.y-t*r.inbound.y,-t,1,r.distance,e._ddValues)):(n=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,r.prevNormal.x-t*r.inbound.x,r.prevNormal.y-t*r.inbound.y,0,-1,r.distance,e._ddValues),i=e._lineVertexBuffer.index,e._lineVertexBuffer.add(r.currentVertex.x,r.currentVertex.y,-r.prevNormal.x-t*r.inbound.x,-r.prevNormal.y-t*r.inbound.y,0,1,r.distance,e._ddValues)),t>0?(e._lineIndexBuffer.add(s,r.entry2,i),e._lineIndexBuffer.add(s,i,n),e._lineIndexBuffer.add(s,n,r.entry0)):(e._lineIndexBuffer.add(s,i,r.exit2),e._lineIndexBuffer.add(s,n,i),e._lineIndexBuffer.add(s,r.exit0,n))}},LineBucket_a=e=>t=>{e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,null!=t.leftExit1?t.leftExit1:t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,null!=t.rightEntry1?t.rightEntry1:t.rightEntry2,null!=t.leftExit1?t.leftExit1:t.leftExit2),null!=t.leftExit1&&null!=t.rightEntry1?(e._lineIndexBuffer.add(t.leftExit1,t.rightEntry1,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)):null!=t.leftExit1?e._lineIndexBuffer.add(t.leftExit1,t.rightEntry2,t.leftExit2):null!=t.rightEntry1&&e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)};/* harmony default export */ var LineBucket = (class extends BaseBucket{constructor(e,t,r,n){if(super(e,t),this.type=2,this._tessellationOptions={},this.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_hasPattern:null,_ddValues:null,_capType:null,_joinType:null,_miterLimitCosine:null,_roundLimitCosine:null},e.hasDataDrivenLine!==r.isDataDriven())throw new Error(\"incompatible line buffer\");this.tessellationProperties._lineVertexBuffer=r,this.tessellationProperties._lineIndexBuffer=n,this.tessellationProperties._hasPattern=e.getPaintValue(\"line-pattern\",this.zoom)||e.getPaintValue(\"line-dasharray\",this.zoom).length>0,this._isThinLine=e.isThinLine,this._isThinLine?this._tessellationCallbacks={vertex:LineBucket_l(this.tessellationProperties),bridge:LineBucket_s(this.tessellationProperties)}:this._tessellationCallbacks={vertex:LineBucket_x(this.tessellationProperties),bridge:LineBucket_a(this.tessellationProperties)}}get lineIndexStart(){return this._lineIndexStart}get lineIndexCount(){return this._lineIndexCount}processFeatures(t){this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;const n=this.layer,i=this.zoom,l=n.hasDataDrivenLine;t&&t.setExtent(this.layerExtent);let s=[1,1,1,1],x=1,a=1;for(const r of this._features){let d;if(!this.tessellationProperties._hasPattern&&n.hasDataDrivenColor&&(s=n.getPaintValue(\"line-color\",i,r)),n.hasDataDrivenOpacity&&(x=n.getPaintValue(\"line-opacity\",i,r)),n.hasDataDrivenWidth&&(a=n.getPaintValue(\"line-width\",i,r)),l&&(d={color:s,opacity:x,size:Math.max(Math.min(a,256),0)},d.size<=0||d.opacity<=0||d.color[3]<=0))continue;this.tessellationProperties._capType=n.getLayoutValue(\"line-cap\",i,r),this.tessellationProperties._joinType=n.getLayoutValue(\"line-join\",i,r),this.tessellationProperties._miterLimitCosine=Object(util[\"b\" /* getLimitCosine */])(n.getLayoutValue(\"line-miter-limit\",i,r)),this.tessellationProperties._roundLimitCosine=Object(util[\"b\" /* getLimitCosine */])(n.getLayoutValue(\"line-round-limit\",i,r));const u=r.getGeometry(t);this._processFeature(u,d)}Object(TurboLine[\"b\" /* cleanup */])()}serialize(){let e=7;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length;let t=0;const r=new Uint32Array(e),n=new Int32Array(r.buffer);r[t++]=this.type,r[t++]=this.layerUIDs.length;for(let e=0;e<this.layerUIDs.length;e++)r[t++]=this.layerUIDs[e];r[t++]=this._lineIndexStart,r[t++]=this._lineIndexCount,r[t++]=this.tessellationProperties._lineVertexBuffer.isDataDriven()?1:0,r[t++]=this.tessellationProperties._lineVertexBuffer.array.length;for(let e=0;e<this.tessellationProperties._lineVertexBuffer.array.length;e++)n[t++]=this.tessellationProperties._lineVertexBuffer.array[e];r[t++]=this.tessellationProperties._lineIndexBuffer.array.length;for(let e=0;e<this.tessellationProperties._lineIndexBuffer.array.length;e++)r[t++]=this.tessellationProperties._lineIndexBuffer.array[e];return r.buffer}_processFeature(e,t){if(!e)return;const r=e.length;for(let n=0;n<r;n++)this._processGeometry(e[n],t)}_processGeometry(e,t){if(e.length<2)return;let r,i,l=e[0],s=1;for(;s<e.length;)r=e[s].x-l.x,i=e[s].y-l.y,r*r+i*i<1e-6?e.splice(s,1):(l=e[s],++s);if(e.length<2)return;const x=3*this.tessellationProperties._lineIndexBuffer.index;this._tessellationOptions.trackDistance=this.tessellationProperties._hasPattern,this._tessellationOptions.initialDistance=0,this._tessellationOptions.thin=this._isThinLine,this._tessellationOptions.wrapDistance=65535,this._tessellationOptions.outerBisectorAutoSplitThreshold=.2631578947368421,this._tessellationOptions.enableOuterBisectorSplit=this.tessellationProperties._hasPattern,this._tessellationOptions.innerBisectorAutoSplitThreshold=.2631578947368421,this._tessellationOptions.enableInnerBisectorSplit=this.tessellationProperties._hasPattern,this.tessellationProperties._ddValues=t,Object(TurboLine[\"d\" /* tessellate */])(e,this._tessellationOptions,this._tessellationCallbacks),this._lineIndexCount+=3*this.tessellationProperties._lineIndexBuffer.index-x}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SourceLayerData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass SourceLayerData_e{constructor(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(t.processMessage(SourceLayerData_e._parseValue));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}getData(){return this._pbfLayer}static _parseValue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}/* harmony default export */ var SourceLayerData = (SourceLayerData_e);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/string.js\nvar string = __webpack_require__(\"s7YA\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/BidiEngine.js + 1 modules\nvar BidiEngine = __webpack_require__(\"179/\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleLayer.js + 5 modules\nvar StyleLayer = __webpack_require__(\"Ip4x\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SymbolBucket.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction SymbolBucket_y(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}class SymbolBucket_g extends BaseBucket{constructor(e,t,i,n,a,s,o,r){if(super(e,t),this.type=3,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,e.hasDataDrivenIcon!==i.isDataDriven())throw new Error(\"incompatible icon buffer\");if(e.hasDataDrivenText!==a.isDataDriven())throw new Error(\"incompatible text buffer\");this._iconVertexBuffer=i,this._iconIndexBuffer=n,this._textVertexBuffer=a,this._textIndexBuffer=s,this._placementEngine=o,this._workerTileHandler=r}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(t,i,n){const a=this.layer,s=this.zoom,o=a.hasDataDrivenIcon,r=a.hasDataDrivenText;t&&t.setExtent(this.layerExtent);const l=a.getLayoutProperty(\"icon-image\"),h=a.getLayoutProperty(\"text-field\"),x=[];let c,d,f,y,u,m,p,_,M,I,b=[1,1,1,1],P=1,V=1,A=[1,1,1,1],L=1,w=1;for(const D of this._features){const z=D.getGeometry(t);if(!z||0===z.length)continue;let B,C;l&&(B=a.getLayoutValue(\"icon-image\",s,D),l.isDataDriven||(B=this._replaceKeys(B,D.values)),B&&(i.add(B),c=a.getLayoutValue(\"icon-rotate\",s,D),d=a.getLayoutValue(\"icon-anchor\",s,D),f=a.getLayoutValue(\"icon-offset\",s,D)));let S=!1;if(h&&(C=a.getLayoutValue(\"text-field\",s,D),C&&!h.isDataDriven&&(C=this._replaceKeys(C,D.values)),C)){C=C.replace(/\\\\n/g,\"\\n\");switch(a.getLayoutValue(\"text-transform\",s,D)){case 2:C=C.toLowerCase();break;case 1:C=C.toUpperCase()}if(SymbolBucket_g._bidiEngine.hasBidiChar(C)){let e;e=\"rtl\"===SymbolBucket_g._bidiEngine.checkContextual(C)?\"IDNNN\":\"ICNNN\",C=SymbolBucket_g._bidiEngine.bidiTransform(C,e,\"VLYSN\"),S=!0}const e=C.length;if(e>0){I=a.getLayoutValue(\"text-font\",s,D);for(const t of I){let i=n[t];i||(i=n[t]=new Set);for(let t=0;t<e;t++){const e=C.charCodeAt(t);i.add(e)}}y=a.getLayoutValue(\"text-rotate\",s,D),u=a.getLayoutValue(\"text-anchor\",s,D),m=a.getLayoutValue(\"text-offset\",s,D),p=a.getLayoutValue(\"text-justify\",s,D),_=a.getLayoutValue(\"text-letter-spacing\",s,D),M=a.getLayoutValue(\"text-max-width\",s,D)}}if(!B&&!C)continue;const R=a.getLayoutValue(\"icon-size\",s,D),v=a.getLayoutValue(\"text-size\",s,D);a.hasDataDrivenIconColor&&(b=a.getPaintValue(\"icon-color\",s,D)),a.hasDataDrivenIconOpacity&&(P=a.getPaintValue(\"icon-opacity\",s,D)),a.hasDataDrivenIconSize&&(V=R),a.hasDataDrivenTextColor&&(A=a.getPaintValue(\"text-color\",s,D)),a.hasDataDrivenTextOpacity&&(L=a.getPaintValue(\"text-opacity\",s,D)),a.hasDataDrivenTextSize&&(w=v);const k=a.getLayoutValue(\"symbol-sort-key\",s,D),T={sprite:B,label:C,rtl:S,type:D.type,geometry:z,hash:(C?Object(string[\"b\" /* numericHash */])(C):0)^(B?Object(string[\"b\" /* numericHash */])(B):0),priority:k,iconSize:R,iconRotate:c,ddIconValues:o?{color:b,opacity:P,size:V}:null,iconAnchor:d,iconOffset:f,textSize:v,textRotate:y,ddTextValues:r?{color:A,opacity:L,size:w}:null,textAnchor:u,textOffset:m,textJustify:p,textLetterSpacing:_,textMaxWidth:M,textFontArray:I};x.push(T)}this._symbolFeatures=x}processFeatures(e){e&&e.setExtent(this.layerExtent);const t=this.layer,n=this.zoom,a=t.getLayoutValue(\"symbol-placement\",n),r=0!==a,l=t.getLayoutValue(\"symbol-spacing\",n)*Placement_x,u=t.getLayoutProperty(\"icon-image\"),m=t.getLayoutProperty(\"text-field\"),p=u?new StyleLayer[\"d\" /* IconLayout */](t,n,r):null,_=m?new StyleLayer[\"g\" /* TextLayout */](t,n,r):null,M=this._workerTileHandler;let I;u&&(I=M.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const b=[];let P=1;_&&_.size&&(P=_.size/TextShaping_e);const V=_?_.maxAngle*GeometryUtils[\"b\" /* C_DEG_TO_RAD */]:0,A=_?_.size*Placement_x:0;for(const e of this._symbolFeatures){let t;p&&I&&e.sprite&&(t=I[e.sprite],t&&t.sdf&&(this._isIconSDF=!0));let i;!!t&&(p.size=e.iconSize,p.rotate=e.iconRotate,p.offset=e.iconOffset);let n=0;const s=e.label;if(s){_.size=e.textSize,_.rotate=e.textRotate,_.anchor=e.textAnchor,_.fontArray=e.textFontArray,_.justify=e.textJustify,_.letterSpacing=e.textLetterSpacing,_.maxWidth=e.textMaxWidth,_.offset=e.textOffset;const t=r?_.keepUpright:_.writingMode&&_.writingMode.indexOf(1)>=0;let a=.5;switch(_.anchor){case 5:case 1:case 7:a=0;break;case 6:case 2:case 8:a=1}let o=.5;switch(_.anchor){case 5:case 3:case 6:o=0;break;case 7:case 4:case 8:o=1}let l=.5;switch(_.justify){case 0:l=a;break;case 1:l=0;break;case 3:l=1}const d=_.letterSpacing*TextShaping_e,f=r?0:_.maxWidth*TextShaping_e,y=_.lineHeight*TextShaping_e;let g,u;if(g=_.fontArray.map((e=>M.getGlyphItems(e))),u=new TextShaping_c(g,f,y,d,a,o,l),i=u.getShaping(s,e.rtl,t),i&&i.length>0){let e=1e30,t=-1e30;for(const n of i)e=Math.min(e,n.x),t=Math.max(t,n.x);n=(t-e+2*TextShaping_e)*P*Placement_x}}for(let s of e.geometry){const o=[];if(1===a){if(i&&i.length>0&&_&&_.size){const e=_.size*Placement_x*(2+Math.min(2,4*Math.abs(_.offset[1])));s=SymbolBucket_g._smoothVertices(s,e)}SymbolBucket_g._pushAnchors(o,s,l,n)}else 2===a?SymbolBucket_g._pushCenterAnchor(o,s):3===e.type?SymbolBucket_g._pushCentroid(o,s):o.push(new Placement_d(s[0].x,s[0].y));for(const a of o){if(a.x<0||a.x>Placement_g||a.y<0||a.y>Placement_g)continue;if(r&&n>0&&0===_.rotationAlignment&&!SymbolBucket_g._honorsTextMaxAngle(s,a,n,V,A))continue;const o={shaping:i,line:s,iconMosaicItem:t,anchor:a,symbolFeature:e,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};b.push(o),this._processFeature(o,p,_)}}}b.sort(SymbolBucket_y),this._addPlacedGlyphs(),this._symbolInstances=b}serialize(){let e=13;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=SymbolBucket_g.symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;let t=0;const i=new Uint32Array(e),n=new Int32Array(i.buffer),a=new Float32Array(i.buffer);i[t++]=this.type,i[t++]=this.layerUIDs.length;for(let e=0;e<this.layerUIDs.length;e++)i[t++]=this.layerUIDs[e];i[t++]=this._isIconSDF?1:0,i[t++]=this._iconVertexBuffer.isDataDriven()?1:0,i[t++]=this._textVertexBuffer.isDataDriven()?1:0,i[t++]=this.markerPageMap.size,this.markerPageMap.forEach((([e,n],a)=>{i[t++]=a,i[t++]=e,i[t++]=n})),i[t++]=this.glyphsPageMap.size,this.glyphsPageMap.forEach((([e,n],a)=>{i[t++]=a,i[t++]=e,i[t++]=n})),i[t++]=this._iconVertexBuffer.index/4,i[t++]=this._textVertexBuffer.index/4,t=SymbolBucket_g.serializeSymbols(i,n,a,t,this._symbolInstances),i[t++]=this._iconVertexBuffer.array.length;for(let e=0;e<this._iconVertexBuffer.array.length;e++)n[t++]=this._iconVertexBuffer.array[e];i[t++]=this._iconIndexBuffer.array.length;for(let e=0;e<this._iconIndexBuffer.array.length;e++)i[t++]=this._iconIndexBuffer.array[e];i[t++]=this._textVertexBuffer.array.length;for(let e=0;e<this._textVertexBuffer.array.length;e++)n[t++]=this._textVertexBuffer.array[e];i[t++]=this._textIndexBuffer.array.length;for(let e=0;e<this._textIndexBuffer.array.length;e++)i[t++]=this._textIndexBuffer.array[e];return i.buffer}static symbolsSerializationLength(e){let t=0;t+=1;for(const i of e||[]){t+=4,t+=1;for(const e of i.textColliders)t+=10;for(const e of i.iconColliders)t+=10;t+=1,t+=2*i.textVertexRanges.length,t+=1,t+=2*i.iconVertexRanges.length}return t}static serializeSymbols(e,t,i,n,a){a=a||[],t[n++]=a.length;for(const e of a){t[n++]=e.anchor.x,t[n++]=e.anchor.y,t[n++]=e.symbolFeature.hash,t[n++]=e.symbolFeature.priority,t[n++]=e.textColliders.length+e.iconColliders.length;for(const a of e.textColliders)t[n++]=a.xTile,t[n++]=a.yTile,t[n++]=a.dxPixels,t[n++]=a.dyPixels,t[n++]=a.hard?1:0,t[n++]=a.partIndex,i[n++]=a.minLod,i[n++]=a.maxLod,t[n++]=a.width,t[n++]=a.height;for(const a of e.iconColliders)t[n++]=a.xTile,t[n++]=a.yTile,t[n++]=a.dxPixels,t[n++]=a.dyPixels,t[n++]=a.hard?1:0,t[n++]=a.partIndex,i[n++]=a.minLod,i[n++]=a.maxLod,t[n++]=a.width,t[n++]=a.height;t[n++]=e.textVertexRanges.length;for(const[i,a]of e.textVertexRanges)t[n++]=i,t[n++]=a;t[n++]=e.iconVertexRanges.length;for(const[i,a]of e.iconVertexRanges)t[n++]=i,t[n++]=a}return n}_replaceKeys(e,t){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?t[i]:\"\"}))}_processFeature(e,t,i){const a=e.line,s=e.iconMosaicItem,o=e.shaping,r=e.anchor,l=!!s;let h=!0;l&&(h=t.optional||!s);const x=o&&o.length>0;let c,d,f=!0;if(x&&(f=i.optional||!o||0===o.length),l&&(c=this._placementEngine.getIconPlacement(r,s,t)),(c||h)&&(x&&(d=this._placementEngine.getTextPlacement(r,o,a,i)),d||f)){if(c&&d||(f||h?f||d?h||c||(d=null):c=null:(c=null,d=null)),d&&(this._storePlacedGlyphs(e,d.shapes,this.zoom,i.rotationAlignment),d.textColliders)){e.textColliders=d.textColliders;for(const e of d.textColliders){e.minLod=Math.max(this.zoom+Object(GeometryUtils[\"f\" /* log2 */])(e.minLod),0),e.maxLod=Math.min(this.zoom+Object(GeometryUtils[\"f\" /* log2 */])(e.maxLod),25);const t=e.angle;if(t){const i=Math.cos(t),n=Math.sin(t),a=e.dxPixels*i-e.dyPixels*n,s=e.dxPixels*n+e.dyPixels*i,o=(e.dxPixels+e.width)*i-e.dyPixels*n,r=(e.dxPixels+e.width)*n+e.dyPixels*i,l=e.dxPixels*i-(e.dyPixels+e.height)*n,h=e.dxPixels*n+(e.dyPixels+e.height)*i,x=(e.dxPixels+e.width)*i-(e.dyPixels+e.height)*n,c=(e.dxPixels+e.width)*n+(e.dyPixels+e.height)*i,d=Math.min(a,o,l,x),f=Math.max(a,o,l,x),y=Math.min(s,r,h,c),g=Math.max(s,r,h,c);e.dxPixels=d,e.dyPixels=y,e.width=f-d,e.height=g-y}}}if(c&&(this._addPlacedIcons(e,c.shapes,this.zoom,s.page,1===t.rotationAlignment),c.iconColliders)){e.iconColliders=c.iconColliders;for(const e of c.iconColliders){e.minLod=Math.max(this.zoom+Object(GeometryUtils[\"f\" /* log2 */])(e.minLod),0),e.maxLod=Math.min(this.zoom+Object(GeometryUtils[\"f\" /* log2 */])(e.maxLod),25);const t=e.angle;if(t){const i=Math.cos(t),n=Math.sin(t),a=e.dxPixels*i-e.dyPixels*n,s=e.dxPixels*n+e.dyPixels*i,o=(e.dxPixels+e.width)*i-e.dyPixels*n,r=(e.dxPixels+e.width)*n+e.dyPixels*i,l=e.dxPixels*i-(e.dyPixels+e.height)*n,h=e.dxPixels*n+(e.dyPixels+e.height)*i,x=(e.dxPixels+e.width)*i-(e.dyPixels+e.height)*n,c=(e.dxPixels+e.width)*n+(e.dyPixels+e.height)*i,d=Math.min(a,o,l,x),f=Math.max(a,o,l,x),y=Math.min(s,r,h,c),g=Math.max(s,r,h,c);e.dxPixels=d,e.dyPixels=y,e.width=f-d,e.height=g-y}}}}}_addPlacedIcons(e,t,i,a,s){const o=e.symbolFeature.ddIconValues,r=Math.max(i-1,0),l=this._iconVertexBuffer,h=this._iconIndexBuffer,x=this._markerMap;for(const c of t){const t=s?0:Math.max(i+Object(GeometryUtils[\"f\" /* log2 */])(c.minzoom),r),d=s?25:Math.min(i+Object(GeometryUtils[\"f\" /* log2 */])(c.maxzoom),25);if(d<=t)continue;const f=c.tl,y=c.tr,g=c.bl,u=c.br,m=c.mosaicRect,p=c.labelAngle,_=c.minAngle,M=c.maxAngle,I=c.anchor,b=l.index,P=m.x,V=m.y,A=P+m.width,L=V+m.height,w=l.index;l.add(I.x,I.y,f.x,f.y,P,V,p,_,M,t,d,o),l.add(I.x,I.y,y.x,y.y,A,V,p,_,M,t,d,o),l.add(I.x,I.y,g.x,g.y,P,L,p,_,M,t,d,o),l.add(I.x,I.y,u.x,u.y,A,L,p,_,M,t,d,o),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===w?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([w,4]),h.add(b+0,b+1,b+2),h.add(b+1,b+2,b+3),x.has(a)?x.get(a)[1]+=6:x.set(a,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const e=this._textVertexBuffer,t=this._textIndexBuffer,i=this._glyphMap;this._glyphBufferDataStorage.forEach(((n,a)=>{for(const s of n){const n=e.index,o=s.symbolInstance,r=o.symbolFeature.ddTextValues,l=e.index;e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,r),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,r),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,r),e.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,r),o.textVertexRanges.length>0&&o.textVertexRanges[0][0]+o.textVertexRanges[0][1]===l?o.textVertexRanges[0][1]+=4:o.textVertexRanges.push([l,4]),t.add(n+0,n+1,n+2),t.add(n+1,n+2,n+3),i.has(a)?i.get(a)[1]+=6:i.set(a,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}})),this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(e,t,i,a){const s=Math.max(i-1,0),o=1===a;let r,l,h,x,c,d,f,y,g,u,m;for(const a of t){if(r=o?0:Math.max(i+Object(GeometryUtils[\"f\" /* log2 */])(a.minzoom),s),l=o?25:Math.min(i+Object(GeometryUtils[\"f\" /* log2 */])(a.maxzoom),25),l<=r)continue;h=a.tl,x=a.tr,c=a.bl,d=a.br,f=a.labelAngle,y=a.minAngle,g=a.maxAngle,u=a.anchor,m=a.mosaicRect,this._glyphBufferDataStorage.has(a.page)||this._glyphBufferDataStorage.set(a.page,[]);this._glyphBufferDataStorage.get(a.page).push({glyphAnchor:[u.x,u.y],tl:[h.x,h.y],tr:[x.x,x.y],bl:[c.x,c.y],br:[d.x,d.y],xmin:m.x,ymin:m.y,xmax:m.x+m.width,ymax:m.y+m.height,labelAngle:f,minAngle:y,maxAngle:g,minLod:r,maxLod:l,placementLod:s,symbolInstance:e})}}static _pushAnchors(e,t,i,n){i+=n;let s=0;const o=t.length-1;for(let e=0;e<o;e++)s+=Geometry[\"a\" /* Point */].distance(t[e],t[e+1]);let l=n||i;if(l*=.5,s<=l)return;const h=l/s;let x=0,c=-(i=s/Math.max(Math.round(s/i),1))/2;const f=t.length-1;for(let n=0;n<f;n++){const s=t[n],o=t[n+1],r=o.x-s.x,l=o.y-s.y,f=Math.sqrt(r*r+l*l);let y;for(;c+i<x+f;){c+=i;const t=(c-x)/f,g=Object(GeometryUtils[\"e\" /* interpolate */])(s.x,o.x,t),u=Object(GeometryUtils[\"e\" /* interpolate */])(s.y,o.y,t);void 0===y&&(y=Math.atan2(l,r)),e.push(new Placement_d(g,u,y,n,h))}x+=f}}static _pushCenterAnchor(e,t){let i=0;const n=t.length-1;for(let e=0;e<n;e++)i+=Geometry[\"a\" /* Point */].distance(t[e],t[e+1]);const s=i/2;let o=0;const l=t.length-1;for(let i=0;i<l;i++){const n=t[i],r=t[i+1],l=r.x-n.x,h=r.y-n.y,x=Math.sqrt(l*l+h*h);if(s<o+x){const t=(s-o)/x,c=Object(GeometryUtils[\"e\" /* interpolate */])(n.x,r.x,t),f=Object(GeometryUtils[\"e\" /* interpolate */])(n.y,r.y,t),y=Math.atan2(h,l);return void e.push(new Placement_d(c,f,y,i,0))}o+=x}}static _deviation(e,t,i){const n=(t.x-e.x)*(i.x-t.x)+(t.y-e.y)*(i.y-t.y),a=(t.x-e.x)*(i.y-t.y)-(t.y-e.y)*(i.x-t.x);return Math.atan2(a,n)}static _honorsTextMaxAngle(e,t,i,n,a){let s=0;const o=i/2;let l=new Geometry[\"a\" /* Point */](t.x,t.y),h=t.segment+1;for(;s>-o;){if(--h,h<0)return!1;s-=Geometry[\"a\" /* Point */].distance(e[h],l),l=e[h]}s+=Geometry[\"a\" /* Point */].distance(e[h],e[h+1]);const x=[];let c=0;const d=e.length;for(;s<o;){const t=e[h];let i,o=h;do{if(++o,o===d)return!1;i=e[o]}while(i.isEqual(t));let l,f=o;do{if(++f,f===d)return!1;l=e[f]}while(l.isEqual(i));const y=this._deviation(t,i,l);for(x.push({deviation:y,distToAnchor:s}),c+=y;s-x[0].distToAnchor>a;)c-=x.shift().deviation;if(Math.abs(c)>n)return!1;s+=Geometry[\"a\" /* Point */].distance(i,l),h=o}return!0}static _smoothVertices(e,t){if(t<=0)return e;let i=e.length;if(i<3)return e;const n=[];let a=0,s=0;n.push(0);for(let t=1;t<i;t++){const i=Geometry[\"a\" /* Point */].distance(e[t],e[t-1]);i>0&&(a+=i,n.push(a),s++,s!==t&&(e[s]=e[t]))}if(i=s+1,i<3)return e;t=Math.min(t,.2*a);const o=e[0].x,l=e[0].y,h=e[i-1].x,x=e[i-1].y,c=Geometry[\"a\" /* Point */].sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[i-1],e[i-2]),c.normalize(),e[i-1].x+=t*c.x,e[i-1].y+=t*c.y,n[0]-=t,n[i-1]+=t;const d=[];d.push(new Geometry[\"a\" /* Point */](o,l));const f=1e-6,y=.5*t;for(let a=1;a<i-1;a++){let s=0,o=0,l=0;for(let i=a-1;i>=0;i--){const r=y+n[i+1]-n[a];if(r<0)break;const h=n[i+1]-n[i],x=n[a]-n[i]<y?1:r/h;if(x<f)break;const c=x*x,d=x*r-.5*c*h,g=x*h/t,u=e[i+1],m=e[i].x-u.x,p=e[i].y-u.y;s+=g/d*(u.x*x*r+.5*c*(r*m-h*u.x)-c*x*h*m/3),o+=g/d*(u.y*x*r+.5*c*(r*p-h*u.y)-c*x*h*p/3),l+=g}for(let r=a+1;r<i;r++){const i=y-n[r-1]+n[a];if(i<0)break;const h=n[r]-n[r-1],x=n[r]-n[a]<y?1:i/h;if(x<f)break;const c=x*x,d=x*i-.5*c*h,g=x*h/t,u=e[r-1],m=e[r].x-u.x,p=e[r].y-u.y;s+=g/d*(u.x*x*i+.5*c*(i*m-h*u.x)-c*x*h*m/3),o+=g/d*(u.y*x*i+.5*c*(i*p-h*u.y)-c*x*h*p/3),l+=g}d.push(new Geometry[\"a\" /* Point */](s/l,o/l))}return d.push(new Geometry[\"a\" /* Point */](h,x)),e[0].x=o,e[0].y=l,e[i-1].x=h,e[i-1].y=x,d}static _pushCentroid(e,t){const i=4096,n=4096,a=t.length-1;let s=0,o=0,r=0,l=t[0].x,h=t[0].y;l>i&&(l=i),l<0&&(l=0),h>n&&(h=n),h<0&&(h=0);for(let e=1;e<a;e++){let a=t[e].x,x=t[e].y,c=t[e+1].x,d=t[e+1].y;a>i&&(a=i),a<0&&(a=0),x>n&&(x=n),x<0&&(x=0),c>i&&(c=i),c<0&&(c=0),d>n&&(d=n),d<0&&(d=0);const f=(a-l)*(d-h)-(c-l)*(x-h);s+=f*(l+a+c),o+=f*(h+x+d),r+=f}s/=3*r,o/=3*r,isNaN(s)||isNaN(o)||e.push(new Placement_d(s,o))}}SymbolBucket_g._bidiEngine=new BidiEngine[\"a\" /* default */];/* harmony default export */ var SymbolBucket = (SymbolBucket_g);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VertexMemoryBuffer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst VertexMemoryBuffer_i=new Float32Array(1),VertexMemoryBuffer_r=new Uint32Array(VertexMemoryBuffer_i.buffer);class VertexMemoryBuffer_a extends MemoryBuffer{constructor(t){super(t?20:12),this._isDataDriven=t}isDataDriven(){return this._isDataDriven}add(t,a,o,n,e,h,u,c){const p=this.array;let d=MemoryBuffer.i1616to32(t,a);p.push(d);if(d=MemoryBuffer.i8888to32(Math.round(31*o),Math.round(31*n),Math.round(31*e),Math.round(31*h)),p.push(d),d=MemoryBuffer.i1616to32(u,0),p.push(d),this._isDataDriven){if(!c)throw new Error(\"Expecting data driven values.\");const t=c.color,a=t[3]*c.opacity*255;p.push(MemoryBuffer.i8888to32(t[0]*a,t[1]*a,t[2]*a,a)),VertexMemoryBuffer_i[0]=c.size,p.push(VertexMemoryBuffer_r[0])}}}class VertexMemoryBuffer_o extends MemoryBuffer{constructor(t){super(t?8:4),this._isDataDriven=t}isDataDriven(){return this._isDataDriven}add(t,i,r){const a=this.array;if(a.push(MemoryBuffer.i1616to32(t,i)),this._isDataDriven){if(!r)throw new Error(\"Expecting data driven values.\");const t=r.color,i=t[3]*r.opacity*255;a.push(MemoryBuffer.i8888to32(t[0]*i,t[1]*i,t[2]*i,i))}}}class VertexMemoryBuffer_n extends MemoryBuffer{constructor(t){super(t?12:8),this._isDataDriven=t}isDataDriven(){return this._isDataDriven}add(t,i,r,a,o,n,e){const h=this.array,u=this.index;let c=MemoryBuffer.i1616to32(t,i);h.push(c);if(c=MemoryBuffer.i8888to32(Math.round(15*r),Math.round(15*a),o,n),h.push(c),this._isDataDriven){if(!e)throw new Error(\"Expecting data driven values.\");const t=e.color,i=t[3]*e.opacity*255;h.push(MemoryBuffer.i8888to32(t[0]*i,t[1]*i,t[2]*i,i))}return u}}class VertexMemoryBuffer_e extends MemoryBuffer{constructor(t){super(t?24:16),this._isDataDriven=t}isDataDriven(){return this._isDataDriven}add(a,o,n,e,h,u,c,p,d,D,v,l){const f=this.array;let y=MemoryBuffer.i1616to32(a,o);if(f.push(y),y=MemoryBuffer.i1616to32(Math.round(8*n),Math.round(8*e)),f.push(y),y=MemoryBuffer.i8888to32(h/4,u/4,p,d),f.push(y),y=MemoryBuffer.i8888to32(0,Object(GeometryUtils[\"h\" /* radToByte */])(c),10*D,Math.min(10*v,255)),f.push(y),this._isDataDriven){if(!l)throw new Error(\"Expecting data driven values.\");const t=l.color,a=t[3]*l.opacity*255;f.push(MemoryBuffer.i8888to32(t[0]*a,t[1]*a,t[2]*a,a)),VertexMemoryBuffer_i[0]=l.size,f.push(VertexMemoryBuffer_r[0])}}}class VertexMemoryBuffer_h extends MemoryBuffer{constructor(){super(16)}add(t,i,r,a,o,n,e,h,u,c,p){const d=this.array;let D=MemoryBuffer.i1616to32(2*t+r,2*i+a);d.push(D);const v=n[3]*e*255;D=MemoryBuffer.i8888to32(n[0]*v,n[1]*v,n[2]*v,v),d.push(D);const l=c[3]*p*255;D=MemoryBuffer.i8888to32(c[0]*l,c[1]*l,c[2]*l,l),d.push(D),D=MemoryBuffer.i8888to32(Math.min(32*h,255),Math.min(4*u,255),Math.min(o,255),0),d.push(D)}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileParser.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var TileParser = (class{constructor(e,t,r,n,c){if(this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,c){this._styleLayerUIDs=new Set;for(const e of c)this._styleLayerUIDs.add(e)}this._styleRepository=n,this._layers=this._styleRepository.layers;const[a,l,u]=t.tileKey.split(\"/\").map(parseFloat);this._level=a;const f=Math.max(8,Math.round(1*this._level)-8);for(const t of Object.keys(e)){const r=e[t];this._pbfTiles[t]=new pbf[\"a\" /* default */](new Uint8Array(r.protobuff),new DataView(r.protobuff));if(r.refKey){const[e]=r.refKey.split(\"/\").map(parseFloat),s=a-e;if(s>0){const e=(1<<s)-1,r=l&e,i=u&e;this._tileClippers[t]=new TileClipper[\"b\" /* TileClipper */](s,r,i,8,f)}}this._tileClippers[t]||(this._tileClippers[t]=new TileClipper[\"a\" /* SimpleBuilder */])}}_canParseStyleLayer(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}async parse(r){const s=this._initialize(r),{returnedBuckets:o}=s;this._processLayers(s),this._linkReferences(s),this._filterFeatures(s);const i=new Set,c={};for(const e of o)3===e.type&&e.getResources(e.tileClipper,i,c);if(this._tile.status===enums_I.INVALID)return Object(promiseUtils[\"u\" /* resolve */])([]);const a=this._fetchResources(i,c,r);return Object(promiseUtils[\"b\" /* all */])(a).then((()=>this._processFeatures(s.returnedBuckets)))}_initialize(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}_processLayers(e){const{sourceNameToTileData:t,layers:r,zoom:s,sourceNameToTileClipper:o,sourceNameToUniqueSourceLayerBuckets:i,sourceNameToUniqueSourceLayers:n,returnedBuckets:c,layerIdToBucket:a,referencerUIDToReferencedId:l}=e;for(let e=r.length-1;e>=0;e--){const u=r[e];if(!this._canParseStyleLayer(u.uid)||u.minzoom&&s<Math.floor(u.minzoom)||u.maxzoom&&s>=u.maxzoom||0===u.type)continue;if(!t[u.source]||!o[u.source])continue;const f=t[u.source],h=o[u.source],p=u.sourceLayer,m=f[p];if(m){let e=n[u.source];if(e||(e=n[u.source]=new Set),e.add(u.sourceLayer),u.refLayerId)l.set(u.uid,u.refLayerId);else{const e=this._createBucket(u);if(e){e.layerUIDs=[u.uid],e.layerExtent=m.extent,e.tileClipper=h;let t=i[u.source];t||(t=i[u.source]={});let r=t[p];r||(r=t[p]=[]),r.push(e),c.push(e),a[u.id.toLowerCase()]=e}}}}}_linkReferences(e){const{layerIdToBucket:t,referencerUIDToReferencedId:r}=e;r.forEach(((e,r)=>{e=e.toLowerCase(),t[e]&&t[e].layerUIDs.push(r)}))}_filterFeatures(e){const{signal:t,sourceNameToTileData:s,sourceNameToUniqueSourceLayerBuckets:o,sourceNameToUniqueSourceLayers:i}=e,n=10*this._level,c=10*(this._level+1),l=[],u=[];for(const e of Object.keys(i)){i[e].forEach((t=>{l.push(t),u.push(e)}))}for(let e=0;e<l.length;e++){const i=u[e],f=l[e];if(!s[i]||!o[i])continue;const h=s[i][f],p=o[i][f];if(!p||0===p.length)continue;if(Object(promiseUtils[\"o\" /* isAborted */])(t))return;const m=h.getData();for(;m.nextTag(2);){const e=m.getMessage(),t=new Feature(e,h);e.release();const r=t.values;if(r){const e=r._minzoom;if(e&&e>=c)continue;const t=r._maxzoom;if(t&&t<=n)continue}for(const e of p)e.pushFeature(t)}}}_fetchResources(e,t,r){const s=[],o=this._tile.getWorkerTileHandler();let i,n;e.size>0&&(i=o.fetchSprites(e,this._client,r),s.push(i));for(const e in t){const i=t[e];i.size>0&&(n=o.fetchGlyphs(this._tile.tileKey,e,i,this._client,r),s.push(n))}return s}_processFeatures(e){const t=e.filter((e=>e.hasFeatures()));for(const e of t)e.processFeatures(e.tileClipper);return t}_parseTileData(e){const t={};for(const r of Object.keys(e)){const s=e[r],o={};for(;s.next();)switch(s.tag()){case 3:{const e=s.getMessage(),t=new SourceLayerData(e);e.release(),o[t.name]=t;break}default:s.skip()}t[r]=o}return t}_createBucket(e){switch(e.type){case 0:return null;case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}}_createFillBucket(e){return new FillBucket(e,this._level,new VertexMemoryBuffer_o(e.hasDataDrivenFill),new IndexMemoryBuffer_r,new VertexMemoryBuffer_n(e.hasDataDrivenOutline),new IndexMemoryBuffer_r)}_createLineBucket(e){return new LineBucket(e,this._level,new VertexMemoryBuffer_a(e.hasDataDrivenLine),new IndexMemoryBuffer_r)}_createCircleBucket(e){return new CircleBucket(e,this._level,new VertexMemoryBuffer_h,new IndexMemoryBuffer_r)}_createSymbolBucket(e){const t=this._tile;return new SymbolBucket(e,this._level,new VertexMemoryBuffer_e(e.hasDataDrivenIcon),new IndexMemoryBuffer_r,new VertexMemoryBuffer_e(e.hasDataDrivenText),new IndexMemoryBuffer_r,t.placementEngine,t.getWorkerTileHandler())}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/WorkerTile.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var WorkerTile = (class{constructor(e,t,i,n){this.status=enums_I.INITIALIZED,this.placementEngine=new Placement_f,this.tileKey=e,this.refKeys=t,this._workerTileHandler=i,this._styleRepository=n}release(){this.tileKey=\"\",this.refKeys=null,this.status=enums_I.INITIALIZED,this._workerTileHandler=null}async parse(r,i,n){const a=n&&n.signal;if(Object(maybe[\"h\" /* isSome */])(a)){const e=()=>{a.removeEventListener(\"abort\",e),this.status=enums_I.INVALID};a.addEventListener(\"abort\",e)}let o;try{o=await this._parse(r,n)}catch(e){if(Object(promiseUtils[\"n\" /* isAbortError */])(e))throw e;return{result:[],transferList:[]}}this.status=enums_I.READY;const l=[];for(const e of o){const t=e.serialize();l.push(t)}return{result:l,transferList:l.length<=i&&l}}setObsolete(){this.status=enums_I.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}async _parse(e,t){const r=e.sourceName2DataAndRefKey;if(0===Object.keys(r).length)return[];this.status=enums_I.MODIFIED;return new TileParser(r,this,t.client,this._styleRepository,e.styleLayerUIDs).parse(t)}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/WorkerTileHandler.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var WorkerTileHandler = __webpack_exports__[\"default\"] = (class{constructor(){this._spriteInfo={},this._glyphInfo={}}reset(){return this._spriteInfo={},this._glyphInfo={},Object(promiseUtils[\"u\" /* resolve */])()}getLayers(){var e;return null==(e=this._styleRepository)?void 0:e.layers}async createTileAndParse(e,s){const{key:o}=e,i={};for(const t of Object.keys(e.sourceName2DataAndRefKey)){const s=e.sourceName2DataAndRefKey[t];i[t]=s.refKey}const n=new WorkerTile(o,i,this,this._styleRepository);try{return await n.parse(e,this._vectorTileLayerMaxBuffers,s)}catch(e){if(n.setObsolete(),n.release(),!Object(promiseUtils[\"n\" /* isAbortError */])(e))throw e;return null}}updateStyle(e){if(!e||0===e.length||!this._styleRepository)return;const t=this._styleRepository;for(const s of e){const e=s.type,r=s.data;switch(e){case 0:t.setPaintProperties(r.layer,r.paint);break;case 1:t.setLayoutProperties(r.layer,r.layout);break;case 3:t.deleteStyleLayer(r.layerName);break;case 2:t.setStyleLayer(r.layer,r.index)}}}setStyle(e){this._styleRepository=new StyleRepository[\"a\" /* default */](e.style),this._spriteInfo={},this._glyphInfo={},this._vectorTileLayerMaxBuffers=e.vectorTileLayerMaxBuffers}fetchSprites(t,s,r){const o=[],i=this._spriteInfo;return t.forEach((e=>{void 0===i[e]&&o.push(e)})),0===o.length?Object(promiseUtils[\"u\" /* resolve */])():s.invoke(\"getSprites\",o,{signal:r&&r.signal}).then((e=>{for(const t in e){const s=e[t];i[t]=s}}))}getSpriteItems(){return this._spriteInfo}fetchGlyphs(t,s,r,o,i){const n=[];let a=this._glyphInfo[s];return a?r.forEach((e=>{a[e]||n.push(e)})):(a=this._glyphInfo[s]=[],r.forEach((e=>n.push(e)))),0===n.length?Object(promiseUtils[\"u\" /* resolve */])():o.invoke(\"getGlyphs\",{tileID:t,font:s,codePoints:n},i).then((e=>{for(let t=0;t<e.length;t++)e[t]&&(a[t]=e[t])}))}getGlyphItems(e){return this._glyphInfo[e]}});\n\n\n/***/ }),\n\n/***/ \"X2wA\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export a */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return o; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return n; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function o(e,n,o){return e(o={path:n,exports:{},require:function(e,n){return r(null==n&&o.path)}},o.exports),o.exports}function r(){throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\")}\n\n\n/***/ }),\n\n/***/ \"jIHu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ANGLE_FACTOR_256 */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return J; });\n/* unused harmony export ATTRIBUTE_DATA_DD0 */\n/* unused harmony export ATTRIBUTE_DATA_DD1 */\n/* unused harmony export ATTRIBUTE_DATA_FILTER_FLAGS */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return K; });\n/* unused harmony export ATTRIBUTE_STORE_TEXTURE_SIZE */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return k; });\n/* unused harmony export COLLISION_BOX_PADDING */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return g; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return f; });\n/* unused harmony export COLLISION_PLACEMENT_PADDING */\n/* unused harmony export COLLISION_TILE_BOX_SIZE */\n/* unused harmony export DEBUG_LABELS */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return Q; });\n/* unused harmony export EXTRUDE_SCALE */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return P; });\n/* unused harmony export GLYPH_SIZE */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return x; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return w; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return O; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return S; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return s; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return N; });\n/* unused harmony export MAX_GPU_UPLOADS_PER_FRAME */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"q\", function() { return i; });\n/* unused harmony export RASTER_TILE_SIZE */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"r\", function() { return X; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"s\", function() { return A; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"t\", function() { return B; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"u\", function() { return C; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"v\", function() { return D; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"w\", function() { return z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"x\", function() { return y; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"y\", function() { return E; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"z\", function() { return F; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"A\", function() { return G; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"B\", function() { return H; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"C\", function() { return u; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"D\", function() { return j; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"E\", function() { return R; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"F\", function() { return o; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"G\", function() { return V; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"H\", function() { return U; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"I\", function() { return T; });\n/* unused harmony export WEBGL_MAX_INNER_STOPS */\n/* unused harmony export WEBGL_MAX_STOPS */\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst t=8,e=6,c=1e-30,h=64,i=4294967295,o=512,a=256,d=256/360,n=!1,p=128,r=8,s=29,f=1,g=16,l=16,m=4,v=8,w=50,x=10,b=24,j=8,k={metrics:{width:15,height:17,left:0,top:-7,advance:14}},q=1024,u=0,y=0,z=0,A=1,B=2,C=3,D=4,E=5,F=6,G=5,H=6,I=0,J=1,K=2,L=3,M=3,N=2,O=1,P=2,Q=4,R=2.5,S=6,T=5,U=6,V=1.15,W=2,X=2;\n\n\n/***/ }),\n\n/***/ \"qcDN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ __webpack_exports__[\"a\"] = (class{constructor(t=0,h=0,i=0,s=0){this.x=t,this.y=h,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}