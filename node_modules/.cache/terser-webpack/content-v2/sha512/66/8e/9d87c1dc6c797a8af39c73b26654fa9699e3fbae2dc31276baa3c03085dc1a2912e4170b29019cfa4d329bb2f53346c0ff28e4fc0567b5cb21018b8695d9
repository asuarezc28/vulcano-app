{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{DlAm:function(e,t,a){\"use strict\";a.r(t);var r=a(\"pO5D\"),s=a(\"wSAH\"),n=a(\"f/qv\"),u=a(\"nR38\"),i=a(\"srIe\"),l=(a(\"6S2I\"),a(\"zqDF\"),a(\"WbKI\")),o=a(\"04ZG\"),c=a(\"zlDU\"),d=a(\"4EHJ\"),h=(a(\"ju1D\"),a(\"9AIY\"),a(\"9MzC\")),y=a(\"OvF4\"),p=a(\"Lqtk\"),m=a(\"bV/r\"),b=a(\"ZYtI\"),f=a(\"kUx5\"),g=a(\"Xzbc\"),F=a(\"/uz8\"),O=a(\"iNG6\");const R=new Set([\"Feature Layer\",\"Table\"]);let q=class extends m.a{constructor(){super(...arguments),this.type=\"feature-layer\"}load(e){const t=Object(i.h)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Object(h.u)(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:t,dynamicDataSource:a,gdbVersion:r,spatialReference:n,fieldsIndex:u}=this.layer,i=Object(s.a)(\"featurelayer-pbf\")&&e?\"pbf\":\"json\";return new F.a({url:t.path,format:i,fieldsIndex:u,dynamicDataSource:a,gdbVersion:r,sourceSpatialReference:n})}async addAttachment(e,t){await this.load();const a=e.attributes[this.layer.objectIdField],r=this.layer.parsedUrl.path+\"/\"+a+\"/addAttachment\",s=this._getLayerRequestOptions(),n=this._getFormDataForAttachment(t,s.query);try{const e=await Object(p.default)(r,{body:n});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(a,e)}}async updateAttachment(e,t,a){await this.load();const r=e.attributes[this.layer.objectIdField],s=this.layer.parsedUrl.path+\"/\"+r+\"/updateAttachment\",n=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(a,n.query);try{const e=await Object(p.default)(s,{body:u});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(r,e)}}async applyEdits(e,t){await this.load();const a=e.addFeatures.map(this._serializeFeature,this),r=e.updateFeatures.map(this._serializeFeature,this),s=this._getFeatureIds(e.deleteFeatures);Object(f.b)(a,r,this.layer.spatialReference);const n=[],u=[],i=[...e.deleteAttachments];for(const d of e.addAttachments)n.push(await this._serializeAttachment(d));for(const d of e.updateAttachments)u.push(await this._serializeAttachment(d));const l=n.length||u.length||i.length?{adds:n,updates:u,deletes:i}:null,o=this._getLayerRequestOptions({method:\"post\",query:{adds:a.length?JSON.stringify(a):null,updates:r.length?JSON.stringify(r):null,deletes:s.length?s.join(\",\"):null,gdbVersion:null==t?void 0:t.gdbVersion,rollbackOnFailure:null==t?void 0:t.rollbackOnFailureEnabled,useGlobalIds:null==t?void 0:t.globalIdUsed,attachments:l&&JSON.stringify(l)}}),c=await Object(p.default)(this.layer.parsedUrl.path+\"/applyEdits\",o);return this._createEditsResult(c)}async deleteAttachments(e,t){await this.load();const a=e.attributes[this.layer.objectIdField],r=this.layer.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await Object(p.default)(r,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(e){throw this._createAttachmentErrorResult(a,e)}}fetchRecomputedExtents(e={}){return this.load({signal:e.signal}).then(async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:r}=this.layer,{data:s}=await Object(p.default)(`${r}/${a}`,t),{id:n,extent:u,fullExtent:i,timeExtent:l}=s,o=u||i;return{id:n,fullExtent:o&&y.a.fromJSON(o),timeExtent:l&&b.a.fromJSON({start:l[0],end:l[1]})}})}async queryAttachments(e,t={}){const{parsedUrl:a}=this.layer,r=a.path;await this.load();const s=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,a=[];for(const e of t){const t=r+\"/\"+e+\"/attachments\";a.push(Object(p.default)(t,s))}return Object(h.b)(a).then(e=>t.map((t,a)=>({parentObjectId:t,attachmentInfos:e[a].data.attachmentInfos}))).then(e=>Object(g.b)(e,r))}return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async _fetchService(e){let t=this.layer.sourceJSON;if(!t){const{data:a}=await Object(p.default)(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:Object(s.a)(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:e}));t=a}this.sourceJSON=this._patchServiceJSON(t);const a=t.type;if(!R.has(a))throw new c.a(\"feature-layer-source:unsupported-type\",`Source type \"${a}\" is not supported`)}_patchServiceJSON(e){var t;if(\"Table\"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){const t=Object(O.c)(e.geometryType).renderer;Object(u.c)(\"drawingInfo.renderer\",t,e)}return e}_serializeFeature(e){const{geometry:t,attributes:a}=e;return Object(i.g)(t)?{attributes:a}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:a}}async _serializeAttachment(e){const{feature:t,attachment:a}=e,{globalId:r,name:s,contentType:n,data:u,uploadId:i}=a,l={globalId:r,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(l.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),i)l.uploadId=i;else if(u){const e=await async function(e){return\"string\"==typeof e?Object(d.i)(e)||{data:e}:Object(h.c)((t,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(Object(d.i)(r.result)),r.onerror=e=>a(e)})}(u);l.contentType=e.mediaType,l.data=e.data,u instanceof File&&(l.name=u.name)}return s&&(l.name=s),n&&(l.contentType=n),l}_getFeatureIds(e){const t=e[0];return t?\"objectId\"in t?this._getIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map(e=>e.attributes&&e.attributes[t])}_getIdsFromFeatureIdentifier(e){return e.map(e=>e.objectId)}_createEditsResult(e){const t=e.data,a=e.data&&e.data.attachments;return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:a&&a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:a&&a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:a&&a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new c.a(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){return{objectId:e,globalId:null,error:new c.a(\"feature-layer-source:attachment-failure\",t.details.messages&&t.details.messages[0]||t.message,{code:t.details.httpStatus||t.details.messageCode})}}_getFormDataForAttachment(e,t){const a=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(a)for(const r in t){const e=t[r];null!=e&&(a.set?a.set(r,e):a.append(r,e))}return a}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:a,dynamicDataSource:r}=this.layer;return{...e,query:Object(n.c)({gdbVersion:a,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:\"json\",...this.layer.customParameters,...null==e?void 0:e.query}),responseType:\"json\"}}};Object(r.a)([Object(l.b)()],q.prototype,\"type\",void 0),Object(r.a)([Object(l.b)({constructOnly:!0})],q.prototype,\"layer\",void 0),Object(r.a)([Object(l.b)({readOnly:!0,dependsOn:[\"layer.parsedUrl\",\"layer.gdbVersion\",\"layer.dynamicDataSource\",\"layer.fieldsIndex\"]})],q.prototype,\"queryTask\",null),q=Object(r.a)([Object(o.a)(\"esri.layers.graphics.sources.FeatureLayerSource\")],q),t.default=q},iNG6:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return i}),a.d(t,\"b\",function(){return l}),a.d(t,\"c\",function(){return u});var r=a(\"wSAH\"),s=a(\"f/qv\"),n=a(\"gkbi\");function u(e){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===e||\"esriGeometryMultipoint\"===e?n.a:\"esriGeometryPolyline\"===e?n.c:n.b}}}function i(e,t){if(Object(r.a)(\"csp-restrictions\"))return()=>({[t]:null,...e});try{let a=`this.${t} = null;`;for(const t in e)a+=`this${t.indexOf(\".\")?`[\"${t}\"]`:\".\"+t} = ${JSON.stringify(e[t])};`;const r=new Function(a);return()=>new r}catch(a){return()=>({[t]:null,...e})}}function l(e={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:Object(s.a)(e)}}]}}}]);","name":"115.ba45e109d6e7b69cc696.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[115],{\n\n/***/ \"DlAm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"pO5D\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"f/qv\");\n/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"nR38\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"6S2I\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"zqDF\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"WbKI\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"04ZG\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"zlDU\");\n/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"4EHJ\");\n/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"ju1D\");\n/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"9AIY\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"9MzC\");\n/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"OvF4\");\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"Lqtk\");\n/* harmony import */ var _core_Loadable_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"bV/r\");\n/* harmony import */ var _TimeExtent_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"ZYtI\");\n/* harmony import */ var _tasks_operations_zscale_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"kUx5\");\n/* harmony import */ var _tasks_operations_queryAttachments_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"Xzbc\");\n/* harmony import */ var _tasks_QueryTask_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"/uz8\");\n/* harmony import */ var _support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"iNG6\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst q=new Set([\"Feature Layer\",\"Table\"]);let I=class extends _core_Loadable_js__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"]{constructor(){super(...arguments),this.type=\"feature-layer\"}load(e){const t=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__[/* isSome */ \"h\"])(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__[/* resolve */ \"u\"])(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:r,dynamicDataSource:a,gdbVersion:s,spatialReference:o,fieldsIndex:i}=this.layer,u=Object(_core_has_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(\"featurelayer-pbf\")&&e?\"pbf\":\"json\";return new _tasks_QueryTask_js__WEBPACK_IMPORTED_MODULE_20__[/* default */ \"a\"]({url:r.path,format:u,fieldsIndex:i,dynamicDataSource:a,gdbVersion:s,sourceSpatialReference:o})}async addAttachment(e,t){await this.load();const r=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+r+\"/addAttachment\",s=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,s.query);try{const e=await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(r,e)}}async updateAttachment(e,t,r){await this.load();const a=e.attributes[this.layer.objectIdField],s=this.layer.parsedUrl.path+\"/\"+a+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),i=this._getFormDataForAttachment(r,o.query);try{const e=await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(s,{body:i});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(e){throw this._createAttachmentErrorResult(a,e)}}async applyEdits(e,t){await this.load();const r=e.addFeatures.map(this._serializeFeature,this),a=e.updateFeatures.map(this._serializeFeature,this),s=this._getFeatureIds(e.deleteFeatures);Object(_tasks_operations_zscale_js__WEBPACK_IMPORTED_MODULE_18__[/* unapplyEditsZUnitScaling */ \"b\"])(r,a,this.layer.spatialReference);const o=[],i=[],u=[...e.deleteAttachments];for(const t of e.addAttachments)o.push(await this._serializeAttachment(t));for(const t of e.updateAttachments)i.push(await this._serializeAttachment(t));const n=o.length||i.length||u.length?{adds:o,updates:i,deletes:u}:null,l=this._getLayerRequestOptions({method:\"post\",query:{adds:r.length?JSON.stringify(r):null,updates:a.length?JSON.stringify(a):null,deletes:s.length?s.join(\",\"):null,gdbVersion:null==t?void 0:t.gdbVersion,rollbackOnFailure:null==t?void 0:t.rollbackOnFailureEnabled,useGlobalIds:null==t?void 0:t.globalIdUsed,attachments:n&&JSON.stringify(n)}}),d=await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(this.layer.parsedUrl.path+\"/applyEdits\",l);return this._createEditsResult(d)}async deleteAttachments(e,t){await this.load();const r=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+r+\"/deleteAttachments\";try{return(await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(e){throw this._createAttachmentErrorResult(r,e)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:r,url:a}=this.layer,{data:s}=await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(`${a}/${r}`,t),{id:o,extent:i,fullExtent:u,timeExtent:n}=s,l=i||u;return{id:o,fullExtent:l&&_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].fromJSON(l),timeExtent:n&&_TimeExtent_js__WEBPACK_IMPORTED_MODULE_17__[/* default */ \"a\"].fromJSON({start:n[0],end:n[1]})}}))}async queryAttachments(e,t={}){const{parsedUrl:r}=this.layer,a=r.path;await this.load();const s=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,r=[];for(const e of t){const t=a+\"/\"+e+\"/attachments\";r.push(Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(t,s))}return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__[/* all */ \"b\"])(r).then((e=>t.map(((t,r)=>({parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}))))).then((e=>Object(_tasks_operations_queryAttachments_js__WEBPACK_IMPORTED_MODULE_19__[/* processAttachmentQueryResult */ \"b\"])(e,a)))}return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:{...this.layer.customParameters,...null==t?void 0:t.query}})}async _fetchService(e){let r=this.layer.sourceJSON;if(!r){const{data:a}=await Object(_request_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:Object(_core_has_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:e}));r=a}this.sourceJSON=this._patchServiceJSON(r);const a=r.type;if(!q.has(a))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"](\"feature-layer-source:unsupported-type\",`Source type \"${a}\" is not supported`)}_patchServiceJSON(e){var t;if(\"Table\"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){const t=Object(_support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_21__[/* createDrawingInfo */ \"c\"])(e.geometryType).renderer;Object(_core_object_js__WEBPACK_IMPORTED_MODULE_3__[/* setDeepValue */ \"c\"])(\"drawingInfo.renderer\",t,e)}return e}_serializeFeature(e){const{geometry:t,attributes:r}=e;return Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__[/* isNone */ \"g\"])(t)?{attributes:r}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:r}}async _serializeAttachment(e){const{feature:t,attachment:r}=e,{globalId:a,name:s,contentType:o,data:i,uploadId:u}=r,n={globalId:a,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(n.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),u)n.uploadId=u;else if(i){const e=await async function(e){if(\"string\"==typeof e){return Object(_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_10__[/* dataComponents */ \"i\"])(e)||{data:e}}return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__[/* create */ \"c\"])(((t,r)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(Object(_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_10__[/* dataComponents */ \"i\"])(a.result)),a.onerror=e=>r(e)}))}(i);n.contentType=e.mediaType,n.data=e.data,i instanceof File&&(n.name=i.name)}return s&&(n.name=s),o&&(n.contentType=o),n}_getFeatureIds(e){const t=e[0];return t?\"objectId\"in t?this._getIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map((e=>e.attributes&&e.attributes[t]))}_getIdsFromFeatureIdentifier(e){return e.map((e=>e.objectId))}_createEditsResult(e){const t=e.data,r=e.data&&e.data.attachments;return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:r&&r.addResults?r.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:r&&r.updateResults?r.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:r&&r.deleteResults?r.deleteResults.map(this._createFeatureEditResult,this):[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new _core_Error_js__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"](\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const r=t.details.messages&&t.details.messages[0]||t.message,a=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new _core_Error_js__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"](\"feature-layer-source:attachment-failure\",r,{code:a})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const e in t){const a=t[e];null!=a&&(r.set?r.set(e,a):r.append(e,a))}return r}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:a,dynamicDataSource:s}=this.layer;return{...e,query:Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_2__[/* fixJson */ \"c\"])({gdbVersion:a,layer:s?JSON.stringify({source:s}):void 0,...t.query,f:\"json\",...this.layer.customParameters,...null==e?void 0:e.query}),responseType:\"json\"}}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__[/* property */ \"b\"])()],I.prototype,\"type\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__[/* property */ \"b\"])({constructOnly:!0})],I.prototype,\"layer\",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__[/* property */ \"b\"])({readOnly:!0,dependsOn:[\"layer.parsedUrl\",\"layer.gdbVersion\",\"layer.dynamicDataSource\",\"layer.fieldsIndex\"]})],I.prototype,\"queryTask\",null),I=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ \"a\"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__[/* subclass */ \"a\"])(\"esri.layers.graphics.sources.FeatureLayerSource\")],I);var _=I;/* harmony default export */ __webpack_exports__[\"default\"] = (_);\n\n\n/***/ }),\n\n/***/ \"iNG6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return s; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return u; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return i; });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"f/qv\");\n/* harmony import */ var _symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"gkbi\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction i(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_2__[/* defaultPointSymbolJSON */ \"a\"]:\"esriGeometryPolyline\"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_2__[/* defaultPolylineSymbolJSON */ \"c\"]:_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_2__[/* defaultPolygonSymbolJSON */ \"b\"]}}}function s(r,e){if(Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(\"csp-restrictions\"))return()=>({[e]:null,...r});try{let t=`this.${e} = null;`;for(const e in r){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(r[e])};`}const n=new Function(t);return()=>new n}catch(t){return()=>({[e]:null,...r})}}function u(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_1__[/* clone */ \"a\"])(t)}}]}\n\n\n/***/ })\n\n}]);","inputSourceMap":null}