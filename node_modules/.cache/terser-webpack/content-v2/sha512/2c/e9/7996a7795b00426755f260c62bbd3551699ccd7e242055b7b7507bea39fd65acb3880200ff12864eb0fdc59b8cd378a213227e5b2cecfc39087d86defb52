{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{RLtZ:function(e,t,r){\"use strict\";r.r(t);var i=r(\"pO5D\"),o=(r(\"wSAH\"),r(\"f/qv\")),n=r(\"nR38\"),a=r(\"srIe\"),s=r(\"6S2I\"),l=r(\"zqDF\"),d=r(\"WbKI\"),p=r(\"r88o\"),u=r(\"04ZG\"),c=r(\"Cduq\"),b=r(\"zlDU\"),y=r(\"4EHJ\"),f=(r(\"ju1D\"),r(\"9AIY\"),r(\"9MzC\")),j=r(\"Fjfq\"),O=r(\"SFah\"),h=r(\"Lqtk\"),v=r(\"pqNC\"),g=r(\"5pQd\"),w=r(\"IvSi\"),m=r(\"uRH/\"),I=r(\"ofM5\"),S=r(\"gLc9\"),C=r(\"PVlI\"),x=r(\"DbUH\"),F=r(\"WmKv\"),R=r(\"L+uT\"),T=r(\"9Ruv\"),P=r(\"lq5k\"),q=r(\"ag7Y\");let B=class extends q.a{constructor(e){super(e),this.field=null,this.type=null}clone(){return console.warn(\".clone() is not implemented for \"+this.declaredClass),null}};Object(i.a)([Object(d.b)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],B.prototype,\"field\",void 0),Object(i.a)([Object(d.b)({readOnly:!0,nonNullable:!0,json:{read:!1}})],B.prototype,\"type\",void 0),B=Object(i.a)([Object(u.a)(\"esri.layers.pointCloudFilters.PointCloudFilter\")],B);var L,N=B,E=r(\"RI0u\");let V=L=class extends N{constructor(e){super(e),this.requiredClearBits=null,this.requiredSetBits=null,this.type=\"bitfield\"}clone(){return new L({field:this.field,requiredClearBits:Object(o.a)(this.requiredClearBits),requiredSetBits:Object(o.a)(this.requiredSetBits)})}};Object(i.a)([Object(d.b)({type:[l.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],V.prototype,\"requiredClearBits\",void 0),Object(i.a)([Object(d.b)({type:[l.a],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],V.prototype,\"requiredSetBits\",void 0),Object(i.a)([Object(E.a)({pointCloudBitfieldFilter:\"bitfield\"})],V.prototype,\"type\",void 0),V=L=Object(i.a)([Object(u.a)(\"esri.layers.pointCloudFilters.PointCloudBitfieldFilter\")],V);var D,_=V;let A=D=class extends N{constructor(e){super(e),this.includedReturns=[],this.type=\"return\"}clone(){return new D({field:this.field,includedReturns:Object(o.a)(this.includedReturns)})}};Object(i.a)([Object(d.b)({type:[[\"firstOfMany\",\"last\",\"lastOfMany\",\"single\"]],json:{write:{enabled:!0,isRequired:!0}}})],A.prototype,\"includedReturns\",void 0),Object(i.a)([Object(E.a)({pointCloudReturnFilter:\"return\"})],A.prototype,\"type\",void 0),A=D=Object(i.a)([Object(u.a)(\"esri.layers.pointCloudFilters.PointCloudReturnFilter\")],A);var k,G=A;let K=k=class extends N{constructor(e){super(e),this.mode=\"exclude\",this.type=\"value\",this.values=[]}clone(){return new k({field:this.field,mode:this.mode,values:Object(o.a)(this.values)})}};Object(i.a)([Object(d.b)({type:[\"exclude\",\"include\"],json:{write:{enabled:!0,isRequired:!0}}})],K.prototype,\"mode\",void 0),Object(i.a)([Object(E.a)({pointCloudValueFilter:\"value\"})],K.prototype,\"type\",void 0),Object(i.a)([Object(d.b)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],K.prototype,\"values\",void 0),K=k=Object(i.a)([Object(u.a)(\"esri.layers.pointCloudFilters.PointCloudValueFilter\")],K);const M={key:\"type\",base:N,typeMap:{value:K,bitfield:_,return:G}};var z,H=r(\"dzHX\"),$=r(\"Tg0p\");let U=z=class extends H.a{constructor(e){super(e),this.type=\"point-cloud-rgb\",this.field=null}clone(){return new z({...this.cloneProperties(),field:Object(o.a)(this.field)})}};Object(i.a)([Object(E.a)({pointCloudRGBRenderer:\"point-cloud-rgb\"})],U.prototype,\"type\",void 0),Object(i.a)([Object(d.b)({type:String,json:{write:!0}})],U.prototype,\"field\",void 0),U=z=Object(i.a)([Object(u.a)(\"esri.renderers.PointCloudRGBRenderer\")],U);var J=U,W=r(\"V4u7\"),Y=r(\"ofcG\");const Z={key:\"type\",base:H.a,typeMap:{\"point-cloud-class-breaks\":$.a,\"point-cloud-rgb\":J,\"point-cloud-stretch\":W.a,\"point-cloud-unique-value\":Y.a},errorContext:\"renderer\"},Q=s.a.getLogger(\"esri.layers.PointCloudLayer\"),X=Object(R.a)();let ee=class extends(Object(P.a)(Object(C.a)(Object(m.a)(Object(x.a)(Object(F.a)(Object(g.a)(v.a))))))){constructor(...e){super(...e),this.operationalLayerType=\"PointCloudLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.opacity=1,this.filters=[],this.fields=null,this.outFields=null,this.path=null,this.legendEnabled=!0,this.renderer=null,this.type=\"point-cloud\"}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}get defaultPopupTemplate(){return this.attributeStorageInfo?this.createPopupTemplate():null}get fieldsIndex(){return new S.a(this.fields)}getFieldDomain(e){const t=this.fieldsIndex.get(e);return t&&t.domain?t.domain:null}readServiceFields(e,t,r){return Array.isArray(e)?e.map(e=>{const t=new I.a;return\"FieldTypeInteger\"===e.type&&((e=Object(o.a)(e)).type=\"esriFieldTypeInteger\"),t.read(e,r),t}):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map(e=>new I.a({name:e.name,type:\"ELEVATION\"===e.name?\"double\":\"integer\"})):null}set elevationInfo(e){this._set(\"elevationInfo\",e),this._validateElevationInfo()}writeRenderer(e,t,r,i){Object(n.c)(\"layerDefinition.drawingInfo.renderer\",e.write(null,i),t)}load(e){const t=Object(a.h)(e)?e.signal:null,r=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).then(()=>this._fetchService(t),()=>this._fetchService(t));return this.addResolvingPromise(r),Object(f.u)(this)}createPopupTemplate(e){const t=Object(T.a)(this,e);return this.formatPopupTemplateReturnsField(t),this.formatPopupTemplateRGBField(t),t}formatPopupTemplateReturnsField(e){const t=this.fieldsIndex.get(\"RETURNS\");if(!t)return;const r=e.fieldInfos.find(e=>e.fieldName===t.name);if(!r)return;const i=new j.a({name:\"pcl-returns-decoded\",title:t.alias||t.name,expression:`\\n        var returnValue = $feature.${t.name};\\n        return (returnValue % 16) + \" / \" + Floor(returnValue / 16);\\n      `});e.expressionInfos=[...e.expressionInfos||[],i],r.fieldName=\"expression/pcl-returns-decoded\"}formatPopupTemplateRGBField(e){const t=this.fieldsIndex.get(\"RGB\");if(!t)return;const r=e.fieldInfos.find(e=>e.fieldName===t.name);if(!r)return;const i=new j.a({name:\"pcl-rgb-decoded\",title:t.alias||t.name,expression:`\\n        var rgb = $feature.${t.name};\\n        var red = Floor(rgb / 65536, 0);\\n        var green = Floor((rgb - (red * 65536)) / 256,0);\\n        var blue = rgb - (red * 65536) - (green * 256);\\n\\n        return \"rgb(\" + red + \",\" + green + \",\" + blue + \")\";\\n      `});e.expressionInfos=[...e.expressionInfos||[],i],r.fieldName=\"expression/pcl-rgb-decoded\"}async queryCachedStatistics(e,t){if(await this.load(t),!this.attributeStorageInfo)throw new b.a(\"scenelayer:no-cached-statistics\",\"Cached statistics are not available for this layer\");const r=this.fieldsIndex.get(e);if(!r)throw new b.a(\"pointcloudlayer:field-unexisting\",`Field '${e}' does not exist on the layer`);for(const i of this.attributeStorageInfo)if(i.name===r.name){const e=Object(y.x)(this.parsedUrl.path,\"./statistics/\"+i.key);return Object(h.default)(e,{query:{f:\"json\"},responseType:\"json\",signal:t?t.signal:null}).then(e=>e.data)}throw new b.a(\"pointcloudlayer:no-cached-statistics\",\"Cached statistics for this attribute are not available\")}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"point-cloud\"},e)}async save(){return this._debouncedSaveOperations(0,{getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"point-cloud\"})}validateLayer(e){if(e.layerType&&\"PointCloud\"!==e.layerType)throw new b.a(\"pointcloudlayer:layer-type-not-supported\",\"PointCloudLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new b.a(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x-2.x\"});if(this.version.major>2)throw new b.a(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x-2.x\"})}hasCachedStatistics(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some(t=>t.name===e)}_getTypeKeywords(){return[\"PointCloud\"]}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"absolute-height\"!==e.mode&&Q.warn(\".elevationInfo=\",\"Point cloud layers only support absolute-height elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&Q.warn(\".elevationInfo=\",\"Point cloud layers do not support featureExpressionInfo\"))}};Object(i.a)([Object(d.b)({type:[\"PointCloudLayer\"]})],ee.prototype,\"operationalLayerType\",void 0),Object(i.a)([Object(d.b)(w.g)],ee.prototype,\"popupEnabled\",void 0),Object(i.a)([Object(d.b)({type:O.a,json:{name:\"popupInfo\",write:!0}})],ee.prototype,\"popupTemplate\",void 0),Object(i.a)([Object(d.b)({readOnly:!0,json:{read:!1},dependsOn:[\"fields\",\"title\",\"attributeStorageInfo\"]})],ee.prototype,\"defaultPopupTemplate\",null),Object(i.a)([Object(d.b)({readOnly:!0,json:{write:!1,read:!1,origins:{\"web-document\":{write:!1,read:!1}}}})],ee.prototype,\"opacity\",void 0),Object(i.a)([Object(d.b)({type:[\"show\",\"hide\"]})],ee.prototype,\"listMode\",void 0),Object(i.a)([Object(d.b)({types:[M],json:{origins:{service:{read:{source:\"filters\"}}},name:\"layerDefinition.filters\",write:!0}})],ee.prototype,\"filters\",void 0),Object(i.a)([Object(d.b)({type:[I.a]})],ee.prototype,\"fields\",void 0),Object(i.a)([Object(d.b)({readOnly:!0,dependsOn:[\"fields\"]})],ee.prototype,\"fieldsIndex\",null),Object(i.a)([Object(p.a)(\"service\",\"fields\",[\"fields\",\"attributeStorageInfo\"])],ee.prototype,\"readServiceFields\",null),Object(i.a)([Object(d.b)(X.outFields)],ee.prototype,\"outFields\",void 0),Object(i.a)([Object(d.b)({readOnly:!0})],ee.prototype,\"attributeStorageInfo\",void 0),Object(i.a)([Object(d.b)(w.b)],ee.prototype,\"elevationInfo\",null),Object(i.a)([Object(d.b)({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0},\"portal-item\":{read:!0,write:!0}},read:!1}})],ee.prototype,\"path\",void 0),Object(i.a)([Object(d.b)(w.d)],ee.prototype,\"legendEnabled\",void 0),Object(i.a)([Object(d.b)({types:Z,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:{target:{\"layerDefinition.drawingInfo.renderer\":{types:Z},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}})],ee.prototype,\"renderer\",void 0),Object(i.a)([Object(c.a)(\"renderer\")],ee.prototype,\"writeRenderer\",null),Object(i.a)([Object(d.b)({json:{read:!1},readOnly:!0})],ee.prototype,\"type\",void 0),ee=Object(i.a)([Object(u.a)(\"esri.layers.PointCloudLayer\")],ee),t.default=ee}}]);","name":"132.7d1ca5bab1e4a10ba6ba.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[132],{\n\n/***/ \"RLtZ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/lang.js\nvar lang = __webpack_require__(\"f/qv\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/object.js\nvar object = __webpack_require__(\"nR38\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js\nvar reader = __webpack_require__(\"r88o\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js\nvar writer = __webpack_require__(\"Cduq\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Error.js\nvar Error = __webpack_require__(\"zlDU\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/popup/ExpressionInfo.js\nvar ExpressionInfo = __webpack_require__(\"Fjfq\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/PopupTemplate.js + 3 modules\nvar PopupTemplate = __webpack_require__(\"SFah\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/request.js\nvar request = __webpack_require__(\"Lqtk\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/Layer.js\nvar Layer = __webpack_require__(\"pqNC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js + 2 modules\nvar MultiOriginJSONSupport = __webpack_require__(\"5pQd\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/commonProperties.js\nvar commonProperties = __webpack_require__(\"IvSi\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js + 1 modules\nvar OperationalLayer = __webpack_require__(\"uRH/\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/Field.js\nvar Field = __webpack_require__(\"ofM5\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/FieldsIndex.js\nvar FieldsIndex = __webpack_require__(\"gLc9\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/mixins/ArcGISService.js\nvar ArcGISService = __webpack_require__(\"PVlI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/mixins/PortalLayer.js\nvar PortalLayer = __webpack_require__(\"DbUH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js\nvar ScaleRangeLayer = __webpack_require__(\"WmKv\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/support/fieldProperties.js\nvar fieldProperties = __webpack_require__(\"L+uT\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/support/popupUtils.js\nvar popupUtils = __webpack_require__(\"9Ruv\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/layers/mixins/SceneService.js + 2 modules\nvar SceneService = __webpack_require__(\"lq5k\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/JSONSupport.js\nvar JSONSupport = __webpack_require__(\"ag7Y\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/pointCloudFilters/PointCloudFilter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet PointCloudFilter_t=class extends JSONSupport[\"a\" /* JSONSupport */]{constructor(r){super(r),this.field=null,this.type=null}clone(){return console.warn(\".clone() is not implemented for \"+this.declaredClass),null}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:String,json:{write:{enabled:!0,isRequired:!0}}})],PointCloudFilter_t.prototype,\"field\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,nonNullable:!0,json:{read:!1}})],PointCloudFilter_t.prototype,\"type\",void 0),PointCloudFilter_t=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.layers.pointCloudFilters.PointCloudFilter\")],PointCloudFilter_t);var p=PointCloudFilter_t;/* harmony default export */ var PointCloudFilter = (p);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js\nvar enumeration = __webpack_require__(\"RI0u\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/pointCloudFilters/PointCloudBitfieldFilter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar PointCloudBitfieldFilter_p;let d=PointCloudBitfieldFilter_p=class extends PointCloudFilter{constructor(r){super(r),this.requiredClearBits=null,this.requiredSetBits=null,this.type=\"bitfield\"}clone(){return new PointCloudBitfieldFilter_p({field:this.field,requiredClearBits:Object(lang[\"a\" /* clone */])(this.requiredClearBits),requiredSetBits:Object(lang[\"a\" /* clone */])(this.requiredSetBits)})}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[ensureType[\"a\" /* Integer */]],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],d.prototype,\"requiredClearBits\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[ensureType[\"a\" /* Integer */]],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],d.prototype,\"requiredSetBits\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(enumeration[\"a\" /* enumeration */])({pointCloudBitfieldFilter:\"bitfield\"})],d.prototype,\"type\",void 0),d=PointCloudBitfieldFilter_p=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.layers.pointCloudFilters.PointCloudBitfieldFilter\")],d);var u=d;/* harmony default export */ var PointCloudBitfieldFilter = (u);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/pointCloudFilters/PointCloudReturnFilter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar PointCloudReturnFilter_p;let PointCloudReturnFilter_u=PointCloudReturnFilter_p=class extends PointCloudFilter{constructor(r){super(r),this.includedReturns=[],this.type=\"return\"}clone(){return new PointCloudReturnFilter_p({field:this.field,includedReturns:Object(lang[\"a\" /* clone */])(this.includedReturns)})}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[[\"firstOfMany\",\"last\",\"lastOfMany\",\"single\"]],json:{write:{enabled:!0,isRequired:!0}}})],PointCloudReturnFilter_u.prototype,\"includedReturns\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(enumeration[\"a\" /* enumeration */])({pointCloudReturnFilter:\"return\"})],PointCloudReturnFilter_u.prototype,\"type\",void 0),PointCloudReturnFilter_u=PointCloudReturnFilter_p=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.layers.pointCloudFilters.PointCloudReturnFilter\")],PointCloudReturnFilter_u);var n=PointCloudReturnFilter_u;/* harmony default export */ var PointCloudReturnFilter = (n);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/pointCloudFilters/PointCloudValueFilter.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar PointCloudValueFilter_p;let PointCloudValueFilter_u=PointCloudValueFilter_p=class extends PointCloudFilter{constructor(e){super(e),this.mode=\"exclude\",this.type=\"value\",this.values=[]}clone(){return new PointCloudValueFilter_p({field:this.field,mode:this.mode,values:Object(lang[\"a\" /* clone */])(this.values)})}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[\"exclude\",\"include\"],json:{write:{enabled:!0,isRequired:!0}}})],PointCloudValueFilter_u.prototype,\"mode\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(enumeration[\"a\" /* enumeration */])({pointCloudValueFilter:\"value\"})],PointCloudValueFilter_u.prototype,\"type\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],PointCloudValueFilter_u.prototype,\"values\",void 0),PointCloudValueFilter_u=PointCloudValueFilter_p=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.layers.pointCloudFilters.PointCloudValueFilter\")],PointCloudValueFilter_u);var l=PointCloudValueFilter_u;/* harmony default export */ var PointCloudValueFilter = (l);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/pointCloudFilters/typeUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst typeUtils_e={key:\"type\",base:PointCloudFilter,typeMap:{value:PointCloudValueFilter,bitfield:PointCloudBitfieldFilter,return:PointCloudReturnFilter}};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/PointCloudRenderer.js + 5 modules\nvar PointCloudRenderer = __webpack_require__(\"dzHX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js + 1 modules\nvar PointCloudClassBreaksRenderer = __webpack_require__(\"Tg0p\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/renderers/PointCloudRGBRenderer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar PointCloudRGBRenderer_i;let c=PointCloudRGBRenderer_i=class extends PointCloudRenderer[\"a\" /* default */]{constructor(r){super(r),this.type=\"point-cloud-rgb\",this.field=null}clone(){return new PointCloudRGBRenderer_i({...this.cloneProperties(),field:Object(lang[\"a\" /* clone */])(this.field)})}};Object(tslib_es6[\"a\" /* _ */])([Object(enumeration[\"a\" /* enumeration */])({pointCloudRGBRenderer:\"point-cloud-rgb\"})],c.prototype,\"type\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:String,json:{write:!0}})],c.prototype,\"field\",void 0),c=PointCloudRGBRenderer_i=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.renderers.PointCloudRGBRenderer\")],c);var PointCloudRGBRenderer_n=c;/* harmony default export */ var PointCloudRGBRenderer = (PointCloudRGBRenderer_n);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js + 1 modules\nvar PointCloudStretchRenderer = __webpack_require__(\"V4u7\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js + 1 modules\nvar PointCloudUniqueValueRenderer = __webpack_require__(\"ofcG\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/renderers/support/pointCloud/typeUtils.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst typeUtils_i={key:\"type\",base:PointCloudRenderer[\"a\" /* default */],typeMap:{\"point-cloud-class-breaks\":PointCloudClassBreaksRenderer[\"a\" /* default */],\"point-cloud-rgb\":PointCloudRGBRenderer,\"point-cloud-stretch\":PointCloudStretchRenderer[\"a\" /* default */],\"point-cloud-unique-value\":PointCloudUniqueValueRenderer[\"a\" /* default */]},errorContext:\"renderer\"};\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/layers/PointCloudLayer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst O=Logger[\"a\" /* default */].getLogger(\"esri.layers.PointCloudLayer\"),N=Object(fieldProperties[\"a\" /* defineFieldProperties */])();let R=class extends(Object(SceneService[\"a\" /* SceneService */])(Object(ArcGISService[\"a\" /* ArcGISService */])(Object(OperationalLayer[\"a\" /* OperationalLayer */])(Object(PortalLayer[\"a\" /* PortalLayer */])(Object(ScaleRangeLayer[\"a\" /* ScaleRangeLayer */])(Object(MultiOriginJSONSupport[\"a\" /* MultiOriginJSONMixin */])(Layer[\"a\" /* default */]))))))){constructor(...e){super(...e),this.operationalLayerType=\"PointCloudLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.opacity=1,this.filters=[],this.fields=null,this.outFields=null,this.path=null,this.legendEnabled=!0,this.renderer=null,this.type=\"point-cloud\"}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}get defaultPopupTemplate(){return this.attributeStorageInfo?this.createPopupTemplate():null}get fieldsIndex(){return new FieldsIndex[\"a\" /* default */](this.fields)}getFieldDomain(e){const r=this.fieldsIndex.get(e);return r&&r.domain?r.domain:null}readServiceFields(e,t,o){return Array.isArray(e)?e.map((e=>{const t=new Field[\"a\" /* default */];return\"FieldTypeInteger\"===e.type&&((e=Object(lang[\"a\" /* clone */])(e)).type=\"esriFieldTypeInteger\"),t.read(e,o),t})):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map((e=>new Field[\"a\" /* default */]({name:e.name,type:\"ELEVATION\"===e.name?\"double\":\"integer\"}))):null}set elevationInfo(e){this._set(\"elevationInfo\",e),this._validateElevationInfo()}writeRenderer(e,r,o,i){Object(object[\"c\" /* setDeepValue */])(\"layerDefinition.drawingInfo.renderer\",e.write(null,i),r)}load(e){const r=Object(maybe[\"h\" /* isSome */])(e)?e.signal:null,t=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).then((()=>this._fetchService(r)),(()=>this._fetchService(r)));return this.addResolvingPromise(t),Object(promiseUtils[\"u\" /* resolve */])(this)}createPopupTemplate(e){const r=Object(popupUtils[\"a\" /* createPopupTemplate */])(this,e);return this.formatPopupTemplateReturnsField(r),this.formatPopupTemplateRGBField(r),r}formatPopupTemplateReturnsField(e){const r=this.fieldsIndex.get(\"RETURNS\");if(!r)return;const t=e.fieldInfos.find((e=>e.fieldName===r.name));if(!t)return;const o=new ExpressionInfo[\"a\" /* default */]({name:\"pcl-returns-decoded\",title:r.alias||r.name,expression:`\\n        var returnValue = $feature.${r.name};\\n        return (returnValue % 16) + \" / \" + Floor(returnValue / 16);\\n      `});e.expressionInfos=[...e.expressionInfos||[],o],t.fieldName=\"expression/pcl-returns-decoded\"}formatPopupTemplateRGBField(e){const r=this.fieldsIndex.get(\"RGB\");if(!r)return;const t=e.fieldInfos.find((e=>e.fieldName===r.name));if(!t)return;const o=new ExpressionInfo[\"a\" /* default */]({name:\"pcl-rgb-decoded\",title:r.alias||r.name,expression:`\\n        var rgb = $feature.${r.name};\\n        var red = Floor(rgb / 65536, 0);\\n        var green = Floor((rgb - (red * 65536)) / 256,0);\\n        var blue = rgb - (red * 65536) - (green * 256);\\n\\n        return \"rgb(\" + red + \",\" + green + \",\" + blue + \")\";\\n      `});e.expressionInfos=[...e.expressionInfos||[],o],t.fieldName=\"expression/pcl-rgb-decoded\"}async queryCachedStatistics(e,r){if(await this.load(r),!this.attributeStorageInfo)throw new Error[\"a\" /* default */](\"scenelayer:no-cached-statistics\",\"Cached statistics are not available for this layer\");const t=this.fieldsIndex.get(e);if(!t)throw new Error[\"a\" /* default */](\"pointcloudlayer:field-unexisting\",`Field '${e}' does not exist on the layer`);for(const e of this.attributeStorageInfo)if(e.name===t.name){const t=Object(urlUtils[\"x\" /* join */])(this.parsedUrl.path,`./statistics/${e.key}`);return Object(request[\"default\"])(t,{query:{f:\"json\"},responseType:\"json\",signal:r?r.signal:null}).then((e=>e.data))}throw new Error[\"a\" /* default */](\"pointcloudlayer:no-cached-statistics\",\"Cached statistics for this attribute are not available\")}async saveAs(e,r){return this._debouncedSaveOperations(1,{...r,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"point-cloud\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"point-cloud\"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(e.layerType&&\"PointCloud\"!==e.layerType)throw new Error[\"a\" /* default */](\"pointcloudlayer:layer-type-not-supported\",\"PointCloudLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new Error[\"a\" /* default */](\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x-2.x\"});if(this.version.major>2)throw new Error[\"a\" /* default */](\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x-2.x\"})}hasCachedStatistics(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some((r=>r.name===e))}_getTypeKeywords(){return[\"PointCloud\"]}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"absolute-height\"!==e.mode&&O.warn(\".elevationInfo=\",\"Point cloud layers only support absolute-height elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&O.warn(\".elevationInfo=\",\"Point cloud layers do not support featureExpressionInfo\"))}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[\"PointCloudLayer\"]})],R.prototype,\"operationalLayerType\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])(commonProperties[\"g\" /* popupEnabled */])],R.prototype,\"popupEnabled\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:PopupTemplate[\"a\" /* default */],json:{name:\"popupInfo\",write:!0}})],R.prototype,\"popupTemplate\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,json:{read:!1},dependsOn:[\"fields\",\"title\",\"attributeStorageInfo\"]})],R.prototype,\"defaultPopupTemplate\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,json:{write:!1,read:!1,origins:{\"web-document\":{write:!1,read:!1}}}})],R.prototype,\"opacity\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[\"show\",\"hide\"]})],R.prototype,\"listMode\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({types:[typeUtils_e],json:{origins:{service:{read:{source:\"filters\"}}},name:\"layerDefinition.filters\",write:!0}})],R.prototype,\"filters\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Field[\"a\" /* default */]]})],R.prototype,\"fields\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0,dependsOn:[\"fields\"]})],R.prototype,\"fieldsIndex\",null),Object(tslib_es6[\"a\" /* _ */])([Object(reader[\"a\" /* reader */])(\"service\",\"fields\",[\"fields\",\"attributeStorageInfo\"])],R.prototype,\"readServiceFields\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])(N.outFields)],R.prototype,\"outFields\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({readOnly:!0})],R.prototype,\"attributeStorageInfo\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])(commonProperties[\"b\" /* elevationInfo */])],R.prototype,\"elevationInfo\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0},\"portal-item\":{read:!0,write:!0}},read:!1}})],R.prototype,\"path\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])(commonProperties[\"d\" /* legendEnabled */])],R.prototype,\"legendEnabled\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({types:typeUtils_i,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:{target:{\"layerDefinition.drawingInfo.renderer\":{types:typeUtils_i},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}})],R.prototype,\"renderer\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(writer[\"a\" /* writer */])(\"renderer\")],R.prototype,\"writeRenderer\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({json:{read:!1},readOnly:!0})],R.prototype,\"type\",void 0),R=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.layers.PointCloudLayer\")],R);var _=R;/* harmony default export */ var PointCloudLayer = __webpack_exports__[\"default\"] = (_);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}