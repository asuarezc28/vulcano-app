{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{mL23:function(e,t,r){\"use strict\";r.r(t);var s=r(\"pO5D\"),o=(r(\"wSAH\"),r(\"6S2I\"),r(\"zqDF\"),r(\"WbKI\")),a=r(\"04ZG\"),i=(r(\"4EHJ\"),r(\"ju1D\"),r(\"9AIY\"),r(\"9MzC\")),n=r(\"Lqtk\"),l=r(\"qNUd\"),p=r(\"kglp\"),u=r(\"o6Le\"),c=r(\"OvWd\"),b=r(\"r88o\"),y=r(\"ag7Y\"),d=r(\"jWBI\"),h=r(\"8prj\"),O=r(\"54nt\"),m=r(\"eKLr\");let f=class extends y.a{constructor(e){super(e),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};Object(s.a)([Object(o.b)({type:m.a,json:{write:!0}})],f.prototype,\"directions\",void 0),Object(s.a)([Object(o.b)({type:d.a,json:{write:!0}})],f.prototype,\"route\",void 0),Object(s.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,\"routeName\",void 0),Object(s.a)([Object(o.b)({type:[d.a],json:{write:!0}})],f.prototype,\"stops\",void 0),f=Object(s.a)([Object(a.a)(\"esri.tasks.support.RouteResult\")],f);var j=f;function B(e){return e&&h.default.fromJSON(e).features.map(e=>e)}let g=class extends y.a{constructor(e){super(e),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return B(t.barriers||t.pointBarriers)}readPolylineBarriers(e){return B(e)}readPolygonBarriers(e){return B(e)}};Object(s.a)([Object(o.b)({aliasOf:\"pointBarriers\"})],g.prototype,\"barriers\",void 0),Object(s.a)([Object(o.b)({type:[O.a]})],g.prototype,\"messages\",void 0),Object(s.a)([Object(o.b)({type:[d.a]})],g.prototype,\"pointBarriers\",void 0),Object(s.a)([Object(b.a)(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],g.prototype,\"readPointBarriers\",null),Object(s.a)([Object(o.b)({type:[d.a]})],g.prototype,\"polylineBarriers\",void 0),Object(s.a)([Object(b.a)(\"polylineBarriers\")],g.prototype,\"readPolylineBarriers\",null),Object(s.a)([Object(o.b)({type:[d.a]})],g.prototype,\"polygonBarriers\",void 0),Object(s.a)([Object(b.a)(\"polygonBarriers\")],g.prototype,\"readPolygonBarriers\",null),Object(s.a)([Object(o.b)({type:[j]})],g.prototype,\"routeResults\",void 0),g=Object(s.a)([Object(a.a)(\"esri.tasks.support.RouteResultsContainer\")],g);var R=g;const v=Object(u.a)({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},stops:!0,travelMode:!0});let N=class extends(Object(c.a)(p.a)){constructor(e){super(e)}solve(e,t){const r=[],s=[],o={},a={};return e.stops&&e.stops.features&&this._collectGeometries(e.stops.features,s,\"stops.features\",o),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,s,\"pointBarriers.features\",o),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,s,\"polylineBarriers.features\",o),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,s,\"polygonBarriers.features\",o),Object(l.a)(s).then(e=>{for(const t in o){const s=o[t];r.push(t),a[t]=e.slice(s[0],s[1])}return this._isInputGeometryZAware(a,r)?this.getServiceDescription():Object(i.u)({dontCheck:!0})}).then(s=>{(\"dontCheck\"in s?s.dontCheck:s.hasZ)||this._dropZValuesOffInputGeometry(a,r);for(const t in a)a[t].forEach((r,s)=>{e.get(t)[s].geometry=r});let o={query:{...this.parsedUrl.query,f:\"json\",...v.toQueryParams(e)}};(this.requestOptions||t)&&(o={...this.requestOptions,...t,...o});const{path:i}=this.parsedUrl,l=\"/solve\",p=i.endsWith(l)?i:i+l;return Object(n.default)(p,o)}).then(e=>this._handleSolveResponse(e))}_collectGeometries(e,t,r,s){s[r]=[t.length,t.length+e.length],e.forEach(e=>{t.push(e.geometry)})}_handleSolveResponse(e){const t=[],r=[],{directions:s=[],routes:{features:o=[],spatialReference:a=null}={},stops:{features:i=[],spatialReference:n=null}={},barriers:l,polygonBarriers:p,polylineBarriers:u,messages:c}=e.data,b=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let y,d,h=!0;const O=o&&a||i&&n||l&&l.spatialReference||p&&p.spatialReference||u&&u.spatialReference;s.forEach(e=>{t.push(y=e.routeName),r[y]={directions:e}}),o.forEach(e=>{-1===t.indexOf(y=e.attributes.Name)&&(t.push(y),r[y]={}),e.geometry&&(e.geometry.spatialReference=O),r[y].route=e}),i.forEach(e=>{d=e.attributes,-1===t.indexOf(y=d.RouteName||b)&&(t.push(y),r[y]={}),y!==b&&(h=!1),e.geometry&&(e.geometry.spatialReference=O),null==r[y].stops&&(r[y].stops=[]),r[y].stops.push(e)}),i.length>0&&!0===h&&(r[t[0]].stops=r[b].stops,delete r[b],t.splice(t.indexOf(b),1));const m=t.map(e=>(r[e].routeName=e===b?null:e,r[e]));return R.fromJSON({routeResults:m,pointBarriers:l,polygonBarriers:p,polylineBarriers:u,messages:c})}};N=Object(s.a)([Object(a.a)(\"esri.tasks.RouteTask\")],N),t.default=N}}]);","name":"148.f9239f59f8f6274e2c5f.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[148],{\n\n/***/ \"mL23\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/request.js\nvar request = __webpack_require__(\"Lqtk\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules\nvar normalizeUtils = __webpack_require__(\"qNUd\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/tasks/Task.js\nvar Task = __webpack_require__(\"kglp\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/queryUtils.js\nvar queryUtils = __webpack_require__(\"o6Le\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/tasks/mixins/NAServiceDescription.js\nvar NAServiceDescription = __webpack_require__(\"OvWd\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js\nvar reader = __webpack_require__(\"r88o\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/JSONSupport.js\nvar JSONSupport = __webpack_require__(\"ag7Y\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Graphic.js\nvar Graphic = __webpack_require__(\"jWBI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/tasks/support/FeatureSet.js\nvar FeatureSet = __webpack_require__(\"8prj\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/tasks/support/NAMessage.js\nvar NAMessage = __webpack_require__(\"54nt\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/tasks/support/DirectionsFeatureSet.js\nvar DirectionsFeatureSet = __webpack_require__(\"eKLr\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/tasks/support/RouteResult.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet RouteResult_i=class extends JSONSupport[\"a\" /* JSONSupport */]{constructor(o){super(o),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:DirectionsFeatureSet[\"a\" /* default */],json:{write:!0}})],RouteResult_i.prototype,\"directions\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:Graphic[\"a\" /* default */],json:{write:!0}})],RouteResult_i.prototype,\"route\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:String,json:{write:!0}})],RouteResult_i.prototype,\"routeName\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Graphic[\"a\" /* default */]],json:{write:!0}})],RouteResult_i.prototype,\"stops\",void 0),RouteResult_i=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.tasks.support.RouteResult\")],RouteResult_i);var RouteResult_u=RouteResult_i;/* harmony default export */ var RouteResult = (RouteResult_u);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/tasks/support/RouteResultsContainer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction RouteResultsContainer_n(r){return r&&FeatureSet[\"default\"].fromJSON(r).features.map((r=>r))}let RouteResultsContainer_u=class extends JSONSupport[\"a\" /* JSONSupport */]{constructor(r){super(r),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(r,o){return RouteResultsContainer_n(o.barriers||o.pointBarriers)}readPolylineBarriers(r){return RouteResultsContainer_n(r)}readPolygonBarriers(r){return RouteResultsContainer_n(r)}};Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({aliasOf:\"pointBarriers\"})],RouteResultsContainer_u.prototype,\"barriers\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[NAMessage[\"a\" /* default */]]})],RouteResultsContainer_u.prototype,\"messages\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Graphic[\"a\" /* default */]]})],RouteResultsContainer_u.prototype,\"pointBarriers\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(reader[\"a\" /* reader */])(\"pointBarriers\",[\"barriers\",\"pointBarriers\"])],RouteResultsContainer_u.prototype,\"readPointBarriers\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Graphic[\"a\" /* default */]]})],RouteResultsContainer_u.prototype,\"polylineBarriers\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(reader[\"a\" /* reader */])(\"polylineBarriers\")],RouteResultsContainer_u.prototype,\"readPolylineBarriers\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[Graphic[\"a\" /* default */]]})],RouteResultsContainer_u.prototype,\"polygonBarriers\",void 0),Object(tslib_es6[\"a\" /* _ */])([Object(reader[\"a\" /* reader */])(\"polygonBarriers\")],RouteResultsContainer_u.prototype,\"readPolygonBarriers\",null),Object(tslib_es6[\"a\" /* _ */])([Object(property[\"b\" /* property */])({type:[RouteResult]})],RouteResultsContainer_u.prototype,\"routeResults\",void 0),RouteResultsContainer_u=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.tasks.support.RouteResultsContainer\")],RouteResultsContainer_u);var RouteResultsContainer_c=RouteResultsContainer_u;/* harmony default export */ var RouteResultsContainer = (RouteResultsContainer_c);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/tasks/RouteTask.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst RouteTask_l=Object(queryUtils[\"a\" /* createQueryParamsHelper */])({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},stops:!0,travelMode:!0});let RouteTask_u=class extends(Object(NAServiceDescription[\"a\" /* NAServiceDescriptionMixin */])(Task[\"a\" /* default */])){constructor(e){super(e)}solve(e,r){const i=[],a=[],n={},p={};return e.stops&&e.stops.features&&this._collectGeometries(e.stops.features,a,\"stops.features\",n),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,a,\"pointBarriers.features\",n),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,a,\"polylineBarriers.features\",n),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,a,\"polygonBarriers.features\",n),Object(normalizeUtils[\"a\" /* normalizeCentralMeridian */])(a).then((e=>{for(const r in n){const t=n[r];i.push(r),p[r]=e.slice(t[0],t[1])}return this._isInputGeometryZAware(p,i)?this.getServiceDescription():Object(promiseUtils[\"u\" /* resolve */])({dontCheck:!0})})).then((t=>{(\"dontCheck\"in t?t.dontCheck:t.hasZ)||this._dropZValuesOffInputGeometry(p,i);for(const r in p)p[r].forEach(((t,s)=>{e.get(r)[s].geometry=t}));let o={query:{...this.parsedUrl.query,f:\"json\",...RouteTask_l.toQueryParams(e)}};(this.requestOptions||r)&&(o={...this.requestOptions,...r,...o});const{path:a}=this.parsedUrl,n=\"/solve\",u=a.endsWith(n)?a:a+n;return Object(request[\"default\"])(u,o)})).then((e=>this._handleSolveResponse(e)))}_collectGeometries(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}_handleSolveResponse(e){const r=[],t=[],{directions:s=[],routes:{features:o=[],spatialReference:i=null}={},stops:{features:a=[],spatialReference:n=null}={},barriers:l,polygonBarriers:u,polylineBarriers:c,messages:m}=e.data,f=\"esri.tasks.RouteTask.NULL_ROUTE_NAME\";let h,y,d=!0;const g=o&&i||a&&n||l&&l.spatialReference||u&&u.spatialReference||c&&c.spatialReference;s.forEach((e=>{r.push(h=e.routeName),t[h]={directions:e}})),o.forEach((e=>{-1===r.indexOf(h=e.attributes.Name)&&(r.push(h),t[h]={}),e.geometry&&(e.geometry.spatialReference=g),t[h].route=e})),a.forEach((e=>{y=e.attributes,-1===r.indexOf(h=y.RouteName||f)&&(r.push(h),t[h]={}),h!==f&&(d=!1),e.geometry&&(e.geometry.spatialReference=g),null==t[h].stops&&(t[h].stops=[]),t[h].stops.push(e)})),a.length>0&&!0===d&&(t[r[0]].stops=t[f].stops,delete t[f],r.splice(r.indexOf(f),1));const B=r.map((e=>(t[e].routeName=e===f?null:e,t[e])));return RouteResultsContainer.fromJSON({routeResults:B,pointBarriers:l,polygonBarriers:u,polylineBarriers:c,messages:m})}};RouteTask_u=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.tasks.RouteTask\")],RouteTask_u);var RouteTask_c=RouteTask_u;/* harmony default export */ var RouteTask = __webpack_exports__[\"default\"] = (RouteTask_c);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}