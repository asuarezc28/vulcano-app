{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{\"5LEI\":function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return a}),i(\"wSAH\");var s=i(\"HJJS\"),n=i(\"rlSK\"),r=i(\"jHF5\"),o=i(\"fEsP\");class a extends o.a{constructor(e,t,i,s=i){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(r.b)(),tileMat3:Object(r.b)()},this.triangleCount=0,this.key=new n.a(e),this.bounds=t,this.size=i,this.coordRange=s}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const i=t/(e.resolution*e.pixelRatio),n=this.transforms.tileMat3,[r,o]=e.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*i,l=this.size[1]/this.coordRange[1]*i;Object(s.i)(n,a,0,0,0,l,0,r,o,1),Object(s.f)(this.transforms.dvs,e.displayViewMat3,n)}}},ZyIX:function(e,t,i){\"use strict\";var s=i(\"yE7X\"),n=i(\"b3VY\"),r=i(\"7F7D\"),o=i(\"mgI5\");const a=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;t.a=class extends o.a{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(a),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(t.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(t.scale)}}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"stencil\",brushes:[r.a],drawPhase:s.c.DEBUG|s.c.MAP|s.c.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=e.registerRenderPass({name:\"tileInfo\",brushes:[n.a],drawPhase:s.c.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(e),t,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},jncx:function(e,t,i){\"use strict\";i.r(t);var s=i(\"pO5D\"),n=(i(\"wSAH\"),i(\"6S2I\"),i(\"zqDF\"),i(\"WbKI\"),i(\"04ZG\")),r=(i(\"4EHJ\"),i(\"ju1D\"),i(\"9AIY\"),i(\"9MzC\")),o=i(\"AfLA\"),a=i(\"6Az7\"),l=i(\"4xTw\");class c{constructor(){this.gradient=null,this.height=512,this.width=512}render(e){Object(o.b)(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}let h=class extends l.a{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new a.a(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:i}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=i,this._gradient=Object(o.c)(e.toJSON()),this.tiles.forEach(e=>{const s=e.bitmap.source;s&&(s.minPixelIntensity=t,s.maxPixelIntensity=i,s.gradient=this._gradient,e.bitmap.invalidateTexture())})}}hitTest(){return Object(r.u)([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:s,maxPixelIntensity:n}=this._intensityInfo,r=t.bitmap.source||new c;r.intensities=i&&i.matrix||null,r.minPixelIntensity=s,r.maxPixelIntensity=n,r.gradient=this._gradient,t.bitmap.source=r,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};h=Object(s.a)([Object(n.a)(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],h),t.default=h}}]);","name":"57.ddf171e36c031604b30d.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[57],{\n\n/***/ \"5LEI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return r; });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HJJS\");\n/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rlSK\");\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"jHF5\");\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"fEsP\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__[/* DisplayObject */ \"a\"]{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])(),tileMat3:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])()},this.triangleCount=0,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"](s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* s */ \"i\"])(r,a,0,0,0,d,0,n,h,1),Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* m */ \"f\"])(this.transforms.dvs,o.displayViewMat3,r)}}\n\n\n/***/ }),\n\n/***/ \"ZyIX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export sortByLevel */\n/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"yE7X\");\n/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"b3VY\");\n/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7F7D\");\n/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"mgI5\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;/* harmony default export */ __webpack_exports__[\"a\"] = (class extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}});\n\n\n/***/ }),\n\n/***/ \"jncx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"pO5D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\nvar ensureType = __webpack_require__(\"zqDF\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\nvar property = __webpack_require__(\"WbKI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js + 1 modules\nvar subclass = __webpack_require__(\"04ZG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/urlUtils.js\nvar urlUtils = __webpack_require__(\"4EHJ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/uuid.js\nvar uuid = __webpack_require__(\"ju1D\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/portal/support/resourceExtension.js\nvar resourceExtension = __webpack_require__(\"9AIY\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/support/heatmapUtils.js\nvar heatmapUtils = __webpack_require__(\"AfLA\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js + 1 modules\nvar BitmapTileContainer = __webpack_require__(\"6Az7\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js\nvar BaseTileRenderer = __webpack_require__(\"4xTw\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass HeatmapSource_i{constructor(){this.gradient=null,this.height=512,this.width=512}render(i){Object(heatmapUtils[\"b\" /* drawHeatmap */])(i,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nlet a=class extends BaseTileRenderer[\"a\" /* default */]{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new BitmapTileContainer[\"a\" /* BitmapTileContainer */](e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:i}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=i,this._gradient=Object(heatmapUtils[\"c\" /* generateGradient */])(e.toJSON()),this.tiles.forEach((e=>{const r=e.bitmap.source;r&&(r.minPixelIntensity=t,r.maxPixelIntensity=i,r.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Object(promiseUtils[\"u\" /* resolve */])([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:r,maxPixelIntensity:s}=this._intensityInfo,n=t.bitmap.source||new HeatmapSource_i;n.intensities=i&&i.matrix||null,n.minPixelIntensity=r,n.maxPixelIntensity=s,n.gradient=this._gradient,t.bitmap.source=n,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};a=Object(tslib_es6[\"a\" /* _ */])([Object(subclass[\"a\" /* subclass */])(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],a);var l=a;/* harmony default export */ var HeatmapTileRenderer = __webpack_exports__[\"default\"] = (l);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}