{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{\"5LEI\":function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return o}),s(\"wSAH\");var i=s(\"HJJS\"),r=s(\"rlSK\"),a=s(\"jHF5\"),n=s(\"fEsP\");class o extends n.a{constructor(e,t,s,i=s){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(a.b)(),tileMat3:Object(a.b)()},this.triangleCount=0,this.key=new r.a(e),this.bounds=t,this.size=s,this.coordRange=i}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const s=t/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[a,n]=e.toScreenNoRotation([0,0],this.coords),o=this.size[0]/this.coordRange[0]*s,l=this.size[1]/this.coordRange[1]*s;Object(i.i)(r,o,0,0,0,l,0,a,n,1),Object(i.f)(this.transforms.dvs,e.displayViewMat3,r)}}},KFVX:function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return D}),s(\"wSAH\");var i=s(\"srIe\"),r=s(\"lx5q\"),a=s(\"M0lq\"),n=s(\"jIHu\"),o=s(\"opr1\"),l=s(\"LGNZ\"),d=s(\"c46T\"),u=s(\"5LEI\"),c=s(\"yE7X\"),f=s(\"yN2G\");function h(e,t,s){if(!e.allDirty)if(null!=e.from&&null!=e.count){const i=Math.min(e.from,t),r=Math.max(e.from+e.count,t+s)-i;e.from=i,e.count=r}else e.from=t,e.count=s}var p=class{constructor(){this._dirties=Object(f.e)(()=>({indices:{from:null,count:null,allDirty:!1}}),()=>({vertices:{from:null,count:null,allDirty:!1}}))}hasDirty(){for(const e of this._dirties)if(null!==e.data.indices.count||e.data.indices.allDirty)return!0;return!1}markAllClean(){for(const e of this._dirties){e.data.indices.from=null,e.data.indices.count=null,e.data.indices.allDirty=!1;for(const t in e.buffers)e.buffers[t].data.vertices.from=null,e.buffers[t].data.vertices.count=null,e.buffers[t].data.vertices.allDirty=!1}}markAllDirty(){for(const e of this._dirties){e.data.indices.allDirty=!0;for(const t in e.buffers)e.buffers[t].data.vertices.allDirty=!0}}forEach(e){for(let t=0;t<this._dirties.length;++t){const s=this._dirties[t],i={};for(const e in s.buffers){const t=s.buffers[e].data.vertices;(t.allDirty||null!=t.from&&null!=t.count&&t.count>0)&&(i[e]=t)}const r=s.data.indices;let a;a=r.allDirty||null!=r.from&&null!=r.count&&r.count>0?{indices:r,vertices:i}:{indices:null,vertices:i},(a.indices||Object.keys(a).length>0)&&e(a,t)}}markDirtyIndices(e,t,s){h(this._dirties[e].data.indices,t,s)}markDirtyVertices(e,t,s,i){h(this._dirties[e].buffers[t].data.vertices,s,i)}};class y{constructor(e){this._largestRange=null,this._parent=e,this._updateLargestRange()}get largestRange(){return this._largestRange}rangeCreated(e){(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}rangeResized(e,t){e===this._largestRange?e.count<t&&this._updateLargestRange():(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}findBestRange(e){let t=this._parent._freeHead,s=null;for(;null!==t;)t.count>=e&&(!s||t.count-e<s.count-e)&&(s=t),t=t.next;return s}findAdjacentRanges(e,t){let s=!0,i=!1,r=null,a=this._parent._freeHead;for(;s&&!i;){const n=null!==a?a.from:this._parent._size;e>=(null!==r?r.from+r.count:0)&&e+t<=n?(s=!1,i=!0):null!==a?(r=a,a=a.next):s=!1}return[r,a]}_updateLargestRange(){let e=null,t=this._parent._freeHead;for(;null!==t;)(!e||t.count>e.count)&&(e=t),t=t.next;this._largestRange=e}}class m{constructor(e,t){this._allocated=0,this._size=e,this._freeHead=e>0?{from:0,count:e,prev:null,next:null}:null,this._bookKeeper=t||new y(this),this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}allocate(e){const t=this._bookKeeper.findBestRange(e);if(null===t)return-1;const s=t.from,i=t.count;if(t.from+=e,t.count-=e,this._bookKeeper.rangeResized(t,s,i),this._allocated+=e,0===t.count){const e=null!==t.prev?this._freeHead:t.next;m._removeRange(t),this._freeHead=e}return s}free(e,t){const[s,i]=this._bookKeeper.findAdjacentRanges(e,t),r={from:e,count:t,prev:s,next:i};if(null!==s&&(s.next=r),null!==i&&(i.prev=r),this._bookKeeper.rangeCreated(r),this._allocated-=t,null!==i&&r.from+r.count===i.from){const e=r.from,t=r.count;m._fuse(r,i),m._removeRange(i),this._bookKeeper.rangeResized(r,e,t),this._bookKeeper.rangeResized(i,void 0,0)}if(null!==s&&s.from+s.count===r.from){const e=s.from,t=s.count;m._fuse(s,r),m._removeRange(r),this._bookKeeper.rangeResized(s,e,t),this._bookKeeper.rangeResized(r,void 0,0)}this._freeHead=null!==r.prev?this._freeHead:r}get fragmentation(){const e=this._size-this._allocated;return 0===e?0:1-this._bookKeeper.largestRange.count/e}static _removeRange(e){null!==e.prev?null!==e.next?(e.prev.next=e.next,e.next.prev=e.prev):e.prev.next=null:null!==e.next&&(e.next.prev=null)}static _fuse(e,t){e.count+=t.count,e.next=t.next,t.from+=t.count,t.count=0,null!==t.next&&(t.next.prev=e)}}const g=[\"FILL\",\"LINE\",\"MARKER\",\"TEXT\",\"LABEL\"];class x{constructor(e,t,s,i){this._strides=e,this._displayList=t,this._freeListsAndStorage={},this._dirtyMap=null,this._dirtyMap=s;for(const r in e){this._freeListsAndStorage[r]={vtxFreeList:i?new m(i):null,idxFreeList:i?new m(i):null,vertexBuffers:{},indexBuffer:i?new Uint32Array(i):null};for(const t in e[r])this._freeListsAndStorage[r].vertexBuffers[t]={data:i?Object(f.b)(i,e[r][t]):null,stride:e[r][t]}}}static fromTileData(e,t){const s=function(e){const t=e.getStrides(),s={};for(let i=0;i<t.length;i++)s[g[i]]=t[i];return s}(e),i=[0,0,0,0,0],r=[0,0,0,0,0],a=e.tileDisplayData.displayObjects;for(const o of a)for(const e of o.displayRecords)i[e.geometryType]=Math.max(i[e.geometryType],e.vertexFrom+e.vertexCount),r[e.geometryType]=Math.max(r[e.geometryType],e.indexFrom+e.indexCount);const n=new x(s,e.tileDisplayData.displayList,t,null);for(let o=0;o<e.tileBufferData.geometries.length;++o){const t=i[o],s=r[o],a=e.tileBufferData.geometries[o],l=n._storageFor(g[o]),d=e.tileBufferData.geometries[o].indexBuffer;let u;l.indexBuffer=d,l.idxFreeList=new m(d.length),l.idxFreeList.allocate(s);for(const i in a.vertexBuffer){const t=e.tileBufferData.geometries[o].vertexBuffer[i];l.vertexBuffers[i].data=t.data,l.vertexBuffers[i].stride=t.stride;const s=Object(f.o)(t.stride),r=t.data.length*s/t.stride;u||(u=r)}l.vtxFreeList=new m(u),l.vtxFreeList.allocate(t)}return n}delete(e){const t=g[e.geometryType];this._freeVertices(t,e.vertexFrom,e.vertexCount),this._freeIndices(t,e.indexFrom,e.indexCount),this._displayList.removeFromList(e),e.vertexFrom=void 0,e.indexFrom=void 0}setMeshData(e,t,s,i,r){const a=g[e.geometryType];let n,o;e.meshData=null,void 0===e.vertexFrom?(o=t.vertexCount,n=this._allocateVertices(a,o)):t.vertexCount>e.vertexCount?(this._freeVertices(a,e.vertexFrom,e.vertexCount),o=t.vertexCount,n=this._allocateVertices(a,o)):t.vertexCount===e.vertexCount?(n=e.vertexFrom,o=e.vertexCount):(this._freeVertices(a,e.vertexFrom+t.vertexCount,e.vertexCount-t.vertexCount),n=e.vertexFrom,o=t.vertexCount);let l,d,u,c=!0;if(void 0===e.indexFrom?(l=r,u=t.indexCount,d=this._allocateIndices(a,u)):t.indexCount>e.indexCount?(l=this._displayList.removeFromList(e),this._freeIndices(a,e.indexFrom,e.indexCount),u=t.indexCount,d=this._allocateIndices(a,u)):t.indexCount===e.indexCount?(c=!1,d=e.indexFrom,u=e.indexCount):(l=this._displayList.removeFromList(e),this._freeIndices(a,e.indexFrom+t.indexCount,e.indexCount-t.indexCount),d=e.indexFrom,u=t.indexCount),-1!==n&&-1!==d){const r=this._storageFor(a);if(Object(f.d)(n,d,r.vertexBuffers,r.indexBuffer,t,s,i),e.vertexFrom=n,e.indexFrom=d,e.vertexCount=t.vertexCount,e.indexCount=t.indexCount,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in s)this._dirtyMap.markDirtyVertices(e.geometryType,t,e.vertexFrom,e.vertexCount)}return c&&this._displayList.addToList(e,l),!0}return-1!==n&&this._freeVertices(a,n,o),-1!==d&&this._freeIndices(a,d,u),e.setMeshDataFromBuffers(t,s,i),e.vertexFrom=void 0,e.vertexCount=0,e.indexFrom=void 0,e.indexCount=0,!1}tryAddMeshData(e,t){const s=t.vertexBuffer,i=t.indexBuffer,r=g[e.geometryType],a=this._allocateVertices(r,e.vertexCount);if(-1===a)return this._freeVertices(r,a,e.vertexCount),!1;const n=this._allocateIndices(r,e.indexCount);if(-1===n)return this._freeVertices(r,a,e.vertexCount),this._freeIndices(r,n,e.indexCount),!1;const o=this._storageFor(r);if(Object(f.d)(a,n,o.vertexBuffers,o.indexBuffer,e,s,i),e.vertexFrom=a,e.indexFrom=n,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in s)this._dirtyMap.markDirtyVertices(e.geometryType,t,a,e.vertexCount)}return this._displayList.addToList(e),!0}_allocateVertices(e,t){const s=this._storageFor(e),i=s.vtxFreeList.allocate(t);return-1===i||s.vtxFreeList.fragmentation>.5?-1:i}_freeVertices(e,t,s){this._storageFor(e).vtxFreeList.free(t,s)}_freeIndices(e,t,s){this._storageFor(e).idxFreeList.free(t,s)}_allocateIndices(e,t){const s=this._storageFor(e),i=s.idxFreeList.allocate(t);return-1===i||s.idxFreeList.fragmentation>.5?-1:i}_storageFor(e){return this._freeListsAndStorage[e]}_stridesFor(e,t){return this._strides[e][t]}}var _=x,v=(s(\"OKTS\"),s(\"n4uK\"),s(\"fOQB\"));s(\"0meK\"),s(\"bfJE\");const b=new Set;class D extends u.a{constructor(e,t,s=!1){super(e,t,[n.F,n.F]),this._data=null,this._displayList=null,this._wglBuffers=null,this._deferPatches=!1,this._dirtyMap=new p,this._labelIndex=null,this._lastCommitTime=0,this._patchQueue=new r.a(100),this.fader=new class{constructor(e=400){this.duration=e,this._lastTime=0,this._elapsed=0,this._value=0,this._finished=!1}get value(){return this._value}reset(){this._lastTime=0,this._elapsed=0,this._value=0}step(){const e=performance.now();return 0===this._lastTime?(this._lastTime=e,this._value=0,!0):this._elapsed>=this.duration||(this._elapsed+=e-this._lastTime,this._lastTime=e,this._value=Math.min(this._elapsed/this.duration,1),!1)}},this._dirty=!0,this._replaceBuffers=!1,this._uploadsLocked=!1,this._hasData=!1,this._invalidated=!1,this.transforms.labelMat2d=Object(l.a)(),this._ensureCorrectZOrder=s,this._deferPatches=!s}destroy(){super.destroy(),this.clear()}get displayObjects(){var e;return null!=(e=this._displayObjects)?e:[]}get isDirty(){return this._dirty}get hasData(){return!!this._hasData}get labelIndex(){return this._labelIndex}set isDirty(e){this._dirty=e,this.requestRender()}getGeometry(e){return this._wglBuffers&&this._wglBuffers.has(e)?this._wglBuffers.get(e):null}getDisplayList(){return this._displayList}setTransform(e,t){super.setTransform(e,t);const s=this.transforms.labelMat2d,i=e.getScreenTransform(s,t),r=Object(d.a)();Object(a.n)(r,this.coords,i),Object(o.d)(s),Object(o.h)(s,s,r),Object(o.e)(s,e.viewMat2d,s)}setData(e){const t=e.addOrUpdate,s=e.remove;e.clear&&(this.clear(),this._patchQueue.clear(),this._hasData=!1),\"replace\"===e.type&&(this._replaceBuffers=!0,this._patchQueue.clear(),this._data=null),!this._data&&t&&t.tileDisplayData.displayObjects.length?(t.tileDisplayData.computeDisplayList(this._ensureCorrectZOrder),this._dirtyMap=new p,this._dispRecStore=_.fromTileData(t,this._dirtyMap),this._data=t,this._dirtyMap.markAllDirty(),this._hasData=!0,e.end&&this.ready()):this._data&&(t&&t.tileDisplayData.displayObjects.length||s.length)?this._deferPatches?this._patchQueue.enqueue(e):this._doPatchData(e):e.end&&this.ready(),e.end&&!this._data&&this.clear(),this.requestRender(),this.emit(\"change\")}lockUploads(){this._uploadsLocked=!0}unlockUploads(){this._uploadsLocked=!1,this.requestRender()}commitChanges(e){if(!e.time||e.time!==this._lastCommitTime){if(this._lastCommitTime=e.time,this.fader.step()||this.requestRender(),this._patchQueue.size){const e=this._patchQueue.dequeue();Object(i.h)(e)&&(e.end&&this.ready(),this._doPatchData(e),this.requestRender(),this._hasData=!0)}if(this._uploadsLocked)this.requestRender();else if(this.visible&&this._data){if(this._replaceBuffers)for(this._wglBuffers&&this._wglBuffers.dispose(),this._wglBuffers=null,this._replaceBuffers=!1;this._patchQueue.size;){const e=this._patchQueue.dequeue();Object(i.h)(e)&&(e.end&&this.ready(),this._doPatchData(e),this._hasData=!0)}this._wglBuffers||(this._wglBuffers=new class{constructor(e){this.geometryMap=Object(f.e)(()=>({indexBuffer:v.a.createIndex(e,35044),vao:null}),(t,s)=>({vertexBuffer:v.a.createVertex(e,f.a[s])}))}dispose(){for(let e=0;e<5;e++){const t=this.geometryMap[e];if(t){t.data.vao&&t.data.vao.dispose(!1),t.data.indexBuffer&&t.data.indexBuffer.dispose();for(const e in t.buffers)t.buffers[e]&&t.buffers[e].data.vertexBuffer.dispose()}}}get(e){const t=this.geometryMap[e],s={};for(const i in t.buffers)s[i]=t.buffers[i].data.vertexBuffer;return{indexBuffer:t.data.indexBuffer,get vao(){return t.data.vao},set vao(e){t.data.vao=e},vertexBufferMap:s}}has(e){return null!=this.geometryMap[e]}upload(e,t){t.forEach((t,s)=>{this._upload(t,s,e)})}_upload(e,t,s){if(e.indices&&(e.indices.allDirty?this._uploadIndices(s,t):null!=e.indices.from&&null!=e.indices.count&&this._uploadIndices(s,t,e.indices.from,e.indices.count)),e.vertices){const i=e.vertices;for(const e in i){const r=i[e];r.allDirty?this._uploadVertices(s,t,e):null!=r.from&&null!=r.count&&this._uploadVertices(s,t,e,r.from,r.count)}}}_uploadVertices(e,t,s,i,r){const a=this.geometryMap[t];if(!a)return;const n=e.geometries[t].vertexBuffer[s];if(!n)return;const o=n.stride,l=n.data.buffer;a.buffers[s]&&l.byteLength>0&&(null!=i&&null!=r?a.buffers[s].data.vertexBuffer.setSubData(l,i*o,i*o,(i+r)*o):a.buffers[s].data.vertexBuffer.setData(l))}_uploadIndices(e,t,s,i){const r=this.geometryMap[t];if(!r)return;const a=e.geometries[t].indexBuffer.buffer;r.data.indexBuffer&&a.byteLength>0&&(null!=s&&null!=i?r.data.indexBuffer.setSubData(a,4*s,4*s,4*(s+i)):r.data.indexBuffer.setData(a))}}(e.context)),(this._dirtyMap.hasDirty()||this._invalidated)&&(this._invalidated=!1,this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._displayList=this._data.tileDisplayData.displayList.clone(),this._displayObjects=this._data.tileDisplayData.displayObjects.slice(),this._rebuildLabelIndex(),this._dirtyMap.markAllClean())}}}clear(){this._data=null,this._displayList=null,this._dispRecStore=null,this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null)}_doPatchData(e){try{if(\"new\"===e.type){if(!e.addOrUpdate)return;this._invalidated=!0;const t=this._bulkAddFeatures(e);t&&(this._dirtyMap.markAllDirty(),this._data.reshuffleBulkAdd(e,t.objectIndex,t.recordIndex),this._dispRecStore=_.fromTileData(this._data,this._dirtyMap))}else this._invalidated=!0,this._patchData(e)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=_.fromTileData(this._data,this._dirtyMap))}catch(e){}this.requestRender()}_rebuildLabelIndex(){var e,t;if(null!=(e=this._data)&&null!=(t=e.tileBufferData.geometries[c.d.LABEL])&&t.indexBuffer.length){this.isDirty=!0,this._labelIndex=this._initLabelIndex();for(const e of this.displayObjects)for(const t of e.metrics)this._insertIntoLabelIndex(t)}}_insertIntoLabelIndex(e){e.xBucket<0||e.yBucket<0||e.yBucket>3||e.xBucket>3||this.labelIndex[e.yBucket][e.xBucket].push(e)}_initLabelIndex(){const e=[];for(let t=0;t<n.F/n.d;t++){e.push([]);for(let s=0;s<n.F/n.d;s++)e[t].push([])}return e}_bulkAddFeatures(e){const t=e.addOrUpdate.tileDisplayData.displayObjects,s=this._data.tileDisplayData.displayObjects,i=this._data.tileDisplayData.displayObjectRegistry;for(let r=0;r<t.length;r++){const a=t[r],n=i.get(a.id);for(let t=0;t<a.displayRecords.length;++t){const s=a.displayRecords[t];if(n){if(s.geometryType!==c.d.FILL&&s.geometryType!==c.d.LINE)continue;n.displayRecords.push(s)}if(!this._dispRecStore.tryAddMeshData(s,e.addOrUpdate.tileBufferData.geometries[s.geometryType]))return{objectIndex:r,recordIndex:t}}n||(i.set(a.id,a),s.push(a))}return null}_patchData(e){let t=!0;const s=e.addOrUpdate&&e.addOrUpdate.tileDisplayData&&e.addOrUpdate.tileDisplayData.displayObjects||[],i=(e.remove||[]).slice();for(const r of s)null!=r.insertAfter&&i.push(r.id);for(const r of i){const e=this._data.tileDisplayData.displayObjectRegistry.get(r);if(e){this._data.tileDisplayData.displayList.removeFromList(e.displayRecords);for(const s of e.displayRecords)this._dispRecStore.delete(s);this._data.tileDisplayData.displayObjectRegistry.delete(r);const t=this._data.tileDisplayData.displayObjects.indexOf(e);this._data.tileDisplayData.displayObjects.splice(t,1)}}for(const r of s){let s,i=this._data.tileDisplayData.displayObjectRegistry.get(r.id);if(i){const e=i.displayRecords;i.set(r),i.displayRecords=e;const t=i.displayRecords.length;for(let s=0;s<t;++s){const e=i.displayRecords[s],t=r.displayRecords[s];(s>=r.displayRecords.length||e.geometryType!==t.geometryType||e.symbolLevel!==t.symbolLevel||e.zOrder!==t.zOrder||e.materialKey!==t.materialKey)&&(this._dispRecStore.delete(i.displayRecords[s]),s<r.displayRecords.length&&(i.displayRecords[s]=void 0))}i.displayRecords.length=r.displayRecords.length,i.metrics=r.metrics}else{let e;i=r.copy(),i.displayRecords=[],this._data.tileDisplayData.displayObjectRegistry.set(r.id,i);const t=this._data.tileDisplayData.displayObjects;if(null!=i.insertAfter)if(s={},i.insertAfter>=0){const s=this._data.tileDisplayData.displayObjectRegistry.get(i.insertAfter);s?(e=t.indexOf(s)+1,e<t.length?t.splice(e,0,i):(t.push(i),e=t.length)):(t.push(i),e=t.length)}else t.unshift(i),e=0;else t.push(i),e=t.length;if(s){let i;if(this._data.tileDisplayData.displayList.unified)i=r.displayRecords.length>0?1:0;else{b.clear();for(const e of r.displayRecords){const t=this._data.tileDisplayData.displayList.getDPInfoType(e.geometryType);b.add(t)}i=b.size}let a=0;for(let r=e-1;r>=0&&a<i;--r)for(let e=t[r].displayRecords.length-1;e>=0&&a<i;--e){const i=t[r].displayRecords[e],n=this._data.tileDisplayData.displayList.getDPInfoType(i.geometryType);s[n]||(s[n]=i,++a)}}}const a=r.displayRecords.length;for(let n=0;n<a;++n){const a=r.displayRecords[n];let o=i.displayRecords[n];o?(o.meshData=a.meshData,o.materialKey=a.materialKey):(o=a.copy(),o.vertexFrom=void 0,o.indexFrom=void 0,i.displayRecords[n]=o);const l=a.geometryType,d=this._data.tileDisplayData.displayList.getDPInfoType(l),u=e.addOrUpdate.tileBufferData.geometries[l],c=u.vertexBuffer,f=u.indexBuffer;let h;s&&(h=s[d]?this._data.tileDisplayData.displayList.splitAfter(s[d]):-1),t=this._dispRecStore.setMeshData(o,a,c,f,h)&&t,s&&null!=o.indexFrom&&null!=o.indexFrom&&(s[d]=o)}}return t}}},ZyIX:function(e,t,s){\"use strict\";var i=s(\"yE7X\"),r=s(\"b3VY\"),a=s(\"7F7D\"),n=s(\"mgI5\");const o=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;t.a=class extends n.a{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(o),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(t.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(t.scale)}}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"stencil\",brushes:[a.a],drawPhase:i.c.DEBUG|i.c.MAP|i.c.HIGHLIGHT,target:()=>this.getStencilTarget()}),s=e.registerRenderPass({name:\"tileInfo\",brushes:[r.a],drawPhase:i.c.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(e),t,s]}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const s=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,s)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},by2V:function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return I});var i=s(\"9MzC\"),r=s(\"kYAx\"),a=s(\"jKdI\"),n=s(\"fZs+\"),o=s(\"KFVX\"),l=s(\"wSAH\"),d=s(\"srIe\"),u=s(\"6S2I\"),c=s(\"zlDU\"),f=s(\"jIHu\"),h=(s(\"n4uK\"),s(\"of9L\")),p=s(\"0meK\"),y=(s(\"bfJE\"),s(\"yN2G\")),m=s(\"l8tk\");const g=u.a.getLogger(\"esri.views.2d.engine.webgl.AttributeStoreView\"),x=Object(m.b)(m.a,g),_=e=>2147483647&e;class v{constructor(e,t,s){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:i,pixelType:r,textureOnly:a}=e,n=Object(y.i)(r);this.shared=s,this.pixelType=r,this.size=t,this.textureOnly=a,a||(this.data=new n(Object(d.n)(i))),this._resetRange()}destroy(){Object(d.a)(this._texture,e=>e.dispose());for(const e in this._fbos)Object(d.a)(this._fbos[e],t=>{\"0\"===e&&t.detachColorTexture(),t.dispose()}),this._fbos[e]=null;this._texture=null}get _textureDesc(){return{target:3553,wrapMode:33071,pixelFormat:6408,dataType:this.pixelType,samplingMode:9728,width:this.size,height:this.size}}setData(e,t,s){const i=_(e),r=Object(d.n)(this.data),a=i*this.texelSize+t;!r||a>=r.length||(r[a]=s,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i))}getData(e,t){if(Object(d.g)(this.data))return null;const s=_(e)*this.texelSize+t;return!this.data||s>=this.data.length?null:this.data[s]}getTexture(e){return Object(d.o)(this._texture,()=>this._initTexture(e))}getFBO(e,t=0){if(Object(d.g)(this._fbos[t])){const s={colorTarget:0,depthStencilTarget:0},i=0===t?this.getTexture(e):this._textureDesc;this._fbos[t]=new p.a(e,s,i)}return this._fbos[t]}get locked(){return!(5121!==this.pixelType||!this.shared||this.textureOnly||!Object(l.a)(\"esri-atomics\")||!this.data)&&1===Atomics.load(this.data,0)}updateTexture(e){if(!this.locked)try{const t=this.dirtyStart,s=this.dirtyEnd;if(t>s)return;this._resetRange();const i=Object(d.n)(this.data).buffer,r=this.getTexture(e),a=4,n=(t-t%this.size)/this.size,o=n,l=(s-s%this.size)/this.size,u=n*this.size*a,f=(this.size+l*this.size)*a-u,h=Object(y.i)(this.pixelType),p=h.BYTES_PER_ELEMENT;try{new h(i,u*p,f)}catch(e){console.debug(e)}const m=new h(i,u*p,f),x=this.size,_=l-o+1;if(_>this.size)return void g.error(new c.a(\"mapview-webgl\",\"Out-of-bounds index when updating AttributeData\"));r.updateData(0,0,o,x,_,m)}catch(e){console.debug(e)}}update(e){const{data:t,start:s,end:i}=e;if(Object(d.h)(t)){const i=this.data,r=s*this.texelSize;for(let s=0;s<t.length;s++)e.layout&1<<s%this.texelSize&&(i[r+s]=t[s])}this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,i)}resize(e,t){const s=this.size;if(this.size=t,this.textureOnly)return void(s!==this.size&&(this._lastTexture=this._texture,this._texture=null));const i=Object(y.i)(this.pixelType);this.destroy(),this.data=new i(Object(d.n)(e.buffer))}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(e){const t=new h.a(e,this._textureDesc,Object(d.o)(this.data,void 0));if(Object(d.h)(this._lastTexture)&&this._fbos[0]){const s=this._lastTexture.descriptor.width,i=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(e),o=Object(y.j)(r),l=new(Object(y.i)(r))(new ArrayBuffer(s*i*o*this.texelSize)),d=e.getBoundFramebufferObject(),{x:u,y:c,width:f,height:h}=e.getViewport();e.bindFramebuffer(n),n.readPixels(0,0,s,i,a,r,l),t.updateData(0,0,0,2*s,i/2,l),e.setViewport(u,c,f,h),e.bindFramebuffer(d)}return this.destroy(),this._texture=t,this._texture}}class b{constructor(){this._initialized=!1,this._forceNextUpload=!1,this._locked=!1}initialize(e){const{blocks:t,shared:s,size:i}=e;if(this.shared=s,this.size=i,x(\"Initializing AttributeStoreView\",e),Object(d.g)(this._data))this._data=Object(d.j)(t,e=>new v(e,i,s));else for(let r=0;r<this._data.length;r++){const e=this._data[r],a=t[r];Object(d.h)(a)&&(Object(d.g)(e)?this._data[r]=new v(a,i,s):e.resize(a,i))}this._initialized=!0}destroy(){Object(d.a)(this._data,e=>Object(d.j)(e,e=>e.destroy())),Object(d.a)(this._defaultTexture,e=>e.dispose())}getBlock(e){return Object(d.g)(this._data)?null:this._data[e]}setLabelMinZoom(e,t){this.setData(e,0,1,t)}getLabelMinZoom(e){return this.getData(e,0,1,255)}getFilterFlags(e){return this.getData(e,0,0,0)}getVVSize(e){return this.getData(e,f.b,0,0)}getData(e,t,s,i){if(!this._data)return 0;const r=Object(d.n)(this._data)[t];if(Object(d.g)(r))return 0;const a=r.getData(e,s);return Object(d.h)(a)?a:i}setData(e,t,s,i){const r=Object(d.n)(this._data)[t];Object(d.n)(r).setData(e,s,i)}lockTextureUpload(){this._locked=!0}unlockTextureUpload(){this._locked=!1}forceTextureUpload(){this._forceNextUpload=!0}async requestUpdate(e){if(this._pendingAttributeUpdate)return void g.error(new c.a(\"mapview-webgl\",\"Tried to update attribute data with a pending update\"));const t=Object(i.g)();return x(\"AttributeStoreView Update Requested\",e),this._pendingAttributeUpdate={data:e,resolver:t},t.promise}update(){if(this._initialized&&Object(d.h)(this._pendingAttributeUpdate)){const{data:e,resolver:t}=this._pendingAttributeUpdate,s=Object(d.n)(this._data);for(let i=0;i<e.blocks.length;i++){const t=e.blocks[i],r=s[i];Object(d.a)(r,e=>Object(d.a)(t,t=>{x(\"Updating block \"+i,t),e.update(t)}))}this._pendingAttributeUpdate=null,t()}}bindTextures(e){this.update();const t=this._getDefaultTexture(e);if(!this._initialized)return e.bindTexture(t,f.s),e.bindTexture(t,f.t),e.bindTexture(t,f.u),void e.bindTexture(t,f.v);const s=Object(d.n)(this._data);this._locked&&!this._forceNextUpload||(Object(d.e)(s,t=>t.updateTexture(e)),this._forceNextUpload=!1),e.bindTexture(Object(d.k)(s[0],t,t=>t.getTexture(e)),f.s),e.bindTexture(Object(d.k)(s[1],t,t=>t.getTexture(e)),f.t),e.bindTexture(Object(d.k)(s[2],t,t=>t.getTexture(e)),f.u),e.bindTexture(Object(d.k)(s[3],t,t=>t.getTexture(e)),f.v)}_getDefaultTexture(e){return Object(d.g)(this._defaultTexture)&&(this._defaultTexture=new h.a(e,{wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array(4))),this._defaultTexture}}var D=s(\"ZyIX\"),B=s(\"nvBr\"),O=s(\"qRWG\"),L=s(\"gEht\"),T=s(\"m0D6\"),F=s(\"sq/B\");function j(e,t){const s=t.length;if(e<t[0].value||1===s)return t[0].size;for(let i=1;i<s;i++)if(e<t[i].value)return t[i-1].size+(e-t[i-1].value)/(t[i].value-t[i-1].value)*(t[i].size-t[i-1].size);return t[s-1].size}function w(e,t,s=0){if(Object(d.g)(t))return e[s+0]=0,e[s+1]=0,e[s+2]=0,void(e[s+3]=0);const{r:i,g:r,b:a,a:n}=t;e[s+0]=i*n/255,e[s+1]=r*n/255,e[s+2]=a*n/255,e[s+3]=n}class R{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.ddColors=new Float32Array(32),this.ddBackgroundColor=new Float32Array(4),this.ddActiveDots=new Float32Array(8),this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:\"geographic\",vvOpacityEnabled:!1}}getSizeVVFieldStops(e){const t=this._vvSizeFieldStops;switch(t.type){case\"static\":return t;case\"level-dependent\":return Object(d.o)(t.levels[e],()=>{let s=1/0,i=0;for(const o in t.levels){const t=parseFloat(o),r=Math.abs(e-t);r<s&&(s=r,i=t)}if(s===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const r=Math.pow(2,(e-i)/2),a=Object(d.n)(t.levels[i]),n=new Float32Array(a.values);return n[2]*=r,n[3]*=r,{sizes:Object(d.n)(a.sizes),values:n}})}}get vvMaterialParameters(){return this._vvMaterialParameters}update(e){Object(d.h)(this._vvInfo)&&this._updateVisualVariables(this._vvInfo.vvRanges,e)}setInfo(e,t,s){switch(Object(d.h)(s)&&s.forEach(e=>this._updateEffects(e)),this._vvInfo=t,e.type){case\"dot-density\":this._updateDotDensityInfo(e)}}getVariation(){return{ddDotBlending:this.ddDotBlending,outsideLabelsVisible:this.outsideLabelsVisible,oesTextureFloat:Object(F.a)().supportsTextureFloat}}getVariationHash(){return(this.ddDotBlending?1:0)|(this.outsideLabelsVisible?1:0)<<1}_updateEffects(e){Object(d.h)(e)&&e.filter&&e.filter.enabled&&(this.outsideLabelsVisible=e.excludedLabelsVisible)}_updateVisualVariables(e,t){const s=this._vvMaterialParameters;if(s.vvOpacityEnabled=!1,s.vvSizeEnabled=!1,s.vvColorEnabled=!1,s.vvRotationEnabled=!1,!e)return;const i=e.size;if(i){if(s.vvSizeEnabled=!0,i.minMaxValue){const e=i.minMaxValue;let s,r;if(Object(y.m)(e.minSize)&&Object(y.m)(e.maxSize))if(Object(y.n)(e.minSize)&&Object(y.n)(e.maxSize))s=Object(O.d)(e.minSize),r=Object(O.d)(e.maxSize);else{const i=t.scale;s=Object(O.d)(j(i,e.minSize.stops)),r=Object(O.d)(j(i,e.maxSize.stops))}this.vvSizeMinMaxValue.set([e.minDataValue,e.maxDataValue,s,r])}if(i.scaleStops&&(this.vvSizeScaleStopsValue=Object(O.d)(j(t.scale,i.scaleStops.stops))),i.unitValue){const e=Object(L.c)(t.spatialReference)/T.a[i.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=e/t.resolution}i.fieldStops&&(this._vvSizeFieldStops=i.fieldStops)}const r=e.color;r&&(s.vvColorEnabled=!0,this.vvColorValues.set(r.values),this.vvColors.set(r.colors));const a=e.opacity;a&&(s.vvOpacityEnabled=!0,this.vvOpacityValues.set(a.values),this.vvOpacities.set(a.opacities));const n=e.rotation;n&&(s.vvRotationEnabled=!0,s.vvRotationType=n.type)}_updateDotDensityInfo(e){const t=e.attributes;this.ddDotValue=e.dotValue,this.ddDotScale=e.referenceScale,this.ddDotSize=e.dotSize,this.ddDotBlending=e.dotBlendingEnabled,this.ddSeed=e.seed;for(let s=0;s<f.g;s++){const e=s>=t.length?new B.a([0,0,0,0]):t[s].color;w(this.ddColors,e,4*s)}for(let s=0;s<8;s++)this.ddActiveDots[s]=s<e.attributes.length?1:0;w(this.ddBackgroundColor,e.backgroundColor)}}class I extends D.a{constructor(e){super(e),this._rendererInfo=new R,this._materialItemsRequestQueue=new a.a,this.attributeView=new b}destroy(){this.removeAllChildren(),this.children.forEach(e=>e.destroy()),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(e,t,s){this._rendererInfo.setInfo(e,t,s),this.requestRender()}async getMaterialItems(e,t){if(!e||0===e.length)return null;const s=Object(i.g)();return this._materialItemsRequestQueue.push({items:e,abortOptions:t,resolver:s}),this.requestRender(),s.promise}onTileData(e,t){if(t.addOrUpdate&&\"tileDisplayData\"in t.addOrUpdate)e.setData(t);else{const s=t.addOrUpdate&&n.a.decode(t.addOrUpdate),i={...t,addOrUpdate:s};e.setData(i)}this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}doRender(e){if(this._materialItemsRequestQueue.length>0){let t=this._materialItemsRequestQueue.pop();for(;t;)this._processMaterialItemRequest(e,t),t=this._materialItemsRequestQueue.pop()}super.doRender(e)}renderChildren(e){for(const t of this.children)t.commitChanges(e);this._rendererInfo.update(e.state),super.renderChildren(e)}createTile(e){const t=this._tileInfoView.getTileBounds(Object(r.d)(),e);return new o.a(e,t)}destroyTile(e){this.removeChild(e),e.destroy()}createRenderParams(e){return{...super.createRenderParams(e),rendererInfo:this._rendererInfo,attributeView:this.attributeView}}_processMaterialItemRequest(e,{items:t,abortOptions:s,resolver:r}){const{painter:a,pixelRatio:n}=e,o=t.map(e=>a.textureManager.rasterizeItem(e.symbol,n,e.glyphIds,s));Object(i.b)(o).then(e=>{if(!this.stage)return void r.reject();const s=e.map((e,s)=>({id:t[s].id,mosaicItem:e}));r.resolve(s)},r.reject)}}},\"fZs+\":function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return w});var i=s(\"yE7X\"),r=s(\"yN2G\"),a=class{constructor(){this._byGeometryType=null}get satisfied(){return!this._byGeometryType}reset(){this._byGeometryType=null}verticesFor(e){return this._byGeometryType?this._byGeometryType[e].vertices:0}indicesFor(e){return this._byGeometryType?this._byGeometryType[e].indices:0}needMore(e,t,s){if(!t&&!s)return;this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]);const i=this._byGeometryType[e];i.vertices+=t,i.indices+=s}};class n{constructor(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}clone(){const e=new n;for(let t=0;t<this.geometries.length;t++){const s=this.geometries[t],i=e.geometries[t];i.indexBuffer=s.indexBuffer.slice(),i.vertexBuffer={};for(const e in s.vertexBuffer){const{data:t,stride:r}=s.vertexBuffer[e];i.vertexBuffer[e]={data:t.slice(),stride:r}}}return e}static deserialize(e){const t=new n;for(let s=0;s<5;++s){t.geometries[s].indexBuffer=new Uint32Array(e.geometries[s].indexBuffer),t.geometries[s].vertexBuffer={};for(const i in e.geometries[s].vertexBuffer)t.geometries[s].vertexBuffer[i]={data:Object(r.c)(e.geometries[s].vertexBuffer[i].data,e.geometries[s].vertexBuffer[i].stride),stride:e.geometries[s].vertexBuffer[i].stride}}return t}serialize(){const e={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]};for(let t=0;t<5;++t)for(const s in this.geometries[t].vertexBuffer)e.geometries[t].vertexBuffer[s]={data:this.geometries[t].vertexBuffer[s].data.buffer,stride:this.geometries[t].vertexBuffer[s].stride};return e}getBuffers(){const e=[];for(let t=0;t<5;++t){e.push(this.geometries[t].indexBuffer.buffer);for(const s in this.geometries[t].vertexBuffer)e.push(this.geometries[t].vertexBuffer[s].data.buffer)}return e}}var o=n,l=s(\"opKs\");const d=s(\"6S2I\").a.getLogger(\"esri.views.2d.engine.webgl.WGLDisplayList\");function u(e,t,s,...i){t<e.length?e.splice(t,s,...i):e.push(...i)}const c=new Map;c.set(i.c.MAP,[i.d.FILL,i.d.LINE,i.d.MARKER,i.d.TEXT]),c.set(i.c.LABEL,[i.d.LABEL]),c.set(i.c.LABEL_ALPHA,[i.d.LABEL]);class f{constructor(e=!1){this.symbolLevels=[],this.unified=e}replay(e,t,s){if(this.unified)for(const i of this.symbolLevels)for(const r of i.zLevels){const i=r.geometryDPInfo.unified;if(i)for(const r of i){const i=e.painter.getGeometryBrush(r.geometryType),a=t.getGeometry(r.geometryType);i.prepareState(e,t),i.drawGeometry(e,t,r,a,s)}}}get empty(){return!this.symbolLevels||0===this.symbolLevels.length}clear(){this.symbolLevels.length=0}addToList(e,t){if(Array.isArray(e))for(const s of e)this._addToList(s,t);else this._addToList(e,t)}removeFromList(e){Array.isArray(e)||(e=[e]);let t=null;for(const s of e)t=this._removeFromList(s);return t}byType(e,t){for(const s of this.symbolLevels)for(const i of s.zLevels){const s=i.geometryDPInfo,r=this.getDPInfoType(e);if(s[r])for(const e of s[r])t(e)}}clone(){const e=new f(this.unified);for(const t of this.symbolLevels)e.symbolLevels.push(t.clone());return e}splitAfter(e){const t=this._getDisplayList(e.symbolLevel,e.zOrder,e.geometryType),s=t.length,i=e.indexFrom+e.indexCount;for(let r=0;r<s;++r){const s=t[r];if(s.geometryType===e.geometryType&&i>s.indexFrom&&i<=s.indexFrom+s.indexCount){if(i<s.indexFrom+s.indexCount){const e=new h;e.geometryType=s.geometryType,e.materialKey=s.materialKey,e.indexFrom=i,e.indexCount=s.indexFrom+s.indexCount-i,t.splice(r+1,0,e),s.indexCount=i-s.indexFrom}return r}}}_addToList(e,t){const s=this._getDisplayList(e.symbolLevel,e.zOrder,e.geometryType),i=null!=t?t:s.length-1,r=i>=0&&i<s.length?s[i]:null;if(null===r||r.materialKey!==e.materialKey||r.indexFrom+r.indexCount!==e.indexFrom||this.unified&&r.geometryType!==e.geometryType){const t=new h;t.indexFrom=e.indexFrom,t.indexCount=e.indexCount,t.materialKey=e.materialKey,t.geometryType=e.geometryType,u(s,i+1,0,t)}else r.indexCount+=e.indexCount}_removeFromList(e){const t=this._getDisplayList(e.symbolLevel,e.zOrder,e.geometryType),s=t.length;let i;for(let r=0;r<s;++r){const s=t[r];if(e.indexFrom+e.indexCount>s.indexFrom&&e.indexFrom<s.indexFrom+s.indexCount&&(!this.unified||s.geometryType===e.geometryType)){i=r;break}}if(void 0!==i){const s=t[i];if(e.indexFrom===s.indexFrom)return s.indexCount-=e.indexCount,s.indexFrom+=e.indexCount,0===s.indexCount&&u(t,i,1),i-1;if(e.indexFrom+e.indexCount===s.indexFrom+s.indexCount)return s.indexCount-=e.indexCount,0===s.indexCount?(u(t,i,1),i-1):i;{const r=s.indexFrom,a=e.indexFrom-s.indexFrom,n=e.indexCount,o=s.indexFrom+s.indexCount-(e.indexFrom+e.indexCount);s.indexCount=a;const l=new h;return l.geometryType=s.geometryType,l.materialKey=s.materialKey,l.indexFrom=r+a+n,l.indexCount=o,u(t,i+1,0,l),i}}return null}_getDisplayList(e,t,s){let r;const a=this.symbolLevels.length;for(let i=0;i<a;i++)if(this.symbolLevels[i].symbolLevel===e){r=this.symbolLevels[i];break}let n;r||(r=new m,r.symbolLevel=e,this.symbolLevels.push(r));const o=r.zLevels.length;for(let i=0;i<o;i++)if(r.zLevels[i].zLevel===t){n=r.zLevels[i];break}let l;if(n||(n=new y,n.geometryDPInfo=new p,n.zLevel=t,r.zLevels.push(n)),this.unified)n.geometryDPInfo.unified||(n.geometryDPInfo.unified=[]),l=n.geometryDPInfo.unified;else switch(s){case i.d.FILL:n.geometryDPInfo.fill||(n.geometryDPInfo.fill=[]),l=n.geometryDPInfo.fill;break;case i.d.LINE:n.geometryDPInfo.line||(n.geometryDPInfo.line=[]),l=n.geometryDPInfo.line;break;case i.d.MARKER:n.geometryDPInfo.marker||(n.geometryDPInfo.marker=[]),l=n.geometryDPInfo.marker;break;case i.d.TEXT:n.geometryDPInfo.text||(n.geometryDPInfo.text=[]),l=n.geometryDPInfo.text;break;case i.d.LABEL:n.geometryDPInfo.label||(n.geometryDPInfo.label=[]),l=n.geometryDPInfo.label;break;default:console.error(\"Trying to add a record with geometry type '\"+s+\"'.\")}return l}getDPInfoType(e){if(this.unified)return\"unified\";switch(e){case i.d.FILL:return\"fill\";case i.d.LINE:return\"line\";case i.d.MARKER:return\"marker\";case i.d.TEXT:return\"text\";case i.d.LABEL:return\"label\";default:return void d.error(\"DisplayList: Tried to convert unknown geometryType: \"+e)}}}class h{constructor(){this.materialKey=null,this.indexFrom=0,this.indexCount=0}clone(){const e=new h;return e.geometryType=this.geometryType,e.materialKey=this.materialKey,e.indexFrom=this.indexFrom,e.indexCount=this.indexCount,e}}class p{constructor(){this.fill=null,this.line=null,this.marker=null,this.text=null,this.label=null,this.unified=null}clone(){const e=new p;return e.fill=this.fill&&this.fill.map(e=>e.clone()),e.line=this.line&&this.line.map(e=>e.clone()),e.marker=this.marker&&this.marker.map(e=>e.clone()),e.text=this.text&&this.text.map(e=>e.clone()),e.label=this.label&&this.label.map(e=>e.clone()),e.unified=this.unified&&this.unified.map(e=>e.clone()),e}}class y{constructor(){this.geometryDPInfo=new p}clone(){const e=new y;return e.zLevel=this.zLevel,e.geometryDPInfo=this.geometryDPInfo.clone(),e}}class m{constructor(){this.zLevels=[]}clone(){const e=new m;e.symbolLevel=this.symbolLevel;for(const t of this.zLevels)e.zLevels.push(t.clone());return e}}var g=f,x=s(\"wnVl\"),_=s(\"ZByl\");function v(e){const t=[[],[],[],[],[]],s=e;for(const i of s)for(const e of i.displayRecords)t[e.geometryType].push(e);return t}class b{constructor(){}get displayObjectRegistry(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const e of this.displayObjects)this._displayObjectRegistry.set(e.id,e)}return this._displayObjectRegistry}get displayList(){return this._displayList}computeDisplayList(e){if(this._displayList=new g(e),e)for(const t of this.displayObjects)for(const e of t.displayRecords)this._displayList.addToList(e);else{const e=v(this.displayObjects),t=e.length;for(let s=0;s<t;++s)this._displayList.addToList(e[s])}}clone(){const e=new b;return this.displayObjects&&(e.displayObjects=this.displayObjects.map(e=>e.clone())),e}serialize(e){return Object(x.b)(e,this.displayObjects),e}_deserializeObjects(e){const t=e.readInt32(),s=new Array(t),i=new Map;for(let r=0;r<s.length;++r){const t=_.a.deserialize(e);s[r]=t,i.set(t.id,t)}this.displayObjects=s,this._displayList=null,this._displayObjectRegistry=i}static deserialize(e){const t=new b;return t._deserializeObjects(e),t}}var D=b,B=s(\"PeSW\"),O=s(\"acOm\"),L=s(\"2vGY\");const T=new a,F=new a;function j(e,t){const s={};for(const i in e){const a={data:Object(r.b)(t,e[i]),stride:e[i]};s[i]=a}return s}class w{constructor(){this.tileDisplayData=null,this.tileBufferData=null}reshuffle(){T.reset();const e=v(this.tileDisplayData.displayObjects);for(const i of e)for(const e of i)e&&T.needMore(e.geometryType,e.meshData?e.meshData.vertexCount:e.vertexCount,e.meshData?e.meshData.indexData.length:e.indexCount);const t=e.length,s=new o;for(let i=0;i<t;++i){s.geometries[i].indexBuffer=new Uint32Array(Math.round(1.5*T.indicesFor(i)));const e=[];for(const s in this.tileBufferData.geometries[i].vertexBuffer)e.push(this.tileBufferData.geometries[i].vertexBuffer[s].stride);const t=w._computeVertexAlignment(e),a=Math.round(1.5*T.verticesFor(i)),n=w._align(a,t);for(const o in this.tileBufferData.geometries[i].vertexBuffer){const e=this.tileBufferData.geometries[i].vertexBuffer[o].stride;s.geometries[i].vertexBuffer[o]={stride:e,data:Object(r.b)(n,e)}}}F.reset(),this.tileDisplayData.displayList.clear();for(let i=0;i<t;++i){const t=e[i];for(const e of t){if(e.meshData)e.writeMeshDataToBuffers(F.verticesFor(i),s.geometries[i].vertexBuffer,F.indicesFor(i),s.geometries[i].indexBuffer),e.meshData=null;else{const t=this.tileBufferData.geometries[i].vertexBuffer,a=this.tileBufferData.geometries[i].indexBuffer,n=s.geometries[i].vertexBuffer,o=s.geometries[i].indexBuffer,l=F.verticesFor(i),d=F.indicesFor(i);Object(r.d)(l,d,n,o,e,t,a),e.vertexFrom=l,e.indexFrom=d}F.needMore(i,e.vertexCount,e.indexCount)}this.tileDisplayData.displayList.unified||this.tileDisplayData.displayList.addToList(t)}if(this.tileDisplayData.displayList.unified)for(const i of this.tileDisplayData.displayObjects)this.tileDisplayData.displayList.addToList(i.displayRecords);this.tileBufferData=s}reshuffleBulkAdd(e,t,s){const a=e.addOrUpdate.tileDisplayData.displayObjects,n=this.tileDisplayData.displayObjects;T.reset();for(let i=0;i<n.length;i++){const e=n[i];for(let t=0;t<e.displayRecords.length;t++){const s=e.displayRecords[t];T.needMore(s.geometryType,s.vertexCount,s.indexCount)}}for(let i=t;i<a.length;i++){const e=a[i];for(let r=i===t?s:0;r<e.displayRecords.length;r++){const t=e.displayRecords[r];T.needMore(t.geometryType,t.vertexCount,t.indexCount)}}const l=new o;for(let i=0;i<5;i++){l.geometries[i].indexBuffer=new Uint32Array(Math.round(1.5*T.indicesFor(i)));const e=[],t=this.tileBufferData.geometries[i].vertexBuffer;for(const i in t)e.push(t[i].stride);const s=w._computeVertexAlignment(e),a=Math.round(1.5*T.verticesFor(i)),n=w._align(a,s);for(const o in t){const e=t[o].stride,s=Object(r.b)(n,e);l.geometries[i].vertexBuffer[o]={stride:e,data:s}}}F.reset(),this.tileDisplayData.displayList.clear();for(let i=0;i<n.length;i++){const e=n[i];for(let t=0;t<e.displayRecords.length;t++){const s=e.displayRecords[t],i=s.geometryType,a=this.tileBufferData.geometries[i].vertexBuffer,n=this.tileBufferData.geometries[i].indexBuffer,o=l.geometries[i].vertexBuffer,d=l.geometries[i].indexBuffer,u=F.verticesFor(i),c=F.indicesFor(i);Object(r.d)(u,c,o,d,s,a,n),s.vertexFrom=u,s.indexFrom=c,F.needMore(i,s.vertexCount,s.indexCount),this.tileDisplayData.displayList.addToList(s)}}const d=this.tileDisplayData.displayObjectRegistry;if(0!==s){const e=a[t];for(let t=0;t<s;t++){const s=e.displayRecords[t];if(d.get(e.id)&&s.geometryType!==i.d.FILL&&s.geometryType!==i.d.LINE)continue;const a=s.geometryType,n=this.tileBufferData.geometries[a].vertexBuffer,o=this.tileBufferData.geometries[a].indexBuffer,u=l.geometries[a].vertexBuffer,c=l.geometries[a].indexBuffer,f=F.verticesFor(a),h=F.indicesFor(a);Object(r.d)(f,h,u,c,s,n,o),s.vertexFrom=f,s.indexFrom=h,F.needMore(a,s.vertexCount,s.indexCount),this.tileDisplayData.displayList.addToList(s)}}for(let o=t;o<a.length;o++){const n=a[o],u=o===t?s:0,c=d.get(n.id);for(let t=u;t<n.displayRecords.length;t++){const s=n.displayRecords[t];if(c){if(s.geometryType!==i.d.FILL&&s.geometryType!==i.d.LINE)continue;c.displayRecords.push(s)}const a=s.geometryType,o=e.addOrUpdate.tileBufferData.geometries[a],d=o.vertexBuffer,u=o.indexBuffer,f=l.geometries[a].vertexBuffer,h=l.geometries[a].indexBuffer,p=F.verticesFor(a),y=F.indicesFor(a);Object(r.d)(p,y,f,h,s,d,u),s.vertexFrom=p,s.indexFrom=y,F.needMore(a,s.vertexCount,s.indexCount),this.tileDisplayData.displayList.addToList(s)}c||(d.set(n.id,n),this.tileDisplayData.displayObjects.push(n))}this.tileBufferData=l}getStrides(){const e=[];for(let t=0;t<this.tileBufferData.geometries.length;++t){const s=this.tileBufferData.geometries[t];e[t]={};for(const i in s.vertexBuffer)e[t][i]=s.vertexBuffer[i].stride}return e}clone(){const e=new w;return e.tileBufferData=this.tileBufferData.clone(),e.tileDisplayData=this.tileDisplayData.clone(),e}_guessSize(){const{displayObjects:e}=this.tileDisplayData,t=Math.min(e.length,4);let s=0;for(let i=0;i<t;i++)s=Math.max(s,e[i].displayRecords.length);return 2*(12*e.length+e.length*s*40)}serialize(){const e=this.tileBufferData.serialize(),t=this.tileBufferData.getBuffers(),s=this.tileDisplayData.serialize(new B.a(Int32Array,this._guessSize())).buffer();return t.push(s),{result:{displayData:s,bufferData:e},transferList:t}}static decode(e){const t=O.a.deserializeDisplayObjects(e),s={};for(const i in e.vertexBuffersMap)s[i]=L.a.decode(e.vertexBuffersMap[i]);return w.fromMeshData({displayObjects:t,vertexBuffersMap:s})}static fromMeshData(e){const t=new w,s=new D,i=new o;s.displayObjects=e.displayObjects;for(const r in e.vertexBuffersMap){const t=e.vertexBuffersMap[r];i.geometries[r].indexBuffer=t.indexBuffer,i.geometries[r].vertexBuffer=t.namedBuffers}return t.tileDisplayData=s,t.tileBufferData=i,t}static bind(e,t){const s=new w;return s.tileDisplayData=e,s.tileBufferData=t,s}static create(e,t){const s=new w;s.tileDisplayData=new D,s.tileDisplayData.displayObjects=e;const i=[0,0,0,0,0],r=[0,0,0,0,0],a=[[],[],[],[],[]];for(const o of e)for(const e of o.displayRecords)a[e.geometryType].push(e),i[e.geometryType]+=e.meshData.vertexCount,r[e.geometryType]+=e.meshData.indexData.length;const n=new o,d=function(e){return[e.fill||{},e.line||{},e.icon||{},e.text||{},e.label||{}]}(t);for(let o=0;o<5;o++){const e=new Uint32Array(r[o]),t=j(d[o],i[o]);l.a.writeAllMeshDataToBuffers(a[o],t,e),n.geometries[o]={indexBuffer:e,vertexBuffer:t}}return s.tileBufferData=n,s}static _align(e,t){const s=e%t;return 0===s?e:e+(t-s)}static _computeVertexAlignment(e){let t=!1,s=!1;for(const i of e)i%4==2?t=!0:i%4!=0&&(s=!0);return s?4:t?2:1}}},gzK8:function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return h}),s.d(t,\"b\",function(){return d});var i=s(\"srIe\"),r=s(\"qRWG\"),a=s(\"jIHu\"),n=s(\"yE7X\"),o=s(\"qaIE\"),l=s(\"NIRN\");function d(e,t){if(!e||!t)return e;switch(t){case\"radius\":case\"distance\":return 2*e;case\"diameter\":case\"width\":return e;case\"area\":return Math.sqrt(e)}return e}function u(e){return e.map(e=>function(e){return{value:e.value,size:Object(r.f)(e.size)}}(e))}function c(e){return\"string\"==typeof e||\"number\"==typeof e?Object(r.f)(e):{type:\"size\",expression:e.expression,stops:u(e.stops)}}const f=e=>{const t=[],s=[],i=u(e),n=i.length;for(let o=0;o<6;o++){const e=i[Math.min(o,n-1)];t.push(e.value),s.push(null==e.size?a.p:Object(r.d)(e.size))}return{values:new Float32Array(t),sizes:new Float32Array(s)}};function h(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t)return{vvFields:t,vvRanges:s};for(const i of e)if(i.field&&(t[i.type]=i.field),\"size\"===i.type){s.size||(s.size={});const e=i;switch(Object(l.a)(e)){case n.e.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:c(e.minSize),maxSize:c(e.maxSize)};break;case n.e.SIZE_SCALE_STOPS:s.size.scaleStops={stops:u(e.stops)};break;case n.e.SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=f(e.levels[s]);s.size.fieldStops={type:\"level-dependent\",levels:t}}else s.size.fieldStops={type:\"static\",...f(e.stops)};break;case n.e.SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation}}}else\"color\"===i.type?s.color=m(i):\"opacity\"===i.type?s.opacity=p(i):\"rotation\"===i.type&&(s.rotation={type:i.rotationType});return{vvFields:t,vvRanges:s}}function p(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(\"string\"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const i=s[Math.min(e,s.length-1)];t.values[e]=i.value,t.opacities[e]=i.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].opacity;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function y(e,t,s){e[4*t+0]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function m(e){if(Object(i.g)(e))return null;if(e.normalizationField)return null;const t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if(\"string\"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;t.field=e.field;const s=e.stops;for(let e=0;e<8;++e){const i=s[Math.min(e,s.length-1)];t.values[e]=i.value,y(t.colors,e,i.color)}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].color;for(let e=0;e<8;e++)t.values[e]=1/0,y(t.colors,e,s)}}for(let s=0;s<32;s+=4)Object(o.b)(t.colors,s,!0);return t}},l8tk:function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return r}),s.d(t,\"b\",function(){return i});const i=(e,t)=>e&&((...e)=>t.warn(\"DEBUG:\",...e))||(()=>null),r=!1},lx5q:function(e,t,s){\"use strict\";var i=s(\"srIe\");t.a=class{constructor(e=Number.POSITIVE_INFINITY){this.size=0,this._start=0,this.maxSize=e,this._buffer=isFinite(e)?new Array(e):[]}get entries(){return this._buffer}enqueue(e){if(this.size===this.maxSize){const t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=e:this._buffer[this._start+this.size++]=e,null}dequeue(){if(0===this.size)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}clear(){for(;Object(i.h)(this.dequeue()););}}}}]);","name":"10.2932e307ade2d0da91f0.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[10],{\n\n/***/ \"5LEI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return r; });\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"wSAH\");\n/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HJJS\");\n/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rlSK\");\n/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"jHF5\");\n/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"fEsP\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__[/* DisplayObject */ \"a\"]{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])(),tileMat3:Object(_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__[/* c */ \"b\"])()},this.triangleCount=0,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"](s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* s */ \"i\"])(r,a,0,0,0,d,0,n,h,1),Object(_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__[/* m */ \"f\"])(this.transforms.dvs,o.displayViewMat3,r)}}\n\n\n/***/ }),\n\n/***/ \"KFVX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ WGLTile_m; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/CircularArray.js\nvar CircularArray = __webpack_require__(\"lx5q\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2.js\nvar vec2 = __webpack_require__(\"M0lq\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js\nvar definitions = __webpack_require__(\"jIHu\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat2d.js\nvar mat2d = __webpack_require__(\"opr1\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/mat2df32.js\nvar mat2df32 = __webpack_require__(\"LGNZ\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec2f32.js\nvar vec2f32 = __webpack_require__(\"c46T\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js\nvar TiledDisplayObject = __webpack_require__(\"5LEI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(\"yE7X\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js + 1 modules\nvar Utils = __webpack_require__(\"yN2G\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/DirtyMap.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction DirtyMap_i(t,i,r){if(!t.allDirty)if(null!=t.from&&null!=t.count){const s=Math.min(t.from,i),l=Math.max(t.from+t.count,i+r)-s;t.from=s,t.count=l}else t.from=i,t.count=r}/* harmony default export */ var DirtyMap = (class{constructor(){this._dirties=Object(Utils[\"e\" /* createGeometryData */])((()=>({indices:{from:null,count:null,allDirty:!1}})),(()=>({vertices:{from:null,count:null,allDirty:!1}})))}hasDirty(){for(const t of this._dirties)if(null!==t.data.indices.count||t.data.indices.allDirty)return!0;return!1}markAllClean(){for(const t of this._dirties){t.data.indices.from=null,t.data.indices.count=null,t.data.indices.allDirty=!1;for(const i in t.buffers)t.buffers[i].data.vertices.from=null,t.buffers[i].data.vertices.count=null,t.buffers[i].data.vertices.allDirty=!1}}markAllDirty(){for(const t of this._dirties){t.data.indices.allDirty=!0;for(const i in t.buffers)t.buffers[i].data.vertices.allDirty=!0}}forEach(t){for(let i=0;i<this._dirties.length;++i){const r=this._dirties[i],s={};for(const t in r.buffers){const i=r.buffers[t].data.vertices;(i.allDirty||null!=i.from&&null!=i.count&&i.count>0)&&(s[t]=i)}const l=r.data.indices;let n;n=l.allDirty||null!=l.from&&null!=l.count&&l.count>0?{indices:l,vertices:s}:{indices:null,vertices:s},(n.indices||Object.keys(n).length>0)&&t(n,i)}}markDirtyIndices(t,r,s){DirtyMap_i(this._dirties[t].data.indices,r,s)}markDirtyVertices(t,r,s,l){DirtyMap_i(this._dirties[t].buffers[r].data.vertices,s,l)}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/FreeList.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass FreeList_e{constructor(e){this._largestRange=null,this._parent=e,this._updateLargestRange()}get largestRange(){return this._largestRange}rangeCreated(e){(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}rangeResized(e,t){e===this._largestRange?e.count<t&&this._updateLargestRange():(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}findBestRange(e){let t=this._parent._freeHead,n=null;for(;null!==t;)t.count>=e&&(!n||t.count-e<n.count-e)&&(n=t),t=t.next;return n}findAdjacentRanges(e,t){let n=!0,r=!1,s=null,o=this._parent._freeHead;for(;n&&!r;){const a=null!==s?s.from+s.count:0,l=null!==o?o.from:this._parent._size;e>=a&&e+t<=l?(n=!1,r=!0):null!==o?(s=o,o=o.next):n=!1}return[s,o]}_updateLargestRange(){let e=null,t=this._parent._freeHead;for(;null!==t;)(!e||t.count>e.count)&&(e=t),t=t.next;this._largestRange=e}}class FreeList_t{constructor(t,n){this._allocated=0,this._size=t,this._freeHead=t>0?{from:0,count:t,prev:null,next:null}:null,this._bookKeeper=n||new FreeList_e(this),this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}allocate(e){const n=this._bookKeeper.findBestRange(e);if(null===n)return-1;const r=n.from,s=n.count;if(n.from+=e,n.count-=e,this._bookKeeper.rangeResized(n,r,s),this._allocated+=e,0===n.count){const e=null!==n.prev?this._freeHead:n.next;FreeList_t._removeRange(n),this._freeHead=e}return r}free(e,n){const[r,s]=this._bookKeeper.findAdjacentRanges(e,n),o={from:e,count:n,prev:r,next:s};if(null!==r&&(r.next=o),null!==s&&(s.prev=o),this._bookKeeper.rangeCreated(o),this._allocated-=n,null!==s&&o.from+o.count===s.from){const e=o.from,n=o.count;FreeList_t._fuse(o,s),FreeList_t._removeRange(s),this._bookKeeper.rangeResized(o,e,n),this._bookKeeper.rangeResized(s,void 0,0)}if(null!==r&&r.from+r.count===o.from){const e=r.from,n=r.count;FreeList_t._fuse(r,o),FreeList_t._removeRange(o),this._bookKeeper.rangeResized(r,e,n),this._bookKeeper.rangeResized(o,void 0,0)}this._freeHead=null!==o.prev?this._freeHead:o}get fragmentation(){const e=this._size-this._allocated;if(0===e)return 0;return 1-this._bookKeeper.largestRange.count/e}static _removeRange(e){null!==e.prev?null!==e.next?(e.prev.next=e.next,e.next.prev=e.prev):e.prev.next=null:null!==e.next&&(e.next.prev=null)}static _fuse(e,t){e.count+=t.count,e.next=t.next,t.from+=t.count,t.count=0,null!==t.next&&(t.next.prev=e)}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayRecordStore.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst DisplayRecordStore_s=[\"FILL\",\"LINE\",\"MARKER\",\"TEXT\",\"LABEL\"];class DisplayRecordStore_o{constructor(t,r,s,o){this._strides=t,this._displayList=r,this._freeListsAndStorage={},this._dirtyMap=null,this._dirtyMap=s;for(const r in t){this._freeListsAndStorage[r]={vtxFreeList:o?new FreeList_t(o):null,idxFreeList:o?new FreeList_t(o):null,vertexBuffers:{},indexBuffer:o?new Uint32Array(o):null};for(const i in t[r])this._freeListsAndStorage[r].vertexBuffers[i]={data:o?Object(Utils[\"b\" /* allocateTypedArrayBuffer */])(o,t[r][i]):null,stride:t[r][i]}}}static fromTileData(e,r){const n=function(e){const t=e.getStrides(),r={};for(let e=0;e<t.length;e++)r[DisplayRecordStore_s[e]]=t[e];return r}(e),d=[0,0,0,0,0],a=[0,0,0,0,0],x=e.tileDisplayData.displayObjects;for(const e of x)for(const t of e.displayRecords)d[t.geometryType]=Math.max(d[t.geometryType],t.vertexFrom+t.vertexCount),a[t.geometryType]=Math.max(a[t.geometryType],t.indexFrom+t.indexCount);const u=new DisplayRecordStore_o(n,e.tileDisplayData.displayList,r,null);for(let r=0;r<e.tileBufferData.geometries.length;++r){const o=d[r],n=a[r],x=e.tileBufferData.geometries[r],f=DisplayRecordStore_s[r],l=u._storageFor(f),c=e.tileBufferData.geometries[r].indexBuffer;let m;l.indexBuffer=c,l.idxFreeList=new FreeList_t(c.length),l.idxFreeList.allocate(n);for(const i in x.vertexBuffer){const s=e.tileBufferData.geometries[r].vertexBuffer[i];l.vertexBuffers[i].data=s.data,l.vertexBuffers[i].stride=s.stride;const o=Object(Utils[\"o\" /* strideToPackingFactor */])(s.stride),n=s.data.length*o/s.stride;m||(m=n)}l.vtxFreeList=new FreeList_t(m),l.vtxFreeList.allocate(o)}return u}delete(e){const t=DisplayRecordStore_s[e.geometryType];this._freeVertices(t,e.vertexFrom,e.vertexCount),this._freeIndices(t,e.indexFrom,e.indexCount),this._displayList.removeFromList(e),e.vertexFrom=void 0,e.indexFrom=void 0}setMeshData(e,t,i,o,n){const d=DisplayRecordStore_s[e.geometryType];let a,x;e.meshData=null,void 0===e.vertexFrom?(x=t.vertexCount,a=this._allocateVertices(d,x)):t.vertexCount>e.vertexCount?(this._freeVertices(d,e.vertexFrom,e.vertexCount),x=t.vertexCount,a=this._allocateVertices(d,x)):t.vertexCount===e.vertexCount?(a=e.vertexFrom,x=e.vertexCount):(this._freeVertices(d,e.vertexFrom+t.vertexCount,e.vertexCount-t.vertexCount),a=e.vertexFrom,x=t.vertexCount);let u,f,l,c=!0;if(void 0===e.indexFrom?(u=n,l=t.indexCount,f=this._allocateIndices(d,l)):t.indexCount>e.indexCount?(u=this._displayList.removeFromList(e),this._freeIndices(d,e.indexFrom,e.indexCount),l=t.indexCount,f=this._allocateIndices(d,l)):t.indexCount===e.indexCount?(c=!1,f=e.indexFrom,l=e.indexCount):(u=this._displayList.removeFromList(e),this._freeIndices(d,e.indexFrom+t.indexCount,e.indexCount-t.indexCount),f=e.indexFrom,l=t.indexCount),-1!==a&&-1!==f){const s=this._storageFor(d);if(Object(Utils[\"d\" /* copyMeshData */])(a,f,s.vertexBuffers,s.indexBuffer,t,i,o),e.vertexFrom=a,e.indexFrom=f,e.vertexCount=t.vertexCount,e.indexCount=t.indexCount,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in i)this._dirtyMap.markDirtyVertices(e.geometryType,t,e.vertexFrom,e.vertexCount)}return c&&this._displayList.addToList(e,u),!0}return-1!==a&&this._freeVertices(d,a,x),-1!==f&&this._freeIndices(d,f,l),e.setMeshDataFromBuffers(t,i,o),e.vertexFrom=void 0,e.vertexCount=0,e.indexFrom=void 0,e.indexCount=0,!1}tryAddMeshData(e,t){const i=t.vertexBuffer,o=t.indexBuffer,n=DisplayRecordStore_s[e.geometryType],d=this._allocateVertices(n,e.vertexCount);if(-1===d)return this._freeVertices(n,d,e.vertexCount),!1;const a=this._allocateIndices(n,e.indexCount);if(-1===a)return this._freeVertices(n,d,e.vertexCount),this._freeIndices(n,a,e.indexCount),!1;const x=this._storageFor(n);if(Object(Utils[\"d\" /* copyMeshData */])(d,a,x.vertexBuffers,x.indexBuffer,e,i,o),e.vertexFrom=d,e.indexFrom=a,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in i)this._dirtyMap.markDirtyVertices(e.geometryType,t,d,e.vertexCount)}return this._displayList.addToList(e),!0}_allocateVertices(e,t){const r=this._storageFor(e),i=r.vtxFreeList.allocate(t);if(-1===i)return-1;return r.vtxFreeList.fragmentation>.5?-1:i}_freeVertices(e,t,r){this._storageFor(e).vtxFreeList.free(t,r)}_freeIndices(e,t,r){this._storageFor(e).idxFreeList.free(t,r)}_allocateIndices(e,t){const r=this._storageFor(e),i=r.idxFreeList.allocate(t);if(-1===i)return-1;return r.idxFreeList.fragmentation>.5?-1:i}_storageFor(e){return this._freeListsAndStorage[e]}_stridesFor(e,t){return this._strides[e][t]}}/* harmony default export */ var DisplayRecordStore = (DisplayRecordStore_o);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Fader.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var Fader = (class{constructor(t=400){this.duration=t,this._lastTime=0,this._elapsed=0,this._value=0,this._finished=!1}get value(){return this._value}reset(){this._lastTime=0,this._elapsed=0,this._value=0}step(){const t=performance.now();if(0===this._lastTime)return this._lastTime=t,this._value=0,!0;if(this._elapsed>=this.duration)return!0;const s=t-this._lastTime;return this._elapsed+=s,this._lastTime=t,this._value=Math.min(this._elapsed/this.duration,1),!1}});\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/mathUtils.js\nvar mathUtils = __webpack_require__(\"OKTS\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/builtins.js\nvar builtins = __webpack_require__(\"n4uK\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/BufferObject.js\nvar BufferObject = __webpack_require__(\"fOQB\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/FramebufferObject.js\nvar FramebufferObject = __webpack_require__(\"0meK\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/RenderingContext.js + 7 modules\nvar RenderingContext = __webpack_require__(\"bfJE\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLBuffers.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var WGLBuffers = (class{constructor(s){this.geometryMap=Object(Utils[\"e\" /* createGeometryData */])((()=>({indexBuffer:BufferObject[\"a\" /* default */].createIndex(s,35044),vao:null})),((t,f)=>({vertexBuffer:BufferObject[\"a\" /* default */].createVertex(s,Utils[\"a\" /* C_VBO_INFO */][f])})))}dispose(){for(let e=0;e<5;e++){const t=this.geometryMap[e];if(t){t.data.vao&&t.data.vao.dispose(!1),t.data.indexBuffer&&t.data.indexBuffer.dispose();for(const e in t.buffers)t.buffers[e]&&t.buffers[e].data.vertexBuffer.dispose()}}}get(e){const t=this.geometryMap[e],r={};for(const e in t.buffers)r[e]=t.buffers[e].data.vertexBuffer;return{indexBuffer:t.data.indexBuffer,get vao(){return t.data.vao},set vao(e){t.data.vao=e},vertexBufferMap:r}}has(e){return null!=this.geometryMap[e]}upload(e,t){t.forEach(((t,r)=>{this._upload(t,r,e)}))}_upload(e,t,r){if(e.indices&&(e.indices.allDirty?this._uploadIndices(r,t):null!=e.indices.from&&null!=e.indices.count&&this._uploadIndices(r,t,e.indices.from,e.indices.count)),e.vertices){const s=e.vertices;for(const e in s){const f=s[e];f.allDirty?this._uploadVertices(r,t,e):null!=f.from&&null!=f.count&&this._uploadVertices(r,t,e,f.from,f.count)}}}_uploadVertices(e,t,r,s,f){const a=this.geometryMap[t];if(!a)return;const i=e.geometries[t].vertexBuffer[r];if(!i)return;const o=i.stride,u=i.data.buffer;a.buffers[r]&&u.byteLength>0&&(null!=s&&null!=f?a.buffers[r].data.vertexBuffer.setSubData(u,s*o,s*o,(s+f)*o):a.buffers[r].data.vertexBuffer.setData(u))}_uploadIndices(e,t,r,s){const f=this.geometryMap[t];if(!f)return;const a=e.geometries[t].indexBuffer.buffer;f.data.indexBuffer&&a.byteLength>0&&(null!=r&&null!=s?f.data.indexBuffer.setSubData(a,4*r,4*r,4*(r+s)):f.data.indexBuffer.setData(a))}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst _=new Set;class WGLTile_m extends TiledDisplayObject[\"a\" /* TiledDisplayObject */]{constructor(t,s,a=!1){super(t,s,[definitions[\"F\" /* TILE_SIZE */],definitions[\"F\" /* TILE_SIZE */]]),this._data=null,this._displayList=null,this._wglBuffers=null,this._deferPatches=!1,this._dirtyMap=new DirtyMap,this._labelIndex=null,this._lastCommitTime=0,this._patchQueue=new CircularArray[\"a\" /* default */](100),this.fader=new Fader,this._dirty=!0,this._replaceBuffers=!1,this._uploadsLocked=!1,this._hasData=!1,this._invalidated=!1,this.transforms.labelMat2d=Object(mat2df32[\"a\" /* c */])(),this._ensureCorrectZOrder=a,this._deferPatches=!a}destroy(){super.destroy(),this.clear()}get displayObjects(){var t;return null!=(t=this._displayObjects)?t:[]}get isDirty(){return this._dirty}get hasData(){return!!this._hasData}get labelIndex(){return this._labelIndex}set isDirty(t){this._dirty=t,this.requestRender()}getGeometry(t){return this._wglBuffers&&this._wglBuffers.has(t)?this._wglBuffers.get(t):null}getDisplayList(){return this._displayList}setTransform(t,e){super.setTransform(t,e);const i=this.transforms.labelMat2d,a=t.getScreenTransform(i,e),h=Object(vec2f32[\"a\" /* c */])();Object(vec2[\"n\" /* t */])(h,this.coords,a),Object(mat2d[\"d\" /* i */])(i),Object(mat2d[\"h\" /* t */])(i,i,h),Object(mat2d[\"e\" /* m */])(i,t.viewMat2d,i)}setData(t){const e=t.addOrUpdate,s=t.remove;t.clear&&(this.clear(),this._patchQueue.clear(),this._hasData=!1),\"replace\"===t.type&&(this._replaceBuffers=!0,this._patchQueue.clear(),this._data=null),!this._data&&e&&e.tileDisplayData.displayObjects.length?(e.tileDisplayData.computeDisplayList(this._ensureCorrectZOrder),this._dirtyMap=new DirtyMap,this._dispRecStore=DisplayRecordStore.fromTileData(e,this._dirtyMap),this._data=e,this._dirtyMap.markAllDirty(),this._hasData=!0,t.end&&this.ready()):this._data&&(e&&e.tileDisplayData.displayObjects.length||s.length)?this._deferPatches?this._patchQueue.enqueue(t):this._doPatchData(t):t.end&&this.ready(),t.end&&!this._data&&this.clear(),this.requestRender(),this.emit(\"change\")}lockUploads(){this._uploadsLocked=!0}unlockUploads(){this._uploadsLocked=!1,this.requestRender()}commitChanges(e){if(!e.time||e.time!==this._lastCommitTime){if(this._lastCommitTime=e.time,this.fader.step()||this.requestRender(),this._patchQueue.size){const e=this._patchQueue.dequeue();Object(maybe[\"h\" /* isSome */])(e)&&(e.end&&this.ready(),this._doPatchData(e),this.requestRender(),this._hasData=!0)}if(this._uploadsLocked)this.requestRender();else if(this.visible&&this._data){if(this._replaceBuffers)for(this._wglBuffers&&this._wglBuffers.dispose(),this._wglBuffers=null,this._replaceBuffers=!1;this._patchQueue.size;){const e=this._patchQueue.dequeue();Object(maybe[\"h\" /* isSome */])(e)&&(e.end&&this.ready(),this._doPatchData(e),this._hasData=!0)}this._wglBuffers||(this._wglBuffers=new WGLBuffers(e.context)),(this._dirtyMap.hasDirty()||this._invalidated)&&(this._invalidated=!1,this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._displayList=this._data.tileDisplayData.displayList.clone(),this._displayObjects=this._data.tileDisplayData.displayObjects.slice(),this._rebuildLabelIndex(),this._dirtyMap.markAllClean())}}}clear(){this._data=null,this._displayList=null,this._dispRecStore=null,this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null)}_doPatchData(t){try{if(\"new\"===t.type){if(!t.addOrUpdate)return;this._invalidated=!0;const e=this._bulkAddFeatures(t);e&&(this._dirtyMap.markAllDirty(),this._data.reshuffleBulkAdd(t,e.objectIndex,e.recordIndex),this._dispRecStore=DisplayRecordStore.fromTileData(this._data,this._dirtyMap))}else this._invalidated=!0,this._patchData(t)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=DisplayRecordStore.fromTileData(this._data,this._dirtyMap))}catch(t){}this.requestRender()}_rebuildLabelIndex(){var t,e;if(!(null==(t=this._data)||null==(e=t.tileBufferData.geometries[enums[\"d\" /* WGLGeometryType */].LABEL])||!e.indexBuffer.length)){this.isDirty=!0,this._labelIndex=this._initLabelIndex();for(const t of this.displayObjects)for(const e of t.metrics)this._insertIntoLabelIndex(e)}}_insertIntoLabelIndex(t){if(t.xBucket<0||t.yBucket<0||t.yBucket>3||t.xBucket>3)return;this.labelIndex[t.yBucket][t.xBucket].push(t)}_initLabelIndex(){const t=[];for(let e=0;e<definitions[\"F\" /* TILE_SIZE */]/definitions[\"d\" /* COLLISION_BUCKET_SIZE */];e++){t.push([]);for(let s=0;s<definitions[\"F\" /* TILE_SIZE */]/definitions[\"d\" /* COLLISION_BUCKET_SIZE */];s++)t[e].push([])}return t}_bulkAddFeatures(t){const e=t.addOrUpdate.tileDisplayData.displayObjects,s=this._data.tileDisplayData.displayObjects,i=this._data.tileDisplayData.displayObjectRegistry;for(let a=0;a<e.length;a++){const r=e[a],l=i.get(r.id);for(let e=0;e<r.displayRecords.length;++e){const s=r.displayRecords[e];if(l){if(s.geometryType!==enums[\"d\" /* WGLGeometryType */].FILL&&s.geometryType!==enums[\"d\" /* WGLGeometryType */].LINE)continue;l.displayRecords.push(s)}const i=t.addOrUpdate.tileBufferData.geometries[s.geometryType];if(!this._dispRecStore.tryAddMeshData(s,i))return{objectIndex:a,recordIndex:e}}l||(i.set(r.id,r),s.push(r))}return null}_patchData(t){let e=!0;const s=t.addOrUpdate&&t.addOrUpdate.tileDisplayData&&t.addOrUpdate.tileDisplayData.displayObjects||[],i=(t.remove||[]).slice();for(const t of s)null!=t.insertAfter&&i.push(t.id);for(const t of i){const e=this._data.tileDisplayData.displayObjectRegistry.get(t);if(e){this._data.tileDisplayData.displayList.removeFromList(e.displayRecords);for(const t of e.displayRecords)this._dispRecStore.delete(t);this._data.tileDisplayData.displayObjectRegistry.delete(t);const s=this._data.tileDisplayData.displayObjects.indexOf(e);this._data.tileDisplayData.displayObjects.splice(s,1)}}for(const i of s){let s,a=this._data.tileDisplayData.displayObjectRegistry.get(i.id);if(a){const t=a.displayRecords;a.set(i),a.displayRecords=t;const e=a.displayRecords.length;for(let t=0;t<e;++t){const e=a.displayRecords[t],s=i.displayRecords[t];(t>=i.displayRecords.length||e.geometryType!==s.geometryType||e.symbolLevel!==s.symbolLevel||e.zOrder!==s.zOrder||e.materialKey!==s.materialKey)&&(this._dispRecStore.delete(a.displayRecords[t]),t<i.displayRecords.length&&(a.displayRecords[t]=void 0))}a.displayRecords.length=i.displayRecords.length,a.metrics=i.metrics}else{let t;a=i.copy(),a.displayRecords=[],this._data.tileDisplayData.displayObjectRegistry.set(i.id,a);const e=this._data.tileDisplayData.displayObjects;if(null!=a.insertAfter)if(s={},a.insertAfter>=0){const s=this._data.tileDisplayData.displayObjectRegistry.get(a.insertAfter);s?(t=e.indexOf(s)+1,t<e.length?e.splice(t,0,a):(e.push(a),t=e.length)):(e.push(a),t=e.length)}else e.unshift(a),t=0;else e.push(a),t=e.length;if(s){let a;if(this._data.tileDisplayData.displayList.unified)a=i.displayRecords.length>0?1:0;else{_.clear();for(const t of i.displayRecords){const e=this._data.tileDisplayData.displayList.getDPInfoType(t.geometryType);_.add(e)}a=_.size}let r=0;for(let i=t-1;i>=0&&r<a;--i)for(let t=e[i].displayRecords.length-1;t>=0&&r<a;--t){const a=e[i].displayRecords[t],l=this._data.tileDisplayData.displayList.getDPInfoType(a.geometryType);s[l]||(s[l]=a,++r)}}}const r=i.displayRecords.length;for(let l=0;l<r;++l){const r=i.displayRecords[l];let d=a.displayRecords[l];d?(d.meshData=r.meshData,d.materialKey=r.materialKey):(d=r.copy(),d.vertexFrom=void 0,d.indexFrom=void 0,a.displayRecords[l]=d);const h=r.geometryType,o=this._data.tileDisplayData.displayList.getDPInfoType(h),p=t.addOrUpdate.tileBufferData.geometries[h],c=p.vertexBuffer,n=p.indexBuffer;let y;s&&(y=s[o]?this._data.tileDisplayData.displayList.splitAfter(s[o]):-1),e=this._dispRecStore.setMeshData(d,r,c,n,y)&&e,s&&null!=d.indexFrom&&null!=d.indexFrom&&(s[o]=d)}}return e}}\n\n\n/***/ }),\n\n/***/ \"ZyIX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export sortByLevel */\n/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"yE7X\");\n/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"b3VY\");\n/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7F7D\");\n/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"mgI5\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;/* harmony default export */ __webpack_exports__[\"a\"] = (class extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_0__[/* WGLDrawPhase */ \"c\"].DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}});\n\n\n/***/ }),\n\n/***/ \"by2V\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ FeatureContainer_l; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/promiseUtils.js\nvar promiseUtils = __webpack_require__(\"9MzC\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\nvar aaBoundingRect = __webpack_require__(\"kYAx\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Queue.js\nvar Queue = __webpack_require__(\"jKdI\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileData.js + 4 modules\nvar TileData = __webpack_require__(\"fZs+\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js + 5 modules\nvar WGLTile = __webpack_require__(\"KFVX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/has.js\nvar has = __webpack_require__(\"wSAH\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/maybe.js\nvar maybe = __webpack_require__(\"srIe\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Error.js\nvar Error = __webpack_require__(\"zlDU\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js\nvar definitions = __webpack_require__(\"jIHu\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/builtins.js\nvar builtins = __webpack_require__(\"n4uK\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/Texture.js\nvar Texture = __webpack_require__(\"of9L\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/FramebufferObject.js\nvar FramebufferObject = __webpack_require__(\"0meK\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/RenderingContext.js + 7 modules\nvar RenderingContext = __webpack_require__(\"bfJE\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js + 1 modules\nvar Utils = __webpack_require__(\"yN2G\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/debug.js\nvar debug = __webpack_require__(\"l8tk\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst z=Logger[\"a\" /* default */].getLogger(\"esri.views.2d.engine.webgl.AttributeStoreView\"),D=Object(debug[\"b\" /* createDebugLogger */])(debug[\"a\" /* DEBUG_ATTR_UPDATES */],z),S=t=>2147483647&t;class AttributeStoreView_U{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:h}=t,o=Object(Utils[\"i\" /* getPixelArrayCtor */])(r);this.shared=i,this.pixelType=r,this.size=e,this.textureOnly=h,h||(this.data=new o(Object(maybe[\"n\" /* unwrap */])(s))),this._resetRange()}destroy(){Object(maybe[\"a\" /* andThen */])(this._texture,(t=>t.dispose()));for(const t in this._fbos)Object(maybe[\"a\" /* andThen */])(this._fbos[t],(e=>{\"0\"===t&&e.detachColorTexture(),e.dispose()})),this._fbos[t]=null;this._texture=null}get _textureDesc(){return{target:3553,wrapMode:33071,pixelFormat:6408,dataType:this.pixelType,samplingMode:9728,width:this.size,height:this.size}}setData(t,e,i){const s=S(t),r=Object(maybe[\"n\" /* unwrap */])(this.data),h=s*this.texelSize+e;!r||h>=r.length||(r[h]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,i){if(Object(maybe[\"g\" /* isNone */])(this.data))return null;const s=S(t)*this.texelSize+i;return!this.data||s>=this.data.length?null:this.data[s]}getTexture(t){return Object(maybe[\"o\" /* unwrapOr */])(this._texture,(()=>this._initTexture(t)))}getFBO(t,i=0){if(Object(maybe[\"g\" /* isNone */])(this._fbos[i])){const e={colorTarget:0,depthStencilTarget:0},s=0===i?this.getTexture(t):this._textureDesc;this._fbos[i]=new FramebufferObject[\"a\" /* default */](t,e,s)}return this._fbos[i]}get locked(){return!(5121!==this.pixelType||!this.shared||this.textureOnly||!Object(has[\"a\" /* default */])(\"esri-atomics\")||!this.data)&&1===Atomics.load(this.data,0)}updateTexture(t){if(!this.locked)try{const e=this.dirtyStart,i=this.dirtyEnd;if(e>i)return;this._resetRange();const s=Object(maybe[\"n\" /* unwrap */])(this.data).buffer,r=this.getTexture(t),h=4,o=(e-e%this.size)/this.size,n=(i-i%this.size)/this.size,d=o,l=this.size,p=n,x=o*this.size*h,c=(l+p*this.size)*h-x,_=Object(Utils[\"i\" /* getPixelArrayCtor */])(this.pixelType),g=_.BYTES_PER_ELEMENT;try{new _(s,x*g,c)}catch(t){console.debug(t)}const f=new _(s,x*g,c),b=this.size,m=p-d+1;if(m>this.size)return void z.error(new Error[\"a\" /* default */](\"mapview-webgl\",\"Out-of-bounds index when updating AttributeData\"));r.updateData(0,0,d,b,m,f)}catch(t){console.debug(t)}}update(t){const{data:e,start:i,end:r}=t;if(Object(maybe[\"h\" /* isSome */])(e)){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,r)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=Object(Utils[\"i\" /* getPixelArrayCtor */])(this.pixelType);this.destroy(),this.data=new s(Object(maybe[\"n\" /* unwrap */])(t.buffer))}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new Texture[\"a\" /* default */](t,this._textureDesc,Object(maybe[\"o\" /* unwrapOr */])(this.data,void 0));if(Object(maybe[\"h\" /* isSome */])(this._lastTexture)&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,h=this.getFBO(t),o=Object(Utils[\"j\" /* getPixelBytes */])(r),n=new(Object(Utils[\"i\" /* getPixelArrayCtor */])(r))(new ArrayBuffer(i*s*o*this.texelSize)),d=t.getBoundFramebufferObject(),{x:u,y:l,width:p,height:x}=t.getViewport();t.bindFramebuffer(h),h.readPixels(0,0,i,s,a,r,n),e.updateData(0,0,0,2*i,s/2,n),t.setViewport(u,l,p,x),t.bindFramebuffer(d)}return this.destroy(),this._texture=e,this._texture}}class AttributeStoreView_j{constructor(){this._initialized=!1,this._forceNextUpload=!1,this._locked=!1}initialize(t){const{blocks:r,shared:a,size:h}=t;if(this.shared=a,this.size=h,D(\"Initializing AttributeStoreView\",t),Object(maybe[\"g\" /* isNone */])(this._data))this._data=Object(maybe[\"j\" /* mapMany */])(r,(t=>new AttributeStoreView_U(t,h,a)));else for(let t=0;t<this._data.length;t++){const i=this._data[t],o=r[t];Object(maybe[\"h\" /* isSome */])(o)&&(Object(maybe[\"g\" /* isNone */])(i)?this._data[t]=new AttributeStoreView_U(o,h,a):i.resize(o,h))}this._initialized=!0}destroy(){Object(maybe[\"a\" /* andThen */])(this._data,(t=>Object(maybe[\"j\" /* mapMany */])(t,(t=>t.destroy())))),Object(maybe[\"a\" /* andThen */])(this._defaultTexture,(t=>t.dispose()))}getBlock(t){if(Object(maybe[\"g\" /* isNone */])(this._data))return null;return this._data[t]}setLabelMinZoom(t,e){this.setData(t,0,1,e)}getLabelMinZoom(t){return this.getData(t,0,1,255)}getFilterFlags(t){return this.getData(t,0,0,0)}getVVSize(t){return this.getData(t,definitions[\"b\" /* ATTRIBUTE_DATA_VV */],0,0)}getData(t,i,r,h){if(!this._data)return 0;const o=Object(maybe[\"n\" /* unwrap */])(this._data)[i];if(Object(maybe[\"g\" /* isNone */])(o))return 0;const n=o.getData(t,r);return Object(maybe[\"h\" /* isSome */])(n)?n:h}setData(t,e,i,s){const r=Object(maybe[\"n\" /* unwrap */])(this._data)[e];Object(maybe[\"n\" /* unwrap */])(r).setData(t,i,s)}lockTextureUpload(){this._locked=!0}unlockTextureUpload(){this._locked=!1}forceTextureUpload(){this._forceNextUpload=!0}async requestUpdate(t){if(this._pendingAttributeUpdate)return void z.error(new Error[\"a\" /* default */](\"mapview-webgl\",\"Tried to update attribute data with a pending update\"));const e=Object(promiseUtils[\"g\" /* createResolver */])();return D(\"AttributeStoreView Update Requested\",t),this._pendingAttributeUpdate={data:t,resolver:e},e.promise}update(){if(this._initialized&&Object(maybe[\"h\" /* isSome */])(this._pendingAttributeUpdate)){const{data:t,resolver:e}=this._pendingAttributeUpdate,i=Object(maybe[\"n\" /* unwrap */])(this._data);for(let e=0;e<t.blocks.length;e++){const s=t.blocks[e],a=i[e];Object(maybe[\"a\" /* andThen */])(a,(t=>Object(maybe[\"a\" /* andThen */])(s,(i=>{D(`Updating block ${e}`,i),t.update(i)}))))}this._pendingAttributeUpdate=null,e()}}bindTextures(t){this.update();const e=this._getDefaultTexture(t);if(!this._initialized)return t.bindTexture(e,definitions[\"s\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_0 */]),t.bindTexture(e,definitions[\"t\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_1 */]),t.bindTexture(e,definitions[\"u\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_2 */]),void t.bindTexture(e,definitions[\"v\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_3 */]);const i=Object(maybe[\"n\" /* unwrap */])(this._data);this._locked&&!this._forceNextUpload||(Object(maybe[\"e\" /* forEachSome */])(i,(e=>e.updateTexture(t))),this._forceNextUpload=!1),t.bindTexture(Object(maybe[\"k\" /* mapOr */])(i[0],e,(e=>e.getTexture(t))),definitions[\"s\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_0 */]),t.bindTexture(Object(maybe[\"k\" /* mapOr */])(i[1],e,(e=>e.getTexture(t))),definitions[\"t\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_1 */]),t.bindTexture(Object(maybe[\"k\" /* mapOr */])(i[2],e,(e=>e.getTexture(t))),definitions[\"u\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_2 */]),t.bindTexture(Object(maybe[\"k\" /* mapOr */])(i[3],e,(e=>e.getTexture(t))),definitions[\"v\" /* TEXTURE_BINDING_ATTRIBUTE_DATA_3 */])}_getDefaultTexture(t){if(Object(maybe[\"g\" /* isNone */])(this._defaultTexture)){const e={wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1};this._defaultTexture=new Texture[\"a\" /* default */](t,e,new Uint8Array(4))}return this._defaultTexture}}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js\nvar TileContainer = __webpack_require__(\"ZyIX\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/Color.js\nvar Color = __webpack_require__(\"nvBr\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/screenUtils.js\nvar screenUtils = __webpack_require__(\"qRWG\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/unitUtils.js\nvar unitUtils = __webpack_require__(\"gEht\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/renderers/support/lengthUtils.js\nvar lengthUtils = __webpack_require__(\"m0D6\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/webgl/capabilities.js\nvar capabilities = __webpack_require__(\"sq/B\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLRendererInfo.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction WGLRendererInfo_c(e,t){const i=t.length;if(e<t[0].value||1===i)return t[0].size;for(let s=1;s<i;s++)if(e<t[s].value){const i=(e-t[s-1].value)/(t[s].value-t[s-1].value);return t[s-1].size+i*(t[s].size-t[s-1].size)}return t[i-1].size}function WGLRendererInfo_h(e,t,i=0){if(Object(maybe[\"g\" /* isNone */])(t))return e[i+0]=0,e[i+1]=0,e[i+2]=0,void(e[i+3]=0);const{r:a,g:o,b:l,a:r}=t;e[i+0]=a*r/255,e[i+1]=o*r/255,e[i+2]=l*r/255,e[i+3]=r}class WGLRendererInfo_p{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.ddColors=new Float32Array(32),this.ddBackgroundColor=new Float32Array(4),this.ddActiveDots=new Float32Array(8),this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:\"geographic\",vvOpacityEnabled:!1}}getSizeVVFieldStops(i){const s=this._vvSizeFieldStops;switch(s.type){case\"static\":return s;case\"level-dependent\":return Object(maybe[\"o\" /* unwrapOr */])(s.levels[i],(()=>{let e=1/0,a=0;for(const t in s.levels){const s=parseFloat(t),o=Math.abs(i-s);o<e&&(e=o,a=s)}if(e===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const o=i-a,l=Math.pow(2,o/2),r=Object(maybe[\"n\" /* unwrap */])(s.levels[a]),n=new Float32Array(r.values);return n[2]*=l,n[3]*=l,{sizes:Object(maybe[\"n\" /* unwrap */])(r.sizes),values:n}}))}}get vvMaterialParameters(){return this._vvMaterialParameters}update(e){Object(maybe[\"h\" /* isSome */])(this._vvInfo)&&this._updateVisualVariables(this._vvInfo.vvRanges,e)}setInfo(e,t,s){switch(Object(maybe[\"h\" /* isSome */])(s)&&s.forEach((e=>this._updateEffects(e))),this._vvInfo=t,e.type){case\"dot-density\":this._updateDotDensityInfo(e)}}getVariation(){return{ddDotBlending:this.ddDotBlending,outsideLabelsVisible:this.outsideLabelsVisible,oesTextureFloat:Object(capabilities[\"a\" /* default */])().supportsTextureFloat}}getVariationHash(){return(this.ddDotBlending?1:0)|(this.outsideLabelsVisible?1:0)<<1}_updateEffects(e){Object(maybe[\"h\" /* isSome */])(e)&&e.filter&&e.filter.enabled&&(this.outsideLabelsVisible=e.excludedLabelsVisible)}_updateVisualVariables(e,t){const i=this._vvMaterialParameters;if(i.vvOpacityEnabled=!1,i.vvSizeEnabled=!1,i.vvColorEnabled=!1,i.vvRotationEnabled=!1,!e)return;const s=e.size;if(s){if(i.vvSizeEnabled=!0,s.minMaxValue){const e=s.minMaxValue;let i,a;if(Object(Utils[\"m\" /* isDefined */])(e.minSize)&&Object(Utils[\"m\" /* isDefined */])(e.maxSize))if(Object(Utils[\"n\" /* isNumber */])(e.minSize)&&Object(Utils[\"n\" /* isNumber */])(e.maxSize))i=Object(screenUtils[\"d\" /* pt2px */])(e.minSize),a=Object(screenUtils[\"d\" /* pt2px */])(e.maxSize);else{const s=t.scale;i=Object(screenUtils[\"d\" /* pt2px */])(WGLRendererInfo_c(s,e.minSize.stops)),a=Object(screenUtils[\"d\" /* pt2px */])(WGLRendererInfo_c(s,e.maxSize.stops))}this.vvSizeMinMaxValue.set([e.minDataValue,e.maxDataValue,i,a])}if(s.scaleStops&&(this.vvSizeScaleStopsValue=Object(screenUtils[\"d\" /* pt2px */])(WGLRendererInfo_c(t.scale,s.scaleStops.stops))),s.unitValue){const e=Object(unitUtils[\"c\" /* getMetersPerUnitForSR */])(t.spatialReference)/lengthUtils[\"a\" /* meterIn */][s.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=e/t.resolution}s.fieldStops&&(this._vvSizeFieldStops=s.fieldStops)}const a=e.color;a&&(i.vvColorEnabled=!0,this.vvColorValues.set(a.values),this.vvColors.set(a.colors));const n=e.opacity;n&&(i.vvOpacityEnabled=!0,this.vvOpacityValues.set(n.values),this.vvOpacities.set(n.opacities));const v=e.rotation;v&&(i.vvRotationEnabled=!0,i.vvRotationType=v.type)}_updateDotDensityInfo(e){const t=e.attributes;this.ddDotValue=e.dotValue,this.ddDotScale=e.referenceScale,this.ddDotSize=e.dotSize,this.ddDotBlending=e.dotBlendingEnabled,this.ddSeed=e.seed;for(let e=0;e<definitions[\"g\" /* DOT_DENSITY_MAX_FIELDS */];e++){const i=e>=t.length?new Color[\"a\" /* default */]([0,0,0,0]):t[e].color;WGLRendererInfo_h(this.ddColors,i,4*e)}for(let t=0;t<8;t++)this.ddActiveDots[t]=t<e.attributes.length?1:0;WGLRendererInfo_h(this.ddBackgroundColor,e.backgroundColor)}}\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass FeatureContainer_l extends TileContainer[\"a\" /* default */]{constructor(e){super(e),this._rendererInfo=new WGLRendererInfo_p,this._materialItemsRequestQueue=new Queue[\"a\" /* default */],this.attributeView=new AttributeStoreView_j}destroy(){this.removeAllChildren(),this.children.forEach((e=>e.destroy())),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(e,t,r){this._rendererInfo.setInfo(e,t,r),this.requestRender()}async getMaterialItems(t,r){if(!t||0===t.length)return null;const s=Object(promiseUtils[\"g\" /* createResolver */])();return this._materialItemsRequestQueue.push({items:t,abortOptions:r,resolver:s}),this.requestRender(),s.promise}onTileData(e,t){if(t.addOrUpdate&&\"tileDisplayData\"in t.addOrUpdate)e.setData(t);else{const r=t.addOrUpdate&&TileData[\"a\" /* TileData */].decode(t.addOrUpdate),s={...t,addOrUpdate:r};e.setData(s)}this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}doRender(e){if(e.context.capabilities.textureFloat,e.context.capabilities.vao,this._materialItemsRequestQueue.length>0){let t=this._materialItemsRequestQueue.pop();for(;t;)this._processMaterialItemRequest(e,t),t=this._materialItemsRequestQueue.pop()}super.doRender(e)}renderChildren(e){for(const t of this.children)t.commitChanges(e);this._rendererInfo.update(e.state),super.renderChildren(e)}createTile(e){const t=this._tileInfoView.getTileBounds(Object(aaBoundingRect[\"d\" /* create */])(),e);return new WGLTile[\"a\" /* WGLTile */](e,t)}destroyTile(e){this.removeChild(e),e.destroy()}createRenderParams(e){return{...super.createRenderParams(e),rendererInfo:this._rendererInfo,attributeView:this.attributeView}}_processMaterialItemRequest(e,{items:r,abortOptions:s,resolver:i}){const{painter:o,pixelRatio:a}=e,n=r.map((e=>o.textureManager.rasterizeItem(e.symbol,a,e.glyphIds,s)));Object(promiseUtils[\"b\" /* all */])(n).then((e=>{if(!this.stage)return void i.reject();const t=e.map(((e,t)=>({id:r[t].id,mosaicItem:e})));i.resolve(t)}),i.reject)}}\n\n\n/***/ }),\n\n/***/ \"fZs+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ TileData_m; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js\nvar enums = __webpack_require__(\"yE7X\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js + 1 modules\nvar Utils = __webpack_require__(\"yN2G\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/MemoryRequirements.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ var MemoryRequirements = (class{constructor(){this._byGeometryType=null}get satisfied(){return!this._byGeometryType}reset(){this._byGeometryType=null}verticesFor(e){return this._byGeometryType?this._byGeometryType[e].vertices:0}indicesFor(e){return this._byGeometryType?this._byGeometryType[e].indices:0}needMore(e,t,i){if(!t&&!i)return;this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]);const r=this._byGeometryType[e];r.vertices+=t,r.indices+=i}});\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileBufferData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass TileBufferData_r{constructor(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}clone(){const e=new TileBufferData_r;for(let r=0;r<this.geometries.length;r++){const f=this.geometries[r],t=e.geometries[r];t.indexBuffer=f.indexBuffer.slice(),t.vertexBuffer={};for(const e in f.vertexBuffer){const{data:r,stride:i}=f.vertexBuffer[e];t.vertexBuffer[e]={data:r.slice(),stride:i}}}return e}static deserialize(f){const t=new TileBufferData_r;for(let r=0;r<5;++r){t.geometries[r].indexBuffer=new Uint32Array(f.geometries[r].indexBuffer),t.geometries[r].vertexBuffer={};for(const i in f.geometries[r].vertexBuffer)t.geometries[r].vertexBuffer[i]={data:Object(Utils[\"c\" /* allocateTypedArrayBufferwithData */])(f.geometries[r].vertexBuffer[i].data,f.geometries[r].vertexBuffer[i].stride),stride:f.geometries[r].vertexBuffer[i].stride}}return t}serialize(){const e={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]};for(let r=0;r<5;++r)for(const f in this.geometries[r].vertexBuffer)e.geometries[r].vertexBuffer[f]={data:this.geometries[r].vertexBuffer[f].data.buffer,stride:this.geometries[r].vertexBuffer[f].stride};return e}getBuffers(){const e=[];for(let r=0;r<5;++r){e.push(this.geometries[r].indexBuffer.buffer);for(const f in this.geometries[r].vertexBuffer)e.push(this.geometries[r].vertexBuffer[f].data.buffer)}return e}}/* harmony default export */ var TileBufferData = (TileBufferData_r);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js + 1 modules\nvar WGLDisplayRecord = __webpack_require__(\"opKs\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/Logger.js\nvar Logger = __webpack_require__(\"6S2I\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayList.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst WGLDisplayList_n=Logger[\"a\" /* default */].getLogger(\"esri.views.2d.engine.webgl.WGLDisplayList\");function WGLDisplayList_i(e,t,o,...n){t<e.length?e.splice(t,o,...n):e.push(...n)}const WGLDisplayList_r=new Map;WGLDisplayList_r.set(enums[\"c\" /* WGLDrawPhase */].MAP,[enums[\"d\" /* WGLGeometryType */].FILL,enums[\"d\" /* WGLGeometryType */].LINE,enums[\"d\" /* WGLGeometryType */].MARKER,enums[\"d\" /* WGLGeometryType */].TEXT]),WGLDisplayList_r.set(enums[\"c\" /* WGLDrawPhase */].LABEL,[enums[\"d\" /* WGLGeometryType */].LABEL]),WGLDisplayList_r.set(enums[\"c\" /* WGLDrawPhase */].LABEL_ALPHA,[enums[\"d\" /* WGLGeometryType */].LABEL]);class WGLDisplayList_s{constructor(e=!1){this.symbolLevels=[],this.unified=e}replay(e,t,o){if(this.unified)for(const n of this.symbolLevels)for(const i of n.zLevels){const n=i.geometryDPInfo.unified;if(n)for(const i of n){const n=e.painter.getGeometryBrush(i.geometryType),r=t.getGeometry(i.geometryType);n.prepareState(e,t),n.drawGeometry(e,t,i,r,o)}}}get empty(){return!this.symbolLevels||0===this.symbolLevels.length}clear(){this.symbolLevels.length=0}addToList(e,t){if(Array.isArray(e))for(const o of e)this._addToList(o,t);else this._addToList(e,t)}removeFromList(e){Array.isArray(e)||(e=[e]);let t=null;for(const o of e)t=this._removeFromList(o);return t}byType(e,t){for(const o of this.symbolLevels)for(const n of o.zLevels){const o=n.geometryDPInfo,i=this.getDPInfoType(e);if(o[i])for(const e of o[i])t(e)}}clone(){const e=new WGLDisplayList_s(this.unified);for(const t of this.symbolLevels)e.symbolLevels.push(t.clone());return e}splitAfter(e){const t=this._getDisplayList(e.symbolLevel,e.zOrder,e.geometryType),o=t.length,n=e.indexFrom+e.indexCount;for(let i=0;i<o;++i){const o=t[i];if(o.geometryType===e.geometryType&&n>o.indexFrom&&n<=o.indexFrom+o.indexCount){if(n<o.indexFrom+o.indexCount){const e=new WGLDisplayList_l;e.geometryType=o.geometryType,e.materialKey=o.materialKey,e.indexFrom=n,e.indexCount=o.indexFrom+o.indexCount-n,t.splice(i+1,0,e),o.indexCount=n-o.indexFrom}return i}}}_addToList(e,t){const o=e.symbolLevel,n=e.zOrder,r=this._getDisplayList(o,n,e.geometryType),s=null!=t?t:r.length-1,m=s>=0&&s<r.length?r[s]:null;if(null===m||m.materialKey!==e.materialKey||m.indexFrom+m.indexCount!==e.indexFrom||this.unified&&m.geometryType!==e.geometryType){const t=new WGLDisplayList_l;t.indexFrom=e.indexFrom,t.indexCount=e.indexCount,t.materialKey=e.materialKey,t.geometryType=e.geometryType,WGLDisplayList_i(r,s+1,0,t)}else m.indexCount+=e.indexCount}_removeFromList(e){const t=e.symbolLevel,o=e.zOrder,n=this._getDisplayList(t,o,e.geometryType),r=n.length;let s;for(let t=0;t<r;++t){const o=n[t];if(e.indexFrom+e.indexCount>o.indexFrom&&e.indexFrom<o.indexFrom+o.indexCount&&(!this.unified||o.geometryType===e.geometryType)){s=t;break}}if(void 0!==s){const t=n[s];if(e.indexFrom===t.indexFrom)return t.indexCount-=e.indexCount,t.indexFrom+=e.indexCount,0===t.indexCount&&WGLDisplayList_i(n,s,1),s-1;if(e.indexFrom+e.indexCount===t.indexFrom+t.indexCount)return t.indexCount-=e.indexCount,0===t.indexCount?(WGLDisplayList_i(n,s,1),s-1):s;{const o=t.indexFrom,r=e.indexFrom-t.indexFrom,m=e.indexCount,y=t.indexFrom+t.indexCount-(e.indexFrom+e.indexCount);t.indexCount=r;const d=new WGLDisplayList_l;return d.geometryType=t.geometryType,d.materialKey=t.materialKey,d.indexFrom=o+r+m,d.indexCount=y,WGLDisplayList_i(n,s+1,0,d),s}}return null}_getDisplayList(e,t,n){let i;const r=this.symbolLevels.length;for(let t=0;t<r;t++)if(this.symbolLevels[t].symbolLevel===e){i=this.symbolLevels[t];break}let s;i||(i=new WGLDisplayList_d,i.symbolLevel=e,this.symbolLevels.push(i));const l=i.zLevels.length;for(let e=0;e<l;e++)if(i.zLevels[e].zLevel===t){s=i.zLevels[e];break}let f;if(s||(s=new WGLDisplayList_y,s.geometryDPInfo=new WGLDisplayList_m,s.zLevel=t,i.zLevels.push(s)),this.unified)s.geometryDPInfo.unified||(s.geometryDPInfo.unified=[]),f=s.geometryDPInfo.unified;else switch(n){case enums[\"d\" /* WGLGeometryType */].FILL:s.geometryDPInfo.fill||(s.geometryDPInfo.fill=[]),f=s.geometryDPInfo.fill;break;case enums[\"d\" /* WGLGeometryType */].LINE:s.geometryDPInfo.line||(s.geometryDPInfo.line=[]),f=s.geometryDPInfo.line;break;case enums[\"d\" /* WGLGeometryType */].MARKER:s.geometryDPInfo.marker||(s.geometryDPInfo.marker=[]),f=s.geometryDPInfo.marker;break;case enums[\"d\" /* WGLGeometryType */].TEXT:s.geometryDPInfo.text||(s.geometryDPInfo.text=[]),f=s.geometryDPInfo.text;break;case enums[\"d\" /* WGLGeometryType */].LABEL:s.geometryDPInfo.label||(s.geometryDPInfo.label=[]),f=s.geometryDPInfo.label;break;default:console.error(\"Trying to add a record with geometry type '\"+n+\"'.\")}return f}getDPInfoType(e){if(this.unified)return\"unified\";switch(e){case enums[\"d\" /* WGLGeometryType */].FILL:return\"fill\";case enums[\"d\" /* WGLGeometryType */].LINE:return\"line\";case enums[\"d\" /* WGLGeometryType */].MARKER:return\"marker\";case enums[\"d\" /* WGLGeometryType */].TEXT:return\"text\";case enums[\"d\" /* WGLGeometryType */].LABEL:return\"label\";default:return void WGLDisplayList_n.error(`DisplayList: Tried to convert unknown geometryType: ${e}`)}}}class WGLDisplayList_l{constructor(){this.materialKey=null,this.indexFrom=0,this.indexCount=0}clone(){const e=new WGLDisplayList_l;return e.geometryType=this.geometryType,e.materialKey=this.materialKey,e.indexFrom=this.indexFrom,e.indexCount=this.indexCount,e}}class WGLDisplayList_m{constructor(){this.fill=null,this.line=null,this.marker=null,this.text=null,this.label=null,this.unified=null}clone(){const e=new WGLDisplayList_m;return e.fill=this.fill&&this.fill.map((e=>e.clone())),e.line=this.line&&this.line.map((e=>e.clone())),e.marker=this.marker&&this.marker.map((e=>e.clone())),e.text=this.text&&this.text.map((e=>e.clone())),e.label=this.label&&this.label.map((e=>e.clone())),e.unified=this.unified&&this.unified.map((e=>e.clone())),e}}class WGLDisplayList_y{constructor(){this.geometryDPInfo=new WGLDisplayList_m}clone(){const e=new WGLDisplayList_y;return e.zLevel=this.zLevel,e.geometryDPInfo=this.geometryDPInfo.clone(),e}}class WGLDisplayList_d{constructor(){this.zLevels=[]}clone(){const e=new WGLDisplayList_d;e.symbolLevel=this.symbolLevel;for(const t of this.zLevels)e.zLevels.push(t.clone());return e}}/* harmony default export */ var WGLDisplayList = (WGLDisplayList_s);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js\nvar serializationUtils = __webpack_require__(\"wnVl\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayObject.js\nvar WGLDisplayObject = __webpack_require__(\"ZByl\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileDisplayData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction TileDisplayData_e(s){const t=[[],[],[],[],[]],i=s;for(const s of i)for(const i of s.displayRecords)t[i.geometryType].push(i);return t}class TileDisplayData_r{constructor(){}get displayObjectRegistry(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const s of this.displayObjects)this._displayObjectRegistry.set(s.id,s)}return this._displayObjectRegistry}get displayList(){return this._displayList}computeDisplayList(t){if(this._displayList=new WGLDisplayList(t),t)for(const s of this.displayObjects)for(const t of s.displayRecords)this._displayList.addToList(t);else{const s=TileDisplayData_e(this.displayObjects),t=s.length;for(let i=0;i<t;++i){const t=s[i];this._displayList.addToList(t)}}}clone(){const s=new TileDisplayData_r;return this.displayObjects&&(s.displayObjects=this.displayObjects.map((s=>s.clone()))),s}serialize(s){return Object(serializationUtils[\"b\" /* serializeList */])(s,this.displayObjects),s}_deserializeObjects(s){const t=s.readInt32(),e=new Array(t),r=new Map;for(let t=0;t<e.length;++t){const l=WGLDisplayObject[\"a\" /* default */].deserialize(s);e[t]=l,r.set(l.id,l)}this.displayObjects=e,this._displayList=null,this._displayObjectRegistry=r}static deserialize(s){const t=new TileDisplayData_r;return t._deserializeObjects(s),t}}/* harmony default export */ var TileDisplayData = (TileDisplayData_r);\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js\nvar Writer = __webpack_require__(\"PeSW\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js + 1 modules\nvar MeshData = __webpack_require__(\"acOm\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexBuffer.js\nvar VertexBuffer = __webpack_require__(\"2vGY\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/2d/engine/webgl/TileData.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst TileData_u=new MemoryRequirements,c=new MemoryRequirements;function TileData_p(e,r){const i={};for(const s in e){const a={data:Object(Utils[\"b\" /* allocateTypedArrayBuffer */])(r,e[s]),stride:e[s]};i[s]=a}return i}class TileData_m{constructor(){this.tileDisplayData=null,this.tileBufferData=null}reshuffle(){TileData_u.reset();const e=TileDisplayData_e(this.tileDisplayData.displayObjects);for(const t of e)for(const e of t)e&&TileData_u.needMore(e.geometryType,e.meshData?e.meshData.vertexCount:e.vertexCount,e.meshData?e.meshData.indexData.length:e.indexCount);const i=e.length,a=new TileBufferData;for(let e=0;e<i;++e){a.geometries[e].indexBuffer=new Uint32Array(Math.round(1.5*TileData_u.indicesFor(e)));const r=[];for(const t in this.tileBufferData.geometries[e].vertexBuffer)r.push(this.tileBufferData.geometries[e].vertexBuffer[t].stride);const i=TileData_m._computeVertexAlignment(r),s=Math.round(1.5*TileData_u.verticesFor(e)),o=TileData_m._align(s,i);for(const r in this.tileBufferData.geometries[e].vertexBuffer){const i=this.tileBufferData.geometries[e].vertexBuffer[r].stride;a.geometries[e].vertexBuffer[r]={stride:i,data:Object(Utils[\"b\" /* allocateTypedArrayBuffer */])(o,i)}}}c.reset(),this.tileDisplayData.displayList.clear();for(let t=0;t<i;++t){const i=e[t];for(const e of i){if(e.meshData)e.writeMeshDataToBuffers(c.verticesFor(t),a.geometries[t].vertexBuffer,c.indicesFor(t),a.geometries[t].indexBuffer),e.meshData=null;else{const i=this.tileBufferData.geometries[t].vertexBuffer,s=this.tileBufferData.geometries[t].indexBuffer,o=a.geometries[t].vertexBuffer,n=a.geometries[t].indexBuffer,f=c.verticesFor(t),l=c.indicesFor(t);Object(Utils[\"d\" /* copyMeshData */])(f,l,o,n,e,i,s),e.vertexFrom=f,e.indexFrom=l}c.needMore(t,e.vertexCount,e.indexCount)}this.tileDisplayData.displayList.unified||this.tileDisplayData.displayList.addToList(i)}if(this.tileDisplayData.displayList.unified)for(const e of this.tileDisplayData.displayObjects)this.tileDisplayData.displayList.addToList(e.displayRecords);this.tileBufferData=a}reshuffleBulkAdd(i,a,o){const n=i.addOrUpdate.tileDisplayData.displayObjects,f=this.tileDisplayData.displayObjects;TileData_u.reset();for(let e=0;e<f.length;e++){const t=f[e];for(let e=0;e<t.displayRecords.length;e++){const r=t.displayRecords[e];TileData_u.needMore(r.geometryType,r.vertexCount,r.indexCount)}}for(let e=a;e<n.length;e++){const t=n[e];for(let r=e===a?o:0;r<t.displayRecords.length;r++){const e=t.displayRecords[r];TileData_u.needMore(e.geometryType,e.vertexCount,e.indexCount)}}const l=new TileBufferData;for(let e=0;e<5;e++){l.geometries[e].indexBuffer=new Uint32Array(Math.round(1.5*TileData_u.indicesFor(e)));const r=[],i=this.tileBufferData.geometries[e].vertexBuffer;for(const e in i)r.push(i[e].stride);const s=TileData_m._computeVertexAlignment(r),a=Math.round(1.5*TileData_u.verticesFor(e)),o=TileData_m._align(a,s);for(const r in i){const s=i[r].stride,a=Object(Utils[\"b\" /* allocateTypedArrayBuffer */])(o,s);l.geometries[e].vertexBuffer[r]={stride:s,data:a}}}c.reset(),this.tileDisplayData.displayList.clear();for(let e=0;e<f.length;e++){const t=f[e];for(let e=0;e<t.displayRecords.length;e++){const i=t.displayRecords[e],s=i.geometryType,a=this.tileBufferData.geometries[s].vertexBuffer,o=this.tileBufferData.geometries[s].indexBuffer,n=l.geometries[s].vertexBuffer,f=l.geometries[s].indexBuffer,d=c.verticesFor(s),u=c.indicesFor(s);Object(Utils[\"d\" /* copyMeshData */])(d,u,n,f,i,a,o),i.vertexFrom=d,i.indexFrom=u,c.needMore(s,i.vertexCount,i.indexCount),this.tileDisplayData.displayList.addToList(i)}}const d=this.tileDisplayData.displayObjectRegistry;if(0!==o){const t=n[a];for(let i=0;i<o;i++){const s=t.displayRecords[i];if(d.get(t.id)){if(s.geometryType!==enums[\"d\" /* WGLGeometryType */].FILL&&s.geometryType!==enums[\"d\" /* WGLGeometryType */].LINE)continue}const a=s.geometryType,o=this.tileBufferData.geometries[a].vertexBuffer,n=this.tileBufferData.geometries[a].indexBuffer,f=l.geometries[a].vertexBuffer,u=l.geometries[a].indexBuffer,p=c.verticesFor(a),m=c.indicesFor(a);Object(Utils[\"d\" /* copyMeshData */])(p,m,f,u,s,o,n),s.vertexFrom=p,s.indexFrom=m,c.needMore(a,s.vertexCount,s.indexCount),this.tileDisplayData.displayList.addToList(s)}}for(let t=a;t<n.length;t++){const s=n[t],f=t===a?o:0,u=d.get(s.id);for(let t=f;t<s.displayRecords.length;t++){const a=s.displayRecords[t];if(u){if(a.geometryType!==enums[\"d\" /* WGLGeometryType */].FILL&&a.geometryType!==enums[\"d\" /* WGLGeometryType */].LINE)continue;u.displayRecords.push(a)}const o=a.geometryType,n=i.addOrUpdate.tileBufferData.geometries[o],f=n.vertexBuffer,d=n.indexBuffer,p=l.geometries[o].vertexBuffer,m=l.geometries[o].indexBuffer,D=c.verticesFor(o),y=c.indicesFor(o);Object(Utils[\"d\" /* copyMeshData */])(D,y,p,m,a,f,d),a.vertexFrom=D,a.indexFrom=y,c.needMore(o,a.vertexCount,a.indexCount),this.tileDisplayData.displayList.addToList(a)}u||(d.set(s.id,s),this.tileDisplayData.displayObjects.push(s))}this.tileBufferData=l}getStrides(){const e=[];for(let t=0;t<this.tileBufferData.geometries.length;++t){const r=this.tileBufferData.geometries[t];e[t]={};for(const i in r.vertexBuffer)e[t][i]=r.vertexBuffer[i].stride}return e}clone(){const e=new TileData_m;return e.tileBufferData=this.tileBufferData.clone(),e.tileDisplayData=this.tileDisplayData.clone(),e}_guessSize(){const{displayObjects:e}=this.tileDisplayData,t=Math.min(e.length,4);let r=0;for(let i=0;i<t;i++)r=Math.max(r,e[i].displayRecords.length);return 2*(12*e.length+e.length*r*40)}serialize(){const e=this.tileBufferData.serialize(),t=this.tileBufferData.getBuffers(),r=this.tileDisplayData.serialize(new Writer[\"a\" /* default */](Int32Array,this._guessSize())).buffer();return t.push(r),{result:{displayData:r,bufferData:e},transferList:t}}static decode(e){const t=MeshData[\"a\" /* MeshData */].deserializeDisplayObjects(e),r={};for(const t in e.vertexBuffersMap)r[t]=VertexBuffer[\"a\" /* VertexBuffers */].decode(e.vertexBuffersMap[t]);return TileData_m.fromMeshData({displayObjects:t,vertexBuffersMap:r})}static fromMeshData(e){const t=new TileData_m,r=new TileDisplayData,i=new TileBufferData;r.displayObjects=e.displayObjects;for(const t in e.vertexBuffersMap){const r=e.vertexBuffersMap[t];i.geometries[t].indexBuffer=r.indexBuffer,i.geometries[t].vertexBuffer=r.namedBuffers}return t.tileDisplayData=r,t.tileBufferData=i,t}static bind(e,t){const r=new TileData_m;return r.tileDisplayData=e,r.tileBufferData=t,r}static create(e,t){const r=new TileData_m;r.tileDisplayData=new TileDisplayData,r.tileDisplayData.displayObjects=e;const i=[0,0,0,0,0],n=[0,0,0,0,0],f=[[],[],[],[],[]];for(const t of e)for(const e of t.displayRecords)f[e.geometryType].push(e),i[e.geometryType]+=e.meshData.vertexCount,n[e.geometryType]+=e.meshData.indexData.length;const l=new TileBufferData,d=function(e){return[e.fill||{},e.line||{},e.icon||{},e.text||{},e.label||{}]}(t);for(let e=0;e<5;e++){const t=new Uint32Array(n[e]),r=TileData_p(d[e],i[e]);WGLDisplayRecord[\"a\" /* default */].writeAllMeshDataToBuffers(f[e],r,t),l.geometries[e]={indexBuffer:t,vertexBuffer:r}}return r.tileBufferData=l,r}static _align(e,t){const r=e%t;return 0===r?e:e+(t-r)}static _computeVertexAlignment(e){let t=!1,r=!1;for(const i of e)i%4==2?t=!0:i%4!=0&&(r=!0);return r?4:t?2:1}}\n\n\n/***/ }),\n\n/***/ \"gzK8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export convertColorVariable */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return m; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return r; });\n/* unused harmony export getVisualVariablesFields */\n/* unused harmony export normalizeSizeElement */\n/* unused harmony export normalizeSizeStops */\n/* unused harmony export stopToSizeStop */\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"srIe\");\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"qRWG\");\n/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"jIHu\");\n/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"yE7X\");\n/* harmony import */ var _engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"qaIE\");\n/* harmony import */ var _engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"NIRN\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction r(e,t){if(!e||!t)return e;switch(t){case\"radius\":case\"distance\":return 2*e;case\"diameter\":case\"width\":return e;case\"area\":return Math.sqrt(e)}return e}function a(e){return{value:e.value,size:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* toPt */ \"f\"])(e.size)}}function u(e){return e.map((e=>a(e)))}function c(e){if(\"string\"==typeof e||\"number\"==typeof e)return Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* toPt */ \"f\"])(e);const s=e;return{type:\"size\",expression:s.expression,stops:u(s.stops)}}function p(e){const t=e&&e.length>0?{}:null;return t&&e.forEach((e=>{const s=e.type;e.field&&(t[s]=e.field)})),t}const f=e=>{const t=[],o=[],i=u(e),l=i.length;for(let e=0;e<6;e++){const r=i[Math.min(e,l-1)];t.push(r.value),o.push(null==r.size?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__[/* NAN_MAGIC_NUMBER */ \"p\"]:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__[/* pt2px */ \"d\"])(r.size))}return{values:new Float32Array(t),sizes:new Float32Array(o)}};function m(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t)return{vvFields:t,vvRanges:s};for(const n of e)if(n.field&&(t[n.type]=n.field),\"size\"===n.type){s.size||(s.size={});const e=n;switch(Object(_engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_5__[/* getTypeOfSizeVisualVariable */ \"a\"])(e)){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__[/* WGLVVFlag */ \"e\"].SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:c(e.minSize),maxSize:c(e.maxSize)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__[/* WGLVVFlag */ \"e\"].SIZE_SCALE_STOPS:s.size.scaleStops={stops:u(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__[/* WGLVVFlag */ \"e\"].SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=f(e.levels[s]);s.size.fieldStops={type:\"level-dependent\",levels:t}}else s.size.fieldStops={type:\"static\",...f(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__[/* WGLVVFlag */ \"e\"].SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation}}}else if(\"color\"===n.type)s.color=y(n);else if(\"opacity\"===n.type)s.opacity=v(n);else if(\"rotation\"===n.type){const e=n;s.rotation={type:e.rotationType}}return{vvFields:t,vvRanges:s}}function v(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(\"string\"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,t.opacities[e]=n.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].opacity;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function g(e,t,s){e[4*t+0]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function y(t){if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isNone */ \"g\"])(t))return null;if(t.normalizationField)return null;const s={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if(\"string\"==typeof t.field){if(!t.stops)return null;{if(t.stops.length>8)return null;s.field=t.field;const e=t.stops;for(let t=0;t<8;++t){const n=e[Math.min(t,e.length-1)];s.values[t]=n.value,g(s.colors,t,n.color)}}}else{if(!(t.stops&&t.stops.length>=0))return null;{const e=t.stops&&t.stops.length>=0&&t.stops[0].color;for(let t=0;t<8;t++)s.values[t]=1/0,g(s.colors,t,e)}}for(let e=0;e<32;e+=4)Object(_engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_4__[/* premultiplyAlpha */ \"b\"])(s.colors,e,!0);return s}\n\n\n/***/ }),\n\n/***/ \"l8tk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return l; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return n; });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=(n,l)=>n&&((...n)=>l.warn(\"DEBUG:\",...n))||(()=>null),l=!1;\n\n\n/***/ }),\n\n/***/ \"lx5q\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"srIe\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\n/* harmony default export */ __webpack_exports__[\"a\"] = (class{constructor(t=Number.POSITIVE_INFINITY){this.size=0,this._start=0,this.maxSize=t,this._buffer=isFinite(t)?new Array(t):[]}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=t:this._buffer[this._start+this.size++]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}clear(){for(;Object(_maybe_js__WEBPACK_IMPORTED_MODULE_0__[/* isSome */ \"h\"])(this.dequeue()););}});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}