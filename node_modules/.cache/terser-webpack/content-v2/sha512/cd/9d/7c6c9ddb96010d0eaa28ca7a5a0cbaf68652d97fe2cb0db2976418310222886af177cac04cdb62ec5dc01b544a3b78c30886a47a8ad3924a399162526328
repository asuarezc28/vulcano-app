{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{InNl:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"work\",function(){return J}),n.d(e,\"wrappedWork\",function(){return _});var o=n(\"OKTS\");function r(t,e,n,o){for(let r=0;r<o;r++)if(t[e+r]!==t[n+r])return!1;return!0}function i(t,e,n,o,r){for(let i=0;i<r;i++)n[o+i]=t[e+i]}function c(t,e,n){let o=0;for(let r=0;r<n;r++)o=t[e+r]+o|0,o=o+(o<<11)+(o>>>2)|0;return o>>>0}let s=null;const a={divisor:0};function l(t,e={}){e={...a,...e};const n=t.stride;return t.fieldNames.filter(e=>{const n=t.fields.get(e).optional;return!(n&&n.glPadding)}).map(o=>{const r=t.fields.get(o),i=r.constructor.ElementCount,c=function(t){const e=f[t];if(e)return e;throw new Error(\"BufferType not supported in WebGL\")}(r.constructor.ElementType);return{name:o,stride:n,count:i,type:c,offset:r.offset,normalized:!(!r.optional||!r.optional.glNormalized),divisor:e.divisor}})}const f={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};var u=n(\"/ADo\");const g=Object(u.a)().vec3f(\"position\").u16(\"componentIndex\").u16(\"_padding\"),d=(l(Object(u.a)().vec2u8(\"sideness\")),Object(u.a)().vec3f(\"position0\").vec3f(\"position1\").u16(\"componentIndex\").u8(\"variantOffset\",{glNormalized:!0}).u8(\"variantStroke\").u8(\"variantExtension\",{glNormalized:!0}).u8(\"_padding\",{glPadding:!0}).u16(\"_padding2\",{glPadding:!0})),p=d.clone().vec3f(\"normal\"),h=d.clone().vec3f(\"normalA\").vec3f(\"normalB\");var m=n(\"iA3P\"),b=n(\"Cy1f\"),w=n(\"5DEt\");class v{updateSettings(t){this.settings=t}write(t,e,n){const o=function(t){const e=y;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],A[0]=5381;for(let n=0;n<O.length;n++)A[0]=31*A[0]+O[n];return A[0]}(n);j.seed=o;const r=j.getIntRange(0,255),i=j.getIntRange(0,this.settings.variants-1),c=j.getFloat(),s=255*(.5*function(t,e){const n=t<0?-1:1;return Math.pow(Math.abs(t),1.2)*n}(-(1-Math.min(c/.7,1))+Math.max(0,c-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,i),t.variantExtension.set(e,s)}trim(t,e){return t.slice(0,e)}}const y=new Float32Array(6),O=new Uint32Array(y.buffer),A=new Uint32Array(1),j=new m.a;class I{constructor(){this.commonWriter=new v}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return p.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),Object(w.c)(E,n.faceNormal0,n.faceNormal1),Object(w.o)(E,E),t.normal.setVec(e,E)}trim(t,e){return this.commonWriter.trim(t,e)}}I.Layout=p,I.glLayout=l(p,{divisor:1});class N{constructor(){this.commonWriter=new v}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return h.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}N.Layout=h,N.glLayout=l(h,{divisor:1});const E=Object(b.e)();var S=n(\"VeZB\");function U(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:V(t.layout)}}function V(t){const e=new Array;return t.fields.forEach((t,n)=>{const o={...t,constructor:D(t.constructor)};e.push([n,o])}),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const x=[S.a,S.m,S.u,S.C,S.f,S.h,S.b,S.n,S.v,S.D,S.g,S.i,S.l,S.t,S.B,S.J,S.j,S.r,S.z,S.H,S.k,S.s,S.A,S.I,S.e,S.q,S.y,S.G,S.c,S.o,S.w,S.E,S.d,S.p,S.x,S.F];function D(t){return`${t.ElementType}_${t.ElementCount}`}const k=new Map;function B(t,e){const n=t.length/3,o=new Uint32Array(e+1),r=new Uint32Array(e+1),i=(t,e)=>{t<e?o[t+1]++:r[e+1]++};for(let m=0;m<n;m++){const e=t[3*m],n=t[3*m+1],o=t[3*m+2];i(e,n),i(n,o),i(o,e)}let c=0,s=0;for(let m=0;m<e;m++){const t=o[m+1],e=r[m+1];o[m+1]=c,r[m+1]=s,c+=t,s+=e}const a=new Uint32Array(6*n),l=o[e],f=(t,e,n)=>{if(t<e){const r=o[t+1]++;a[2*r]=e,a[2*r+1]=n}else{const o=r[e+1]++;a[2*l+2*o]=t,a[2*l+2*o+1]=n}};for(let m=0;m<n;m++){const e=t[3*m],n=t[3*m+1],o=t[3*m+2];f(e,n,m),f(n,o,m),f(o,e,m)}const u=(t,e)=>{const n=2*t,o=e-t;for(let r=1;r<o;r++){const t=a[n+2*r],e=a[n+2*r+1];let o=r-1;for(;o>=0&&a[n+2*o]>t;o--)a[n+2*o+2]=a[n+2*o],a[n+2*o+3]=a[n+2*o+1];a[n+2*o+2]=t,a[n+2*o+3]=e}};for(let m=0;m<e;m++)u(o[m],o[m+1]),u(l+r[m],l+r[m+1]);const g=new Int32Array(3*n),d=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=d(t,e);g[3*e+n]=-1},h=(t,e,n,o)=>{const r=d(t,e);g[3*e+r]=o;const i=d(n,o);g[3*o+i]=e};for(let m=0;m<e;m++){let t=o[m];const e=o[m+1];let n=r[m];const i=r[m+1];for(;t<e&&n<i;){const e=a[2*t],o=a[2*l+2*n];e===o?(h(m,a[2*t+1],o,a[2*l+2*n+1]),t++,n++):e<o?(p(m,a[2*t+1]),t++):(p(o,a[2*l+2*n+1]),n++)}for(;t<e;)p(m,a[2*t+1]),t++;for(;n<i;)p(a[2*l+2*n],a[2*l+2*n+1]),n++}return g}x.forEach(t=>k.set(D(t),t));var L=n(\"ohva\"),M=n(\"tQ+6\"),W=n(\"aAs6\");function F(t,e){return t.cosAngle<e}function C(t,e){return t.cosAngle>e}function P(t,e){const n=Object(o.a)(t.cosAngle),r=T.fwd,i=T.ortho;return Object(W.c)(r,t.position1,t.position0),n*(Object(w.e)(Object(w.d)(i,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}const T={edge:{position0:Object(b.e)(),position1:Object(b.e)(),faceNormal0:Object(b.e)(),faceNormal1:Object(b.e)(),componentIndex:0,cosAngle:0},ortho:Object(b.e)(),fwd:Object(b.e)()},z={v0:Object(b.e)(),v1:Object(b.e)(),v2:Object(b.e)()},q={anglePlanar:4,angleSignificantEdge:35};async function _(t){const e=function(t){return{data:g.createView(t.dataBuffer),originalIndices:\"Uint32Array\"===t.originalIndicesType?new Uint32Array(t.originalIndicesBuffer):\"Uint16Array\"===t.originalIndicesType?new Uint16Array(t.originalIndicesBuffer):void 0,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=J(e),o=[e.data.buffer];return{result:function(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:U(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:U(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(n,o),transferList:o}}function J(t){const e=function(t,e,n){if(e&&n)return{faces:n,neighbors:B(n,t.count),vertices:t};{const e=function(t,e,n){const a=t.byteLength/(4*e),l=new Uint32Array(t,0,a*e);let f=new Uint32Array(a);const u=n&&n.minReduction||0,g=n&&n.originalIndices||null,d=n&&n.componentOffsets||null;let p=0;if(d)for(let o=0;o<d.length-1;o++){const t=d[o+1]-d[o];t>p&&(p=t)}else p=a;const h=Math.floor(1.1*p)+1;(null==s||s.length<2*h)&&(s=new Uint32Array(Object(o.i)(2*h)));for(let o=0;o<2*h;o++)s[o]=0;let m=0;const b=!!d&&!!g,w=b?g.length:a,v=b?new Uint32Array(g.length):null,y=1.96;let O=0!==u?Math.ceil(4*y*y/(u*u)*u*(1-u)):w,A=1,j=d?d[1]:w;for(let o=0;o<w;o++){if(o===O){const t=1-m/o;if(t+y*Math.sqrt(t*(1-t)/o)<u)return null;O*=2}if(o===j){for(let t=0;t<2*h;t++)s[t]=0;if(g)for(let t=d[A-1];t<d[A];t++)v[t]=f[g[t]];j=d[++A]}const t=b?g[o]:o,n=t*e,i=c(l,n,e);let a=i%h,p=m;for(;0!==s[2*a+1];){if(s[2*a]===i){const t=s[2*a+1]-1;if(r(l,n,t*e,e)){p=f[t];break}}a++,a>=h&&(a-=h)}p===m&&(s[2*a]=i,s[2*a+1]=t+1,m++),f[t]=p}if(0!==u&&1-m/a<u)return null;if(b){for(let t=d[A-1];t<v.length;t++)v[t]=f[g[t]];f=v}const I=new Uint32Array(e*m);m=0;for(let o=0;o<w;o++)f[o]===m&&(i(l,(b?g[o]:o)*e,I,m*e,e),m++);if(g&&!b){const t=new Uint32Array(g.length);for(let e=0;e<t.length;e++)t[e]=f[g[e]];f=t}return{buffer:I.buffer,indices:f,uniqueCount:m}}(t.buffer,t.stride/4,{originalIndices:n}),a=B(e.indices,e.uniqueCount);return{faces:e.indices,neighbors:a,vertices:g.createView(e.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return R.updateSettings(t.writerSettings),G.updateSettings(t.writerSettings),function(t,e,n,r=q){const i=t.vertices.position,c=t.vertices.componentIndex,s=Object(o.d)(r.anglePlanar),a=Object(o.d)(r.angleSignificantEdge),l=Math.cos(a),f=Math.cos(s),u=T.edge,g=u.position0,d=u.position1,p=u.faceNormal0,h=u.faceNormal1,m=function(t){const e=t.faces.length/3,n=t.vertices.position,o=t.faces,r=z.v0,i=z.v1,c=z.v2,s=new Float32Array(3*e);for(let a=0;a<e;a++){const t=o[3*a+1],e=o[3*a+2];n.getVec(o[3*a+0],r),n.getVec(t,i),n.getVec(e,c),Object(w.g)(i,i,r),Object(w.g)(c,c,r),Object(w.d)(r,i,c),Object(w.o)(r,r),s[3*a+0]=r[0],s[3*a+1]=r[1],s[3*a+2]=r[2]}return s}(t),b=function(t){const e=t.faces.length/3,n=t.faces,o=t.neighbors;let r=0;for(let s=0;s<e;s++){const t=n[3*s+0],e=n[3*s+1],i=n[3*s+2];r+=-1===o[3*s+0]||t<e?1:0,r+=-1===o[3*s+1]||e<i?1:0,r+=-1===o[3*s+2]||i<t?1:0}const i=new Int32Array(4*r);let c=0;for(let s=0;s<e;s++){const t=o[3*s+0],e=o[3*s+1],r=o[3*s+2],a=n[3*s+0],l=n[3*s+1],f=n[3*s+2];(-1===t||a<l)&&(i[c++]=a,i[c++]=l,i[c++]=s,i[c++]=t),(-1===e||l<f)&&(i[c++]=l,i[c++]=f,i[c++]=s,i[c++]=e),(-1===r||f<a)&&(i[c++]=f,i[c++]=a,i[c++]=s,i[c++]=r)}return i}(t),v=b.length/4,y=e.allocate(v);let O=0;const A=n.allocate(v);let j=0,I=0,N=0;const E=Object(M.h)(0,v),S=new Float32Array(v);Object(L.b)(S,(t,e,n)=>{i.getVec(b[4*e+0],g),i.getVec(b[4*e+1],d),n[e]=Object(w.l)(g,d)}),E.sort((t,e)=>S[e]-S[t]);const U=new Array,V=new Array;for(let o=0;o<v;o++){const t=E[o],r=S[t],a=b[4*t+0],v=b[4*t+1],x=b[4*t+2],D=b[4*t+3],k=-1===D;if(i.getVec(a,g),i.getVec(v,d),k)Object(w.r)(p,m[3*x+0],m[3*x+1],m[3*x+2]),Object(w.h)(h,p),u.componentIndex=c.get(a),u.cosAngle=Object(w.e)(p,h);else{if(Object(w.r)(p,m[3*x+0],m[3*x+1],m[3*x+2]),Object(w.r)(h,m[3*D+0],m[3*D+1],m[3*D+2]),u.componentIndex=c.get(a),u.cosAngle=Object(w.e)(p,h),C(u,f))continue;u.cosAngle<-.9999&&Object(w.h)(h,p)}I+=r,N++,k||F(u,l)?(e.write(y,O++,u),U.push(r)):P(u,s)&&(n.write(A,j++,u),V.push(r))}const x=new Float32Array(U.reverse()),D=new Float32Array(V.reverse());return{regular:{instancesData:e.trim(y,O),lodInfo:{lengths:x}},silhouette:{instancesData:n.trim(A,j),lodInfo:{lengths:D}},averageEdgeLength:I/N}}(e,R,G)}const R=new I,G=new N}}]);","name":"160.587088a0700b68bd2947.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[160],{\n\n/***/ \"InNl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"work\", function() { return /* binding */ EdgeProcessingWorker_u; });\n__webpack_require__.d(__webpack_exports__, \"wrappedWork\", function() { return /* binding */ EdgeProcessingWorker_a; });\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/mathUtils.js\nvar mathUtils = __webpack_require__(\"OKTS\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction deduplicate_n(n,f,i){const u=n.byteLength/(4*f),c=new Uint32Array(n,0,u*f);let s=new Uint32Array(u);const a=i&&i.minReduction||0,h=i&&i.originalIndices||null,g=i&&i.componentOffsets||null;let y=0;if(g)for(let t=0;t<g.length-1;t++){const n=g[t+1]-g[t];n>y&&(y=n)}else y=u;const U=Math.floor(1.1*y)+1;(null==deduplicate_o||deduplicate_o.length<2*U)&&(deduplicate_o=new Uint32Array(Object(mathUtils[\"i\" /* nextHighestPowerOfTwo */])(2*U)));for(let t=0;t<2*U;t++)deduplicate_o[t]=0;let w=0;const A=!!g&&!!h,m=A?h.length:u,b=A?new Uint32Array(h.length):null,d=1.96;let p=0!==a?Math.ceil(4*d*d/(a*a)*a*(1-a)):m,M=1,q=g?g[1]:m;for(let t=0;t<m;t++){if(t===p){const n=1-w/t;if(n+d*Math.sqrt(n*(1-n)/t)<a)return null;p*=2}if(t===q){for(let t=0;t<2*U;t++)deduplicate_o[t]=0;if(h)for(let t=g[M-1];t<g[M];t++)b[t]=s[h[t]];q=g[++M]}const n=A?h[t]:t,r=n*f,i=deduplicate_l(c,r,f);let u=i%U,y=w;for(;0!==deduplicate_o[2*u+1];){if(deduplicate_o[2*u]===i){const t=deduplicate_o[2*u+1]-1;if(deduplicate_e(c,r,t*f,f)){y=s[t];break}}u++,u>=U&&(u-=U)}y===w&&(deduplicate_o[2*u]=i,deduplicate_o[2*u+1]=n+1,w++),s[n]=y}if(0!==a&&1-w/u<a)return null;if(A){for(let t=g[M-1];t<b.length;t++)b[t]=s[h[t]];s=b}const x=new Uint32Array(f*w);w=0;for(let t=0;t<m;t++)if(s[t]===w){deduplicate_r(c,(A?h[t]:t)*f,x,w*f,f),w++}if(h&&!A){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=s[h[n]];s=t}return{buffer:x.buffer,indices:s,uniqueCount:w}}function deduplicate_e(t,n,e,r){for(let l=0;l<r;l++)if(t[n+l]!==t[e+l])return!1;return!0}function deduplicate_r(t,n,e,r,l){for(let o=0;o<l;o++)e[r+o]=t[n+o]}function deduplicate_l(t,n,e){let r=0;for(let l=0;l<e;l++)r=t[n+l]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let deduplicate_o=null;/* harmony default export */ var deduplicate = (deduplicate_n);\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst glUtil_t={divisor:0};function glUtil_o(o,n={}){n={...glUtil_t,...n};const r=o.stride;return o.fieldNames.filter((t=>{const e=o.fields.get(t).optional;return!(e&&e.glPadding)})).map((t=>{const i=o.fields.get(t),s=i.constructor.ElementCount,u=function(t){const o=glUtil_e[t];if(o)return o;throw new Error(\"BufferType not supported in WebGL\")}(i.constructor.ElementType),f=i.offset,c=!(!i.optional||!i.optional.glNormalized);return{name:t,stride:r,count:s,type:u,offset:f,normalized:c,divisor:n.divisor}}))}const glUtil_e={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js\nvar InterleavedLayout = __webpack_require__(\"/ADo\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst bufferLayouts_e=Object(InterleavedLayout[\"a\" /* newLayout */])().vec3f(\"position\").u16(\"componentIndex\").u16(\"_padding\"),bufferLayouts_i=Object(InterleavedLayout[\"a\" /* newLayout */])().vec2u8(\"sideness\"),bufferLayouts_t=glUtil_o(bufferLayouts_i),bufferLayouts_a=Object(InterleavedLayout[\"a\" /* newLayout */])().vec3f(\"position0\").vec3f(\"position1\").u16(\"componentIndex\").u8(\"variantOffset\",{glNormalized:!0}).u8(\"variantStroke\").u8(\"variantExtension\",{glNormalized:!0}).u8(\"_padding\",{glPadding:!0}).u16(\"_padding2\",{glPadding:!0}),bufferLayouts_r=bufferLayouts_a.clone().vec3f(\"normal\"),bufferLayouts_s=bufferLayouts_a.clone().vec3f(\"normalA\").vec3f(\"normalB\"),bufferLayouts_d={position0:0,position1:1,componentIndex:2,variantOffset:4,variantStroke:5,variantExtension:6,normal:7,normalA:7,normalB:8,sideness:9};\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/RandomLCG.js\nvar RandomLCG = __webpack_require__(\"iA3P\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3f64.js\nvar vec3f64 = __webpack_require__(\"Cy1f\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/chunks/vec3.js\nvar vec3 = __webpack_require__(\"5DEt\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass edgeBufferWriters_a{updateSettings(t){this.settings=t}write(t,o,e){const r=function(t){const o=edgeBufferWriters_c;o[0]=t.position0[0],o[1]=t.position0[1],o[2]=t.position0[2],o[3]=t.position1[0],o[4]=t.position1[1],o[5]=t.position1[2],edgeBufferWriters_u[0]=5381;for(let t=0;t<edgeBufferWriters_m.length;t++)edgeBufferWriters_u[0]=31*edgeBufferWriters_u[0]+edgeBufferWriters_m[t];return edgeBufferWriters_u[0]}(e);edgeBufferWriters_p.seed=r;const n=edgeBufferWriters_p.getIntRange(0,255),i=edgeBufferWriters_p.getIntRange(0,this.settings.variants-1),s=edgeBufferWriters_p.getFloat(),a=255*(.5*function(t,o){const e=t<0?-1:1;return Math.pow(Math.abs(t),o)*e}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);t.position0.setVec(o,e.position0),t.position1.setVec(o,e.position1),t.componentIndex.set(o,e.componentIndex),t.variantOffset.set(o,n),t.variantStroke.set(o,i),t.variantExtension.set(o,a)}trim(t,o){return t.slice(0,o)}}const edgeBufferWriters_c=new Float32Array(6),edgeBufferWriters_m=new Uint32Array(edgeBufferWriters_c.buffer),edgeBufferWriters_u=new Uint32Array(1);const edgeBufferWriters_p=new RandomLCG[\"a\" /* default */];class edgeBufferWriters_f{constructor(){this.commonWriter=new edgeBufferWriters_a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return bufferLayouts_r.createBuffer(t)}write(t,o,n){this.commonWriter.write(t,o,n),Object(vec3[\"c\" /* b */])(edgeBufferWriters_h,n.faceNormal0,n.faceNormal1),Object(vec3[\"o\" /* n */])(edgeBufferWriters_h,edgeBufferWriters_h),t.normal.setVec(o,edgeBufferWriters_h)}trim(t,o){return this.commonWriter.trim(t,o)}}edgeBufferWriters_f.Layout=bufferLayouts_r,edgeBufferWriters_f.glLayout=glUtil_o(bufferLayouts_r,{divisor:1});class edgeBufferWriters_l{constructor(){this.commonWriter=new edgeBufferWriters_a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return bufferLayouts_s.createBuffer(t)}write(t,o,e){this.commonWriter.write(t,o,e),t.normalA.setVec(o,e.faceNormal0),t.normalB.setVec(o,e.faceNormal1)}trim(t,o){return this.commonWriter.trim(t,o)}}edgeBufferWriters_l.Layout=bufferLayouts_s,edgeBufferWriters_l.glLayout=glUtil_o(bufferLayouts_s,{divisor:1});const edgeBufferWriters_h=Object(vec3f64[\"e\" /* c */])();\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/support/buffer/BufferView.js + 6 modules\nvar BufferView = __webpack_require__(\"VeZB\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/support/buffer/workerHelper.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction workerHelper_z(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:workerHelper_F(e.layout)}}function workerHelper_D(e){return workerHelper_G(e.layout).createView(e.buffer)}function workerHelper_F(e){const t=new Array;return e.fields.forEach(((e,r)=>{const n={...e,constructor:workerHelper_J(e.constructor)};t.push([r,n])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}function workerHelper_G(e){const t=Object(InterleavedLayout[\"a\" /* newLayout */])();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach((e=>{return t.fields.set(e[0],{...e[1],constructor:(r=e[1].constructor,workerHelper_K.get(r))});var r})),t}const workerHelper_H=[BufferView[\"a\" /* BufferViewFloat */],BufferView[\"m\" /* BufferViewVec2f */],BufferView[\"u\" /* BufferViewVec3f */],BufferView[\"C\" /* BufferViewVec4f */],BufferView[\"f\" /* BufferViewMat3f */],BufferView[\"h\" /* BufferViewMat4f */],BufferView[\"b\" /* BufferViewFloat64 */],BufferView[\"n\" /* BufferViewVec2f64 */],BufferView[\"v\" /* BufferViewVec3f64 */],BufferView[\"D\" /* BufferViewVec4f64 */],BufferView[\"g\" /* BufferViewMat3f64 */],BufferView[\"i\" /* BufferViewMat4f64 */],BufferView[\"l\" /* BufferViewUint8 */],BufferView[\"t\" /* BufferViewVec2u8 */],BufferView[\"B\" /* BufferViewVec3u8 */],BufferView[\"J\" /* BufferViewVec4u8 */],BufferView[\"j\" /* BufferViewUint16 */],BufferView[\"r\" /* BufferViewVec2u16 */],BufferView[\"z\" /* BufferViewVec3u16 */],BufferView[\"H\" /* BufferViewVec4u16 */],BufferView[\"k\" /* BufferViewUint32 */],BufferView[\"s\" /* BufferViewVec2u32 */],BufferView[\"A\" /* BufferViewVec3u32 */],BufferView[\"I\" /* BufferViewVec4u32 */],BufferView[\"e\" /* BufferViewInt8 */],BufferView[\"q\" /* BufferViewVec2i8 */],BufferView[\"y\" /* BufferViewVec3i8 */],BufferView[\"G\" /* BufferViewVec4i8 */],BufferView[\"c\" /* BufferViewInt16 */],BufferView[\"o\" /* BufferViewVec2i16 */],BufferView[\"w\" /* BufferViewVec3i16 */],BufferView[\"E\" /* BufferViewVec4i16 */],BufferView[\"d\" /* BufferViewInt32 */],BufferView[\"p\" /* BufferViewVec2i32 */],BufferView[\"x\" /* BufferViewVec3i32 */],BufferView[\"F\" /* BufferViewVec4i32 */]];function workerHelper_J(e){return`${e.ElementType}_${e.ElementCount}`}const workerHelper_K=new Map;workerHelper_H.forEach((e=>workerHelper_K.set(workerHelper_J(e),e)));\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/support/meshProcessing.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction meshProcessing_t(t,n){const o=t.length/3,r=new Uint32Array(n+1),e=new Uint32Array(n+1),c=(t,n)=>{t<n?r[t+1]++:e[n+1]++};for(let n=0;n<o;n++){const o=t[3*n],r=t[3*n+1],e=t[3*n+2];c(o,r),c(r,e),c(e,o)}let s=0,f=0;for(let t=0;t<n;t++){const n=r[t+1],o=e[t+1];r[t+1]=s,e[t+1]=f,s+=n,f+=o}const l=new Uint32Array(6*o),i=r[n],a=(t,n,o)=>{if(t<n){const e=r[t+1]++;l[2*e]=n,l[2*e+1]=o}else{const r=e[n+1]++;l[2*i+2*r]=t,l[2*i+2*r+1]=o}};for(let n=0;n<o;n++){const o=t[3*n],r=t[3*n+1],e=t[3*n+2];a(o,r,n),a(r,e,n),a(e,o,n)}const w=(t,n)=>{const o=2*t,r=n-t;for(let t=1;t<r;t++){const n=l[o+2*t],r=l[o+2*t+1];let e=t-1;for(;e>=0&&l[o+2*e]>n;e--)l[o+2*e+2]=l[o+2*e],l[o+2*e+3]=l[o+2*e+1];l[o+2*e+2]=n,l[o+2*e+3]=r}};for(let t=0;t<n;t++)w(r[t],r[t+1]),w(i+e[t],i+e[t+1]);const y=new Int32Array(3*o),A=(n,o)=>n===t[3*o]?0:n===t[3*o+1]?1:n===t[3*o+2]?2:-1,U=(t,n)=>{const o=A(t,n);y[3*n+o]=-1},u=(t,n,o,r)=>{const e=A(t,n);y[3*n+e]=r;const c=A(o,r);y[3*r+c]=n};for(let t=0;t<n;t++){let n=r[t];const o=r[t+1];let c=e[t];const s=e[t+1];for(;n<o&&c<s;){const o=l[2*n],r=l[2*i+2*c];o===r?(u(t,l[2*n+1],r,l[2*i+2*c+1]),n++,c++):o<r?(U(t,l[2*n+1]),n++):(U(r,l[2*i+2*c+1]),c++)}for(;n<o;)U(t,l[2*n+1]),n++;for(;c<s;){U(l[2*i+2*c],l[2*i+2*c+1]),c++}}return y}\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/typedArrayUtil.js\nvar typedArrayUtil = __webpack_require__(\"ohva\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/core/arrayUtils.js\nvar arrayUtils = __webpack_require__(\"tQ+6\");\n\n// EXTERNAL MODULE: ./node_modules/@arcgis/core/views/3d/support/mathUtils.js\nvar support_mathUtils = __webpack_require__(\"aAs6\");\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction edgePreprocessing_p(n,r,m,p=edgePreprocessing_w){const y=n.vertices.position,I=n.vertices.componentIndex,V=Object(mathUtils[\"d\" /* deg2rad */])(p.anglePlanar),j=Object(mathUtils[\"d\" /* deg2rad */])(p.angleSignificantEdge),N=Math.cos(j),x=Math.cos(V),F=edgePreprocessing_A.edge,U=F.position0,k=F.position1,E=F.faceNormal0,D=F.faceNormal1,M=function(e){const t=e.faces.length/3,o=e.vertices.position,n=e.faces,r=v.v0,s=v.v1,c=v.v2,a=new Float32Array(3*t);for(let e=0;e<t;e++){const t=n[3*e+0],i=n[3*e+1],m=n[3*e+2];o.getVec(t,r),o.getVec(i,s),o.getVec(m,c),Object(vec3[\"g\" /* f */])(s,s,r),Object(vec3[\"g\" /* f */])(c,c,r),Object(vec3[\"d\" /* c */])(r,s,c),Object(vec3[\"o\" /* n */])(r,r),a[3*e+0]=r[0],a[3*e+1]=r[1],a[3*e+2]=r[2]}return a}(n),P=function(e){const t=e.faces.length/3,o=e.faces,n=e.neighbors;let r=0;for(let e=0;e<t;e++){const t=n[3*e+0],s=n[3*e+1],c=n[3*e+2],a=o[3*e+0],i=o[3*e+1],l=o[3*e+2];r+=-1===t||a<i?1:0,r+=-1===s||i<l?1:0,r+=-1===c||l<a?1:0}const s=new Int32Array(4*r);let c=0;for(let e=0;e<t;e++){const t=n[3*e+0],r=n[3*e+1],a=n[3*e+2],i=o[3*e+0],l=o[3*e+1],g=o[3*e+2];(-1===t||i<l)&&(s[c++]=i,s[c++]=l,s[c++]=e,s[c++]=t),(-1===r||l<g)&&(s[c++]=l,s[c++]=g,s[c++]=e,s[c++]=r),(-1===a||g<i)&&(s[c++]=g,s[c++]=i,s[c++]=e,s[c++]=a)}return s}(n),S=P.length/4,b=r.allocate(S);let L=0;const q=S,z=m.allocate(q);let B=0,C=0,G=0;const H=Object(arrayUtils[\"h\" /* range */])(0,S),J=new Float32Array(S);Object(typedArrayUtil[\"b\" /* forEach */])(J,((e,t,o)=>{y.getVec(P[4*t+0],U),y.getVec(P[4*t+1],k),o[t]=Object(vec3[\"l\" /* k */])(U,k)})),H.sort(((e,t)=>J[t]-J[e]));const K=new Array,O=new Array;for(let e=0;e<S;e++){const t=H[e],o=J[t],n=P[4*t+0],s=P[4*t+1],l=P[4*t+2],g=P[4*t+3],f=-1===g;if(y.getVec(n,U),y.getVec(s,k),f)Object(vec3[\"r\" /* s */])(E,M[3*l+0],M[3*l+1],M[3*l+2]),Object(vec3[\"h\" /* g */])(D,E),F.componentIndex=I.get(n),F.cosAngle=Object(vec3[\"e\" /* d */])(E,D);else{if(Object(vec3[\"r\" /* s */])(E,M[3*l+0],M[3*l+1],M[3*l+2]),Object(vec3[\"r\" /* s */])(D,M[3*g+0],M[3*g+1],M[3*g+2]),F.componentIndex=I.get(n),F.cosAngle=Object(vec3[\"e\" /* d */])(E,D),edgePreprocessing_h(F,x))continue;F.cosAngle<-.9999&&Object(vec3[\"h\" /* g */])(D,E)}C+=o,G++,f||edgePreprocessing_u(F,N)?(r.write(b,L++,F),K.push(o)):edgePreprocessing_d(F,V)&&(m.write(z,B++,F),O.push(o))}const Q=new Float32Array(K.reverse()),R=new Float32Array(O.reverse());return{regular:{instancesData:r.trim(b,L),lodInfo:{lengths:Q}},silhouette:{instancesData:m.trim(z,B),lodInfo:{lengths:R}},averageEdgeLength:C/G}}function edgePreprocessing_u(e,t){return e.cosAngle<t}function edgePreprocessing_h(e,t){return e.cosAngle>t}function edgePreprocessing_d(e,t){const o=Object(mathUtils[\"a\" /* acosClamped */])(e.cosAngle),r=edgePreprocessing_A.fwd,s=edgePreprocessing_A.ortho;Object(support_mathUtils[\"c\" /* directionFromTo */])(r,e.position1,e.position0);return o*(Object(vec3[\"e\" /* d */])(Object(vec3[\"d\" /* c */])(s,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}const edgePreprocessing_A={edge:{position0:Object(vec3f64[\"e\" /* c */])(),position1:Object(vec3f64[\"e\" /* c */])(),faceNormal0:Object(vec3f64[\"e\" /* c */])(),faceNormal1:Object(vec3f64[\"e\" /* c */])(),componentIndex:0,cosAngle:0},ortho:Object(vec3f64[\"e\" /* c */])(),fwd:Object(vec3f64[\"e\" /* c */])()},v={v0:Object(vec3f64[\"e\" /* c */])(),v1:Object(vec3f64[\"e\" /* c */])(),v2:Object(vec3f64[\"e\" /* c */])()},edgePreprocessing_w={anglePlanar:4,angleSignificantEdge:35};\n\n// CONCATENATED MODULE: ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nasync function EdgeProcessingWorker_a(e){const t=function(e){return{data:bufferLayouts_e.createView(e.dataBuffer),originalIndices:\"Uint32Array\"===e.originalIndicesType?new Uint32Array(e.originalIndicesBuffer):\"Uint16Array\"===e.originalIndicesType?new Uint16Array(e.originalIndicesBuffer):void 0,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}(e),n=EdgeProcessingWorker_u(t),s=[t.data.buffer];return{result:function(e,r){r.push(e.regular.lodInfo.lengths.buffer),r.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:workerHelper_z(e.regular.instancesData,r),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:workerHelper_z(e.silhouette.instancesData,r),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}(n,s),transferList:s}}function EdgeProcessingWorker_u(t){const n=function(t,n,i){if(n&&i){return{faces:i,neighbors:meshProcessing_t(i,t.count),vertices:t}}{const n=deduplicate_n(t.buffer,t.stride/4,{originalIndices:i}),o=meshProcessing_t(n.indices,n.uniqueCount);return{faces:n.indices,neighbors:o,vertices:bufferLayouts_e.createView(n.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return EdgeProcessingWorker_f.updateSettings(t.writerSettings),EdgeProcessingWorker_c.updateSettings(t.writerSettings),edgePreprocessing_p(n,EdgeProcessingWorker_f,EdgeProcessingWorker_c)}const EdgeProcessingWorker_f=new edgeBufferWriters_f,EdgeProcessingWorker_c=new edgeBufferWriters_l;\n\n\n/***/ })\n\n}]);","inputSourceMap":null}