(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/ADo":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("VeZB"),i=r("grla");class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const r of e.fieldNames){const t=e.fields.get(r);this[r]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}}class a{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,n.m,t),this}vec2f64(e,t){return this.appendField(e,n.n,t),this}vec3f(e,t){return this.appendField(e,n.u,t),this}vec3f64(e,t){return this.appendField(e,n.v,t),this}vec4f(e,t){return this.appendField(e,n.C,t),this}vec4f64(e,t){return this.appendField(e,n.D,t),this}mat3f(e,t){return this.appendField(e,n.f,t),this}mat3f64(e,t){return this.appendField(e,n.g,t),this}mat4f(e,t){return this.appendField(e,n.h,t),this}mat4f64(e,t){return this.appendField(e,n.i,t),this}vec4u8(e,t){return this.appendField(e,n.J,t),this}f32(e,t){return this.appendField(e,n.a,t),this}f64(e,t){return this.appendField(e,n.b,t),this}u8(e,t){return this.appendField(e,n.l,t),this}u16(e,t){return this.appendField(e,n.j,t),this}i8(e,t){return this.appendField(e,n.e,t),this}vec2i8(e,t){return this.appendField(e,n.q,t),this}vec2i16(e,t){return this.appendField(e,n.o,t),this}vec2u8(e,t){return this.appendField(e,n.t,t),this}vec4u16(e,t){return this.appendField(e,n.H,t),this}u32(e,t){return this.appendField(e,n.k,t),this}appendField(e,t,r){const n=t.ElementCount*Object(i.a)(t.ElementType);this.fields.set(e,{size:n,constructor:t,offset:this.stride,optional:r}),this.stride+=n,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new a;return e.stride=this.stride,e.fields=new Map,this.fields.forEach((t,r)=>e.fields.set(r,t)),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function o(){return new a}},"1Ana":function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n=r("pO5D"),i=(r("wSAH"),r("6S2I")),s=(r("zqDF"),r("TDcG")),a=r("WbKI"),o=r("04ZG"),l=r("zlDU"),c=(r("4EHJ"),r("ju1D"),r("ku/q")),u=(r("9AIY"),r("LE9a")),d=r("TRCY"),p=r("6dDx"),f=r("Ilhi");const h=i.a.getLogger("esri.layers.TileLayer"),y=u.a.ofType(p.a);function b(e,t){e&&e.forEach(e=>{t(e),e.sublayers&&e.sublayers.length&&b(e.sublayers,t)})}const m=e=>{let t=class extends e{constructor(...e){super(...e),this.allSublayers=new d.a({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.watch("sublayers",(e,t)=>this._handleSublayersChange(e,t),!0)}readSublayers(e,t){if(!t||!e)return;const{sublayersSourceJSON:r}=this,n=Object(c.d)(t.origin);if(n<2)return;if(r[n]={context:t,visibleLayers:e.visibleLayers||r[n].visibleLayers,layers:e.layers||r[n].layers},n>2)return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:i,origin:a}=this.createSublayersForOrigin("web-document"),o=Object(s.a)(this);o.setDefaultOrigin(a),this._set("sublayers",new y(i)),o.setDefaultOrigin("user")}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(e){const t=Object(c.d)("web-document"===e?"web-map":e);let r=2,n=this.sublayersSourceJSON[2].layers,i=this.sublayersSourceJSON[2].context,s=null;const a=[3,4,5].filter(e=>e<=t);for(const c of a){const e=this.sublayersSourceJSON[c];Object(f.b)(e.layers)&&(r=c,n=e.layers,i=e.context,e.visibleLayers&&(s={visibleLayers:e.visibleLayers,context:e.context}))}const o=[3,4,5].filter(e=>e>r&&e<=t);let l=null;for(const c of o){const{layers:e,visibleLayers:t,context:r}=this.sublayersSourceJSON[c];e&&(l={layers:e,context:r}),t&&(s={visibleLayers:t,context:r})}const u=function(e,t){const r=[],n={};return e?(e.forEach(e=>{const i=new p.a;if(i.read(e,t),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){const t=n[e.parentLayerId];t.sublayers||(t.sublayers=[]),t.sublayers.unshift(i)}else r.unshift(i)}),r):r}(n,i),d=new Map,h=new Set;if(l)for(const c of l.layers)d.set(c.id,c);if(s)for(const c of s.visibleLayers)h.add(c);return b(u,e=>{l&&e.read(d.get(e.id),l.context),s&&e.read({defaultVisibility:h.has(e.id)},s.context)}),{origin:Object(c.b)(r),sublayers:new y({items:u})}}read(e,t){super.read(e,t),this.readSublayers(e,t)}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.remove("sublayers-owner")),e&&(e.forEach(e=>{e.parent=this,e.layer=this}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",e=>{h.error(new l.a("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),e.preventDefault()}),"sublayers-owner"))}};return Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(n.a)([Object(a.b)({readOnly:!0,type:u.a.ofType(p.a)})],t.prototype,"serviceSublayers",void 0),Object(n.a)([Object(a.b)({value:null,type:y,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(n.a)([Object(o.a)("esri.layers.mixins.SublayersOwner")],t),t}},"2uVf":function(e,t,r){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,n,i,s,a,o,l){return[e,t,r,n,i,s,a,o,l]},createView:i})},"46M0":function(e,t,r){"use strict";r.d(t,"a",function(){return w}),r.d(t,"b",function(){return v}),r.d(t,"c",function(){return j});var n=r("zlDU"),i=r("k5I3"),s=r("gVKr");function a(e){const t=[];return e.forEach(e=>t.push(e)),t}const o={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function*l(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function u(e){for(;;){const{value:t,done:r}=e.next();if(r)return!1;if(t.length>2)return!0}}function d(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function p(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function f(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return b(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(const n of t.coordinates)b(e,n,r);return e}(e,t,r);case"MultiPoint":return function(e,t,r){return b(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(const n of t.coordinates){h(e,n[0],r);for(let t=1;t<n.length;t++)y(e,n[t],r)}return e}(e,t,r);case"Point":return function(e,t,r){return O(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){const n=t.coordinates;h(e,n[0],r);for(let i=1;i<n.length;i++)y(e,n[i],r);return e}(e,t,r)}}function h(e,t,r){const n=p(t);d(n)?b(e,n,r):m(e,n,r)}function y(e,t,r){const n=p(t);d(n)?m(e,n,r):b(e,n,r)}function b(e,t,r){for(const n of t)O(e,n,r);e.lengths.push(t.length)}function m(e,t,r){for(let n=t.length-1;n>=0;n--)O(e,t[n],r);e.lengths.push(t.length)}function O(e,t,r){const[n,i,s]=t;e.coords.push(n,i),r.hasZ&&e.coords.push(s||0)}function g(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function j(e){if(!e)throw new n.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new n.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const r="string"==typeof t?t:"name"===t.type?t.properties.name:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!i.test(r))throw new n.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function v(e,t={}){const r=l(e),n=[],i=new Set,s=new Set;let d,p=!1,f=Number.NEGATIVE_INFINITY,h=null,y=!1,{geometryType:b=null}=t,m=!1;for(;;){const{value:e,done:t}=r.next();if(t){const e=h&&1===h.length&&h[0]||null;if(e)for(const t of n)t.name===e&&(t.type="esriFieldTypeOID");return{fields:n,geometryType:b,hasZ:p,maxObjectId:Math.max(0,f),objectIdFieldName:e,objectIdFieldType:d,unknownFields:a(s)}}const{geometry:l,properties:O,id:j}=e;if((!l||(b||(b=o[l.type]),o[l.type]===b))&&(p||(p=u(c(l))),y||(y=null!=j,y&&(d=typeof j,"number"===d&&(h=Object.keys(O).filter(e=>O[e]===j)))),y&&"number"===d&&null!=j&&(f=Math.max(f,j),h.length>1?h=h.filter(e=>O[e]===j):1===h.length&&(h=O[h[0]]===j?h:[])),!m&&O)){let e=!0;for(const t in O){if(i.has(t))continue;const r=O[t];if(null==r){e=!1,s.add(t);continue}const a=g(r);"unknown"!==a?(s.delete(t),i.add(t),n.push({name:t,alias:t,type:a})):s.add(t)}m=e}}}function w(e,t){return function(e){const t=[];for(;;){const{value:r,done:n}=e.next();if(n)return t;t.push(r)}}(function*(e,t={}){const{geometryType:r,objectIdFieldName:n}=t;for(;;){const{value:a,done:l}=e.next();if(l)return;const{geometry:c,properties:u,id:d}=a;if(c&&o[c.type]!==r)continue;const p=u||{};n&&null!=d&&!p[n]&&(p[n]=d);const h=new i.a(c?f(new s.a,c,t):null,p);yield h}}(l(e),t))}},"4xTw":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach(t=>{e=e&&t.isReady}),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};Object(n.a)([Object(i.b)()],o.prototype,"layer",void 0),Object(n.a)([Object(i.b)()],o.prototype,"layerView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"tileInfoView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"updating",null),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],o),t.a=o},"54nt":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("+opI"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("DKHk"));const l=new s.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let c=class extends o.a{constructor(e){super(e),this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=Object(n.a)([Object(a.a)("esri.tasks.support.NAMessage")],c),t.a=c},"5qYV":function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",function(){return l}),r.d(t,"contentToBlob",function(){return f}),r.d(t,"fetchResources",function(){return o}),r.d(t,"getSiblingOfSameType",function(){return h}),r.d(t,"getSiblingOfSameTypeI",function(){return y}),r.d(t,"removeAllResources",function(){return u}),r.d(t,"removeResource",function(){return c}),r.d(t,"splitPrefixFileNameAndExtension",function(){return p});var n=r("srIe"),i=r("zlDU"),s=r("4EHJ"),a=r("Lqtk");async function o(e,t={},r){await e.load(r);const i=Object(s.x)(e.itemUrl,"resources"),{start:a=1,num:o=10,sortOrder:l="asc",sortField:c="created"}=t,u={query:{start:a,num:o,sortOrder:l,sortField:c},signal:Object(n.f)(r,"signal")},d=await e.portal._request(i,u);return{total:d.total,nextStart:d.nextStart,resources:d.resources.map(({created:t,size:r,resource:n})=>({created:new Date(t),size:r,resource:e.resourceFromPath(n)}))}}async function l(e,t,r,a){if(!e.hasPath())throw new i.a(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");await e.portalItem.load(a);const o=Object(s.x)(e.portalItem.userItemUrl,"add"===t?"addResources":"updateResources"),[l,c]=d(e.path),u=await f(r),p=new FormData;return l&&"."!==l&&p.append("resourcesPrefix",l),p.append("fileName",c),p.append("file",u,c),p.append("f","json"),Object(n.h)(a)&&a.access&&p.append("access",a.access),await e.portalItem.portal._request(o,{method:"post",body:p,signal:Object(n.f)(a,"signal")}),e}async function c(e,t,r){if(!t.hasPath())throw new i.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(r);const a=Object(s.x)(e.userItemUrl,"removeResources");await e.portal._request(a,{method:"post",query:{resource:t.path},signal:Object(n.f)(r,"signal")}),t.portalItem=null}async function u(e,t){await e.load(t);const r=Object(s.x)(e.userItemUrl,"removeResources");return e.portal._request(r,{method:"post",query:{deleteAll:!0},signal:Object(n.f)(t,"signal")})}function d(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function p(e){const[t,r]=function(e){const t=Object(s.n)(e);return Object(n.g)(t)?[e,""]:[e.slice(0,e.length-t.length-1),"."+t]}(e),[i,a]=d(t);return[i,a,r]}async function f(e){return e instanceof Blob?e:(await Object(a.default)(e.url,{responseType:"blob"})).data}function h(e,t){if(!e.hasPath())return null;const[r,,n]=p(e.path);return e.portalItem.resourceFromPath(Object(s.x)(r,t+n))}function y(e,t){if(!e.hasPath())return null;const[r,,n]=p(e.path);return e.portalItem.resourceFromPath(Object(s.x)(r,t+n))}},"6Az7":function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("kYAx"),i=r("yE7X"),s=r("Oxob"),a=r("ZyIX"),o=r("5LEI"),l=r("xzrc");class c extends o.a{constructor(e,t,r,n=null){super(e,t,r,r),this.bitmap=new l.a(n),this.bitmap.coordScale=r,this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}class u extends a.a{createTile(e){const t=this._tileInfoView.getTileBounds(Object(n.d)(),e);return new c(e,t,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[s.a.bitmap],target:()=>this.children.map(e=>e.bitmap),drawPhase:i.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===i.c.MAP&&super.doRender(e)}}},"6dDx":function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=r("6S2I"),o=r("zqDF"),l=r("TDcG"),c=r("WbKI"),u=r("Gj5k"),d=r("r88o"),p=r("04ZG"),f=r("Cduq"),h=r("zlDU"),y=r("4EHJ"),b=(r("ju1D"),r("ku/q")),m=(r("9AIY"),r("9MzC")),O=r("OvF4"),g=(r("4GrV"),r("LE9a")),j=r("wdpY"),v=r("pdg3"),w=r("SFah"),x=r("Lqtk"),S=r("bV/r"),I=r("nNR5"),T=r("5pQd"),_=(r("ZnuT"),r("tCO6"),r("2gBT"),r("JhoD"),r("tI3Y"),r("R4xK"),r("/1dM"),r("XNvV")),E=(r("+Xal"),r("ofM5")),M=r("gLc9"),A=r("wkZP"),L=r("orEy"),B=r("WmHL"),N=r("s7US"),R=r("9Ruv"),F=r("xk++"),D=r("kJYu");function P(e){return e&&"esriSMS"===e.type}function C(e,t,r){var n;return{ignoreOrigin:!0,enabled:!!r&&"map-image"===(null==(n=r.layer)?void 0:n.type)&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(b.d)(r.origin))}}function k(e,t,r){var n;return{enabled:!!r&&"tile"===(null==(n=r.layer)?void 0:n.type)&&this._isOverridden(t)}}function q(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function z(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(b.d)(r.origin))}}const U=a.a.getLogger("esri.layers.support.Sublayer");let V=0;const G=new Set;G.add("layer"),G.add("parent"),G.add("loaded"),G.add("loadStatus"),G.add("loadError"),G.add("loadWarnings");let J=n=class extends(Object(D.b)(Object(T.a)(Object(v.a)(S.a)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var t;if(!this.layer&&!this.url)throw new h.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let r=null;if(!this.layer||this.originIdOf("url")>2||"data-layer"===(null==(t=this.source)?void 0:t.type))r=(await Object(x.default)(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{var n;let t=this.id;"map-layer"===(null==(n=this.source)?void 0:n.type)&&(t=this.source.mapLayerId),r=await this.layer.fetchSublayerInfo(t,e)}r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(e,t){const r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(e=>e.trim()):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new M.a(this.fields||[])}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}get id(){const e=this._get("id");return null==e?V++:e}set id(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(e=>e.write({},n))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}writeOpacity(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){t.parentLayerId=this.parent&&this.parent!==this.layer?Object(o.e)(this.parent.id):-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const t of e.getSymbols())if(Object(I.h)(t)){U.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new B.a({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Object(o.m)(g.a.ofType(n),e)}writeSublayers(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map(e=>e.id).toArray().reverse())}readTypeIdField(e,t){const r=(t=t.layerDefinition||t).typeIdField;if(r){const e=Object(j.n)(t.fields,r);if(e)return e.name}return null}get url(){var e,t;const r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,n=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==n?void 0:n.type))return`${r.path}/${n.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${r.path}/dynamicLayer?${Object(y.C)(i)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Object(l.a)(this),t=new n;return Object(l.a)(t).store=e.clone(G),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return Object(R.a)(this,e)}createQuery(){return new F.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var e,t;if(this.hasOwnProperty("sublayers"))return null;const n=null==(e=this.layer)?void 0:e.parsedUrl,i=new(0,(await Promise.resolve().then(r.bind(null,"W9Wu"))).default)({url:n.path});return n&&this.source&&("map-layer"===this.source.type?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(i.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.originIdOf("labelingInfo")>2&&(i.labelingInfo=Object(s.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(i.visible=this.visible),this.originIdOf("minScale")>0&&(i.minScale=this.minScale),this.originIdOf("maxScale")>0&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(i.popupTemplate=Object(s.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(i.renderer=Object(s.a)(this.renderer)),"data-layer"===(null==(t=this.source)?void 0:t.type)&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(i.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),i}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;let i=null;return r.some(e=>{const{id:t}=e;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)}),i}getFieldDomain(e,t){const r=this.getFeatureType(t&&t.feature);if(r){const t=r.domains&&r.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}queryFeatures(e=this.createQuery(),t){return this.load().then(()=>{if(!this.get("capabilities.operations.supportsQuery"))throw new h.a("Sublayer.queryFeatures","this layer doesn't support queries.");return Object(m.b)([Promise.resolve().then(r.bind(null,"M0H4")),Promise.resolve().then(r.bind(null,"8prj"))])}).then(([{executeQuery:r},{default:n}])=>r(this.url,F.a.from(e),this.layer?this.layer.spatialReference:null,{...t,query:{...this.layer.customParameters}}).then(e=>n.fromJSON(e.data))).then(e=>(e&&e.features&&e.features.forEach(e=>{e.sourceLayer=this}),e))}toExportImageJSON(){var e;const t={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(t.definitionExpression=this.definitionExpression);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((e,t)=>(e[t]=this.originIdOf(t),e),{});if(Object.keys(r).some(e=>r[e]>2)){const e=t.drawingInfo={};r.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map(e=>e.write({},{origin:"service"})):null,e.showLabels=!0),r.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,e=>{e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.color=e.outline&&e.outline.color?e.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const e of r)P(e.symbol)&&t(e.symbol);"symbol"in e&&P(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&P(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,n=this._get(e);let i,s;switch(e){case"definitionExpression":i="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":i="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":i="supportsDynamicLayers",s="supportsModification"}const a=Object(l.a)(this).getDefaultOrigin();if("service"!==a){if(i&&!1===this.get("layer.capabilities.exportMap."+i))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${i}'`);if(s&&!1===this.get("capabilities.exportMap."+s))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==a&&n!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.removeAll()),e&&(e.forEach(e=>{e.parent=this,e.layer=this.layer}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this.layer}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null}),e.on("before-changes",e=>{const t=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(U.error(new h.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),e.preventDefault())})]))}_logLockedError(e,t){U.error(new h.a("sublayer:locked",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};J.test={isMapImageLayerOverridePolicy:e=>e===q||e===C,isTileImageLayerOverridePolicy:e=>e===k},Object(i.a)([Object(c.b)({readOnly:!0})],J.prototype,"capabilities",void 0),Object(i.a)([Object(d.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],J.prototype,"readCapabilities",null),Object(i.a)([Object(c.b)({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:C}}})],J.prototype,"definitionExpression",null),Object(i.a)([Object(c.b)({type:[E.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],J.prototype,"fields",void 0),Object(i.a)([Object(c.b)({readOnly:!0,dependsOn:["fields"]})],J.prototype,"fieldsIndex",null),Object(i.a)([Object(c.b)({type:O.a,json:{read:{source:"layerDefinition.extent"}}})],J.prototype,"fullExtent",void 0),Object(i.a)([Object(c.b)({type:String})],J.prototype,"globalIdField",void 0),Object(i.a)([Object(d.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],J.prototype,"readGlobalIdFieldFromService",null),Object(i.a)([Object(c.b)({type:o.a,json:{write:{ignoreOrigin:!0}}})],J.prototype,"id",null),Object(i.a)([Object(c.b)({value:null,type:[A.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:q}}})],J.prototype,"labelingInfo",null),Object(i.a)([Object(f.a)("labelingInfo")],J.prototype,"writeLabelingInfo",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:q}}})],J.prototype,"labelsVisible",null),Object(i.a)([Object(c.b)({value:null})],J.prototype,"layer",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:z}}})],J.prototype,"legendEnabled",void 0),Object(i.a)([Object(c.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],J.prototype,"listMode",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:q}}})],J.prototype,"minScale",null),Object(i.a)([Object(d.a)("minScale",["minScale","layerDefinition.minScale"])],J.prototype,"readMinScale",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:q}}})],J.prototype,"maxScale",null),Object(i.a)([Object(d.a)("maxScale",["maxScale","layerDefinition.maxScale"])],J.prototype,"readMaxScale",null),Object(i.a)([Object(c.b)({type:String})],J.prototype,"objectIdField",void 0),Object(i.a)([Object(d.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],J.prototype,"readObjectIdFieldFromService",null),Object(i.a)([Object(c.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:q}}})],J.prototype,"opacity",null),Object(i.a)([Object(d.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],J.prototype,"readOpacity",null),Object(i.a)([Object(f.a)("opacity")],J.prototype,"writeOpacity",null),Object(i.a)([Object(c.b)({json:{type:o.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:q}}})],J.prototype,"parent",void 0),Object(i.a)([Object(f.a)("parent")],J.prototype,"writeParent",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:z,writer(e,t,r){t[r]=!e}}}})],J.prototype,"popupEnabled",void 0),Object(i.a)([Object(c.b)({type:w.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:z}}})],J.prototype,"popupTemplate",void 0),Object(i.a)([Object(c.b)({readOnly:!0,dependsOn:["fields","title"]})],J.prototype,"defaultPopupTemplate",null),Object(i.a)([Object(c.b)({types:_.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:q},origins:{"web-scene":{types:_.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:q}}}}})],J.prototype,"renderer",null),Object(i.a)([Object(c.b)({types:{key:"type",base:null,typeMap:{"data-layer":N.a,"map-layer":B.a}},cast(e){if(e){if("mapLayerId"in e)return Object(o.d)(B.a,e);if("dataSource"in e)return Object(o.d)(N.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:q}}})],J.prototype,"source",null),Object(i.a)([Object(c.b)()],J.prototype,"sourceJSON",void 0),Object(i.a)([Object(c.b)({value:null,json:{type:[o.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:q}}})],J.prototype,"sublayers",null),Object(i.a)([Object(u.a)("sublayers")],J.prototype,"castSublayers",null),Object(i.a)([Object(f.a)("sublayers")],J.prototype,"writeSublayers",null),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:z}}})],J.prototype,"title",void 0),Object(i.a)([Object(c.b)({type:String})],J.prototype,"typeIdField",void 0),Object(i.a)([Object(d.a)("typeIdField",["layerDefinition.typeIdField"])],J.prototype,"readTypeIdField",null),Object(i.a)([Object(c.b)({type:[L.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],J.prototype,"types",void 0),Object(i.a)([Object(c.b)({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:k}}})],J.prototype,"url",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:q}}})],J.prototype,"visible",null),Object(i.a)([Object(f.a)("visible")],J.prototype,"writeVisible",null),J=n=Object(i.a)([Object(p.a)("esri.layers.support.Sublayer")],J),t.a=J},ACSY:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I")),s=(r("zqDF"),r("WbKI")),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y")),l=r("qatw");const c=i.a.getLogger("esri.tasks.support.ProjectParameters");let u=class extends o.a{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}get outSR(){return c.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference}set outSR(e){c.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference=e}toJSON(){const e=this.geometries.map(function(e){return e.toJSON()}),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Object(l.c)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};Object(n.a)([Object(s.b)()],u.prototype,"geometries",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"outSR"}}})],u.prototype,"outSpatialReference",void 0),Object(n.a)([Object(s.b)({json:{read:!1}})],u.prototype,"outSR",null),Object(n.a)([Object(s.b)()],u.prototype,"transformation",void 0),Object(n.a)([Object(s.b)()],u.prototype,"transformForward",void 0),u=Object(n.a)([Object(a.a)("esri.tasks.support.ProjectParameters")],u),t.a=u},AfLA:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s});var n=r("3r0u"),i=r("OKTS");const s=(()=>{if(!("document"in n.a))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const n=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r.colorStops)n.addColorStop(Math.max(e,.001),`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`);return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function a(e,t,r,n){const{blurRadius:i,fieldOffset:s,field:a}=t,o=new Float64Array(r*n),l=function(e){const t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1);for(let i=0;i<=n.length;i++)n[i]=Math.exp(-Math.pow(i-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}(i),c=Math.round(3*i);let u,d=Number.NEGATIVE_INFINITY;const p=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):r=>+r.readAttribute(e)+t:e=>1}(a,s),f=new Set;for(const h of e){const e=h.getCursor();for(;e.next();){const t=e.getObjectId();if(f.has(t))continue;f.add(t);const i=e.readLegacyPointGeometry(),s=+p(e),a=i.x-c,h=i.y-c,y=Math.max(0,a),b=Math.max(0,h),m=Math.min(n,i.y+c),O=Math.min(r,i.x+c);for(let e=b;e<m;e++){const t=l[e-h];for(let n=y;n<O;n++)u=o[e*r+n]+=t*l[n-a]*s,u>d&&(d=u)}}}return{matrix:o.buffer,max:d}}function o(e,t,r,n,s,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&n&&o.data.set(new Uint8ClampedArray(function(e,t,r,n,s){const a=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),l="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),c=l.length/(s-n);for(let u=0;u<o.length;u++){const e=Math.floor((o[u]-n)*c);a[u]=l[Object(i.c)(e,0,l.length-1)]}return a.buffer}(t,r,n,s,a))),e.putImageData(o,0,0)}},BGvB:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return b}),r.d(t,"c",function(){return g}),r.d(t,"d",function(){return y}),r.d(t,"e",function(){return m});var n=r("f/qv"),i=r("EyXx"),s=r("4EHJ"),a=r("WZb1"),o=r("KLE9"),l=r("SFah"),c=r("975N"),u=r("Lqtk"),d=r("+Xal"),p=r("8prj"),f=r("QmHG");const h={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function y(e){const t=e.folders||[],r=t.slice(),i=new Map,s=new Map,a=new Map,o=new Map,l=new Map,c={esriGeometryPoint:s,esriGeometryPolyline:a,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach(e=>{const t=Object(n.a)(e);t.featureSet.features=[];const r=e.featureSet.geometryType;i.set(r,t);const l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?O(s,l,e.featureSet.features):"esriGeometryPolyline"===r?O(a,l,e.featureSet.features):"esriGeometryPolygon"===r&&O(o,l,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{l.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(n=>{const i=function(e,t,r){const n=function(e,t){let r;return t.some(t=>t.id===e&&(r=t,!0)),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)})}),r.forEach(e=>{e.featureInfos&&(e.points=Object(n.a)(i.get("esriGeometryPoint")),e.polylines=Object(n.a)(i.get("esriGeometryPolyline")),e.polygons=Object(n.a)(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map(t=>{switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const r=c[t.type].get(t.id);r&&e[h[t.type]].featureSet.features.push(r);break}case"GroundOverlay":{const r=l.get(t.id);r&&e.mapImages.push(r);break}}}),e.fullExtent=j([e]))});const u=j(r);return{folders:t,sublayers:r,extent:u}}function b(e,t,r,n){const a=c.b&&c.b.findCredential(e);e=Object(s.e)(e,{token:a&&a.token});const o=i.a.kmlServiceUrl;return Object(u.default)(o,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function m(e,t,r=null,n=[]){const i=[],s={},a=t.sublayers,o=t.folders.map(e=>e.id);return a.forEach(t=>{const a=new e;if(r?a.read(t,r):a.read(t),n.length&&o.indexOf(a.id)>-1&&(a.visible=-1!==n.indexOf(a.id)),s[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){const e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(a)}else i.unshift(a)}),i}function O(e,t,r){r.forEach(r=>{e.set(r.attributes[t],r)})}async function g(e){const t=p.default.fromJSON(e.featureSet).features,r=e.layerDefinition,n=Object(d.a)(r.drawingInfo.renderer),i=l.a.fromJSON(e.popupInfo),s=[];for(const a of t){const e=await n.getSymbolAsync(a);a.symbol=e,a.popupTemplate=i,a.visible=!0,s.push(a)}return s}function j(e){const t=Object(f.b)(),r=Object(f.b)(f.a);for(const n of e){if(n.polygons&&n.polygons.featureSet&&n.polygons.featureSet.features)for(const e of n.polygons.featureSet.features)Object(o.b)(t,e.geometry),Object(f.e)(r,t);if(n.polylines&&n.polylines.featureSet&&n.polylines.featureSet.features)for(const e of n.polylines.featureSet.features)Object(o.b)(t,e.geometry),Object(f.e)(r,t);if(n.points&&n.points.featureSet&&n.points.featureSet.features)for(const e of n.points.featureSet.features)Object(o.b)(t,e.geometry),Object(f.e)(r,t);if(n.mapImages)for(const e of n.mapImages)Object(o.b)(t,e.extent),Object(f.e)(r,t)}return Object(f.d)(r,f.a)?null:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:a.a.WGS84}}},BPBZ:function(e,t,r){"use strict";r.d(t,"a",function(){return f}),r.d(t,"b",function(){return u});var n=r("Cy1f"),i=r("QhKk"),s=r("5DEt"),a=r("2uVf"),o=r("sTkM"),l=r("dXfX");function c(e,t,r){r*=.5;const n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function u(e,t){const r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>i.a?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function d(e,t,r){const n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],l=r[1],c=r[2],u=r[3];return e[0]=n*u+a*o+i*c-s*l,e[1]=i*u+a*l+s*o-n*c,e[2]=s*u+a*c+n*l-i*o,e[3]=a*u-n*o-i*l-s*c,e}function p(e,t,r,n){const s=t[0],a=t[1],o=t[2],l=t[3];let c,u,d,p,f,h=r[0],y=r[1],b=r[2],m=r[3];return u=s*h+a*y+o*b+l*m,u<0&&(u=-u,h=-h,y=-y,b=-b,m=-m),1-u>i.a?(c=Math.acos(u),d=Math.sin(c),p=Math.sin((1-n)*c)/d,f=Math.sin(n*c)/d):(p=1-n,f=n),e[0]=p*s+f*h,e[1]=p*a+f*y,e[2]=p*o+f*b,e[3]=p*l+f*m,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function h(e,t){const r=t[0]+t[4]+t[8];let n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);const i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*s+s]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+s]-t[3*s+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[s]=(t[3*s+r]+t[3*r+s])*n}return e}const y=l.c,b=l.k,m=l.a,O=d,g=l.b,j=l.d,v=l.i,w=l.e,x=w,S=l.f,I=S,T=l.j,_=l.g,E=l.h,M=Object(n.e)(),A=Object(n.g)(1,0,0),L=Object(n.g)(0,1,0),B=Object(o.a)(),N=Object(o.a)(),R=Object(a.a)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:c,getAxisAngle:u,multiply:d,rotateX:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*o,e[1]=i*l+s*o,e[2]=s*l-i*o,e[3]=a*l-n*o,e},rotateY:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l-s*o,e[1]=i*l+a*o,e[2]=s*l+n*o,e[3]=a*l-i*o,e},rotateZ:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*o,e[1]=i*l-n*o,e[2]=s*l+a*o,e[3]=a*l-s*o,e},calculateW:function(e,t){const r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},slerp:p,random:function(e){const t=Object(i.b)(),r=Object(i.b)(),n=Object(i.b)(),s=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e},invert:function(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return e[0]=-r*o,e[1]=-n*o,e[2]=-i*o,e[3]=s*o,e},conjugate:f,fromMat3:h,fromEuler:function(e,t,r,n){const i=.5*Math.PI/180;t*=i,r*=i,n*=i;const s=Math.sin(t),a=Math.cos(t),o=Math.sin(r),l=Math.cos(r),c=Math.sin(n),u=Math.cos(n);return e[0]=s*l*u-a*o*c,e[1]=a*o*u+s*l*c,e[2]=a*l*c-s*o*u,e[3]=a*l*u+s*o*c,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:y,set:b,add:m,mul:O,scale:g,dot:j,lerp:v,length:w,len:x,squaredLength:S,sqrLen:I,normalize:T,exactEquals:_,equals:E,rotationTo:function(e,t,r){const n=Object(s.e)(t,r);return n<-.999999?(Object(s.d)(M,A,t),Object(s.k)(M)<1e-6&&Object(s.d)(M,L,t),Object(s.o)(M,M),c(e,M,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(s.d)(M,t,r),e[0]=M[0],e[1]=M[1],e[2]=M[2],e[3]=1+n,T(e,e))},sqlerp:function(e,t,r,n,i,s){return p(B,t,i,s),p(N,r,n,s),p(e,B,N,2*s*(1-s)),e},setAxes:function(e,t,r,n){const i=R;return i[0]=r[0],i[3]=r[1],i[6]=r[2],i[1]=n[0],i[4]=n[1],i[7]=n[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],T(e,h(e,i))}})},DJok:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return u});var n=r("srIe"),i=r("zm0L"),s=r("QmHG"),a=r("kB+0"),o=r("hIOP");function l(e){return(4294901760&e)>>>16}function c(e){return 65535&e}const u={getObjectId:e=>e.getObjectId(),getAttributes:e=>e.readAttributes(),getAttribute:(e,t)=>e.readAttribute(t),cloneWithGeometry:(e,t)=>e,getGeometry:e=>e.readHydratedGeometry(),getCentroid:(e,t)=>e.readCentroid()};class d extends o.a{constructor(e,t){super(e,t),this.featureAdapter=u,this.events=new i.a,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._index=Object(a.a)(9,e=>({minX:this._storage.getXMin(e),minY:this._storage.getYMin(e),maxX:this._storage.getXMax(e),maxY:this._storage.getYMax(e)}))}get storeStatistics(){return{featureCount:0,vertexCount:0}}onTileData(e,t,r){if(Object(n.g)(t.addOrUpdate))return t;this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate),this._storage=r,t.addOrUpdate._storage=r;const i=t.addOrUpdate.getCursor();for(;i.next();){const t=i.getObjectId(),n=i.instance<<16|i.getIndex();let s=this._objectIdToDisplayId.get(t);s||(s=r.createDisplayId(),this._objectIdToDisplayId.set(t,s),this._spatialIndexInvalid=!0),i.setDisplayId(s),r.setInstanceId(s,n),this.setComputedAttributes(r,i,s,e.scale)}return"update"===t.type&&(this._spatialIndexInvalid=!0),this.events.emit("changed"),t}forEach(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=this._lookupFeature(r);e(n)})}forEachUnsafe(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=l(r),i=c(r),s=this._getFeatureSet(n);s.setIndex(i),e(s)})}forEachInBounds(e,t){const r=this._searchIndex(e);for(const i of r){const e=this.lookupFeatureByDisplayId(i,this._storage);t(Object(n.n)(e))}}forEachBounds(e,t,r){this._rebuildIndex();const n=[0,0,0,0];for(const i of e){if(!i.readGeometry())continue;const e=i.getDisplayId();n[0]=this._storage.getXMin(e),n[1]=this._storage.getYMin(e),n[2]=this._storage.getXMax(e),n[3]=this._storage.getYMax(e),t(Object(s.h)(r,n))}}sweepFeatures(e,t,r){this._objectIdToDisplayId.forEach((n,i)=>{e.has(n)||(t.releaseDisplayId(n),r.unsetAttributeData(n),this._objectIdToDisplayId.delete(i))}),this.events.emit("changed")}sweepFeatureSets(e){this._featureSetsByInstance.forEach((t,r)=>{e.has(r)||this._featureSetsByInstance.delete(r)})}lookupObjectId(e,t){const r=this.lookupFeatureByDisplayId(e,t);return Object(n.g)(r)?null:r.getObjectId()}lookupDisplayId(e){return this._objectIdToDisplayId.get(e)}lookupFeatureByDisplayId(e,t){const r=t.getInstanceId(e);return this._lookupFeature(r)}lookupByDisplayIdUnsafe(e){const t=this._storage.getInstanceId(e),r=l(t),n=c(t),i=this._getFeatureSet(r);return i?(i.setIndex(n),i):null}hasInstance(e){return this._featureSetsByInstance.has(e)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;this._index.clear();const e=[];this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t);this._storage.setBounds(t,this._lookupFeature(r))&&e.push(t)}),this._index.load(e),this._spatialIndexInvalid=!1}_lookupFeature(e){const t=l(e),r=c(e),n=this._getFeatureSet(t);if(!n)return null;const i=n.getCursor();return i.setIndex(r),i}_getFeatureSet(e){return this._featureSetsByInstance.get(e)}_searchIndex(e){return this._rebuildIndex(),this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}}},DKHk:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("+opI"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));const l=new s.a({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let c=class extends o.a{constructor(e){super(e),this.description=null,this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{write:!0}})],c.prototype,"description",void 0),Object(n.a)([Object(i.b)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=Object(n.a)([Object(a.a)("esri.tasks.support.GPMessage")],c),t.a=c},Dfpg:function(e,t,r){"use strict";function n(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}r.d(t,"a",function(){return n})},Fewv:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("4EHJ"),i=r("AiS/");function s(e){return{origin:"portal-item",url:Object(n.I)(e.itemUrl),portal:e.portal||i.a.getDefault(),portalItem:e,readResourcePaths:[]}}},Fkrg:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),s=(r("4EHJ"),r("ju1D"),r("9AIY"),r("6Az7"));const a=e=>{let t=class extends e{attach(){this.view.timeline.record(this.layer.title+" (BitmapTileLayer) Attach"),this._bitmapView=new s.a(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return t=Object(n.a)([Object(i.a)("esri.views.2d.layers.BitmapTileLayerView2D")],t),t}},IYxN:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return h}),r.d(t,"c",function(){return p}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return f}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"h",function(){return y});var n=r("srIe"),i=r("SuVq"),s=(r("4GrV"),r("tODX"));const a=new Map,o=new class{constructor(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}decreaseRefCount(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.refCount--,e.refCount<=0&&(n.delete(r),e.controller&&e.controller.abort()),e.refCount}return 0}getBlock(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.ts=Date.now(),e.refCount++,n.delete(r),n.set(r,e),e.block}return null}putBlock(e,t,r,n=null){const i=this._cachedBlocks,s=e+"/"+t;if(i.has(s)){const e=i.get(s);e.ts=Date.now(),e.refCount++}else i.set(s,{block:r,ts:Date.now(),refCount:1,controller:n});this.trim(),this.updateTimer()}deleteBlock(e,t){const r=this._cachedBlocks,n=e+"/"+t;r.has(n)&&r.delete(n)}updateMaxSize(e){this._size=e,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval(()=>{const t=Array.from(e),r=Date.now();for(let n=0;n<t.length&&t[n][1].ts<=r-this._duration;n++)e.delete(t[n][0]);0===e.size&&this.clearTimer()},this._interval)}trim(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let r=0;r<t.length-this._size;r++)e.delete(t[r][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function l(e,t){return null==t?e:`${e}?sliceId=${t}`}function c(e,t){const r={extent:null,rasterInfo:t,cache:new Map};if(a.has(e)){const t=a.get(e);return t.push(r),t.length-1}return a.set(e,[r]),0}function u(e,t){a.has(e)&&(a.get(e)[t]=null)}function d(e,t,r){if(!a.has(e))return null==t?o.decreaseRefCount(e,r):0;const n=a.get(e);if(null==n[t])return o.decreaseRefCount(e,r);const i=n[t].cache;if(i.has(r)){const e=i.get(r);if(e.refCount--,0===e.refCount){i.delete(r);for(let e=0;e<n.length;e++)n[e]&&n[e].cache.has(r)&&n[e].cache.delete(r);e.controller&&e.controller.abort()}return e.refCount}return 0}function p(e,t,r){if(!a.has(e))return null==t?o.getBlock(e,r):null;const n=a.get(e);if(null==n[t]){for(let e=0;e<n.length;e++)if(n[e]&&n[e].cache.has(r)){const t=n[e].cache.get(r);return t.refCount++,t.block}return o.getBlock(e,r)}const i=n[t].cache;if(i.has(r)){const e=i.get(r);return e.refCount++,e.block}for(let s=0;s<n.length;s++)if(s!==t&&n[s]&&n[s]&&n[s].cache.has(r)){const e=n[s].cache.get(r);return e.refCount++,i.set(r,e),e.block}return null}function f(e,t,r,n,i=null){if(!a.has(e))return void(null==t&&o.putBlock(e,r,n,i));const s=a.get(e);if(null==s[t])return void o.putBlock(e,r,n,i);const l={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:i};n.then(()=>l.isResolved=!0).catch(()=>l.isRejected=!0),s[t].cache.set(r,l)}function h(e,t,r){if(!a.has(e))return void(null==t&&o.deleteBlock(e,r));const n=a.get(e);null!=n[t]?n[t].cache.delete(r):o.deleteBlock(e,r)}function y(e,t,r,o,l,c,u=null){const d=function(e,t){if(!a.has(e))return null;const r=a.get(e);return null==r[t]?null:r[t]}(e,t),p=d.extent,{cache:f,rasterInfo:h}=d;if(p&&p.xmin===r.xmin&&p.xmax===r.xmax&&p.ymin===r.ymin&&p.ymax===r.ymax)return;const y=r.clone().normalize(),{spatialReference:b,transform:m}=h,O=new Set;for(let a=0;a<y.length;a++){const e=y[a];if(e.xmax-e.xmin<=o||e.ymax-e.ymin<=o)continue;let t=Object(s.d)(e,b,u);Object(n.h)(m)&&(t=m.inverseTransform(t));const r=new i.a({x:o,y:o,spatialReference:e.spatialReference});if(null===l&&!(l=Object(s.f)(r,b,e,u)))return;const{pyramidLevel:d,pyramidResolution:p,excessiveReading:f}=Object(s.g)(l,h,c||"closest");if(f)return;const{storageInfo:g}=h,{origin:j}=g,v={x:Math.max(0,Math.floor((t.xmin-j.x)/p.x)),y:Math.max(0,Math.floor((j.y-t.ymax)/p.y))},w=Math.ceil((t.xmax-t.xmin)/p.x-.1),x=Math.ceil((t.ymax-t.ymin)/p.y-.1),S=d>0?g.pyramidBlockWidth:g.blockWidth,I=d>0?g.pyramidBlockHeight:g.blockHeight,T=1,_=Math.max(0,Math.floor(v.x/S)-T),E=Math.max(0,Math.floor(v.y/I)-T),M=Math.floor((v.x+w-1)/S)+T,A=Math.floor((v.y+x-1)/I)+T;for(let n=E;n<=A;n++)for(let e=_;e<=M;e++)O.add(`${d}/${n}/${e}`)}f.forEach((e,t)=>{if(!O.has(t)){const e=f.get(t);(null==e||e.isResolved||e.isRejected)&&f.delete(t)}}),d.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}},IcpP:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return y}),r.d(t,"d",function(){return d}),r.d(t,"e",function(){return h});var n=r("f4Nx"),i=r("wdpY");class s{constructor(){this.code=null,this.description=null}}class a{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function o(e){return new a(e)}class l{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new l(e)}const u=new Set;function d(e,t,r,n,s=!1,a){u.clear();for(const l in n){const t=e.get(l);if(!t)continue;const c=n[l],d=p(t,c);if(d!==c&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:t,originalValue:c,sanitizedValue:d}}),u.add(t.name),t&&(s||t.editable)){const e=Object(i.u)(t,d);if(e)return o(Object(i.v)(e,t,d));r[t.name]=d}}for(const i of t)if(!u.has(i.name))return o(`missing required field "${i.name}"`);return null}function p(e,t){let r=t;return"string"==typeof t&&Object(i.q)(e)?r=parseFloat(t):null!=t&&Object(i.r)(e)&&"string"!=typeof t&&(r=String(t)),Object(i.s)(r)}let f;function h(e,t){if(!e||!Object(n.i)(t))return e;if("rings"in e||"paths"in e){if(!f)throw new TypeError("geometry engine not loaded");return f.simplify(t,e)}return e}async function y(e,t){!Object(n.i)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return f||(f=await Promise.all([r.e(12),r.e(0),r.e(28)]).then(r.bind(null,"AKzY")),f)}()}},Ilhi:function(e,t,r){"use strict";function n(e,t,r){return t.flatten(({sublayers:e})=>e).length!==e.length||!!e.some(e=>e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r)||!s(e,t)}function i(e,t,r){return!!e.some(e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2})||!s(e,t)}function s(e,t){if(!e||!e.length)return!0;const r=t.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).map(e=>e.id).toArray();if(e.length>r.length)return!1;let n=0;const i=r.length;for(const{id:s}of e){for(;n<i&&r[n]!==s;)n++;if(n>=i)return!1}return!0}function a(e){return!!e&&e.some(e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale)}r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return n})},JYLa:function(e,t,r){"use strict";var n=r("9MzC"),i=r("llFo"),s=r("rlSK");t.a=class{constructor(e){if(e instanceof i.a)this._tilemapCache=e;else{if(!e||!("index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}dataKey(e,t){if(this._tilemapCache){const{level:r,row:i,col:a}=e,o=new s.a(e);return this._tilemapCache.fetchAvailabilityUpsample(r,i,a,o,t).then(()=>(o.world=e.world,o)).catch(e=>{if(Object(n.n)(e))throw e;return null})}return this._getIndexedDataKey(e)}forEach(e,t,r,n,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,n)}_forEach(e,t,r,n){0!==e&&(this._callback(t,r,n),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*n),this._forEach(e[1],t+1,2*r,2*n+1),this._forEach(e[2],t+1,2*r+1,2*n),this._forEach(e[3],t+1,2*r+1,2*n+1)))}_getIndexedDataKey(e){const t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Object(n.u)(null);let r=e;for(;0!==r.level;)r=new s.a(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);let i,a,o=this._tilemap,l=t.pop();if(1===o)return Object(n.u)(l);for(;t.length;)if(i=t.pop(),a=(1&i.col)+((1&i.row)<<1),o){if(0===o[a]){l=null;break}if(1===o[a]){l=i;break}l=i,o=o[a]}return Object(n.u)(l)}}},Jpjp:function(e,t,r){"use strict";function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",function(){return n})},LTnl:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("yE7X"),i=r("Oxob"),s=r("mgI5");class a extends s.a{prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[i.a.bitmap],target:()=>this.children,drawPhase:n.c.MAP});return[...super.prepareRenderPasses(e),t]}}},LbAs:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("Lqtk");async function i(e,t){const{data:r}=await Object(n.default)(e,{responseType:"image",...t});return r}},MD9Z:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("r88o"),a=r("04ZG"),o=r("4EHJ"),l=(r("ju1D"),r("9AIY"),r("9MzC")),c=r("WZb1"),u=r("OvF4"),d=r("Lqtk"),p=r("IvSi");const f=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,t){const r=t.capabilities&&t.capabilities.split(",").map(e=>e.toLowerCase().trim());if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,i=-1!==r.indexOf("query"),s=-1!==r.indexOf("map"),a=!!t.exportTilesAllowed,o=-1!==r.indexOf("tilemap"),l="tile"!==n&&!!t.supportsDynamicLayers;return{operations:{supportsQuery:i,supportsExportMap:s,supportsExportTiles:a,supportsTileMap:o},exportMap:s?{supportsSublayersChanges:"tile"!==n,supportsDynamicLayers:l,supportsSublayerVisibility:"tile"!==n&&(!t.tileInfo||l),supportsSublayerDefinitionExpression:"tile"!==n&&(!t.tileInfo||l)}:null,exportTiles:a?{maxExportTilesCount:+t.maxExportTilesCount}:null}}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}async fetchSublayerInfo(e,t){return await this.fetchAllLayersAndTables(t),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(d.default)(Object(o.I)(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters}}).then(e=>{this._allLayersAndTablesMap=new Map;for(const t of e.data.layers)this._allLayersAndTablesMap.set(t.id,t);return{result:e.data}},e=>({error:e})));const t=await this._allLayersAndTablesPromise;if(Object(l.w)(e),"result"in t)return t.result;throw t.error}};return Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(n.a)([Object(s.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(n.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(i.b)({type:u.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(i.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),Object(n.a)([Object(i.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(n.a)([Object(i.b)(p.g)],t.prototype,"popupEnabled",void 0),Object(n.a)([Object(i.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(i.b)()],t.prototype,"version",void 0),Object(n.a)([Object(s.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(n.a)([Object(a.a)("esri.layers.mixins.ArcGISMapService")],t),t}},NOfn:function(e,t,r){"use strict";r.r(t),r.d(t,"registerFunctions",function(){return m});var n=r("N2DF"),i=r("SuVq"),s=r("OvF4"),a=r("V9wi"),o=r("Ehki"),l=r("UhwK"),c=r("qatw"),u=r("975N"),d=r("idrm"),p=r("3xY4"),f=r("hUmP"),h=r("u1HQ");function y(e){return 0===u.d.indexOf("4.")?o.a.fromExtent(e):new o.a({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function b(e){if(Object(d.J)(e,2,2),e[0]instanceof n.a&&e[1]instanceof n.a);else if(e[0]instanceof n.a&&null===e[1]);else if(e[1]instanceof n.a&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function m(e){"async"===e.mode&&(e.functions.disjoint=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]||null===r[1]||Object(h.h)(r[0],r[1])})},e.functions.intersects=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.q)(r[0],r[1])})},e.functions.touches=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.A)(r[0],r[1])})},e.functions.crosses=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.d)(r[0],r[1])})},e.functions.within=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.C)(r[0],r[1])})},e.functions.contains=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.c)(r[0],r[1])})},e.functions.overlaps=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(h.t)(r[0],r[1])})},e.functions.equals=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return Object(d.J)(r,2,2),r[0]===r[1]||(r[0]instanceof n.a&&r[1]instanceof n.a?Object(h.j)(r[0],r[1]):!(!Object(d.z)(r[0])||!Object(d.z)(r[1]))&&r[0].getTime()===r[1].getTime())})},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,3,3),r[0]instanceof n.a&&r[1]instanceof n.a)return Object(h.w)(r[0],r[1],Object(d.y)(r[2]));if(r[0]instanceof n.a&&null===r[1])return!1;if(r[1]instanceof n.a&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")})},e.functions.intersection=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]||null===r[1]?null:Object(h.p)(r[0],r[1])})},e.functions.union=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){const s=[];if(0===(i=Object(d.j)(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(Object(d.B)(i[0])){const e=Object(d.j)(i[0]);for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}else{if(!Object(d.I)(i[0])){if(i[0]instanceof n.a)return Object(d.L)(Object(f.a)(i[0]),t.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const e=Object(d.j)(i[0].toArray());for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof n.a))throw new Error("Illegal Argument");s.push(i[t])}return 0===s.length?null:Object(h.B)(s)})},e.functions.difference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null===r[1]?Object(f.a)(r[0]):null===r[0]?null:Object(h.g)(r[0],r[1])})},e.functions.symmetricdifference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]&&null===r[1]?null:null===r[0]?Object(f.a)(r[1]):null===r[1]?Object(f.a)(r[0]):Object(h.z)(r[0],r[1])})},e.functions.clip=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,2),!(r[1]instanceof s.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?null:Object(h.b)(r[0],r[1])})},e.functions.cut=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,2),!(r[1]instanceof l.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?[Object(f.a)(r[0])]:Object(h.e)(r[0],r[1])})},e.functions.area=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumArea(Object(f.c)(Object(d.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.l)(i[0],t.spatialReference);return null===e?0:Object(h.u)(e,Object(f.c)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.u)(i[0],Object(f.c)(Object(d.c)(i[1],-1)))})},e.functions.areageodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumArea(Object(f.c)(Object(d.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.l)(i[0],t.spatialReference);return null===e?0:Object(h.l)(e,Object(f.c)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.l)(i[0],Object(f.c)(Object(d.c)(i[1],-1)))})},e.functions.length=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumLength(Object(f.b)(Object(d.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.k)(i[0],t.spatialReference);return null===e?0:Object(h.v)(e,Object(f.b)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.v)(i[0],Object(f.b)(Object(d.c)(i[1],-1)))})},e.functions.lengthgeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumLength(Object(f.b)(Object(d.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.k)(i[0],t.spatialReference);return null===e?0:Object(h.o)(e,Object(f.b)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.o)(i[0],Object(f.b)(Object(d.c)(i[1],-1)))})},e.functions.distance=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){i=Object(d.j)(i),Object(d.J)(i,2,3);let s=i[0];(Object(d.B)(i[0])||Object(d.I)(i[0]))&&(s=Object(d.o)(i[0],t.spatialReference));let a=i[1];if((Object(d.B)(i[1])||Object(d.I)(i[1]))&&(a=Object(d.o)(i[1],t.spatialReference)),!(s instanceof n.a))throw new Error("Illegal Argument");if(!(a instanceof n.a))throw new Error("Illegal Argument");return Object(h.i)(s,a,Object(f.b)(Object(d.c)(i[2],-1)))})},e.functions.distancegeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(d.j)(r),Object(d.J)(r,2,3);const n=r[0],s=r[1];if(!(n instanceof i.a))throw new Error("Illegal Argument");if(!(s instanceof i.a))throw new Error("Illegal Argument");const a=new l.a({paths:[],spatialReference:n.spatialReference});return a.addPath([n,s]),Object(h.o)(a,Object(f.b)(Object(d.c)(r[2],-1)))})},e.functions.densify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(h.f)(r[0],i,Object(f.b)(Object(d.c)(r[2],-1))):r[0]instanceof s.a?Object(h.f)(y(r[0]),i,Object(f.b)(Object(d.c)(r[2],-1))):r[0]})},e.functions.densifygeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(h.n)(r[0],i,Object(f.b)(Object(d.c)(r[2],-1))):r[0]instanceof s.a?Object(h.n)(y(r[0]),i,Object(f.b)(Object(d.c)(r[2],-1))):r[0]})},e.functions.generalize=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,4),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return Object(h.k)(r[0],i,Object(d.x)(Object(d.c)(r[2],!0)),Object(f.b)(Object(d.c)(r[3],-1)))})},e.functions.buffer=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(f.a)(r[0]):Object(h.a)(r[0],i,Object(f.b)(Object(d.c)(r[2],-1)))})},e.functions.buffergeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(f.a)(r[0]):Object(h.m)(r[0],i,Object(f.b)(Object(d.c)(r[2],-1)))})},e.functions.offset=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,6),null===r[0])return null;if(!(r[0]instanceof o.a||r[0]instanceof l.a))throw new Error("Illegal Argument");const n=Object(d.w)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");const i=Object(d.w)(Object(d.c)(r[4],10));if(isNaN(i))throw new Error("Illegal Argument");const s=Object(d.w)(Object(d.c)(r[5],0));if(isNaN(s))throw new Error("Illegal Argument");return Object(h.s)(r[0],n,Object(f.b)(Object(d.c)(r[2],-1)),Object(d.y)(Object(d.c)(r[3],"round")).toLowerCase(),i,s)})},e.functions.rotate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(d.j)(r),Object(d.J)(r,2,3);let a=r[0];if(null===a)return null;if(!(a instanceof n.a))throw new Error("Illegal Argument");a instanceof s.a&&(a=o.a.fromExtent(a));const l=Object(d.w)(r[1]);if(isNaN(l))throw new Error("Illegal Argument");const c=Object(d.c)(r[2],null);if(null===c)return Object(h.x)(a,l);if(c instanceof i.a)return Object(h.x)(a,l,c);throw new Error("Illegal Argument")})},e.functions.centroid=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,c){if(c=Object(d.j)(c),Object(d.J)(c,1,1),null===c[0])return null;let u=c[0];if((Object(d.B)(c[0])||Object(d.I)(c[0]))&&(u=Object(d.o)(c[0],t.spatialReference)),null===u)return null;if(!(u instanceof n.a))throw new Error("Illegal Argument");return u instanceof i.a?Object(d.L)(Object(f.a)(c[0]),t.spatialReference):u instanceof o.a?u.centroid:u instanceof l.a?Object(p.f)(u):u instanceof a.a?Object(p.e)(u):u instanceof s.a?u.center:null})},e.functions.multiparttosinglepart=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,u){u=Object(d.j)(u),Object(d.J)(u,1,1);const p=[];if(null===u[0])return null;if(!(u[0]instanceof n.a))throw new Error("Illegal Argument");return u[0]instanceof i.a||u[0]instanceof s.a?[Object(d.L)(Object(f.a)(u[0]),t.spatialReference)]:Object(h.y)(u[0]).then(e=>{if(e instanceof o.a){const t=[],r=[];for(let n=0;n<e.rings.length;n++)if(e.isClockwise(e.rings[n])){const r=Object(c.a)({rings:[e.rings[n]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(r)}else r.push({ring:e.rings[n],pt:e.getPoint(n,0)});for(let e=0;e<r.length;e++)for(let n=0;n<t.length;n++)if(t[n].contains(r[e].pt)){t[n].addRing(r[e].ring);break}return t}if(e instanceof l.a){const t=[];for(let r=0;r<e.paths.length;r++){const n=Object(c.a)({paths:[e.paths[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(n)}return t}if(u[0]instanceof a.a){const e=Object(d.L)(Object(f.a)(u[0]),t.spatialReference);for(let t=0;t<e.points.length;t++)p.push(e.getPoint(t));return p}return null})})},e.functions.issimple=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,1,1),null===r[0])return!0;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.r)(r[0])})},e.functions.simplify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,1,1),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(h.y)(r[0])})})}},OYGz:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let c=n=class extends l.a{constructor(e){super(e)}clone(){return new n({customLayerParameters:Object(s.a)(this.customLayerParameters),customParameters:Object(s.a)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customLayerParameters",void 0),Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customParameters",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"layerIdentifier",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"tileMatrixSet",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"url",void 0),c=n=Object(i.a)([Object(o.a)("esri.layer.support.WMTSLayerInfo")],c),t.a=c},OvWd:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r("pO5D"),i=(r("wSAH"),r("nR38")),s=r("srIe"),a=(r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),o=r("zlDU"),l=r("4EHJ"),c=(r("ju1D"),r("9AIY"),r("Lqtk")),u=r("kglp");const d=e=>{let t=class extends e{async getServiceDescription(){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),this._serviceDescriptionPromise}async _fetchServiceDescription(){if(!this.url||!this.parsedUrl)throw new o.a("network-service:missing-url","Url to Network service is missing");const e=this.url,{data:t}=await Object(c.default)(e,{query:{f:"json"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let i=0;i<t.supportedTravelModes.length;i++)t.supportedTravelModes[i].id||(t.supportedTravelModes[i].id=t.supportedTravelModes[i].itemId);const r=t.currentVersion>=10.4?async function(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(e){throw new o.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}(e):async function(e){const{data:t}=await Object(c.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}});if(!t||!t.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=t.owningSystemUrl;const{data:r}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}}),n=Object(i.b)("helperServices.routingUtilities.url",r);if(!n)return{supportedTravelModes:[],defaultTravelMode:null};const s=Object(l.I)(e),a=/\/solveClosestFacility$/.test(s.path)?"Route":/\/solveClosestFacility$/.test(s.path)?"ClosestFacility":"ServiceAreas",o=await Object(c.default)(n+("/"===n[n.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:a}}),u=[];let d=null;if(o&&o.data&&o.data.results&&o.data.results.length){const e=o.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);u.push(t)}}else"defaultTravelMode"===t.paramName&&(d=t.value)}return{supportedTravelModes:u,defaultTravelMode:d}}(e),{defaultTravelMode:n,supportedTravelModes:s}=await r;return t.defaultTravelMode=n,t.supportedTravelModes=s,t}_isInputGeometryZAware(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)if(Object(s.h)(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}};return t=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],t),t};let p=class extends(d(u.a)){};p=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],p)},"R/jG":function(e,t,r){"use strict";function n(){return new Float32Array(3)}function i(e,t,r){const n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function s(){return n()}function a(){return i(1,1,1)}function o(){return i(1,0,0)}function l(){return i(0,1,0)}function c(){return i(0,0,1)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});const u=s(),d=a(),p=o(),f=l(),h=c();Object.freeze({__proto__:null,create:n,clone:function(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,3)},zeros:s,ones:a,unitX:o,unitY:l,unitZ:c,ZEROS:u,ONES:d,UNIT_X:p,UNIT_Y:f,UNIT_Z:h})},SaAm:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("gEht");function i(e,t){const r=t||e.extent,i=e.width,s=Object(n.c)(r&&r.spatialReference);return r&&i?r.width/i*s*n.g*96:0}},Tg0p:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),d=r("1hFN"),p=r("ag7Y"),f=r("nvBr");let h=n=class extends p.a{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],h.prototype,"minValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],h.prototype,"maxValue",void 0),Object(i.a)([Object(o.b)({type:f.a,json:{type:[a.a],write:!0}})],h.prototype,"color",void 0),h=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],h);var y,b=h;let m=y=class extends u.a{constructor(e){super(e),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new y({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:Object(s.a)(this.colorClassBreakInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],m.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"legendOptions",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[b],json:{write:!0}})],m.prototype,"colorClassBreakInfos",void 0),m=y=Object(i.a)([Object(c.a)("esri.renderers.PointCloudClassBreaksRenderer")],m),t.a=m},V4u7:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),d=r("1hFN"),p=r("ag7Y"),f=r("nvBr");let h=n=class extends p.a{constructor(){super(...arguments),this.label=null,this.value=0,this.color=null}clone(){return new n({label:this.label,value:this.value,color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:Number,nonNullable:!0,json:{write:!0}})],h.prototype,"value",void 0),Object(i.a)([Object(o.b)({type:f.a,json:{type:[a.a],write:!0}})],h.prototype,"color",void 0),h=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.StopInfo")],h);var y,b=h;let m=y=class extends u.a{constructor(e){super(e),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new y({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),stops:Object(s.a)(this.stops),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudStretchRenderer:"point-cloud-stretch"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],m.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"legendOptions",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[b],json:{write:!0}})],m.prototype,"stops",void 0),m=y=Object(i.a)([Object(c.a)("esri.renderers.PointCloudStretchRenderer")],m),t.a=m},VeZB:function(e,t,r){"use strict";r.d(t,"a",function(){return p}),r.d(t,"b",function(){return j}),r.d(t,"c",function(){return q}),r.d(t,"d",function(){return G}),r.d(t,"e",function(){return D}),r.d(t,"f",function(){return b}),r.d(t,"g",function(){return m}),r.d(t,"h",function(){return O}),r.d(t,"i",function(){return g}),r.d(t,"j",function(){return E}),r.d(t,"k",function(){return B}),r.d(t,"l",function(){return S}),r.d(t,"m",function(){return f}),r.d(t,"n",function(){return v}),r.d(t,"o",function(){return z}),r.d(t,"p",function(){return J}),r.d(t,"q",function(){return P}),r.d(t,"r",function(){return M}),r.d(t,"s",function(){return N}),r.d(t,"t",function(){return I}),r.d(t,"u",function(){return h}),r.d(t,"v",function(){return w}),r.d(t,"w",function(){return U}),r.d(t,"x",function(){return W}),r.d(t,"y",function(){return C}),r.d(t,"z",function(){return A}),r.d(t,"A",function(){return R}),r.d(t,"B",function(){return T}),r.d(t,"C",function(){return y}),r.d(t,"D",function(){return x}),r.d(t,"E",function(){return V}),r.d(t,"F",function(){return H}),r.d(t,"G",function(){return k}),r.d(t,"H",function(){return L}),r.d(t,"I",function(){return F}),r.d(t,"J",function(){return _});class n{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<9;n++)t[n]=this.typedBuffer[r+n];return t}setMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<9;n++)this.typedBuffer[r+n]=t[n]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;for(let o=0;o<9;++o)n[s+o]=i[a+o]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class i{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<16;n++)t[n]=this.typedBuffer[r+n];return t}setMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<16;n++)this.typedBuffer[r+n]=t[n]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;for(let o=0;o<16;++o)n[s+o]=i[a+o]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=16;class s{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=1;var a=r("M0lq");class o{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(a.m)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1]}get buffer(){return this.typedBuffer.buffer}}o.ElementCount=2;var l=r("5DEt");class c{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(l.r)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=n}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1],n[s+2]=i[a+2]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;var u=r("dXfX");class d{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(u.k)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n,i){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=n,this.typedBuffer[e*this.typedBufferStride+3]=i}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1],n[s+2]=i[a+2],n[s+3]=i[a+3]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=4;class p extends s{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class f extends o{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new f(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}f.ElementType="f32";class h extends c{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType="f32";class y extends d{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType="f32";class b extends n{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f32";class m extends n{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f64";class O extends i{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="f32";class g extends i{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="f64";class j extends s{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="f64";class v extends o{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="f64";class w extends c{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="f64";class x extends d{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="f64";class S extends s{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="u8";class I extends o{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="u8";class T extends c{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="u8";class _ extends d{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new _(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}_.ElementType="u8";class E extends s{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="u16";class M extends o{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="u16";class A extends c{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="u16";class L extends d{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="u16";class B extends s{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="u32";class N extends o{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new N(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}N.ElementType="u32";class R extends c{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new R(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}R.ElementType="u32";class F extends d{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class D extends s{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="i8";class P extends o{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new P(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}P.ElementType="i8";class C extends c{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="i8";class k extends d{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="i8";class q extends s{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class z extends o{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i16";class U extends c{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="i16";class V extends d{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i16";class G extends s{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i32";class J extends o{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new J(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}J.ElementType="i32";class W extends c{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new W(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}W.ElementType="i32";class H extends d{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new H(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}H.ElementType="i32"},XJLX:function(e,t,r){"use strict";r.r(t),r.d(t,"fromItem",function(){return u}),r.d(t,"selectLayerClassPath",function(){return d});var n=r("srIe"),i=r("zlDU"),s=r("9MzC"),a=r("Lqtk"),o=r("p+Gi"),l=r("Dfpg"),c=r("oLSx");function u(e){return!e.portalItem||e.portalItem instanceof o.default||(e={...e,portalItem:new o.default(e.portalItem)}),(t=e.portalItem,t.load().then(d).then(p)).then(t=>{const r={portalItem:e.portalItem,...t.properties},n=t.constructor;return Object(s.u)(new n(r))});var t}function d(e){switch(e.type){case"Map Service":return function(e){return function(e){return m(e.url).then(e=>e.tileInfo)}(e).then(e=>e?{className:"TileLayer"}:{className:"MapImageLayer"})}(e);case"Feature Service":return function(e){return f(e).then(e=>{if("object"==typeof e){const t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}})}(e);case"Feature Collection":return async function(e){return await e.load(),Object(l.a)(e,"Map Notes")?{className:"MapNotesLayer"}:Object(l.a)(e,"Route Layer")?{className:"RouteLayer"}:1===b(await e.fetchData())?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return function(e){return f(e).then(t=>{if("object"==typeof t){const r={};let n;if(null!=t.id?(r.layerId=t.id,n=`${e.url}/layers/${t.id}`):n=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){const t={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const r of Object.keys(t))if(-1!==e.typeKeywords.indexOf(r))return{className:t[r]}}return m(n).then(e=>{let t="SceneLayer";const n={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&n[e.layerType]&&(t=n[e.layerType]),{className:t,properties:r}})}return{className:"GroupLayer"}})}(e);case"Image Service":return async function(e){var t,r,n;await e.load();const i=null!=(t=null==(r=e.typeKeywords)?void 0:r.map(e=>e.toLowerCase()))?t:[];if(i.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(i.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const s=await e.fetchData(),a=null==s?void 0:s.layerType;return"ArcGISTiledImageServiceLayer"===a?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===a?{className:"ImageryLayer"}:"map"===(null==(n=(await m(e.url)).cacheType)?void 0:n.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Object(s.t)(new i.a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function p(e){return(0,c.a[e.className])().then(t=>({constructor:t,properties:e.properties}))}function f(e){return!e.url||e.url.match(/\/\d+$/)?Object(s.u)({}):e.load().then(()=>e.fetchData()).then(t=>b(t)>0?h(t):m(e.url).then(h))}function h(e){return 1===b(e)&&{id:Object(n.n)(y(e))}}function y(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function b(e){var t,r,n,i;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(i=e.tables)?void 0:i.length)?n:0)}function m(e){return Object(a.default)(e,{responseType:"json",query:{f:"json"}}).then(e=>e.data)}},XTTP:function(e,t,r){"use strict";r.d(t,"a",function(){return m}),r.d(t,"b",function(){return d}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return f});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("RI0u"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let l=class extends o.a{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};Object(n.a)([Object(i.b)({type:Number})],l.prototype,"nodesPerPage",void 0),Object(n.a)([Object(i.b)({type:Number})],l.prototype,"rootIndex",void 0),Object(n.a)([Object(i.b)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=Object(n.a)([Object(a.a)("esri.layer.support.I3SNodePageDefinition")],l);let c=class extends o.a{constructor(){super(...arguments),this.factor=1}};Object(n.a)([Object(i.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],c.prototype,"id",void 0),Object(n.a)([Object(i.b)({type:Number})],c.prototype,"factor",void 0),c=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialTexture")],c);let u=class extends o.a{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};Object(n.a)([Object(i.b)({type:[Number]})],u.prototype,"baseColorFactor",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"baseColorTexture",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"metallicRoughnessTexture",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"metallicFactor",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"roughnessFactor",void 0),u=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],u);let d=class extends o.a{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};Object(n.a)([Object(s.a)({opaque:"opaque",mask:"mask",blend:"blend"})],d.prototype,"alphaMode",void 0),Object(n.a)([Object(i.b)({type:Number})],d.prototype,"alphaCutoff",void 0),Object(n.a)([Object(i.b)({type:Boolean})],d.prototype,"doubleSided",void 0),Object(n.a)([Object(s.a)({none:"none",back:"back",front:"front"})],d.prototype,"cullFace",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"normalTexture",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"occlusionTexture",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"emissiveTexture",void 0),Object(n.a)([Object(i.b)({type:[Number]})],d.prototype,"emissiveFactor",void 0),Object(n.a)([Object(i.b)({type:u})],d.prototype,"pbrMetallicRoughness",void 0),d=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialDefinition")],d);let p=class extends o.a{};Object(n.a)([Object(i.b)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:""+t.index}}})],p.prototype,"name",void 0),Object(n.a)([Object(s.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2"})],p.prototype,"format",void 0),p=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureFormat")],p);let f=class extends o.a{constructor(){super(...arguments),this.atlas=!1}};Object(n.a)([Object(i.b)({type:[p]})],f.prototype,"formats",void 0),Object(n.a)([Object(i.b)({type:Boolean})],f.prototype,"atlas",void 0),f=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureSetDefinition")],f);let h=class extends o.a{};Object(n.a)([Object(s.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],h.prototype,"type",void 0),Object(n.a)([Object(i.b)({type:Number})],h.prototype,"component",void 0),h=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryAttribute")],h);let y=class extends o.a{};Object(n.a)([Object(s.a)({draco:"draco"})],y.prototype,"encoding",void 0),Object(n.a)([Object(i.b)({type:[String]})],y.prototype,"attributes",void 0),y=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryCompressedAttributes")],y);let b=class extends o.a{constructor(){super(...arguments),this.offset=0}};Object(n.a)([Object(i.b)({type:Number})],b.prototype,"offset",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"position",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"normal",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"uv0",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"color",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"uvRegion",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"featureId",void 0),Object(n.a)([Object(i.b)({type:h})],b.prototype,"faceRange",void 0),Object(n.a)([Object(i.b)({type:y})],b.prototype,"compressedAttributes",void 0),b=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryBuffer")],b);let m=class extends o.a{};Object(n.a)([Object(s.a)({triangle:"triangle"})],m.prototype,"topology",void 0),Object(n.a)([Object(i.b)()],m.prototype,"geometryBuffers",void 0),m=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryDefinition")],m)},ZRfE:function(e,t,r){"use strict";var n=r("srIe"),i=r("6S2I"),s=r("zlDU"),a=r("zm0L"),o=r("kYAx"),l=r("ZlUD"),c=r("QmHG"),u=r("wSAH"),d=r("kB+0");const p={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=Object(d.a)(9,Object(u.a)("csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((r,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(e=>this._idByBounds.has(e))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex();for(const r of function(e,t){return p.minX=t[0],p.minY=t[1],p.maxX=t[2],p.maxY=t[3],e.search(p)}(this._index,e))t(this._idByBounds.get(r))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}var h=r("k5I3"),y=r("gVKr"),b=r("2X7Z");const m={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new h.a(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(e.centroid||(e.centroid=Object(b.a)(new y.a,e.geometry,t.hasZ,t.hasM)),e.centroid)};t.a=class{constructor(e){this.geometryInfo=e,this._boundsStore=new f,this._featuresById=new Map,this._markedIds=new Set,this.events=new a.a,this.featureAdapter=m}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=Object(o.d)(o.a);return this._featuresById.forEach(t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))}),e}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t(Object(c.h)(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))}),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void i.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.a("featurestore:invalid-feature","feature id is missing",{feature:e}));const r=this._featuresById.get(t);let a;if(this._markedIds.add(t),r?(e.displayId=r.displayId,a=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(n.h)(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);a=Object(l.r)(a||Object(o.d)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,a),this._featuresById.set(t,e)}_remove(e){return Object(n.h)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}},cBWO:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return u});var n=r("s7YA"),i=r("IDUf");const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function a(e){e||(e=Object(i.b)());let t=e in s;if(!t){const r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}const[r,n,a="#,##0.###"]=s[e];return{decimal:r,group:n,pattern:a}}function o(e,t){const r=a((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){const n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),a=s[0];if(-1!==(t=s[e<0?1:0]||"-"+a).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const o=l,c=a.match(o);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(o,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),i="string"==typeof r.places&&r.places.indexOf(",");let s=r.places;i?s=r.places.substring(i+1):s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const a=String(Math.abs(e)).split("."),o=a[1]||"";if(n[1]||r.places){i&&(r.places=r.places.substring(0,i));const e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;e>o.length&&(a[1]=o.padEnd(Number(e),"0")),s<o.length&&(a[1]=o.substr(0,Number(s)))}else a[1]&&a.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===l.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));let u,d,p=n[0].lastIndexOf(",");if(-1!==p){u=n[0].length-p-1;const e=n[0].substr(0,p);p=e.lastIndexOf(","),-1!==p&&(d=e.length-p-1)}const f=[];for(let h=a[0];h;){const e=h.length-u;f.push(e>0?h.substr(e):h),h=e>0?h.slice(0,e):"",d&&(u=d,d=void 0)}return a[0]=f.reverse().join(r.group||","),a.join(r.decimal||".")}(e,c[0],{decimal:i,group:n,places:r.places,round:r.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,s=t.decimal;let o=1;if(-1!==r.indexOf("%"))o/=100;else if(-1!==r.indexOf("\u2030"))o/=1e3;else if(-1!==r.indexOf("\xa4"))throw new Error("currency notation not supported");const c=r.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:p(c,function(t){return(t="(?:"+Object(n.a)(t,".")+")").replace(l,function(t){const r={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split(".");let a=e.places;1===n.length&&1!==o&&(n[1]="###"),1===n.length||0===a?r.fractional=!1:(void 0===a&&(a=e.pattern?n[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(r.fractional=!0),!e.places&&a<n[1].length&&(a+=","+n[1].length),r.places=a);const l=n[0].split(",");return l.length>1&&(r.groupSize=l.pop().length,l.length>1&&(r.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=d(e),r=p(e.fractional,function(t){let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r},!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+p(e.exponent,function(t){return t?"([eE]"+d({signed:e.eSigned})+")":""})}(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:o}}function u(e,t){const r=c(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return i=i.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,function(e){return e?"[-+]":""},!0)+p(e.separator,function(t){if(!t)return"(?:\\d+)";" "===(t=Object(n.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const p=function(e,t,r){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return f(n.join("|"),r)},f=function(e,t){return"("+(t?"?:":"")+e+")"}},cM4j:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),o=r("IvSi"),l=r("kJYu"),c=r("Ilhi"),u=r("U19y");const d={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let p=class extends(Object(l.b)(a.a)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(c.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(d[e.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,t)=>(e[t.id]=t.definitionExpression,e),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){return(this._get("version")||0)+1}set version(e){this._set("version",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=t=>{const n=this.scale;t.visible&&(0===n||(0===t.minScale||n<=t.minScale)&&(0===t.maxScale||n>=t.maxScale))&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((t,r)=>e[r]!==t)?e:n}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],p.prototype,"dynamicLayers",null),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],p.prototype,"hasDynamicLayers",null),Object(n.a)([Object(i.b)()],p.prototype,"layer",null),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["visibleSublayers"]})],p.prototype,"layers",null),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["visibleSublayers"]})],p.prototype,"layerDefs",null),Object(n.a)([Object(i.b)({type:Number,dependsOn:["view.scale"]})],p.prototype,"scale",null),Object(n.a)([Object(i.b)(o.a)],p.prototype,"timeExtent",void 0),Object(n.a)([Object(i.b)({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],p.prototype,"version",null),Object(n.a)([Object(i.b)({type:u.a})],p.prototype,"view",void 0),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],p.prototype,"visibleSublayers",null),p=Object(n.a)([Object(s.a)("esri.layers.mixins.ExportImageParameters")],p)},dXfX:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return b}),r.d(t,"e",function(){return f}),r.d(t,"f",function(){return h}),r.d(t,"g",function(){return g}),r.d(t,"h",function(){return j}),r.d(t,"i",function(){return m}),r.d(t,"j",function(){return y}),r.d(t,"k",function(){return s}),r.d(t,"l",function(){return O});var n=r("QhKk");function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function a(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function o(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function u(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function d(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function p(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function f(e){const t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function h(e){const t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function y(e,t){const r=t[0],n=t[1],i=t[2],s=t[3];let a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=s*a),e}function b(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function m(e,t,r,n){const i=t[0],s=t[1],a=t[2],o=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=a+n*(r[2]-a),e[3]=o+n*(r[3]-o),e}function O(e,t,r){const n=t[0],i=t[1],s=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,e}function g(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){const r=e[0],i=e[1],s=e[2],a=e[3],o=t[0],l=t[1],c=t[2],u=t[3];return Math.abs(r-o)<=n.a*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=n.a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=n.a*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-u)<=n.a*Math.max(1,Math.abs(a),Math.abs(u))}Object.freeze({__proto__:null,copy:i,set:s,add:a,subtract:o,multiply:l,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:u,scaleAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},distance:d,squaredDistance:p,length:f,squaredLength:h,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:y,dot:b,lerp:m,random:function(e,t){let r,i,s,a,o,l;t=t||1;do{r=2*Object(n.b)()-1,i=2*Object(n.b)()-1,o=r*r+i*i}while(o>=1);do{s=2*Object(n.b)()-1,a=2*Object(n.b)()-1,l=s*s+a*a}while(l>=1);const c=Math.sqrt((1-o)/l);return e[0]=t*r,e[1]=t*i,e[2]=t*s*c,e[3]=t*a*c,e},transformMat4:O,transformQuat:function(e,t,r){const n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],l=r[2],c=r[3],u=c*n+o*s-l*i,d=c*i+l*n-a*s,p=c*s+a*i-o*n,f=-a*n-o*i-l*s;return e[0]=u*c+f*-a+d*-l-p*-o,e[1]=d*c+f*-o+p*-a-u*-l,e[2]=p*c+f*-l+u*-o-d*-a,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:g,equals:j,sub:o,mul:l,div:c,dist:d,sqrDist:p,len:f,sqrLen:h})},dZC4:function(e,t,r){"use strict";r.r(t),r.d(t,"hydratedAdapter",function(){return l});var n=r("SuVq"),i=r("OvF4"),s=r("V9wi"),a=r("Ehki"),o=r("UhwK");const l={convertToGEGeometry:function(e,t){if(null==t)return null;let r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){const i=e.hasZ(t),s=e.hasM(t),a=new n.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return i&&(a.z=e.getPointZ(t)),s&&(a.m=e.getPointM(t)),a.cache._geVersion=t,a},exportPolygon:function(e,t,r){const n=new a.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportPolyline:function(e,t,r){const n=new o.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,r){const n=new s.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return n.cache._geVersion=t,n},exportExtent:function(e,t,r){const n=e.hasZ(t),s=e.hasM(t),a=new i.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(n){const r=e.getZExtent(t);a.zmin=r.vmin,a.zmax=r.vmax}if(s){const r=e.getMExtent(t);a.mmin=r.vmin,a.mmax=r.vmax}return a.cache._geVersion=t,a}}},dzHX:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("+opI"),l=r("04ZG"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let u=n=class extends c.a{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"minValue",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"maxValue",void 0),u=n=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.ColorModulation")],u);var d=u;const p=new o.a({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let f=class extends c.a{};Object(i.a)([Object(a.b)({type:p.apiValues,readOnly:!0,nonNullable:!0,json:{type:p.jsonValues,read:!1,write:p.write}})],f.prototype,"type",void 0),f=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],f);var h,y=f,b=r("RI0u");let m=h=class extends y{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new h({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};Object(i.a)([Object(b.a)({pointCloudFixedSizeAlgorithm:"fixed-size"})],m.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"size",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],m.prototype,"useRealWorldSymbolSizes",void 0),m=h=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],m);var O,g=m;let j=O=class extends y{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new O({scaleFactor:this.scaleFactor})}};Object(i.a)([Object(b.a)({pointCloudSplatAlgorithm:"splat"})],j.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],j.prototype,"scaleFactor",void 0),j=O=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],j);const v={key:"type",base:y,typeMap:{"fixed-size":g,splat:j}},w=Object(o.b)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let x=class extends c.a{constructor(e){super(e),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:Object(s.a)(this.pointSizeAlgorithm),colorModulation:Object(s.a)(this.colorModulation),pointsPerInch:Object(s.a)(this.pointsPerInch)}}};Object(i.a)([Object(a.b)({type:w.apiValues,readOnly:!0,nonNullable:!0,json:{type:w.jsonValues,read:!1,write:w.write}})],x.prototype,"type",void 0),Object(i.a)([Object(a.b)({types:v,json:{write:!0}})],x.prototype,"pointSizeAlgorithm",void 0),Object(i.a)([Object(a.b)({type:d,json:{write:!0}})],x.prototype,"colorModulation",void 0),Object(i.a)([Object(a.b)({json:{write:!0},nonNullable:!0,type:Number})],x.prototype,"pointsPerInch",void 0),x=Object(i.a)([Object(l.a)("esri.renderers.PointCloudRenderer")],x),(x||(x={})).fieldTransformTypeKebabDict=new o.a({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),t.a=x},eKLr:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=(r("6S2I"),r("zqDF"),r("WbKI")),a=r("r88o"),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("WZb1")),c=r("SuVq"),u=r("OvF4"),d=r("UhwK"),p=(r("4GrV"),r("jWBI")),f=r("8prj");let h=class extends f.default{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){(e||[]).forEach(e=>{this._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)});const r=l.a.fromJSON(t.spatialReference);return e.map(e=>{const t=p.a.fromJSON(e);return t.geometry&&!(e.geometry&&e.geometry.spatialReference)&&(Object(i.n)(t.geometry).spatialReference=r),t.strings=e.strings,t.events=(e.events||[]).map(t=>{const r=new p.a({geometry:new c.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r}),t})}get mergedGeometry(){if(!this.features)return null;const e=this.features.map(({geometry:e})=>Object(i.n)(e)),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}get strings(){return this.features.map(({strings:e})=>e)}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,n=0,i=0,s=0;const a=[];let o,l,c,u,d,p,f,h,y=0,b=0,m=0;if(d=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),d||(d=[]),0===parseInt(d[y],32)){y=2;const e=parseInt(d[y],32);y++,p=parseInt(d[y],32),y++,1&e&&(b=d.indexOf("|")+1,f=parseInt(d[b],32),b++),2&e&&(m=d.indexOf("|",b)+1,h=parseInt(d[m],32),m++)}else p=parseInt(d[y],32),y++;for(;y<d.length&&"|"!==d[y];){o=parseInt(d[y],32)+r,y++,r=o,l=parseInt(d[y],32)+n,y++,n=l;const e=[o/p,l/p];b&&(u=parseInt(d[b],32)+i,b++,i=u,e.push(u/f)),m&&(c=parseInt(d[m],32)+s,m++,s=c,e.push(c/h)),a.push(e)}return{paths:[a],hasZ:b>0,hasM:m>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach(e=>{e.paths.forEach(e=>{r=r.concat(e)})});const n=[];let i=[0,0];return r.forEach(e=>{e[0]===i[0]&&e[1]===i[1]||(n.push(e),i=e)}),new d.a({paths:[n]},t)}};Object(n.a)([Object(s.b)({type:u.a,json:{read:{source:"summary.envelope"}}})],h.prototype,"extent",void 0),Object(n.a)([Object(s.b)()],h.prototype,"features",void 0),Object(n.a)([Object(a.a)("features")],h.prototype,"readFeatures",null),Object(n.a)([Object(s.b)()],h.prototype,"geometryType",void 0),Object(n.a)([Object(s.b)({readOnly:!0,dependsOn:["features","extent.spatialReference"]})],h.prototype,"mergedGeometry",null),Object(n.a)([Object(s.b)()],h.prototype,"routeId",void 0),Object(n.a)([Object(s.b)()],h.prototype,"routeName",void 0),Object(n.a)([Object(s.b)({value:null,readOnly:!0,dependsOn:["features"]})],h.prototype,"strings",null),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalDriveTime"}}})],h.prototype,"totalDriveTime",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalLength"}}})],h.prototype,"totalLength",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalTime"}}})],h.prototype,"totalTime",void 0),h=Object(n.a)([Object(o.a)("esri.tasks.support.DirectionsFeatureSet")],h),t.a=h},fqtG:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},grla:function(e,t,r){"use strict";function n(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function a(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r("wSAH")},hIOP:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("wSAH"),i=r("srIe"),s=r("9MzC"),a=r("gvqN"),o=r("DxxZ"),l=r("6S2I");const c=r.e(143).then(r.bind(null,"zKxS"));class u{constructor(e,t){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:t.getBitset(t.createBitset())}}async updateSchema(e,t){const r=Object(o.a)(this._schema,t);if(this._schema=t,!t||Object(i.g)(r)||!Object(o.b)(r,"attributes"))return;Object(n.a)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",r),this._bitsets.computed.clear(),e.targets[t.name]=!0;const a=t.attributes,l=[],c=[];for(const n in a){const e=a[n];switch(e.type){case"field":break;case"expression":l.push(this._createArcadeComputedField(e));break;case"label-expression":l.push(this._createLabelArcadeComputedField(e));break;case"statistic":c.push(e)}}this._computedFields=await Object(s.b)(l),this._canCacheExpressionValue=!this._computedFields.some(e=>"expression"===e.type&&e.expression.referencesScale()),this._statisticFields=c}setComputedAttributes(e,t,r,n){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(r)){i.set(r);for(const i of this._computedFields){const s=this._evaluateField(t,i,n);switch(i.resultType){case"numeric":e.setComputedNumericAtIndex(r,i.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(r,i.fieldIndex,s)}}}}async _createArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fieldsIndex;return{...e,expression:await Object(a.d)(e.valueExpression,t,r)}}async _createLabelArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fields,{createLabelFunction:n}=await c,i=await n(e.label,r,t);return{...e,builder:i}}_evaluateField(e,t,r){switch(t.type){case"label-expression":{const r=e.readArcadeFeature();return t.builder.evaluate(r)||""}case"expression":{const{expression:n}=t;return function(e,t,r){e.referencesGeometry();const n=t.readArcadeFeature();try{return e.evaluate({...r,$feature:n})}catch(e){return l.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}(n,e,{$view:{scale:r}})}}}}},iUxC:function(e,t,r){"use strict";t.a=class{constructor(e,t,r){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=r}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const r=this.filter({pixelBlock:t}),n=r.pixelBlock.getAsRGBA(),i=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);i.data.set(n),e.putImageData(i,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},kGdt:function(e,t,r){"use strict";var n=r("1F90");t.a=class{constructor(e){this._programCacheByTemplate=new Map,this._rctx=e}dispose(){this._programCacheByTemplate.forEach(e=>{e.programs.forEach(e=>{e.dispose()})}),this._programCacheByTemplate=null}getProgram(e,t){return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,t=>Object(n.a)(this._rctx,e,t)),this.getProgramTemplateInstance(e,t)}addProgramTemplate(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}getProgramTemplateInstance(e,t){const r=this._programCacheByTemplate.get(e);if(r){const e=t?JSON.stringify(t):"default";if(!r.programs.has(e)){const n=r.constructor(t);r.programs.set(e,n)}return r.programs.get(e)}return null}}},l5Tg:function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"b",function(){return L}),r.d(t,"c",function(){return B}),r.d(t,"d",function(){return N}),r.d(t,"e",function(){return R}),r.d(t,"f",function(){return F}),r.d(t,"g",function(){return D}),r.d(t,"h",function(){return P}),r.d(t,"i",function(){return C}),r.d(t,"j",function(){return k}),r.d(t,"k",function(){return q}),r.d(t,"l",function(){return o}),r.d(t,"m",function(){return l}),r.d(t,"n",function(){return a}),r.d(t,"o",function(){return c}),r.d(t,"p",function(){return s}),r.d(t,"q",function(){return u}),r.d(t,"r",function(){return z}),r.d(t,"s",function(){return d}),r.d(t,"t",function(){return p}),r.d(t,"u",function(){return y}),r.d(t,"v",function(){return O}),r.d(t,"w",function(){return j}),r.d(t,"x",function(){return v}),r.d(t,"y",function(){return w}),r.d(t,"z",function(){return b}),r.d(t,"A",function(){return x}),r.d(t,"B",function(){return I}),r.d(t,"C",function(){return m}),r.d(t,"D",function(){return g}),r.d(t,"E",function(){return f}),r.d(t,"F",function(){return S}),r.d(t,"G",function(){return T}),r.d(t,"H",function(){return h}),r.d(t,"I",function(){return _}),r.d(t,"J",function(){return E}),r.d(t,"K",function(){return M});var n=r("9gar"),i=r("1kEK");function s(e){return n.a.extendedSpatialReferenceInfo(e)}function a(e,t,r){return n.a.clip(i.a,e,t,r)}function o(e,t,r){return n.a.cut(i.a,e,t,r)}function l(e,t,r){return n.a.contains(i.a,e,t,r)}function c(e,t,r){return n.a.crosses(i.a,e,t,r)}function u(e,t,r,s){return n.a.distance(i.a,e,t,r,s)}function d(e,t,r){return n.a.equals(i.a,e,t,r)}function p(e,t,r){return n.a.intersects(i.a,e,t,r)}function f(e,t,r){return n.a.touches(i.a,e,t,r)}function h(e,t,r){return n.a.within(i.a,e,t,r)}function y(e,t,r){return n.a.disjoint(i.a,e,t,r)}function b(e,t,r){return n.a.overlaps(i.a,e,t,r)}function m(e,t,r,s){return n.a.relate(i.a,e,t,r,s)}function O(e,t){return n.a.isSimple(i.a,e,t)}function g(e,t){return n.a.simplify(i.a,e,t)}function j(e,t,r=!1){return n.a.convexHull(i.a,e,t,r)}function v(e,t,r){return n.a.difference(i.a,e,t,r)}function w(e,t,r){return n.a.symmetricDifference(i.a,e,t,r)}function x(e,t,r){return n.a.intersect(i.a,e,t,r)}function S(e,t,r=null){return n.a.union(i.a,e,t,r)}function I(e,t,r,s,a,o,l){return n.a.offset(i.a,e,t,r,s,a,o,l)}function T(e,t,r,s,a=!1){return n.a.buffer(i.a,e,t,r,s,a)}function _(e,t,r,s,a,o,l){return n.a.geodesicBuffer(i.a,e,t,r,s,a,o,l)}function E(e,t,r,s=!0){return n.a.nearestCoordinate(i.a,e,t,r,s)}function M(e,t,r){return n.a.nearestVertex(i.a,e,t,r)}function A(e,t,r,s,a){return n.a.nearestVertices(i.a,e,t,r,s,a)}function L(e,t,r,i){if(null==t||null==i)throw new Error("Illegal Argument Exception");const s=n.a.rotate(t,r,i);return s.spatialReference=e,s}function B(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipHorizontal(t,r);return i.spatialReference=e,i}function N(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipVertical(t,r);return i.spatialReference=e,i}function R(e,t,r,s,a){return n.a.generalize(i.a,e,t,r,s,a)}function F(e,t,r,s){return n.a.densify(i.a,e,t,r,s)}function D(e,t,r,s,a=0){return n.a.geodesicDensify(i.a,e,t,r,s,a)}function P(e,t,r){return n.a.planarArea(i.a,e,t,r)}function C(e,t,r){return n.a.planarLength(i.a,e,t,r)}function k(e,t,r,s){return n.a.geodesicArea(i.a,e,t,r,s)}function q(e,t,r,s){return n.a.geodesicLength(i.a,e,t,r,s)}var z=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:s,clip:a,cut:o,contains:l,crosses:c,distance:u,equals:d,intersects:p,touches:f,within:h,disjoint:y,overlaps:b,relate:m,isSimple:O,simplify:g,convexHull:j,difference:v,symmetricDifference:w,intersect:x,union:S,offset:I,buffer:T,geodesicBuffer:_,nearestCoordinate:E,nearestVertex:M,nearestVertices:A,rotate:L,flipHorizontal:B,flipVertical:N,generalize:R,densify:F,geodesicDensify:D,planarArea:P,planarLength:C,geodesicArea:k,geodesicLength:q})},llFo:function(e,t,r){"use strict";r.d(t,"a",function(){return S});var n,i=r("pO5D"),s=(r("wSAH"),r("6S2I")),a=r("WbKI"),o=r("Gj5k"),l=r("04ZG"),c=r("zlDU"),u=r("4EHJ"),d=(r("ju1D"),r("9AIY"),r("ikTR")),p=r("9MzC"),f=r("WBXD"),h=r("/CmD"),y=r("Lqtk"),b=r("r0DZ"),m=r("N5XI"),O=r("wk6I"),g=r("f/qv"),j=r("tQ+6");class v{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const r=(e-this.location.top)*this.location.width+(t-this.location.left),n=r>>3,i=this._tileAvailabilityBitSet;return n<0||n>i.length?"unknown":i[n]&1<<r%8?"available":"unavailable"}_updateFromData(e){let t=!0,r=!0;const n=Math.ceil(this.location.width*this.location.height/8),i=new Uint8Array(n);let s=0;for(let a=0;a<e.length;a++){const n=a%8;e[a]?(r=!1,i[s]|=1<<n):t=!1,7===n&&++s}r?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=i,this.byteSize+=i.length)}static fromDefinition(e,t){const r=e.service.request||y.default,{row:n,col:i,width:s,height:a}=e,o={query:{f:"json"}};return t=t?{...o,...t}:o,r(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}(e),t).then(e=>e.data).catch(e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:n,left:i,width:s,height:a},valid:!0,data:Object(j.b)(s*a,0)};throw e}).then(e=>{if(e.location&&(e.location.top!==n||e.location.left!==i||e.location.width!==s||e.location.height!==a))throw new c.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:n,left:i,width:s,height:a}});return v.fromJSON(e)})}static fromJSON(e){v.validateJSON(e);const t=new v;return t.location=Object.freeze(Object(g.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new c.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new c.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new c.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new c.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new c.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function w(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const x=s.a.getLogger("esri.layers.support.TilemapCache");let S=n=class extends h.a{constructor(e){super(e),this._handles=new b.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=y.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new O.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],()=>this._initializeTilemapDefinition()),Object(m.a)(this,"layer.tileInfo.lods",e=>this._initializeAvailableLevels(e),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(x.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,n){if(!this._availableLevels[e])return Object(p.t)(new c.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,i);if(s)return Object(p.u)(s);const a=n&&n.signal;return n={...n,signal:null},Object(p.c)((e,t)=>{Object(p.r)(a,()=>t(Object(p.e)()));const r=w(i);let s=this._pendingTilemapRequests[r];if(!s){s=v.fromDefinition(i,n).then(e=>(this._tilemapCache.put(r,e,e.byteSize),e));const e=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=s,s.then(e,e)}s.then(e,t)})}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,n){n.level=e,n.row=t,n.col=r;const i=this.layer.tileInfo;for(i.updateTileInfo(n);;){const e=this.getAvailability(n.level,n.row,n.col);if("unavailable"!==e)return e;if(!i.upsampleTile(n))return"unavailable"}}fetchAvailability(e,t,r,n){return this._availableLevels[e]?this.fetchTilemap(e,t,r,n).catch(e=>e).then(n=>{if(n instanceof v){const i=n.getAvailability(t,r);return"unavailable"===i?Object(p.t)(new c.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):i}if(Object(p.n)(n))throw n;return"unknown"}):Object(p.t)(new c.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,n,i){n.level=e,n.row=t,n.col=r;const s=this.layer.tileInfo;s.updateTileInfo(n);const a=this.fetchAvailability(e,t,r,i).catch(e=>{if(Object(p.n)(e))throw e;if(s.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n);throw e});return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,i,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,s,a){if(!this._prefetchingEnabled)return;const o="prefetch-"+e;if(this._handles.has(o))return;const l=Object(p.d)();a.then(()=>l.abort(),()=>l.abort());let c=!1;if(this._handles.add({remove(){c||(c=!0,l.abort())}},o),await Object(f.c)(10,l.signal).catch(()=>{}),c||(c=!0,this._handles.remove(o)),Object(p.o)(l))return;const u={id:e,level:t,row:r,col:i},d={...s,signal:l.signal},h=this.layer.tileInfo;for(let p=0;n._prefetches.length<n._maxPrefetch&&h.upsampleTile(u);++p){const e=this.fetchAvailability(u.level,u.row,u.col,d);n._prefetches.push(e);const t=()=>{n._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(u.C)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,n){n.level=e,n.row=t-t%this.size,n.col=r-r%this.size;const i=w(n);return this._tilemapCache.get(i)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(e=>this._availableLevels[e.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,n)=>!!e._tilemapFromCache(t,r,n,e._tmpTilemapDefinition)}}};S._maxPrefetch=4,S._prefetches=new d.a({initialSize:n._maxPrefetch}),Object(i.a)([Object(a.b)({constructOnly:!0,type:Number})],S.prototype,"levels",void 0),Object(i.a)([Object(o.a)("levels")],S.prototype,"castLevels",null),Object(i.a)([Object(a.b)({readOnly:!0,dependsOn:["levels"],type:Number})],S.prototype,"size",null),Object(i.a)([Object(a.b)({constructOnly:!0,type:Number})],S.prototype,"cacheByteSize",void 0),Object(i.a)([Object(a.b)({constructOnly:!0})],S.prototype,"layer",void 0),Object(i.a)([Object(a.b)({constructOnly:!0})],S.prototype,"request",void 0),S=n=Object(i.a)([Object(l.a)("esri.layers.support.TilemapCache")],S)},lq5k:function(e,t,r){"use strict";r.d(t,"a",function(){return A});var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=r("6S2I"),a=(r("zqDF"),r("WbKI")),o=r("r88o"),l=r("04ZG"),c=r("Cduq"),u=r("zlDU"),d=r("4EHJ"),p=r("ju1D"),f=(r("9AIY"),r("9MzC")),h=r("WZb1"),y=r("OvF4"),b=r("Lqtk"),m=r("AiS/"),O=r("p+Gi"),g=r("Jpjp");function j(e){e&&e.writtenProperties&&e.writtenProperties.forEach(e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(g.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)})}var v=r("VLTf"),w=r("5k2a"),x=r("eSsm"),S=r("5qYV");async function I(e,t,r){if(!t||!t.resources)return;const n=t.portalItem===e.portalItem?new Set(e.paths):new Set;e.paths.length=0,e.portalItem=t.portalItem;const i=new Set(t.resources.toKeep.map(e=>e.resource.path)),s=new Set,a=[];i.forEach(t=>{n.delete(t),e.paths.push(t)});for(const c of t.resources.toUpdate)if(n.delete(c.resource.path),i.has(c.resource.path)||s.has(c.resource.path)){const{resource:t,content:n,finish:i,error:s}=c,o=Object(S.getSiblingOfSameTypeI)(t,Object(p.a)());e.paths.push(o.path),a.push(T({resource:o,content:n,finish:i,error:s},r))}else e.paths.push(c.resource.path),a.push(_(c,r)),s.add(c.resource.path);for(const c of t.resources.toAdd)a.push(T(c,r)),e.paths.push(c.resource.path);if(n.forEach(e=>{const r=t.portalItem.resourceFromPath(e);a.push(r.portalItem.removeResource(r).catch(()=>{}))}),0===a.length)return;const o=await Object(f.j)(a);Object(f.w)(r);const l=o.filter(e=>"error"in e).map(e=>e.error);if(l.length>0)throw new u.a("save:resources","Failed to save one or more resources",{errors:l})}async function T(e,t){const r=await Object(x.c)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==r.ok)throw e.error&&e.error(r.error),r.error;e.finish&&e.finish(e.resource)}async function _(e,t){const r=await Object(x.c)(e.resource.update(e.content,t));if(!0!==r.ok)throw e.error(r.error),r.error;e.finish(e.resource)}var E=r("IvSi");const M=s.a.getLogger("esri.layers.mixins.SceneService"),A=e=>{let t=class extends e{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this._debouncedSaveOperations=Object(f.i)(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return h.a.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new h.a(n):null}}readFullExtent(e,t){const r=t.store,n=this._readSpatialReference(t);return null==n||null==r||null==r.extent||!Array.isArray(r.extent)||r.extent.some(e=>e<L)?null:new y.a({xmin:r.extent[0],ymin:r.extent[1],xmax:r.extent[2],ymax:r.extent[3],spatialReference:n})}readVersion(e,t){const r=t.store,n=null!=r.version?r.version.toString():"",i={major:Number.NaN,minor:Number.NaN,versionString:n},s=n.split(".");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(v.h)(this.url,t.name);let n=t.name;if(!n&&this.url){const e=Object(v.e)(this.url);Object(i.h)(e)&&(n=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(v.a)(n)}set url(e){const t=Object(v.g)(this,e,M);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,n){Object(v.i)(this,e,"layers",t,n)}get parsedUrl(){const e=this._get("url");if(!e)return null;const t=Object(d.I)(e);return null!=this.layerId&&Object(v.b)(t.path)&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _verifyRootNodeAndUpdateExtent(e,t){if(e)try{return this._updateExtentFromRootPage(e,await this._fetchRootPage(e,t))}catch(e){}return this._updateExtentFromRootNode(await this._fetchRootNode(t))}async _fetchRootPage(e,t){if(!e)return Object(f.t)();const r=Math.floor(e.rootIndex/e.nodesPerPage),n=`${this.parsedUrl.path}/nodepages/${r}`;return(await Object(b.default)(n,{responseType:"json",signal:t})).data}_updateExtentFromRootPage(e,t){if(null==t||null==t.nodes)throw new u.a("sceneservice:invalid-node-page","Inavlid node page.");const r=t.nodes[e.rootIndex%e.nodesPerPage];if(null==r||null==r.obb||null==r.obb.center||null==r.obb.halfSize)throw new u.a("sceneservice:invalid-node-page","Inavlid node page.");if(r.obb.center[0]<L)return;const n=r.obb.halfSize,i=r.obb.center[2],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);this.fullExtent.zmin=i-s,this.fullExtent.zmax=i+s}_updateExtentFromRootNode(e){if(null==e||null==this.fullExtent||this.fullExtent.hasZ)return;if(!Array.isArray(e.mbs)||4!==e.mbs.length||e.mbs[0]<L)return;const t=e.mbs[2],r=e.mbs[3];this.fullExtent.zmin=t-r,this.fullExtent.zmax=t+r}async _fetchRootNode(e){if(!this.rootNode)return;const t=Object(d.x)(this.parsedUrl.path,this.rootNode);try{return(await Object(b.default)(t,{query:{f:"json"},responseType:"json",signal:e})).data}catch(e){throw new u.a("sceneservice:root-node-missing","Root node missing.",{error:e,url:t})}}async _fetchService(e){if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await Object(b.default)(this.url,{query:{f:"json"},responseType:"json",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await Object(b.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const r=t.data;this.read(r,{origin:"service",url:this.parsedUrl}),this.validateLayer(r)}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const n=t.getTypeKeywords();for(const i of n)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>"Hosted Service"!==e)))}async _saveAs(e,t){const r={...R,...t};let n=O.default.from(e);n||(M.error("_saveAs(): requires a portal item parameter"),await Object(f.t)(new u.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),n.id&&(n=n.clone(),n.id=null);const i=n.portal||m.a.getDefault();await this._ensureLoadBeforeSave(),n.type=N,n.portal=i;const s={origin:"portal-item",url:null,messages:[],portal:i,portalItem:n,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},a={layers:[this.write(null,s)]};return await Object(f.b)(s.resources.pendingOperations),await this._validateAgainstJSONSchema(a,s,r),n.url=this.url,n.title||(n.title=this.title),this._updateTypeKeywords(n,r,1),await i._signIn(),await i.user.addItem({item:n,folder:r&&r.folder,data:a}),await I(this.resourceReferences,s,null),this.portalItem=n,j(s),s.portalItem=n,n}async _save(e){const t={...R,...e};this.portalItem||(M.error("_save(): requires the .portalItem property to be set"),await Object(f.t)(new u.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"))),this.portalItem.type!==N&&(M.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+N),await Object(f.t)(new u.a("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${N}"`))),await this._ensureLoadBeforeSave();const r={origin:"portal-item",url:this.portalItem.itemUrl&&Object(d.I)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||m.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,r)]};return await Object(f.b)(r.resources.pendingOperations),await this._validateAgainstJSONSchema(n,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:n}),await I(this.resourceReferences,r,null),j(r),this.portalItem}async _validateAgainstJSONSchema(e,t,n){let i=t.messages.filter(e=>"error"===e.type).map(e=>new u.a(e.name,e.message,e.details));if(n&&n.validationOptions.ignoreUnsupported&&(i=i.filter(e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)),n.validationOptions.enabled||B){const t=(await r.e(109).then(r.bind(null,"p+sB"))).validate(e,n.portalItemLayerType);if(t.length>0){const e="Layer item did not validate:\n"+t.join("\n");if(M.error("_validateAgainstJSONSchema(): "+e),"throw"===n.validationOptions.failPolicy){const e=t.map(e=>new u.a("sceneservice:schema-validation",e)).concat(i);throw new u.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new u.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return Object(n.a)([Object(a.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),Object(n.a)([Object(a.b)({type:h.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(o.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(n.a)([Object(a.b)({type:y.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(o.a)("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(n.a)([Object(a.b)({readOnly:!0,type:w.a})],t.prototype,"heightModelInfo",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"version",void 0),Object(n.a)([Object(o.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(n.a)([Object(a.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(a.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(n.a)([Object(a.b)({type:String})],t.prototype,"title",void 0),Object(n.a)([Object(o.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(n.a)([Object(o.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(n.a)([Object(a.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(n.a)([Object(a.b)(E.j)],t.prototype,"url",null),Object(n.a)([Object(c.a)("url")],t.prototype,"writeUrl",null),Object(n.a)([Object(a.b)({dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"store",void 0),Object(n.a)([Object(a.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(n.a)([Object(l.a)("esri.layers.mixins.SceneService")],t),t},L=-1e38,B=!1,N="Scene Service",R={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},mYC1:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("srIe"),i=r("9MzC"),s=r("975N"),a=r("Lqtk"),o=r("AiS/"),l=r("p+Gi"),c=r("W9Wu");class u{constructor(e,t,r){this.parsedUrl=e,this.portalItem=t,this.signal=r,this.rootDocument=null;const n=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);n&&(this.urlParts={root:n[1],layerId:parseInt(n[2],10)})}async fetch(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();if(Object(n.g)(t))return this.loadFromUrl();const r=await this.findAndLoadRelatedPortalItem(t);return Object(n.g)(r)?null:this.loadFeatureLayerFromPortalItem(r)}async fetchPortalItem(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();return Object(n.g)(t)?null:this.findAndLoadRelatedPortalItem(t)}async fetchRootDocument(){if(Object(n.h)(this.rootDocument))return this.rootDocument;if(Object(n.g)(this.urlParts))return this.rootDocument={},{};const e={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},t=this.urlParts.root+"/SceneServer";try{const r=await Object(a.default)(t,e);this.rootDocument=r.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const t=null==(e=s.b)?void 0:e.findServerInfo(this.parsedUrl.path);if(null!=t&&t.owningSystemUrl)return t.owningSystemUrl;const r=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const e=(await Object(a.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(e)return e}catch(e){Object(i.v)(e)}return null}async findAndLoadRelatedPortalItem(e){try{return(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find(e=>"Feature Service"===e.type)||null}catch(e){return Object(i.v)(e),null}}async loadFeatureLayerFromPortalItem(e){await e.load({signal:this.signal});const t=await this.findMatchingAssociatedSublayerUrl(e.url);return new c.default({url:t,portalItem:e}).load({signal:this.signal})}async loadFromUrl(){const e=await this.findMatchingAssociatedSublayerUrl(this.urlParts.root+"/FeatureServer");return new c.default({url:e}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(e){const t=e.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},n=this.urlParts.layerId,s=this.fetchRootDocument(),o=Object(a.default)(t,r),[l,c]=await Object(i.b)([o,s]),u=c&&c.layers,d=l.data&&l.data.layers;if(!Array.isArray(d))throw new Error("expected layers array");if(Array.isArray(u)){for(let i=0;i<Math.min(u.length,d.length);i++)if(u[i].id===n)return`${t}/${d[i].id}`}else if(n<d.length)return`${t}/${d[n].id}`;throw new Error("could not find matching associated sublayer")}async portalItemFromServiceItemId(){const e=(await this.fetchRootDocument()).serviceItemId;if(!e)return null;const t=new l.default({id:e}),r=await this.fetchServiceOwningPortalUrl();Object(n.h)(r)&&(t.portal=new o.a({url:r}));try{return t.load({signal:this.signal})}catch(e){return Object(i.v)(e),null}}}},ncPp:function(e,t,r){"use strict";r.r(t);var n=r("pO5D"),i=(r("wSAH"),r("f/qv")),s=r("s7YA"),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("r88o"),l=r("04ZG"),c=r("Cduq"),u=r("zlDU"),d=r("4EHJ"),p=(r("ju1D"),r("9AIY"),r("9MzC")),f=r("WZb1"),h=r("SuVq"),y=r("OvF4"),b=(r("4GrV"),r("Lqtk")),m=r("pqNC"),O=r("5pQd"),g=r("uRH/"),j=r("mXvl"),v=r("DbUH"),w=r("jhcG"),x=r("WmKv"),S=r("UOZ4"),I=r("3/ME"),T=r("OYGz");let _=class extends(Object(j.a)(Object(w.a)(Object(x.a)(Object(g.a)(Object(v.a)(Object(O.a)(m.a))))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new y.a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,f.a.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=f.a.WebMercator,this.subDomains=null,this.tileInfo=new I.a({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new h.a({x:-20037508.342787,y:20037508.342787,spatialReference:f.a.WebMercator}),spatialReference:f.a.WebMercator,lods:[new S.a({level:0,scale:591657527.591555,resolution:156543.033928}),new S.a({level:1,scale:295828763.795777,resolution:78271.5169639999}),new S.a({level:2,scale:147914381.897889,resolution:39135.7584820001}),new S.a({level:3,scale:73957190.948944,resolution:19567.8792409999}),new S.a({level:4,scale:36978595.474472,resolution:9783.93962049996}),new S.a({level:5,scale:18489297.737236,resolution:4891.96981024998}),new S.a({level:6,scale:9244648.868618,resolution:2445.98490512499}),new S.a({level:7,scale:4622324.434309,resolution:1222.99245256249}),new S.a({level:8,scale:2311162.217155,resolution:611.49622628138}),new S.a({level:9,scale:1155581.108577,resolution:305.748113140558}),new S.a({level:10,scale:577790.554289,resolution:152.874056570411}),new S.a({level:11,scale:288895.277144,resolution:76.4370282850732}),new S.a({level:12,scale:144447.638572,resolution:38.2185141425366}),new S.a({level:13,scale:72223.819286,resolution:19.1092570712683}),new S.a({level:14,scale:36111.909643,resolution:9.55462853563415}),new S.a({level:15,scale:18055.954822,resolution:4.77731426794937}),new S.a({level:16,scale:9027.977411,resolution:2.38865713397468}),new S.a({level:17,scale:4513.988705,resolution:1.19432856685505}),new S.a({level:18,scale:2256.994353,resolution:.597164283559817}),new S.a({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return"string"==typeof e?Object(i.d)({urlTemplate:e},t||{}):e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let e="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new d.a(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf("{subDomain}")||(e="is missing 'subDomains' property")}else e="spatialReference must match tileInfo.spatialReference";else e="is missing the required 'urlTemplate' property value";if(e)throw new u.a("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)});return this.addResolvingPromise(t),Object(p.u)(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&f.a.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,n=new d.a(t),i=n.scheme?n.scheme+"://":"//",s=i+n.authority+"/";if(-1===n.authority.indexOf("{subDomain}"))e.push(s);else if(r&&r.length>0&&n.authority.split(".").length>1)for(const a of r)e.push(i+n.authority.replace(/\{subDomain\}/gi,a)+"/");return e.map(e=>("/"!==e.charAt(e.length-1)&&(e+="/"),e))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new d.a(e);return e.substring(((t.scheme?t.scheme+"://":"//")+t.authority+"/").length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&Object(d.v)(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=Object(d.B)(e)),t.templateUrl=e}fetchTile(e,t,r,n={}){const{signal:i,timestamp:s}=n,a=this.getTileUrl(e,t,r),o={responseType:"image",signal:i};return null!=s&&(o.query={_ts:n.timestamp}),Object(b.default)(a,o).then(e=>e.data)}getTileUrl(e,t,r){const n=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+Object(s.c)(this.urlPath,{level:n,z:n,col:r,x:r,row:t,y:t})}};Object(n.a)([Object(a.b)({type:String,value:"",json:{write:!0}})],_.prototype,"copyright",void 0),Object(n.a)([Object(a.b)({type:y.a,json:{write:!0}})],_.prototype,"fullExtent",void 0),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1,write:!1}})],_.prototype,"legendEnabled",void 0),Object(n.a)([Object(a.b)({type:["show","hide"]})],_.prototype,"listMode",void 0),Object(n.a)([Object(a.b)({dependsOn:["tileInfo"]})],_.prototype,"levelValues",null),Object(n.a)([Object(a.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],_.prototype,"isReference",void 0),Object(n.a)([Object(a.b)({type:["WebTiledLayer"],value:"WebTiledLayer"})],_.prototype,"operationalLayerType",void 0),Object(n.a)([Object(a.b)({readOnly:!0,json:{read:!1,write:!1}})],_.prototype,"popupEnabled",void 0),Object(n.a)([Object(a.b)({type:f.a})],_.prototype,"spatialReference",void 0),Object(n.a)([Object(o.a)("spatialReference",["spatialReference","fullExtent.spatialReference"])],_.prototype,"readSpatialReference",null),Object(n.a)([Object(a.b)({type:[String],json:{write:!0}})],_.prototype,"subDomains",void 0),Object(n.a)([Object(a.b)({type:I.a,json:{write:!0}})],_.prototype,"tileInfo",void 0),Object(n.a)([Object(a.b)({readOnly:!0,dependsOn:["urlTemplate","subDomains"]})],_.prototype,"tileServers",null),Object(n.a)([Object(a.b)({json:{read:!1}})],_.prototype,"type",void 0),Object(n.a)([Object(a.b)({dependsOn:["urlTemplate"]})],_.prototype,"urlPath",null),Object(n.a)([Object(a.b)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],_.prototype,"urlTemplate",void 0),Object(n.a)([Object(o.a)("urlTemplate",["urlTemplate","templateUrl"])],_.prototype,"readUrlTemplate",null),Object(n.a)([Object(c.a)("urlTemplate",{templateUrl:{type:String}})],_.prototype,"writeUrlTemplate",null),Object(n.a)([Object(a.b)({type:T.a,json:{write:!0}})],_.prototype,"wmtsInfo",void 0),_=Object(n.a)([Object(l.a)("esri.layers.WebTileLayer")],_),t.default=_},o6Le:function(e,t,r){"use strict";r.d(t,"a",function(){return i});class n{constructor(e={}){this._options=e}toQueryParams(e){if(!e)return null;const t=e.toJSON(),r={};return Object.keys(t).forEach(e=>{const n=this._options[e];if(n){const i="boolean"!=typeof n&&n.name?n.name:e,s="boolean"!=typeof n&&n.getter?n.getter(t):t[e];null!=s&&(r[i]=(e=>{if(!Array.isArray(e))return!1;const[t]=e;return"number"==typeof t||"string"==typeof t})(s)?s.join(","):"object"==typeof s?JSON.stringify(s):s)}else r[e]=t[e]},this),r}}function i(e){return new n(e)}},oLSx:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={BingMapsLayer:async()=>(await r.e(125).then(r.bind(null,"CR/Q"))).default,BuildingSceneLayer:async()=>(await Promise.all([r.e(0),r.e(126)]).then(r.bind(null,"TWTt"))).default,CSVLayer:async()=>(await r.e(112).then(r.bind(null,"Kn0e"))).default,ElevationLayer:async()=>(await Promise.all([r.e(0),r.e(29)]).then(r.bind(null,"8g7C"))).default,FeatureLayer:async()=>(await Promise.resolve().then(r.bind(null,"W9Wu"))).default,GroupLayer:async()=>(await r.e(30).then(r.bind(null,"VPx4"))).default,GeoRSSLayer:async()=>(await r.e(127).then(r.bind(null,"AP+b"))).default,ImageryLayer:async()=>(await Promise.all([r.e(16),r.e(21),r.e(113)]).then(r.bind(null,"/GVf"))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(16),r.e(21),r.e(0),r.e(128)]).then(r.bind(null,"mRf7"))).default,IntegratedMeshLayer:async()=>(await Promise.all([r.e(0),r.e(129)]).then(r.bind(null,"yvy3"))).default,KMLLayer:async()=>(await Promise.all([r.e(0),r.e(110)]).then(r.bind(null,"9fxc"))).default,MapImageLayer:async()=>(await Promise.all([r.e(0),r.e(31)]).then(r.bind(null,"U/i9"))).default,MapNotesLayer:async()=>(await r.e(130).then(r.bind(null,"Wvof"))).default,OpenStreetMapLayer:async()=>(await Promise.all([r.e(0),r.e(131)]).then(r.bind(null,"jFi3"))).default,PointCloudLayer:async()=>(await Promise.all([r.e(0),r.e(132)]).then(r.bind(null,"RLtZ"))).default,RouteLayer:async()=>(await r.e(133).then(r.bind(null,"soW6"))).default,SceneLayer:async()=>(await Promise.all([r.e(0),r.e(134)]).then(r.bind(null,"0yFX"))).default,StreamLayer:async()=>(await r.e(135).then(r.bind(null,"u6iX"))).default,TileLayer:async()=>(await Promise.all([r.e(0),r.e(136)]).then(r.bind(null,"JlDE"))).default,UnknownLayer:async()=>(await r.e(137).then(r.bind(null,"qcqe"))).default,UnsupportedLayer:async()=>(await r.e(138).then(r.bind(null,"GN2T"))).default,VectorTileLayer:async()=>(await Promise.all([r.e(18),r.e(0),r.e(114)]).then(r.bind(null,"FzwJ"))).default,WebTileLayer:async()=>(await r.e(0).then(r.bind(null,"ncPp"))).default,WMSLayer:async()=>(await Promise.all([r.e(0),r.e(139)]).then(r.bind(null,"h2Da"))).default,WMTSLayer:async()=>(await Promise.all([r.e(0),r.e(140)]).then(r.bind(null,"sDlQ"))).default}},ofcG:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),d=r("1hFN"),p=r("ag7Y"),f=r("nvBr");let h=n=class extends p.a{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new n({description:this.description,label:this.label,values:Object(s.a)(this.values),color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:[String],json:{write:!0}})],h.prototype,"values",void 0),Object(i.a)([Object(o.b)({type:f.a,json:{type:[a.a],write:!0}})],h.prototype,"color",void 0),h=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],h);var y,b=h;let m=y=class extends u.a{constructor(e){super(e),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new y({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),colorUniqueValueInfos:Object(s.a)(this.colorUniqueValueInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],m.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[b],json:{write:!0}})],m.prototype,"colorUniqueValueInfos",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"legendOptions",void 0),m=y=Object(i.a)([Object(c.a)("esri.renderers.PointCloudUniqueValueRenderer")],m),t.a=m},q2iW:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i});var n=r("3/ME");const i={type:n.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,r,i){if(!e)return null;const{minScale:s,maxScale:a,minLOD:o,maxLOD:l}=t;if(null!=o&&null!=l)return n.a.fromJSON(i&&i.ignoreMinMaxLOD?e:{...e,lods:e.lods.filter(({level:e})=>null!=e&&e>=o&&e<=l)});if(0!==s&&0!==a){const t=e=>Math.round(1e4*e)/1e4,r=s?t(s):1/0,i=a?t(a):-1/0;return n.a.fromJSON({...e,lods:e.lods.filter(e=>{const n=t(e.scale);return n<=r&&n>=i})})}return n.a.fromJSON(e)}},qE7Y:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"b",function(){return d}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return M});var n=r("zlDU"),i=r("4EHJ"),s=r("WZb1"),a=r("OvF4");const o=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],l={84:4326,83:4269,27:4267};function c(e){if(!e)return null;const t={idCounter:-1};"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml"));const r=e.documentElement;if("ServiceExceptionReport"===r.nodeName){const e=Array.prototype.slice.call(r.childNodes).map(e=>e.textContent).join("\r\n");throw new n.a("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",e)}const i=h("Capability",r),s=h("Service",r),o=h("Request",i);if(!i||!s||!o)return null;const l=h("Layer",i);if(!l)return null;const c="WMS_Capabilities"===r.nodeName||"WMT_MS_Capabilities"===r.nodeName?r.getAttribute("version"):"1.3.0",u=b("Title",s,"")||b("Name",s,""),d=b("AccessConstraints",s,""),f=b("Abstract",s,""),y=parseInt(b("MaxWidth",s,"5000"),10),m=parseInt(b("MaxHeight",s,"5000"),10),j=g(o,"GetMap"),w=O(o,"GetMap"),S=v(l,c,t);let I,T,_,E,M=0;if(Array.prototype.slice.call(i.childNodes).forEach(e=>{"Layer"===e.nodeName&&(0===M?I=e:1===M?(S.name&&(S.name="",S.sublayers.push(v(I,c,t))),S.sublayers.push(v(e,c,t))):S.sublayers.push(v(e,c,t)),M++)}),!S)return null;const A=S.fullExtents;if(T=S.sublayers,T||(T=[]),0===T.length&&T.push(S),_=S.extent,!_){const e=new a.a(T[0].extent);S.extent=e.toJSON(),_=S.extent}if(E=S.spatialReferences,!E.length&&T.length>0){const e=t=>{let r=[];return t.sublayers.forEach(t=>{!r.length&&t.spatialReferences.length&&(r=t.spatialReferences||e(t))}),r};T.forEach(t=>{E.length||(E=t.spatialReferences||e(t))})}const L=O(o,"GetFeatureInfo");let B;if(L){const e=g(o,"GetFeatureInfo");e.indexOf("text/html")>-1?B="text/html":e.indexOf("text/plain")>-1&&(B="text/plain")}if(!B){const e=function(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach(t=>{e(t)}))};e(S)}const N=p(T),R=S.minScale||0,F=S.maxScale||0,D=S.dimensions,P=N.reduce((e,t)=>e.concat(t.dimensions),[]),C=D.concat(P).filter(x);let k=null;if(C.length>0){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;C.forEach(r=>{const{extent:n}=r;var i;i=n,Array.isArray(i)&&i.length>0&&i[0]instanceof Date?n.forEach(r=>{e=Math.min(e,r.getTime()),t=Math.max(t,r.getTime())}):n.forEach(r=>{e=Math.min(e,r.min.getTime()),t=Math.max(t,r.max.getTime())})}),k={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[e,t]}}return{copyright:d,description:f,dimensions:D,extent:_,fullExtents:A,featureInfoFormat:B,featureInfoUrl:L,mapUrl:w,maxWidth:y,maxHeight:m,maxScale:F,minScale:R,layers:N,spatialReferences:E,supportedImageFormatTypes:j,timeInfo:k,title:u,version:c}}function u(e){return o.some(t=>e>=t[0]&&e<=t[1])}function d(e){return e.length?e.filter(e=>e.popupEnabled&&e.name&&e.queryable).map(e=>e.name).join(","):""}function p(e){let t=[];return e.forEach(e=>{t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(p(e.sublayers)),delete e.sublayers)}),t}function f(e,t,r){var n;return null!=(n=t.getAttribute(e))?n:r}function h(e,t){for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];if(w(n)&&n.nodeName===e)return n}return null}function y(e,t){const r=[];for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];w(i)&&i.nodeName===e&&r.push(i)}return r}function b(e,t,r){const n=h(e,t);return n?n.textContent:r}function m(e,t,r){if(!e)return null;const n=parseFloat(e.getAttribute("minx")),i=parseFloat(e.getAttribute("miny")),o=parseFloat(e.getAttribute("maxx")),l=parseFloat(e.getAttribute("maxy"));let c,u,d,p;r?(c=isNaN(i)?-Number.MAX_VALUE:i,u=isNaN(n)?-Number.MAX_VALUE:n,d=isNaN(l)?Number.MAX_VALUE:l,p=isNaN(o)?Number.MAX_VALUE:o):(c=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(i)?-Number.MAX_VALUE:i,d=isNaN(o)?Number.MAX_VALUE:o,p=isNaN(l)?Number.MAX_VALUE:l);const f=new s.a({wkid:t});return new a.a({xmin:c,ymin:u,xmax:d,ymax:p,spatialReference:f})}function O(e,t){const r=h(t,e);if(r){const e=h("DCPType",r);if(e){const t=h("HTTP",e);if(t){const e=h("Get",t);if(e){let t=function(e,t,r,n){const i=h("OnlineResource",r);return i?f("xlink:href",i,null):null}(0,0,e);if(t)return t.indexOf("&")===t.length-1&&(t=t.substring(0,t.length-1)),function(e,t){const r=[],n=Object(i.I)(e);for(const i in n.query)n.query.hasOwnProperty(i)&&-1===t.indexOf(i.toLowerCase())&&r.push(i+"="+n.query[i]);return n.path+(r.length?"?"+r.join("&"):"")}(t,["service","request"])}}}}return null}function g(e,t){const r=y("Operation",e);if(0===r.length)return y("Format",h(t,e)).map(e=>e.textContent);const n=[];return r.forEach(e=>{e.getAttribute("name")===t&&y("Format",e).forEach(e=>{n.push(e.textContent)})}),n}function j(e,t,r){const n=h(t,e);if(!n)return r;const{textContent:i}=n;if(null==i||""===i)return r;const s=Number(i);return isNaN(s)?r:s}function v(e,t,r){var n;if(!e)return null;const i={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===e.getAttribute("queryable"),spatialReferences:[],sublayers:null},o=h("LatLonBoundingBox",e),c=h("EX_GeographicBoundingBox",e);let d=null;o&&(d=m(o,4326)),c&&(d=new a.a(0,0,0,0,new s.a({wkid:4326})),d.xmin=parseFloat(b("westBoundLongitude",c,"0")),d.ymin=parseFloat(b("southBoundLatitude",c,"0")),d.xmax=parseFloat(b("eastBoundLongitude",c,"0")),d.ymax=parseFloat(b("northBoundLatitude",c,"0"))),o||c||(d=new a.a(-180,-90,180,90,new s.a({wkid:4326}))),i.minScale=j(e,"MaxScaleDenominator",0),i.maxScale=j(e,"MinScaleDenominator",0);const p=["1.0.0","1.1.0","1.1.1"].indexOf(t)>-1?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(e=>{if("Name"===e.nodeName)i.name=e.textContent||"";else if("Title"===e.nodeName)i.title=e.textContent||"";else if("Abstract"===e.nodeName)i.description=e.textContent||"";else if("BoundingBox"===e.nodeName){const r=e.getAttribute(p);if(r&&0===r.indexOf("EPSG:")){const n=parseInt(r.substring(5),10);0===n||isNaN(n)||d||(d="1.3.0"===t?m(e,n,u(n)):m(e,n))}const n=r&&r.indexOf(":");if(n&&n>-1){let s=parseInt(r.substring(n+1,r.length),10);0===s||isNaN(s)||(s=l[s]?l[s]:s);const a="1.3.0"===t?m(e,s,u(s)):m(e,s);i.fullExtents.push(a)}}else if(e.nodeName===p)e.textContent.split(" ").forEach(e=>{0===(e=e.indexOf(":")>-1?parseInt(e.split(":")[1],10):parseInt(e,10))||isNaN(e)||(l[e]&&(e=l[e]),-1===i.spatialReferences.indexOf(e)&&i.spatialReferences.push(e))});else if("Style"!==e.nodeName||i.legendURL){if("Layer"===e.nodeName){const n=v(e,t,r);n&&(n.parentLayerId=i.id,i.sublayers||(i.sublayers=[]),i.sublayers.push(n))}}else{const t=h("LegendURL",e);if(t){const e=h("OnlineResource",t);e&&(i.legendURL=e.getAttribute("xlink:href"))}}}),i.extent=null==(n=d)?void 0:n.toJSON(),i.dimensions=y("Dimension",e).filter(e=>e.getAttribute("name")&&e.getAttribute("units")&&e.textContent).map(e=>{const t=e.getAttribute("name"),r=e.getAttribute("units"),n=e.textContent,i=e.getAttribute("unitSymbol"),s=e.getAttribute("default"),a="0"!==f("default",e,"0"),o="0"!==f("nearestValue",e,"0"),l="0"!==f("current",e,"0");return/^time$/i.test(t)&&/^ISO8601$/i.test(r)?{name:"time",units:"ISO8601",extent:T(n),default:T(s),multipleValues:a,nearestValue:o,current:l}:/^elevation$/i.test(t)?{name:"elevation",units:r,extent:S(n),unitSymbol:i,default:S(s),multipleValues:a,nearestValue:o}:{name:t,units:r,extent:I(n),unitSymbol:i,default:I(s),multipleValues:a,nearestValue:o}}),i}function w(e){return e.nodeType===Node.ELEMENT_NODE}function x(e){return"time"===e.name}function S(e){if(!e)return null;const t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map(e=>{const t=e.split("/");return t.length<2?null:{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&"0"!==t[2]?parseFloat(t[2]):void 0}}).filter(e=>e):r.map(e=>parseFloat(e))}function I(e){if(!e)return null;const t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map(e=>{const t=e.split("/");return t.length<2?null:{min:t[0],max:t[1],resolution:t.length>=3&&"0"!==t[2]?t[2]:void 0}}).filter(e=>e):r}function T(e){if(!e)return null;const t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map(e=>{const t=e.split("/");return t.length<2?null:{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&"0"!==t[2]?_(t[2]):void 0}}).filter(e=>e):r.map(e=>new Date(e))}function _(e){const t=e.match(/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i);return t?{years:E(t[1]),months:E(t[2]),days:E(t[3]),hours:E(t[4]),minutes:E(t[5]),seconds:E(t[6])}:null}function E(e){if(!e)return 0;const t=e.match(/(?:\d+(?:.|,)\d+|\d+)/);if(!t)return 0;const r=t[0].replace(",",".");return Number(r)}function M(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}},sTkM:function(e,t,r){"use strict";function n(){return[0,0,0,1]}function i(e,t){return new Float64Array(e,t,4)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:function(e,t,r,n){return[e,t,r,n]},createView:i,IDENTITY:[0,0,0,1]})},tIWS:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("r88o"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("WZb1")),l=(r("4GrV"),r("q2iW")),c=r("llFo");const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(n.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(i.b)()],t.prototype,"minScale",void 0),Object(n.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(n.a)([Object(i.b)()],t.prototype,"maxScale",void 0),Object(n.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(n.a)([Object(i.b)({type:o.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),Object(n.a)([Object(i.b)(l.b)],t.prototype,"tileInfo",void 0),Object(n.a)([Object(i.b)()],t.prototype,"tilemapCache",void 0),Object(n.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(n.a)([Object(i.b)()],t.prototype,"version",void 0),t=Object(n.a)([Object(a.a)("esri.layers.mixins.ArcGISCachedService")],t),t}},tODX:function(e,t,r){"use strict";r.d(t,"a",function(){return O}),r.d(t,"b",function(){return b}),r.d(t,"c",function(){return d}),r.d(t,"d",function(){return y}),r.d(t,"e",function(){return h}),r.d(t,"f",function(){return p}),r.d(t,"g",function(){return m});var n=r("zlDU"),i=r("f4Nx"),s=r("l4ZG"),a=r("SuVq"),o=r("OvF4"),l=(r("4GrV"),r("gEht")),c=r("gYg2");const u=function(e,t){const r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};async function d(){if(Object(c.c)()||!Object(c.d)())return null;await Object(c.e)()}function p(e,t,r,i=null){if(e.spatialReference.equals(t))return e;const a=u(e.spatialReference,t);if(a&&!Object(c.c)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const l=r.center,d=new o.a({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:e.spatialReference}),p=a?Object(c.f)(d,t,i):Object(s.d)(d,t);return null==p?null:{x:p.xmax-p.xmin,y:p.ymax-p.ymin}}function f(e,t=.01){return Object(l.c)(e)?t/Object(l.c)(e):0}function h(e,t,r=null,a=!0){const o=e.spatialReference;if(o.equals(t))return e;const l=u(o,t);if(l&&!Object(c.c)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const d=l?Object(c.f)(e,t,r):Object(s.d)(e,t);if(d&&a&&t.isGeographic){var p,h;const[t,r]=o.isWebMercator?Object(i.d)(o).origin:null!=(p=null==(h=Object(i.d)(o))?void 0:h.valid)?p:[],n=f(o);n&&null!=t&&null!=r&&(Math.abs(e.x-t)<n&&Math.abs(180-d.x)<5e-4?d.x-=360:Math.abs(e.x-r)<n&&Math.abs(180+d.x)<5e-4&&(d.x+=360))}return d}function y(e,t,r=null,o=!0){var l,d,p,y;const b=e.spatialReference;if(b.equals(t))return e;const m=u(b,t);if(m&&!Object(c.c)())throw new n.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");const O=m?Object(c.f)(e,t,r):Object(s.d)(e,t);let[g,j]=null!=(l=null==(d=Object(i.d)(b))?void 0:d.origin)?l:[];if(O&&o&&b.isWebMercator&&t.isGeographic&&null!=g&&null!=j){const n=.001,i=1e3;if(Math.abs(e.xmin-g)<n&&Math.abs(j-e.xmax)>i&&Math.abs(180-O.xmax)<5e-4){O.xmin=-180;const n=[];n.push(new a.a(e.xmax,e.ymin,b)),n.push(new a.a(e.xmax,(e.ymin+e.ymax)/2,b)),n.push(new a.a(e.xmax,e.ymax,b));const i=n.map(e=>h(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmax=Math.max.apply(null,i)}if(Math.abs(e.xmax-j)<n&&Math.abs(g-e.xmin)>i&&Math.abs(180+O.xmin)<5e-4){O.xmax=180;const n=[];n.push(new a.a(e.xmin,e.ymin,b)),n.push(new a.a(e.xmin,(e.ymin+e.ymax)/2,b)),n.push(new a.a(e.xmin,e.ymax,b));const i=n.map(e=>h(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmin=Math.min.apply(null,i)}}[g,j]=t.isWebMercator?Object(i.d)(t).origin:null!=(p=null==(y=Object(i.d)(t))?void 0:y.valid)?p:[];const v=f(t);return v&&null!=g&&null!=j&&(Math.abs(O.xmin-g)<v&&(O.xmin=g),Math.abs(O.xmax-j)<v&&(O.xmax=j)),O}function b(e,t,r,s=null,o=null,l=!1,d=[32,32]){var p,f;if(u(e.spatialReference,t.spatialReference)&&!Object(c.c)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;const{xmin:y,ymin:b,xmax:m,ymax:O}=e,g=e.spatialReference,j=t.spatialReference,[v,w]=null!=(p=null==(f=Object(i.d)(g))?void 0:f.valid)?p:[],x={x:d[0]*r.x,y:d[1]*r.y},S={cols:Math.ceil((m-y)/x.x-.1)+1,rows:Math.ceil((O-b)/x.y-.1)+1},I=x.x,T=x.y,_=[];let E,M=!1;for(let n=0;n<S.cols;n++){const e=[];for(let r=0;r<S.rows;r++){let i=h(new a.a({x:y+I*n,y:O-T*r,spatialReference:g}),j,s);o&&(i=o.inverseTransform(i)),e.push(i),n>0&&l&&i&&E[r]&&null!=v&&i.x<E[r].x&&(i.x+=w-v),i?(_.push((i.x-t.xmin)/(t.xmax-t.xmin)),_.push((t.ymax-i.y)/(t.ymax-t.ymin))):(_.push(NaN),_.push(NaN),M=!0)}E=e}const A=function(e,t){const r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(_,S),L=new Float32Array((S.cols-1)*(S.rows-1)*2*6),B=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),N=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let n=0;n<S.cols-1;n++){for(let e=0;e<S.rows-1;e++){let t=n*S.rows*2+2*e;const r=_[t],i=_[t+1],s=_[t+2],a=_[t+3];t+=2*S.rows;const o=_[t],l=_[t+1],c=_[t+2],u=_[t+3];let d=0,p=12*(e*(S.cols-1)+n);for(let e=0;e<3;e++)L[p++]=B[d++]*r+B[d++]*s+B[d++]*c;d=0;for(let e=0;e<3;e++)L[p++]=B[d++]*i+B[d++]*a+B[d++]*u;d=0;for(let e=0;e<3;e++)L[p++]=N[d++]*r+N[d++]*o+N[d++]*c;d=0;for(let e=0;e<3;e++)L[p++]=N[d++]*i+N[d++]*l+N[d++]*u}if(M)for(let e=0;e<L.length;e++)isNaN(L[e])&&(L[e]=-1)}return{offsets:_,error:A,coefficients:L,spacing:d,size:[S.cols-1,S.rows-1]}}function m(e,t,r){const n=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,s=t.storageInfo.maximumPyramidLevel||0;let o="down"===r?Math.floor(Math.min(n,i)):"up"===r?Math.ceil(Math.max(n,i)):Math.round((n+i)/2),l=!1;o<0?o=0:o>s&&(l=o>s+3,o=s);const c=Math.pow(2,o);return{pyramidLevel:o,pyramidResolution:new a.a({x:c*t.nativePixelSize.x,y:c*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}function O(e,t,r=512,n=!0){const{extent:i,spatialReference:s,pixelSize:o}=e,c=p(new a.a({x:o.x,y:o.y,spatialReference:s}),t,i);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null};const u=(c.x+c.y)/2,d=Object(l.c)(t),f=u*d*96*39.37,h=t.isGeographic?512/r*295828763.7958547:512/r*591657527.591555;let b=!1;if(n&&(t.isGeographic||t.isWebMercator)){const e=y(i,t);b=e.xmin*e.xmax<0}let m,O=f;if(b){O=h;const e=O/(96*d*39.37);m=p(new a.a({x:e,y:e,spatialReference:t}),s,i)}else{m={x:o.x,y:o.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let r=0;for(;O<.5005*h&&r<t;)r++,O*=2,m.x*=2,m.y*=2;Math.max(O,h)/Math.min(O,h)<=1.001&&(O=h)}const g=[],j=[],v=Math.min(70.5310735,f)/1.001;for(;O>=v;)g.push(O),j.push({x:m.x,y:m.y}),O/=2,m.x/=2,m.y/=2;return{projectedPixelSize:c,scales:g,srcResolutions:j}}},uAeW:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),o=r("r0DZ"),l=r("IvSi"),c=r("qE7Y");const u={visible:"visibleSublayers"},d=[102100,3857,102113,900913],p=[3395,54004];let f=class extends a.a{constructor(){super(...arguments),this._layerHandles=new o.a,this.extent=null,this._scale=null,this.view=null}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this._layerHandles&&(this._layerHandles.removeAll(),this._layerHandles=null),e&&(this._layerHandles||(this._layerHandles=new o.a),this._layerHandles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",e=>this.notifyChange(u[e.propertyName]))])))}get layers(){const{visibleSublayers:e}=this;return e.filter(e=>e.name).map(e=>e.name).join(",")}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){return(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,{sublayers:r}=e,n=[],i=e=>{const{minScale:r,maxScale:s,sublayers:a,visible:o}=e;o&&(0===t||(0===r||t<=r)&&(0===s||t>=s))&&(a?a.forEach(i):n.unshift(e))};return null==r||r.forEach(i),n}get wkid(){const{extent:e,layer:t}=this,r=t.spatialReferences;let n=e.spatialReference&&e.spatialReference.wkid;r&&-1===r.indexOf(n)&&e.spatialReference.latestWkid&&(n=e.spatialReference.latestWkid);const i=d.some(e=>e===n);if(!r)return n;if(i){const e=[];r.forEach(t=>{d.indexOf(t)>-1&&e.push(t)}),e.length||r.forEach(t=>{p.indexOf(t)>-1&&e.push(t)}),n=e.length>0?e[0]:d[0]}return n}toJSON(){const{extent:e,layer:t,layers:r}=this,{imageFormat:n,imageTransparency:i,spatialReferences:s,version:a}=t;let{wkid:o}=this;s&&-1===s.indexOf(o)&&e.spatialReference.latestWkid&&(o=e.spatialReference.latestWkid);const{xmin:l,ymin:u,xmax:d,ymax:p}=e,f={bbox:"1.3.0"===t.version&&Object(c.a)(o)?`${u},${l},${p},${d}`:`${l},${u},${d},${p}`,format:n,request:"GetMap",service:"WMS",styles:"",transparent:i,version:a};return isNaN(o)||("1.3.0"===a?f.crs="EPSG:"+o:f.srs="EPSG:"+o),{...f,layers:r}}};Object(n.a)([Object(i.b)()],f.prototype,"extent",void 0),Object(n.a)([Object(i.b)()],f.prototype,"layer",null),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["visibleSublayers"]})],f.prototype,"layers",null),Object(n.a)([Object(i.b)({type:Number,dependsOn:["view.scale"]})],f.prototype,"scale",null),Object(n.a)([Object(i.b)(l.a)],f.prototype,"timeExtent",void 0),Object(n.a)([Object(i.b)({type:Number,dependsOn:["layers","layer.imageTransparency","timeExtent"],readOnly:!0})],f.prototype,"version",null),Object(n.a)([Object(i.b)()],f.prototype,"view",void 0),Object(n.a)([Object(i.b)({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],f.prototype,"visibleSublayers",null),Object(n.a)([Object(i.b)({dependsOn:[],autoTracked:!1})],f.prototype,"wkid",null),f=Object(n.a)([Object(s.a)("esri.layers.support.ExportWMSImageParameters")],f),t.a=f},ukaK:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};Object(n.a)([Object(i.b)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"remoteClient",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"service",void 0),Object(n.a)([Object(i.b)({dependsOn:["tileStore.tileScheme.spatialReference"]})],o.prototype,"spatialReference",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileInfo",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.processors.BaseProcessor")],o),t.a=o},vbiG:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("9MzC")),o=r("/CmD"),l=r("f4Nx"),c=r("OvF4"),u=r("kYAx"),d=r("3/ME"),p=r("rlSK"),f=r("AY31");const h=Math.PI/180;var y=r("xzrc");const b=Object(u.d)(),m=[0,0],O=new p.a(0,0,0,0);let g=class extends o.a{constructor(e){super(e),this._imagePromise=null,this.hidpi=!1,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=!1,this.imageNormalizationSupported=!1,this.update=Object(a.i)(async(e,t)=>{const r=e.state,n=Object(l.d)(r.spatialReference),i=this.hidpi?e.pixelRatio:1;if(!e.stationary||this.destroyed)return;this.imageRotationSupported?(m[0]=r.size[0],m[1]=r.size[1]):function(e,t){const r=t.rotation*h,n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),[s,a]=t.size;e[0]=Math.round(a*i+s*n),e[1]=Math.round(a*n+s*i)}(m,r);const s=Math.floor(m[0]*i)>this.imageMaxWidth||Math.floor(m[1]*i)>this.imageMaxHeight,a=!this.imageNormalizationSupported&&n&&(r.extent.xmin<n.valid[0]||r.extent.xmax>n.valid[1]),o=this.imageRotationSupported?r.rotation:0;if(s||a){let e=Math.min(this.imageMaxWidth,this.imageMaxHeight);a&&(e=Math.min(r.worldScreenWidth,e)),this._imagePromise=this._tiledExport(r,e,o,i,t)}else this._imagePromise=this._singleExport(r,m,o,i,t);return this._imagePromise.then(async e=>{this._imagePromise=null,await Promise.all(e.map(e=>(this.container.addChild(e),e.fadeIn())));for(const t of this.container.children)e.includes(t)||t.fadeOut().then(()=>{this.container.removeChild(t)})}).catch(e=>{throw this._imagePromise=null,e})},5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(t.invalidateTexture(),t.requestRender())}}_export(e,t,r,n,i,s){return Object(a.u)().then(()=>this.fetchSource(e,Math.floor(t*i),Math.floor(r*i),{rotation:n,pixelRatio:i,signal:s})).then(r=>{const s=new y.a(r);return s.x=e.xmin,s.y=e.ymax,s.resolution=e.width/t,s.rotation=n,s.pixelRatio=i,s})}_singleExport(e,t,r,n,i){!function(e,t,r,n){const[i,s]=t,[a,o]=n,l=.5*r;e[0]=i-l*a,e[1]=s-l*o,e[2]=i+l*a,e[3]=s+l*o}(b,e.center,e.resolution,t);const s=new c.a(b[0],b[1],b[2],b[3],e.spatialReference);return this._export(s,t[0],t[1],r,n,i).then(e=>[e])}_tiledExport(e,t,r,n,i){const s=d.a.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),o=new f.a(s),l=o.getTileCoverage(e);if(!l)return null;const u=[];return l.forEach((s,a,l,d)=>{O.set(s,a,l,d),o.getTileBounds(b,O);const p=new c.a(b[0],b[1],b[2],b[3],e.spatialReference);u.push(this._export(p,t,t,r,n,i))}),Object(a.b)(u)}};Object(n.a)([Object(i.b)()],g.prototype,"_imagePromise",void 0),Object(n.a)([Object(i.b)()],g.prototype,"container",void 0),Object(n.a)([Object(i.b)()],g.prototype,"fetchSource",void 0),Object(n.a)([Object(i.b)()],g.prototype,"hidpi",void 0),Object(n.a)([Object(i.b)()],g.prototype,"imageMaxWidth",void 0),Object(n.a)([Object(i.b)()],g.prototype,"imageMaxHeight",void 0),Object(n.a)([Object(i.b)()],g.prototype,"imageRotationSupported",void 0),Object(n.a)([Object(i.b)()],g.prototype,"imageNormalizationSupported",void 0),Object(n.a)([Object(i.b)()],g.prototype,"requestUpdate",void 0),Object(n.a)([Object(i.b)({dependsOn:["_imagePromise"]})],g.prototype,"updating",null),g=Object(n.a)([Object(s.a)("esri.views.2d.layers.support.ExportStrategy")],g),t.a=g},xzrc:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r("wSAH");var n=r("HJJS"),i=r("jHF5"),s=r("c46T"),a=(r("n4uK"),r("of9L")),o=(r("0meK"),r("bfJE"),r("fEsP")),l=r("iUxC");function c(e,t,r){const n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new a.a(e,n)}class u extends o.a{constructor(e=null,t=!0){super(),this.requestRenderOnSourceChangedEnabled=t,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:Object(i.b)()},this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(e){const t=Object(n.d)(this.transforms.dvs),[r,i]=e.toScreenNoRotation([0,0],this.x,this.y),a=this.resolution/this.pixelRatio/e.resolution,o=a*this.width,l=a*this.height,c=Math.PI*this.rotation/180;Object(n.a)(t,t,Object(s.b)(r,i)),Object(n.a)(t,t,Object(s.b)(o/2,l/2)),Object(n.h)(t,t,-c),Object(n.a)(t,t,Object(s.b)(-o/2,-l/2)),Object(n.e)(t,t,Object(s.b)(o,l)),Object(n.f)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind({context:e},t){this._texture&&e.bindTexture(this._texture,t)}updateTexture({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?c(e,this.sourceWidth,this.sourceHeight):c(e));const r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(r))if(r instanceof l.a){const e=r.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}}}]);