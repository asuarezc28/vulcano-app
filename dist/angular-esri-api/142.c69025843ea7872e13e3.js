(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{TPT3:function(e,r,a){"use strict";a.r(r),a.d(r,"fromUrl",function(){return u});var t=a("srIe"),n=a("zlDU"),l=a("Lqtk"),s=a("VLTf"),o=a("oLSx");async function u(e){const r=await async function(e){const r=Object(s.e)(e);if(Object(t.g)(r))throw new n.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:a,sublayer:l}=r;let u;const i={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(a){case"MapServer":u=null!=l?"FeatureLayer":async function(e){return(await y(e)).tileInfo}(e).then(e=>e?"TileLayer":"MapImageLayer");break;case"ImageServer":u=y(e).then(e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||"LERC"!==r.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":u=y(r.url.path).then(e=>{const r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return"SceneLayer"});break;default:u=i[a]}const d="FeatureServer"===a,f={parsedUrl:r,Constructor:null,layerOrTableId:d?l:null,sublayerIds:null,tableIds:null},I=await u;if({FeatureLayer:!0,SceneLayer:!0}[I]&&null==l){const r=await async function(e,r){var a,t;let n,l=!1;if("FeatureServer"===r){const r=await async function(e){var r,a;let t=await y(e);t=t||{},t.layers=(null==(r=t.layers)?void 0:r.filter(c))||[];const n={serviceJSON:t};if(t.currentVersion<10.5)return n;const l=await y(e+"/layers");return n.layersJSON={layers:(null==l||null==(a=l.layers)?void 0:a.filter(c))||[],tables:(null==l?void 0:l.tables)||[]},n}(e);l=!!r.layersJSON,n=r.layersJSON||r.serviceJSON}else n=await y(e);const s=null==(a=n)?void 0:a.layers,o=null==(t=n)?void 0:t.tables;return{layerIds:(null==s?void 0:s.map(e=>e.id).reverse())||[],tableIds:(null==o?void 0:o.map(e=>e.id).reverse())||[],layerInfos:l?s:[],tableInfos:l?o:[]}}(e,a);if(d&&(f.sublayerInfos=r.layerInfos,f.tableInfos=r.tableInfos),1!==r.layerIds.length+r.tableIds.length)f.sublayerIds=r.layerIds,f.tableIds=r.tableIds;else if(d){var b,v;f.layerOrTableId=null!=(b=r.layerIds[0])?b:r.tableIds[0],f.sourceJSON=null!=(v=r.layerInfos[0])?v:r.tableInfos[0]}}return f.Constructor=await async function(e){return(0,o.a[e])()}(I),f}(e.url),l={...e.properties,url:e.url};if(!r.sublayerIds)return null!=r.layerOrTableId&&(l.layerId=r.layerOrTableId,l.sourceJSON=r.sourceJSON),new r.Constructor(l);const u=new(0,(await a.e(30).then(a.bind(null,"VPx4"))).default)({title:r.parsedUrl.title});return function(e,r,a){function n(e,n){const l={...a,layerId:e,sublayerTitleMode:"service-name"};return Object(t.h)(n)&&(l.sourceJSON=n),new r.Constructor(l)}r.sublayerIds.forEach(a=>{const t=n(a,i(r.sublayerInfos,a));e.add(t)}),r.tableIds.forEach(a=>{const t=n(a,i(r.tableInfos,a));e.tables.add(t)})}(u,r,l),u}function i(e,r){return e?e.find(e=>e.id===r):null}function c(e){return!e.type||"Feature Layer"===e.type}async function y(e){return(await Object(l.default)(e,{responseType:"json",query:{f:"json"}})).data}}}]);