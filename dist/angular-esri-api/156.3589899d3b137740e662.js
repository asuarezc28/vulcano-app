(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{Mx58:function(e,t,s){"use strict";s.r(t);var a=s("pO5D"),i=(s("wSAH"),s("srIe")),r=(s("6S2I"),s("zqDF"),s("WbKI"),s("04ZG")),n=(s("4EHJ"),s("ju1D"),s("9AIY"),s("DxxZ")),o=s("AfLA"),d=s("ukaK");let c=class extends d.a{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];"heatmap"===s.type&&Object(n.a)(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}async onTileData(e,t,s){this._tileKeyToFeatureSets.has(e.key.id)&&"replace"!==t.type||this._tileKeyToFeatureSets.set(e.key.id,new Map);const a=this._tileKeyToFeatureSets.get(e.key.id);Object(i.h)(t.addOrUpdate)&&a.set(t.addOrUpdate.instance,t);let r=t.end;if(a.forEach(e=>r=r||e.end),!r)return;const n=[];a.forEach(e=>{Object(i.h)(e.addOrUpdate)&&n.push(e.addOrUpdate)});const d=Object(o.a)(n,this._schema.mesh,512,512);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.key.id,intensityInfo:d},{...s,transferList:[d.matrix]})}onTileError(e,t,s){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},s)}};c=Object(a.a)([Object(r.a)("esri.views.2d.layers.features.processors.HeatmapProcessor")],c),t.default=c}}]);